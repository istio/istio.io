<!doctype html><html lang=uk itemscope itemtype=https://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=theme-color content="#466BB0"><meta name=title content="Метрики та логи, ЧаПи"><meta name=description content="Метрики та логи, часті питання."><meta name=keywords content="microservices,services,mesh"><meta property="og:title" content="Метрики та логи, ЧаПи"><meta property="og:type" content="website"><meta property="og:description" content="Метрики та логи, часті питання."><meta property="og:url" content="/v1.25/uk/about/faq/metrics-and-logs/"><meta property="og:image" content="https://raw.githubusercontent.com/istio/istio.io/master/static/img/istio-social.png"><meta property="og:image:alt" content="The Istio sailboat logo"><meta property="og:image:width" content="4096"><meta property="og:image:height" content="2048"><meta property="og:site_name" content="Istio"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@IstioMesh"><title>Istio / Метрики та логи, ЧаПи</title>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RNS1643NL0"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-RNS1643NL0")</script><link rel=alternate type=application/rss+xml title="Istio Blog" href=/v1.25/blog/feed.xml><link rel=alternate type=application/rss+xml title="Istio News" href=/v1.25/news/feed.xml><link rel=alternate type=application/rss+xml title="Istio Blog and News" href=/v1.25/feed.xml><link rel="shortcut icon" href=/v1.25/favicons/favicon.ico><link rel=apple-touch-icon href=/v1.25/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/v1.25/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/v1.25/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/v1.25/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/v1.25/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/v1.25/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/v1.25/favicons/android-96x96.png sizes=96xW96><link rel=icon type=image/png href=/v1.25/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/v1.25/favicons/android-192x192.png sizes=192x192><link rel=icon type=image/svg+xml href=/v1.25/favicons/favicon.svg><link rel=icon type=image/png href=/v1.25/favicons/favicon.png><link rel=mask-icon href=/v1.25/favicons/safari-pinned-tab.svg color=#466BB0><link rel=manifest href=/v1.25/manifest.json><meta name=apple-mobile-web-app-title content="Istio"><meta name=application-name content="Istio"><meta name=msapplication-config content="/browserconfig.xml"><meta name=msapplication-TileColor content="#466BB0"><meta name=theme-color content="#466BB0"><link rel=stylesheet href=/v1.25/css/style.min.38f1afbdf6f8efdb4fe991ff2a53ca1c801b5c4602dea2963da44df7ceaacfb8.css integrity="sha256-OPGvvfb479tP6ZH/KlPKHIAbXEYC3qKWPaRN986qz7g=" crossorigin=anonymous><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,400;0,500;0,600;0,700;1,400;1,600&display=swap"><script src=/v1.25/js/themes_init.min.js></script></head><body class=language-unknown><script>const branchName="release-1.25",docTitle="Метрики та логи, ЧаПи",iconFile="/v1.25//img/icons.svg",buttonCopy="Копіювати в буфер обміну",buttonPrint="Друкувати",buttonDownload="Завантажити"</script><script src="https://www.google.com/cse/brand?form=search-form" defer></script><script src=/v1.25/js/all.min.js data-manual defer></script><header class=main-navigation><nav class="main-navigation-wrapper container-l"><div class=main-navigation-header><a id=brand href=/v1.25/uk/ aria-label=logotype><span class=logo><svg width="128" height="60" viewBox="0 0 128 60"><path d="M58.434 48.823A.441.441.0 0158.3 48.497V22.583a.444.444.0 01.134-.326.446.446.0 01.327-.134h3.527a.447.447.0 01.325.134.447.447.0 01.134.326v25.914a.443.443.0 01-.134.326.444.444.0 01-.325.134h-3.527a.444.444.0 01-.327-.134z"/><path d="m70.969 48.477a6.556 6.556.0 01-2.818-1.955 4.338 4.338.0 01-1-2.78v-.345a.443.443.0 01.134-.326.444.444.0 01.326-.135h3.374a.444.444.0 01.326.135.445.445.0 01.134.326v.077a2.014 2.014.0 001.054 1.667 4.672 4.672.0 002.664.709 4.446 4.446.0 002.492-.633 1.862 1.862.0 00.958-1.591 1.426 1.426.0 00-.786-1.322 12.7 12.7.0 00-2.549-.939l-1.457-.46a21.526 21.526.0 01-3.3-1.227 6.57 6.57.0 01-2.262-1.783 4.435 4.435.0 01-.92-2.894 5.081 5.081.0 012.109-4.275 8.993 8.993.0 015.558-1.591 10.445 10.445.0 014.1.748 6.3 6.3.0 012.722 2.07 5 5 0 01.958 3.009.441.441.0 01-.134.326.441.441.0 01-.325.134h-3.258a.441.441.0 01-.326-.134.443.443.0 01-.134-.326 1.974 1.974.0 00-.978-1.667 4.647 4.647.0 00-2.665-.671 4.741 4.741.0 00-2.435.556 1.724 1.724.0 00-.938 1.553 1.512 1.512.0 00.9 1.4 15.875 15.875.0 003.01 1.055l.843.229a27.368 27.368.0 013.412 1.246 6.67 6.67.0 012.338 1.763 4.387 4.387.0 01.958 2.933 4.988 4.988.0 01-2.146 4.275 9.543 9.543.0 01-5.712 1.552 11.626 11.626.0 01-4.227-.709z"/><path d="m97.039 32.837a.443.443.0 01-.326.135h-3.911a.169.169.0 00-.191.192v9.239a2.951 2.951.0 00.632 2.108 2.7 2.7.0 002.013.652h1.15a.444.444.0 01.325.134.441.441.0 01.134.326v2.875a.471.471.0 01-.459.5l-1.994.039a8 8 0 01-4.524-1.035q-1.495-1.035-1.533-3.91V33.166A.17.17.0 0088.164 32.974H85.978A.441.441.0 0185.652 32.839.441.441.0 0185.518 32.513V29.83a.441.441.0 01.134-.326.444.444.0 01.326-.135h2.186a.169.169.0 00.191-.192v-4.485a.438.438.0 01.134-.326.44.44.0 01.325-.134h3.336a.443.443.0 01.325.134.442.442.0 01.135.326v4.485a.169.169.0 00.191.192h3.911a.446.446.0 01.326.135.446.446.0 01.134.326v2.683a.446.446.0 01-.133.324z"/><path d="m101.694 25.917a2.645 2.645.0 01-.767-1.955 2.65 2.65.0 01.767-1.955 2.65 2.65.0 011.955-.767 2.65 2.65.0 011.955.767 2.652 2.652.0 01.767 1.955 2.647 2.647.0 01-.767 1.955 2.646 2.646.0 01-1.955.767 2.645 2.645.0 01-1.955-.767zm-.211 22.906a.441.441.0 01-.134-.326V29.79a.444.444.0 01.134-.326.446.446.0 01.326-.134h3.527a.446.446.0 01.326.134.445.445.0 01.134.326v18.707a.443.443.0 01-.134.326.443.443.0 01-.326.134h-3.527a.443.443.0 01-.326-.134z"/><path d="m114.019 47.734a8.1 8.1.0 01-3.047-4.255 14.439 14.439.0 01-.652-4.37 14.3 14.3.0 01.614-4.371A7.869 7.869.0 01114 30.56a9.072 9.072.0 015.252-1.5 8.543 8.543.0 015.041 1.5 7.985 7.985.0 013.009 4.14 12.439 12.439.0 01.69 4.37 13.793 13.793.0 01-.651 4.37 8.255 8.255.0 01-3.028 4.275 8.475 8.475.0 01-5.1 1.553 8.754 8.754.0 01-5.194-1.534zm7.629-3.1a4.536 4.536.0 001.476-2.262 11.335 11.335.0 00.383-3.221 10.618 10.618.0 00-.383-3.22 4.169 4.169.0 00-1.457-2.243 4.066 4.066.0 00-2.531-.785 3.942 3.942.0 00-2.453.785 4.376 4.376.0 00-1.5 2.243 11.839 11.839.0 00-.383 3.22 11.84 11.84.0 00.383 3.221 4.222 4.222.0 001.476 2.262 4.075 4.075.0 002.549.8 3.8 3.8.0 002.44-.809z"/><path d="m15.105 32.057v15.565a.059.059.0 01-.049.059L.069 50.25A.06.06.0 01.005 50.167l14.987-33.47a.06.06.0 01.114.025z"/><path d="m17.631 23.087v24.6a.06.06.0 00.053.059l22.449 2.507a.06.06.0 00.061-.084L17.745.032a.06.06.0 00-.114.024z"/><path d="m39.961 52.548-24.833 7.45a.062.062.0 01-.043.0L.079 52.548a.059.059.0 01.026-.113h39.839a.06.06.0 01.017.113z"/></svg></span>
</a><button id=hamburger class=main-navigation-toggle aria-label="Open navigation">
<svg class="icon menu-hamburger"><use xlink:href="/v1.25/img/icons.svg#menu-hamburger"/></svg>
</button>
<button id=menu-close class=main-navigation-toggle aria-label="Close navigation"><svg class="icon menu-close"><use xlink:href="/v1.25/img/icons.svg#menu-close"/></svg></button></div><div id=header-links class=main-navigation-links-wrapper><ul class=main-navigation-links><li class=main-navigation-links-item><a class="main-navigation-links-link has-dropdown"><span>Про</span><svg class="icon dropdown-arrow"><use xlink:href="/v1.25/img/icons.svg#dropdown-arrow"/></svg></a><ul class=main-navigation-links-dropdown><li class=main-navigation-links-dropdown-item><a href=/v1.25/uk/about/service-mesh class=main-navigation-links-link>Сервісна мережа</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.25/uk/about/solutions class=main-navigation-links-link>Рішення</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.25/uk/about/case-studies class=main-navigation-links-link>Використання</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.25/uk/about/ecosystem class=main-navigation-links-link>Екосистема</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.25/uk/about/deployment class=main-navigation-links-link>Розгортання</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.25/uk/about/training class=main-navigation-links-link>Навчання</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.25/uk/about/faq class=main-navigation-links-link>Часті питання</a></li></ul></li><li class=main-navigation-links-item><a href=/v1.25/uk/blog/ class=main-navigation-links-link><span>Блог</span></a></li><li class=main-navigation-links-item><a href=/v1.25/uk/news/ class=main-navigation-links-link><span>Новини</span></a></li><li class=main-navigation-links-item><a href=/v1.25/uk/get-involved/ class=main-navigation-links-link><span>Долучитись</span></a></li><li class=main-navigation-links-item><a href=/v1.25/uk/docs/ class=main-navigation-links-link><span>Документація</span></a></li></ul><div class=main-navigation-footer><button id=search-show class=search-show title='Пошук на сайті' aria-label=Пошук><svg class="icon magnifier"><use xlink:href="/v1.25/img/icons.svg#magnifier"/></svg></button>
<a href=/v1.25/uk/docs/setup/getting-started class="btn btn--primary" id=try-istio>Спробувати Istio</a></div></div><form id=search-form class=search name=cse role=search><input type=hidden name=cx value=002184991200833970123:veyyqmfmpj4>
<input type=hidden name=ie value=utf-8>
<input type=hidden name=hl value=uk>
<input type=hidden id=search-page-url value=/uk/search>
<input id=search-textbox class="search-textbox form-control" name=q type=search aria-label='Пошук на сайті' placeholder=Пошук>
<button id=search-close title='Скасувати пошук' type=reset aria-label='Скасувати пошук'><svg class="icon menu-close"><use xlink:href="/v1.25/img/icons.svg#menu-close"/></svg></button></form></nav></header><nav aria-label=Breadcrumb class=container-l><ol><li><a href title="Дізнайтеся більше про проєкт Istio.">Про Istio</a><svg class="icon breadcrumb-arrow"><use xlink:href="/v1.25/img/icons.svg#breadcrumb-arrow"/></svg></li><li><a href=/v1.25/uk/about/faq/ title="Часті запитання про Istio.">Часті запитання</a><svg class="icon breadcrumb-arrow"><use xlink:href="/v1.25/img/icons.svg#breadcrumb-arrow"/></svg></li><li>Метрики та логи</li></ol></nav><main class="primary container about"><div class=article-container><article aria-labelledby=title><div class=title-area><div style=width:100%><h1 id=title>Метрики та логи, ЧаПи</h1></div></div><nav class="toc-inlined toc-forced"><hr><div class=directory role=directory><nav id=InlineTableOfContents><ol><li role=none aria-label="Чи можна отримати метрики Istio через REST?"><a href=#accessing-telemetry-via-rest>Чи можна отримати метрики Istio через REST?</a></li><li role=none aria-label="Які відмінності в телеметрії між телеметрією у проксі (відомою як v2) та телеметрією на основі Mixer (відомою як v1)?"><a href=#telemetry-v1-vs-v2>Які відмінності в телеметрії між телеметрією у проксі (відомою як v2) та телеметрією на основі Mixer (відомою як v1)?</a></li><li role=none aria-label="Як управляти метриками з коротким терміном життя?"><a href=#metric-expiry>Як управляти метриками з коротким терміном життя?</a></li><li role=none aria-label="Як мігрувати існуючу функціональність Mixer?"><a href=#mixer-migration>Як мігрувати існуючу функціональність Mixer?</a></li><li role=none aria-label="Чи можна використовувати адаптер Prometheus у середовищах, що не є Kubernetes?"><a href=#prometheus-for-non-k8s>Чи можна використовувати адаптер Prometheus у середовищах, що не є Kubernetes?</a></li><li role=none aria-label="Як дізнатися, що сталося з запитом в Istio?"><a href=#life-of-a-request>Як дізнатися, що сталося з запитом в Istio?</a></li><li role=none aria-label="Чи можу я використовувати Prometheus для збору метрик застосунків з Istio?"><a href=#prometheus-application-metrics>Чи можу я використовувати Prometheus для збору метрик застосунків з Istio?</a></li></ol></nav></div><hr></nav><div class=faq><h5 id=accessing-telemetry-via-rest class=question>Чи можна отримати метрики Istio через REST?</h5><div class=answer><p>Ви можете збирати дані телеметрії Istio, використовуючи <a href=/v1.25/uk/docs/tasks/observability/metrics/querying-metrics/>Prometheus</a>. А потім використовувати <a href=https://prometheus.io/docs/prometheus/latest/querying/api/>HTTP API Prometheus</a> для запитів до цих даних.</p></div><h5 id=telemetry-v1-vs-v2 class=question>Які відмінності в телеметрії між телеметрією у проксі (відомою як v2) та телеметрією на основі Mixer (відомою як v1)?</h5><div class=answer><p>Телеметрія у проксі (відомою як v2) знижує використання ресурсів і покращує продуктивність проксі в порівнянні з телеметрією на основі Mixer (відомою як v1) і є переважним механізмом для телеметрії в Istio. Однак є кілька відмінностей у телеметрії між v1 і v2, які наведені нижче:</p><ul><li><p><strong>Відсутні мітки для трафіку поза мережею</strong>
Телеметрія у проксі покладається на обмін метаданими між проксі Envoy для збору інформації, такої як імʼя робочого навантаження, простір імен і мітки. У телеметрії на основі Mixer ця функціональність виконувалася Mixer як частина комбінування атрибутів запитів з даними платформи. Цей обмін метаданими виконується проксі Envoy, додаючи конкретний HTTP заголовок для протоколу HTTP або доповнюючи протокол ALPN для протоколу TCP, як описано <a href=/v1.25/uk/docs/tasks/observability/metrics/tcp-metrics/#understanding-tcp-telemetry-collection>тут</a>. Такий підхід вимагає, щоб проксі Envoy були впроваджені як у клієнтських, так і в серверних робочих навантаженнях, що передбачає, що телеметрія, що збирається, коли один з партнерів не знаходиться в мережі, буде без атрибутів партнера, таких як імʼя робочого навантаження, простір імен і мітки. Однак, якщо обидва партнери мають впроваджені проксі, всі мітки, згадані <a href=/v1.25/docs/reference/config/metrics/>тут</a>, доступні в згенерованих метриках. Коли серверне робоче навантаження знаходиться поза мережею, метадані робочого навантаження сервера все ще передаються клієнтському sidecar, що призводить до того, що клієнтські метрики мають заповнені мітки метаданих робочого навантаження сервера.</p></li><li><p><strong>Обмін метаданими TCP вимагає mTLS</strong>
Обмін метаданими TCP покладається на <a href=/v1.25/uk/docs/tasks/observability/metrics/tcp-metrics/#understanding-tcp-telemetry-collection>протокол ALPN Istio</a>, який вимагає, щоб mutual TLS (mTLS) був увімкнений для успішного обміну метаданими між проксі Envoy. Це означає, що якщо mTLS не увімкнено у вашому кластері, телеметрія для протоколу TCP не включатиме інформацію про партнера, таку як імʼя робочого навантаження, простір імен і мітки.</p></li><li><p><strong>Відсутність механізму для конфігурації власних кошиків для гістограмних метрик</strong>
Телеметрія на основі Mixer підтримувала налаштування кошиків для метрик типу гістограми, таких як тривалість запиту та розміри байтів TCP. Телеметрія у проксі не має такого механізму. Крім того, кошики для метрик затримки в телеметрії у проксі вимірюються в мілісекундах, в порівнянні з секундами в телеметрії на основі Mixer. Однак, в телеметрії у проксі доступно стандартно більше кошиків для метрик затримки на нижчих рівнях затримки.</p></li><li><p><strong>Відсутність термінації метрик для метрик з коротким часом існування</strong>
Телеметрія на основі Mixer підтримувала термінацію метрик, за якої метрики, що не були згенеровані протягом встановленого часу, були видалені з колекції Prometheus. Це корисно в сценаріях, таких як одноразові завдання, які генерують метрики з коротким часом існування. Видалення метрик запобігає звітуванню про метрики, які більше не змінюватимуться в майбутньому, тим самим зменшуючи мережевий трафік і зберігання в Prometheus. Цей механізм термінації не доступний у телеметрії у проксі. Робоче рішення для цього можна знайти <a href=/v1.25/uk/about/faq/#metric-expiry>тут</a>.</p></li></ul></div><h5 id=metric-expiry class=question>Як управляти метриками з коротким терміном життя?</h5><div class=answer><p>Метрики з коротким терміном життя можуть впливати на продуктивність Prometheus, оскільки вони часто є великою джерелом кардинальності міток. Кардинальність — це міра кількості унікальних значень для міток. Щоб управляти впливом ваших метрик з коротким терміном життя в Prometheus, спочатку потрібно визначити метрики та мітки з високою кардинальністю. Prometheus надає інформацію про кардинальність на своїй сторінці <code>/status</code>. Додаткову інформацію можна отримати <a href=https://www.robustperception.io/which-are-my-biggest-metrics>через PromQL</a>. Є кілька способів зменшити кардинальність метрик Istio:</p><ul><li>Вимкніть резервне використання заголовка хосту. Мітка <code>destination_service</code> є одним з потенційних джерел високої кардинальності. Значення для <code>destination_service</code> стандартно використовують заголовок хосту, якщо проксі Istio не може визначити службу призначення з інших метаданих запиту. Якщо клієнти використовують різні заголовки хостів, це може призвести до великої кількості значень для <code>destination_service</code>. В цьому випадку слідуйте <a href=/v1.25/uk/docs/tasks/observability/metrics/customize-metrics/>керівництву з налаштування метрик</a>, щоб вимкнути резервне використання заголовка хосту на рівні мережі. Щоб вимкнути резервне використання заголовка хосту для конкретного робочого навантаження або простору імен, потрібно скопіювати конфігурацію <code>EnvoyFilter</code> статистики, оновити її, щоб вимкнути резервне використання заголовка хосту, і застосувати її з більш специфічним селектором. <a href=https://github.com/istio/istio/issues/25963#issuecomment-666037411>Цей тікет</a> має більше деталей про те, як цього досягти.</li><li>Викиньте непотрібні мітки зі збору. Якщо мітка з високою кардинальністю не потрібна, ви можете викинути її зі збору метрик через <a href=/v1.25/uk/docs/tasks/observability/metrics/customize-metrics/>налаштування метрик</a> за допомогою <code>tags_to_remove</code>.</li><li>Нормалізуйте значення міток, через федерацію або класифікацію. Якщо інформація, надана міткою, потрібна, ви можете використовувати <a href=/v1.25/uk/docs/ops/best-practices/observability/#using-prometheus-for-production-scale-monitoring>федерацію Prometheus</a> або <a href=/v1.25/uk/docs/tasks/observability/metrics/classify-metrics/>класифікацію запитів</a> для нормалізації мітки.</li></ul></div><h5 id=mixer-migration class=question>Як мігрувати існуючу функціональність Mixer?</h5><div class=answer><p>Mixer був <a href=/v1.25/news/releases/1.8.x/announcing-1.8/#deprecations>видалений у випуску Istio 1.8</a>. Міграція необхідна, якщо ви все ще покладаєтеся на вбудовані адаптери Mixer або будь-які зовнішні адаптери для розширення мережі.</p><p>Для вбудованих адаптерів надано кілька альтернатив:</p><ul><li>Інтеграції <code>Prometheus</code> і <code>Stackdriver</code> реалізовані як <a href=/v1.25/docs/reference/config/proxy_extensions/>розширення проксі</a>. Налаштування телеметрії, створеної цими двома розширеннями, може бути досягнута через <a href=/v1.25/uk/docs/tasks/observability/metrics/classify-metrics/>класифікацію запитів</a> та <a href=/v1.25/uk/docs/tasks/observability/metrics/customize-metrics/>налаштування метрик Prometheus</a>.</li><li>Функціональність глобального та локального обмеження швидкості (<code>memquota</code> і <code>redisquota</code> адаптери) надається через <a href=/v1.25/uk/docs/tasks/policy-enforcement/rate-limit/>розвʼязання на основі Envoy для обмеження швидкості</a>.</li><li>Адаптер <code>OPA</code> замінений на <a href=/v1.25/uk/docs/tasks/security/authorization/authz-custom/>розвʼязання на основі Envoy ext-authz</a>, яке підтримує <a href=https://www.openpolicyagent.org/docs/latest/envoy-introduction/>інтеграцію з агентом політики OPA</a>.</li></ul><p>Для власних зовнішніх адаптерів рекомендується міграція до розширень на основі Wasm. Будь ласка, ознайомтеся з посібниками по <a href=https://github.com/istio-ecosystem/wasm-extensions/blob/master/doc/write-a-wasm-extension-with-cpp.md>розробці модуля Wasm</a> та <a href=/v1.25/uk/docs/tasks/extensibility/wasm-module-distribution/>розповсюдженню розширень</a>. Як тимчасове рішення, ви можете <a href=https://github.com/istio/istio/wiki/Enabling-Envoy-Authorization-Service-and-gRPC-Access-Log-Service-With-Mixer>увімкнути підтримку Envoy ext-authz та gRPC доступу до API логів у Mixer</a>, що дозволяє вам оновити Istio до версій після 1.7, одночасно використовуючи 1.7 Mixer з зовнішніми адаптерами. Це дасть вам більше часу для міграції на розширення на основі Wasm. Зверніть увагу, що це тимчасове рішення не протестовано в бойових умовах і навряд чи отримає виправлення помилок, оскільки воно доступне тільки у гілці Istio 1.7, яка вийшла з терміну підтримки після лютого 2021 року.</p></div><h5 id=prometheus-for-non-k8s class=question>Чи можна використовувати адаптер Prometheus у середовищах, що не є Kubernetes?</h5><div class=answer><p>Ви можете використовувати docker-compose для встановлення Prometheus.</p></div><h5 id=life-of-a-request class=question>Як дізнатися, що сталося з запитом в Istio?</h5><div class=answer><p>Ви можете включити <a href=/v1.25/uk/docs/tasks/observability/distributed-tracing/>трейсинг</a>, щоб визначити маршрут запиту в Istio.</p><p>Додатково, ви можете використовувати такі команди, щоб дізнатися більше про стан мережі:</p><ul><li><p><a href=/v1.25/docs/reference/commands/istioctl/#istioctl-proxy-config><code>istioctl proxy-config</code></a>: Отримати інформацію про конфігурацію проксі, коли ви працюєте в Kubernetes:</p><pre><code class=language-plain data-expandlinks=true data-repo=istio># Отримати інформацію про конфігурацію bootstrap для екземпляра Envoy у вказаному podʼі.
$ istioctl proxy-config bootstrap productpage-v1-bb8d5cbc7-k7qbm

# Отримати інформацію про конфігурацію кластера для екземпляра Envoy у вказаному podʼі.
$ istioctl proxy-config cluster productpage-v1-bb8d5cbc7-k7qbm

# Отримати інформацію про конфігурацію прослуховувача для екземпляра Envoy у вказаному podʼі.
$ istioctl proxy-config listener productpage-v1-bb8d5cbc7-k7qbm

# Отримати інформацію про конфігурацію маршрутизації для екземпляра Envoy у вказаному podʼі.
$ istioctl proxy-config route productpage-v1-bb8d5cbc7-k7qbm

# Отримати інформацію про конфігурацію точок доступу для екземпляра Envoy у вказаному podʼі.
$ istioctl proxy-config endpoints productpage-v1-bb8d5cbc7-k7qbm

# Спробуйте наступне, щоб дізнатися більше про команди proxy-config
$ istioctl proxy-config --help</code></pre></li><li><p><code>kubectl get</code>: Отримує інформацію про різні ресурси в мережі разом з конфігурацією маршрутизації:</p><pre><code class=language-plain data-expandlinks=true data-repo=istio># Показати всі віртуальні сервіси
$ kubectl get virtualservices</code></pre></li></ul></div><h5 id=prometheus-application-metrics class=question>Чи можу я використовувати Prometheus для збору метрик застосунків з Istio?</h5><div class=answer><p>Так. <a href=https://prometheus.io/>Prometheus</a> — це система моніторингу з відкритим кодом та база даних часових рядів. Ви можете використовувати Prometheus з Istio для запису метрик, які відстежують справність Istio та застосунків у сервісній мережі. Ви можете візуалізувати метрики за допомогою інструментів, таких як <a href=/v1.25/uk/docs/ops/integrations/grafana/>Grafana</a> та <a href=/v1.25/uk/docs/tasks/observability/kiali/>Kiali</a>. Перегляньте <a href=/v1.25/uk/docs/ops/integrations/prometheus/#Configuration>Конфігурацію для Prometheus</a>, щоб зрозуміти, як увімкнути збір метрик.</p><p>Кілька приміток:</p><ul><li>Якщо pod Prometheus запустився до того, як pod istiod встиг створити необхідні сертифікати та надіслати їх до Prometheus, pod Prometheus потрібно перезапустити, щоб зібрати дані з цілей, захищених взаємним TLS.</li><li>Якщо ваш застосунок надає метрики Prometheus на окремому порту, цей порт слід додати до специфікацій сервісу та розгортання.</li></ul></div></div></article><nav class=pagenav><div class=left><a title="Безпека, часті питання." href=/v1.25/uk/about/faq/security/ class=next-link><svg class="icon left-arrow"><use xlink:href="/v1.25/img/icons.svg#left-arrow"/></svg>Безпека</a></div><div class=right><a title="Розподілений трейсинг, часті питання." href=/v1.25/uk/about/faq/distributed-tracing/ class=next-link>Розподілений трейсинг<svg class="icon right-arrow"><use xlink:href="/v1.25/img/icons.svg#right-arrow"/></svg></a></div></nav><div id=endnotes-container aria-hidden=true><h2>Посилання</h2><ol id=endnotes></ol></div></div></main><footer class=footer><div class="footer-wrapper container-l"><div class="user-links footer-links"><a class=channel title='GitHub - це місце, де відбувається розробка коду Istio' href=https://github.com/istio/community aria-label=GitHub><svg class="icon github"><use xlink:href="/v1.25/img/icons.svg#github"/></svg>
</a><a class=channel title='Якщо ви хочете ознайомитися з технічною проєктною документацією Istio, перейдіть до диска нашої команди' href=https://groups.google.com/forum/#!forum/istio-team-drive-access aria-label="team drive"><svg class="icon drive"><use xlink:href="/v1.25/img/icons.svg#drive"/></svg>
</a><a class=channel title='Обговорюйте проблеми в інтерактивному режимі зі спільнотою Istio у Slack' href=https://slack.istio.io aria-label=slack><svg class="icon slack"><use xlink:href="/v1.25/img/icons.svg#slack"/></svg>
</a><a class=channel title='Stack Overflow — це місце, де ви можете поставити питання та знайти відповіді на них щодо розгортання, налаштування та використання Istio' href=https://stackoverflow.com/questions/tagged/istio aria-label="Stack Overflow"><svg class="icon stackoverflow"><use xlink:href="/v1.25/img/icons.svg#stackoverflow"/></svg>
</a><a class=channel title='Follow us on LinkedIn to get the latest news' href=https://www.linkedin.com/company/istio/ aria-label=LinkedIn><svg class="icon linkedin"><use xlink:href="/v1.25/img/icons.svg#linkedin"/></svg>
</a><a class=channel title='Стежте за нами у Твіттері, щоб бути в курсі останніх новин' href=https://twitter.com/IstioMesh aria-label=Twitter><svg class="icon twitter"><use xlink:href="/v1.25/img/icons.svg#twitter"/></svg>
</a><a class=channel title='Follow us on Bluesky to get the latest news' href=https://bsky.app/profile/istio.io aria-label=Bluesky><svg class="icon bluesky"><use xlink:href="/v1.25/img/icons.svg#bluesky"/></svg>
</a><a class=channel title='Follow us on Mastodon to get the latest news' href=https://mastodon.social/@istio aria-label=Mastodon rel=me><svg class="icon mastodon"><use xlink:href="/v1.25/img/icons.svg#mastodon"/></svg></a></div><hr class=footer-separator role=separator><div class="info footer-info"><a class=logo href=/v1.25/uk/ aria-label=logotype><svg width="128" height="60" viewBox="0 0 128 60"><path d="M58.434 48.823A.441.441.0 0158.3 48.497V22.583a.444.444.0 01.134-.326.446.446.0 01.327-.134h3.527a.447.447.0 01.325.134.447.447.0 01.134.326v25.914a.443.443.0 01-.134.326.444.444.0 01-.325.134h-3.527a.444.444.0 01-.327-.134z"/><path d="m70.969 48.477a6.556 6.556.0 01-2.818-1.955 4.338 4.338.0 01-1-2.78v-.345a.443.443.0 01.134-.326.444.444.0 01.326-.135h3.374a.444.444.0 01.326.135.445.445.0 01.134.326v.077a2.014 2.014.0 001.054 1.667 4.672 4.672.0 002.664.709 4.446 4.446.0 002.492-.633 1.862 1.862.0 00.958-1.591 1.426 1.426.0 00-.786-1.322 12.7 12.7.0 00-2.549-.939l-1.457-.46a21.526 21.526.0 01-3.3-1.227 6.57 6.57.0 01-2.262-1.783 4.435 4.435.0 01-.92-2.894 5.081 5.081.0 012.109-4.275 8.993 8.993.0 015.558-1.591 10.445 10.445.0 014.1.748 6.3 6.3.0 012.722 2.07 5 5 0 01.958 3.009.441.441.0 01-.134.326.441.441.0 01-.325.134h-3.258a.441.441.0 01-.326-.134.443.443.0 01-.134-.326 1.974 1.974.0 00-.978-1.667 4.647 4.647.0 00-2.665-.671 4.741 4.741.0 00-2.435.556 1.724 1.724.0 00-.938 1.553 1.512 1.512.0 00.9 1.4 15.875 15.875.0 003.01 1.055l.843.229a27.368 27.368.0 013.412 1.246 6.67 6.67.0 012.338 1.763 4.387 4.387.0 01.958 2.933 4.988 4.988.0 01-2.146 4.275 9.543 9.543.0 01-5.712 1.552 11.626 11.626.0 01-4.227-.709z"/><path d="m97.039 32.837a.443.443.0 01-.326.135h-3.911a.169.169.0 00-.191.192v9.239a2.951 2.951.0 00.632 2.108 2.7 2.7.0 002.013.652h1.15a.444.444.0 01.325.134.441.441.0 01.134.326v2.875a.471.471.0 01-.459.5l-1.994.039a8 8 0 01-4.524-1.035q-1.495-1.035-1.533-3.91V33.166A.17.17.0 0088.164 32.974H85.978A.441.441.0 0185.652 32.839.441.441.0 0185.518 32.513V29.83a.441.441.0 01.134-.326.444.444.0 01.326-.135h2.186a.169.169.0 00.191-.192v-4.485a.438.438.0 01.134-.326.44.44.0 01.325-.134h3.336a.443.443.0 01.325.134.442.442.0 01.135.326v4.485a.169.169.0 00.191.192h3.911a.446.446.0 01.326.135.446.446.0 01.134.326v2.683a.446.446.0 01-.133.324z"/><path d="m101.694 25.917a2.645 2.645.0 01-.767-1.955 2.65 2.65.0 01.767-1.955 2.65 2.65.0 011.955-.767 2.65 2.65.0 011.955.767 2.652 2.652.0 01.767 1.955 2.647 2.647.0 01-.767 1.955 2.646 2.646.0 01-1.955.767 2.645 2.645.0 01-1.955-.767zm-.211 22.906a.441.441.0 01-.134-.326V29.79a.444.444.0 01.134-.326.446.446.0 01.326-.134h3.527a.446.446.0 01.326.134.445.445.0 01.134.326v18.707a.443.443.0 01-.134.326.443.443.0 01-.326.134h-3.527a.443.443.0 01-.326-.134z"/><path d="m114.019 47.734a8.1 8.1.0 01-3.047-4.255 14.439 14.439.0 01-.652-4.37 14.3 14.3.0 01.614-4.371A7.869 7.869.0 01114 30.56a9.072 9.072.0 015.252-1.5 8.543 8.543.0 015.041 1.5 7.985 7.985.0 013.009 4.14 12.439 12.439.0 01.69 4.37 13.793 13.793.0 01-.651 4.37 8.255 8.255.0 01-3.028 4.275 8.475 8.475.0 01-5.1 1.553 8.754 8.754.0 01-5.194-1.534zm7.629-3.1a4.536 4.536.0 001.476-2.262 11.335 11.335.0 00.383-3.221 10.618 10.618.0 00-.383-3.22 4.169 4.169.0 00-1.457-2.243 4.066 4.066.0 00-2.531-.785 3.942 3.942.0 00-2.453.785 4.376 4.376.0 00-1.5 2.243 11.839 11.839.0 00-.383 3.22 11.84 11.84.0 00.383 3.221 4.222 4.222.0 001.476 2.262 4.075 4.075.0 002.549.8 3.8 3.8.0 002.44-.809z"/><path d="m15.105 32.057v15.565a.059.059.0 01-.049.059L.069 50.25A.06.06.0 01.005 50.167l14.987-33.47a.06.06.0 01.114.025z"/><path d="m17.631 23.087v24.6a.06.06.0 00.053.059l22.449 2.507a.06.06.0 00.061-.084L17.745.032a.06.06.0 00-.114.024z"/><path d="m39.961 52.548-24.833 7.45a.062.062.0 01-.043.0L.079 52.548a.059.059.0 01.026-.113h39.839a.06.06.0 01.017.113z"/></svg></a><div class=footer-languages><a tabindex=-1 lang=en id=switch-lang-en class=footer-languages-item>English
</a><a tabindex=-1 lang=zh id=switch-lang-zh class=footer-languages-item>中文
</a><a tabindex=-1 lang=uk id=switch-lang-uk class="footer-languages-item active"><svg class="icon tick"><use xlink:href="/v1.25/img/icons.svg#tick"/></svg>
Українська</a></div></div><ul class=footer-policies><li class=footer-policies-item><a class=footer-policies-link href=https://www.linuxfoundation.org/legal/terms>Умови та положення
</a>|
<a class=footer-policies-link href=https://www.linuxfoundation.org/legal/privacy-policy>Про конфіденційність
</a>|
<a class=footer-policies-link href=https://www.linuxfoundation.org/legal/trademark-usage>Торгові марки
</a>|
<a class=footer-policies-link href=https://github.com/istio/istio.io/edit/release-1.25/content/en/about/faq/metrics-and-logs/index.md>Змінити цю сторінку на GitHub</a></li></ul><div class=footer-base><span class=footer-base-copyright>&copy; 2025 the Istio Authors.</span>
<span class=footer-base-version>Версія
Istio
1.25.2</span><ul class=footer-base-releases><li class=footer-base-releases-item><a tabindex=-1 class=footer-base-releases-link onclick='return navigateToUrlOrRoot("https://preliminary.istio.io/about/faq/metrics-and-logs/"),!1'>наступний випуск</a></li><li class=footer-base-releases-item><a tabindex=-1 class=footer-base-releases-link href=https://istio.io/archive>старі випуски</a></li></ul></div></div></footer><div id=scroll-to-top-container aria-hidden=true><button id=scroll-to-top title=Нагору tabindex=-1><svg class="icon top"><use xlink:href="/v1.25/img/icons.svg#top"/></svg></button></div></body></html>