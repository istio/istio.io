<!doctype html><html lang=zh itemscope itemtype=https://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=theme-color content="#466BB0"><meta name=title content="Istio 1.24.0 更新说明"><meta name=description content="Istio 1.24.0 更新说明。"><meta name=keywords content="microservices,services,mesh"><meta property="og:title" content="Istio 1.24.0 更新说明"><meta property="og:type" content="website"><meta property="og:description" content="Istio 1.24.0 更新说明。"><meta property="og:url" content="/v1.25/zh/news/releases/1.24.x/announcing-1.24/change-notes/"><meta property="og:image" content="https://raw.githubusercontent.com/istio/istio.io/master/static/img/istio-social.png"><meta property="og:image:alt" content="The Istio sailboat logo"><meta property="og:image:width" content="4096"><meta property="og:image:height" content="2048"><meta property="og:site_name" content="Istio"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@IstioMesh"><title>Istio / Istio 1.24.0 更新说明</title>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RNS1643NL0"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-RNS1643NL0")</script><link rel=alternate type=application/rss+xml title="Istio Blog" href=/v1.25/blog/feed.xml><link rel=alternate type=application/rss+xml title="Istio News" href=/v1.25/news/feed.xml><link rel=alternate type=application/rss+xml title="Istio Blog and News" href=/v1.25/feed.xml><link rel="shortcut icon" href=/v1.25/favicons/favicon.ico><link rel=apple-touch-icon href=/v1.25/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/v1.25/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/v1.25/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/v1.25/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/v1.25/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/v1.25/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/v1.25/favicons/android-96x96.png sizes=96xW96><link rel=icon type=image/png href=/v1.25/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/v1.25/favicons/android-192x192.png sizes=192x192><link rel=icon type=image/svg+xml href=/v1.25/favicons/favicon.svg><link rel=icon type=image/png href=/v1.25/favicons/favicon.png><link rel=mask-icon href=/v1.25/favicons/safari-pinned-tab.svg color=#466BB0><link rel=manifest href=/v1.25/manifest.json><meta name=apple-mobile-web-app-title content="Istio"><meta name=application-name content="Istio"><meta name=msapplication-config content="/browserconfig.xml"><meta name=msapplication-TileColor content="#466BB0"><meta name=theme-color content="#466BB0"><link rel=stylesheet href=/v1.25/css/style.min.38f1afbdf6f8efdb4fe991ff2a53ca1c801b5c4602dea2963da44df7ceaacfb8.css integrity="sha256-OPGvvfb479tP6ZH/KlPKHIAbXEYC3qKWPaRN986qz7g=" crossorigin=anonymous><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,400;0,500;0,600;0,700;1,400;1,600&display=swap"><script src=/v1.25/js/themes_init.min.js></script></head><body class=language-unknown><script>const branchName="release-1.25",docTitle="Istio 1.24.0 更新说明",iconFile="/v1.25//img/icons.svg",buttonCopy="复制到剪切板",buttonPrint="打印",buttonDownload="下载"</script><script src="https://www.google.com/cse/brand?form=search-form" defer></script><script src=/v1.25/js/all.min.js data-manual defer></script><header class=main-navigation><nav class="main-navigation-wrapper container-l"><div class=main-navigation-header><a id=brand href=/v1.25/zh/ aria-label=logotype><span class=logo><svg width="128" height="60" viewBox="0 0 128 60"><path d="M58.434 48.823A.441.441.0 0158.3 48.497V22.583a.444.444.0 01.134-.326.446.446.0 01.327-.134h3.527a.447.447.0 01.325.134.447.447.0 01.134.326v25.914a.443.443.0 01-.134.326.444.444.0 01-.325.134h-3.527a.444.444.0 01-.327-.134z"/><path d="m70.969 48.477a6.556 6.556.0 01-2.818-1.955 4.338 4.338.0 01-1-2.78v-.345a.443.443.0 01.134-.326.444.444.0 01.326-.135h3.374a.444.444.0 01.326.135.445.445.0 01.134.326v.077a2.014 2.014.0 001.054 1.667 4.672 4.672.0 002.664.709 4.446 4.446.0 002.492-.633 1.862 1.862.0 00.958-1.591 1.426 1.426.0 00-.786-1.322 12.7 12.7.0 00-2.549-.939l-1.457-.46a21.526 21.526.0 01-3.3-1.227 6.57 6.57.0 01-2.262-1.783 4.435 4.435.0 01-.92-2.894 5.081 5.081.0 012.109-4.275 8.993 8.993.0 015.558-1.591 10.445 10.445.0 014.1.748 6.3 6.3.0 012.722 2.07 5 5 0 01.958 3.009.441.441.0 01-.134.326.441.441.0 01-.325.134h-3.258a.441.441.0 01-.326-.134.443.443.0 01-.134-.326 1.974 1.974.0 00-.978-1.667 4.647 4.647.0 00-2.665-.671 4.741 4.741.0 00-2.435.556 1.724 1.724.0 00-.938 1.553 1.512 1.512.0 00.9 1.4 15.875 15.875.0 003.01 1.055l.843.229a27.368 27.368.0 013.412 1.246 6.67 6.67.0 012.338 1.763 4.387 4.387.0 01.958 2.933 4.988 4.988.0 01-2.146 4.275 9.543 9.543.0 01-5.712 1.552 11.626 11.626.0 01-4.227-.709z"/><path d="m97.039 32.837a.443.443.0 01-.326.135h-3.911a.169.169.0 00-.191.192v9.239a2.951 2.951.0 00.632 2.108 2.7 2.7.0 002.013.652h1.15a.444.444.0 01.325.134.441.441.0 01.134.326v2.875a.471.471.0 01-.459.5l-1.994.039a8 8 0 01-4.524-1.035q-1.495-1.035-1.533-3.91V33.166A.17.17.0 0088.164 32.974H85.978A.441.441.0 0185.652 32.839.441.441.0 0185.518 32.513V29.83a.441.441.0 01.134-.326.444.444.0 01.326-.135h2.186a.169.169.0 00.191-.192v-4.485a.438.438.0 01.134-.326.44.44.0 01.325-.134h3.336a.443.443.0 01.325.134.442.442.0 01.135.326v4.485a.169.169.0 00.191.192h3.911a.446.446.0 01.326.135.446.446.0 01.134.326v2.683a.446.446.0 01-.133.324z"/><path d="m101.694 25.917a2.645 2.645.0 01-.767-1.955 2.65 2.65.0 01.767-1.955 2.65 2.65.0 011.955-.767 2.65 2.65.0 011.955.767 2.652 2.652.0 01.767 1.955 2.647 2.647.0 01-.767 1.955 2.646 2.646.0 01-1.955.767 2.645 2.645.0 01-1.955-.767zm-.211 22.906a.441.441.0 01-.134-.326V29.79a.444.444.0 01.134-.326.446.446.0 01.326-.134h3.527a.446.446.0 01.326.134.445.445.0 01.134.326v18.707a.443.443.0 01-.134.326.443.443.0 01-.326.134h-3.527a.443.443.0 01-.326-.134z"/><path d="m114.019 47.734a8.1 8.1.0 01-3.047-4.255 14.439 14.439.0 01-.652-4.37 14.3 14.3.0 01.614-4.371A7.869 7.869.0 01114 30.56a9.072 9.072.0 015.252-1.5 8.543 8.543.0 015.041 1.5 7.985 7.985.0 013.009 4.14 12.439 12.439.0 01.69 4.37 13.793 13.793.0 01-.651 4.37 8.255 8.255.0 01-3.028 4.275 8.475 8.475.0 01-5.1 1.553 8.754 8.754.0 01-5.194-1.534zm7.629-3.1a4.536 4.536.0 001.476-2.262 11.335 11.335.0 00.383-3.221 10.618 10.618.0 00-.383-3.22 4.169 4.169.0 00-1.457-2.243 4.066 4.066.0 00-2.531-.785 3.942 3.942.0 00-2.453.785 4.376 4.376.0 00-1.5 2.243 11.839 11.839.0 00-.383 3.22 11.84 11.84.0 00.383 3.221 4.222 4.222.0 001.476 2.262 4.075 4.075.0 002.549.8 3.8 3.8.0 002.44-.809z"/><path d="m15.105 32.057v15.565a.059.059.0 01-.049.059L.069 50.25A.06.06.0 01.005 50.167l14.987-33.47a.06.06.0 01.114.025z"/><path d="m17.631 23.087v24.6a.06.06.0 00.053.059l22.449 2.507a.06.06.0 00.061-.084L17.745.032a.06.06.0 00-.114.024z"/><path d="m39.961 52.548-24.833 7.45a.062.062.0 01-.043.0L.079 52.548a.059.059.0 01.026-.113h39.839a.06.06.0 01.017.113z"/></svg></span>
</a><button id=hamburger class=main-navigation-toggle aria-label="Open navigation">
<svg class="icon menu-hamburger"><use xlink:href="/v1.25/img/icons.svg#menu-hamburger"/></svg>
</button>
<button id=menu-close class=main-navigation-toggle aria-label="Close navigation"><svg class="icon menu-close"><use xlink:href="/v1.25/img/icons.svg#menu-close"/></svg></button></div><div id=header-links class=main-navigation-links-wrapper><ul class=main-navigation-links><li class=main-navigation-links-item><a class="main-navigation-links-link has-dropdown"><span>关于</span><svg class="icon dropdown-arrow"><use xlink:href="/v1.25/img/icons.svg#dropdown-arrow"/></svg></a><ul class=main-navigation-links-dropdown><li class=main-navigation-links-dropdown-item><a href=/v1.25/zh/about/service-mesh class=main-navigation-links-link>服务网格</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.25/zh/about/solutions class=main-navigation-links-link>解决方案</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.25/zh/about/case-studies class=main-navigation-links-link>案例学习</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.25/zh/about/ecosystem class=main-navigation-links-link>生态系统</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.25/zh/about/deployment class=main-navigation-links-link>部署</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.25/zh/about/faq class=main-navigation-links-link>FAQ</a></li></ul></li><li class=main-navigation-links-item><a href=/v1.25/zh/blog/ class=main-navigation-links-link><span>博客</span></a></li><li class=main-navigation-links-item><a href=/v1.25/zh/news/ class=main-navigation-links-link><span>新闻</span></a></li><li class=main-navigation-links-item><a href=/v1.25/zh/get-involved/ class=main-navigation-links-link><span>加入我们</span></a></li><li class=main-navigation-links-item><a href=/v1.25/zh/docs/ class=main-navigation-links-link><span>文档</span></a></li></ul><div class=main-navigation-footer><button id=search-show class=search-show title='搜索 istio.io' aria-label=搜索><svg class="icon magnifier"><use xlink:href="/v1.25/img/icons.svg#magnifier"/></svg></button>
<a href=/v1.25/zh/docs/setup/getting-started class="btn btn--primary" id=try-istio>试用 Istio</a></div></div><form id=search-form class=search name=cse role=search><input type=hidden name=cx value=002184991200833970123:veyyqmfmpj4>
<input type=hidden name=ie value=utf-8>
<input type=hidden name=hl value=zh>
<input type=hidden id=search-page-url value=/zh/search>
<input id=search-textbox class="search-textbox form-control" name=q type=search aria-label='搜索 istio.io' placeholder=搜索>
<button id=search-close title=取消搜索 type=reset aria-label=取消搜索><svg class="icon menu-close"><use xlink:href="/v1.25/img/icons.svg#menu-close"/></svg></button></form></nav></header><div class=banner-container></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><div class=header-content><h1>Istio 1.24.0 更新说明</h1><p>Istio 1.24.0 更新说明。</p></div><p class=post-author>Nov 7, 2024</p><div><h2 id=ambient-mode>Ambient 模式</h2><ul><li><p><strong>新增</strong> 添加了对将策略附加到 waypoint 的 <code>ServiceEntry</code> 的支持。</p></li><li><p><strong>新增</strong> 添加了新的注解 <code>ambient.istio.io/bypass-inbound-capture</code>，
可应用于使 ztunnel 仅捕获出站流量。
这对于仅接受来自网格外客户端（例如面向互联网的 Pod）的流量的工作负载跳过不必要的跳跃非常有用。</p></li><li><p><strong>新增</strong> 添加了新的注解 <code>networking.istio.io/traffic-distribution</code>，
可应用于使 ztunnel 优先将流量发送到本地 Pod。
其行为与 <code>Service</code> 上的 <a href=https://kubernetes.io/zh-cn/docs/concepts/services-networking/service/#traffic-distribution><code>spec.trafficDistribution</code></a>
字段相同，但允许在较旧的 Kubernetes 版本上使用（因为该字段是在 Kubernetes 1.31 中作为测试版添加的）。
请注意，航点会自动设置此项。</p></li><li><p><strong>修复</strong> 修复了阻止<a href=/v1.25/zh/docs/ops/deployment/application-requirements/#server-first-protocols>服务器优先协议</a>与 waypoint 协同工作的问题。</p></li><li><p><strong>改进</strong> 当 Ambient 模式下发生连接失败时，改进来自 Envoy 的日志以显示更多错误详细信息。</p></li><li><p><strong>新增</strong> 添加了对 waypoint 代理中的 <code>Telemetry</code> 定制的支持。</p></li><li><p><strong>新增</strong> 添加了编写状态条件，用于将 AuthorizationPolicy 绑定到 waypoint 代理。
条件的格式是<strong>实验性的</strong>，将会发生变化。具有多个 <code>targetRefs</code> 的策略目前接收单个条件。
一旦上游 Kubernetes Gateway API 采用具有多个引用的条件模式，
Istio 将采用该惯例，在使用多个 <code>targetRefs</code> 时提供更详细的信息。
(<a href=https://github.com/istio/istio/issues/52699>Issue #52699</a>)</p></li><li><p><strong>修复</strong> 修复了导致 <code>hostNetwork</code> Pod 在 Ambient 模式下无法正常运行的问题。</p></li><li><p><strong>改进</strong> 改进了 ztunnel 如何确定其代表哪个 Pod 的逻辑。
之前，这依赖于 IP 地址，但在某些情况下并不可靠。</p></li><li><p><strong>修复</strong> 修复了导致 waypoint 中的 <code>DestinationRule</code> 中的任何 <code>portLevelSettings</code> 被忽略的问题。
(<a href=https://github.com/istio/istio/issues/52532>Issue #52532</a>)</p></li><li><p><strong>修复</strong> 修复了使用带有 waypoint 的镜像策略时出现的问题。
(<a href=https://github.com/istio/istio/issues/52713>Issue #52713</a>)</p></li><li><p><strong>新增</strong> 添加了对应用于 waypoint 的 <code>AuthorizationPolicy</code> 中的 <code>connection.sni</code> 规则的支持。
(<a href=https://github.com/istio/istio/issues/52752>Issue #52752</a>)</p></li><li><p><strong>更新</strong> 更新了 Ambient 中使用的重定向方法，从 <code>TPROXY</code> 改为 <code>REDIRECT</code>。
对于大多数用户来说，这应该没有影响，但修复了一些与 <code>TPROXY</code> 的兼容性问题。
(<a href=https://github.com/istio/istio/issues/52260>Issue #52260</a>),(<a href=https://github.com/istio/istio/issues/52576>Issue #52576</a>)</p></li></ul><h2 id=traffic-management>流量治理</h2><ul><li><p><strong>提升</strong> 提升 Istio 双栈支持至 Alpha 版本。
(<a href=https://github.com/istio/istio/issues/47998>Issue #47998</a>)</p></li><li><p><strong>新增</strong> 添加了向 <code>DestinationRule</code> 添加 <code>warmup.aggression</code>、
<code>warmup.duration</code>、<code>warmup.minimumPercent</code> 参数，
以对预热行为提供更多控制。
(<a href=https://github.com/istio/api/issues/3215>Issue #3215</a>)</p></li><li><p><strong>新增</strong> 添加了入站请求重试策略，可自动重置服务未看到/处理的请求。
可以通过将 <code>ENABLE_INBOUND_RETRY_POLICY</code> 设置为 false 来恢复。
(<a href=https://github.com/istio/istio/issues/51704>Issue #51704</a>)</p></li><li><p><strong>修复</strong> 修复了默认重试策略，以排除 503 重试，这对于幂等请求来说可能不安全。
可以使用 <code>EXCLUDE_UNSAFE_503_FROM_DEFAULT_RETRY=false</code> 暂时恢复此行为。
(<a href=https://github.com/istio/istio/issues/50506>Issue #50506</a>)</p></li><li><p><strong>更新</strong> 更新了 XDS 生成行为，以便在用户配置了 <code>Sidecar</code>
和未配置 <code>Sidecar</code> 时保持一致。有关更多信息，请参阅升级说明。</p></li><li><p><strong>改进</strong> 改进了 Istiod 的验证 webhook，以接受它不知道的版本。
这确保较旧的 Istio 可以验证较新的 CRD 创建的资源。</p></li><li><p><strong>改进</strong> 通过将多个 IP 与一个端点关联起来，而不是将它们视为两个不同的端点，改进对双栈服务的支持。
(<a href=https://github.com/istio/istio/issues/40394>Issue #40394</a>)</p></li><li><p><strong>新增</strong> 添加了对 HTTP 路由中匹配多个 IP（用于双栈服务）的支持。</p></li><li><p><strong>新增</strong> 添加了在过滤不需要的配置时将考虑 <code>VirtualService</code> <code>sourceNamespaces</code>。</p></li><li><p><strong>新增</strong> 添加了通过传递静态侦听器的过载管理器来支持。
可以通过在代理 Deployment 中将 <code>BYPASS_OVERLOAD_MANAGER_FOR_STATIC_LISTENERS</code> 设置为 false 来恢复。
(<a href=https://github.com/istio/istio/issues/41859>Issue #41859</a>),(<a href=https://github.com/istio/istio/issues/52663>Issue #52663</a>)</p></li><li><p><strong>新增</strong> 添加了新的 istiod 环境变量 <code>ENVOY_DNS_JITTER_DURATION</code>，
默认值为 <code>100ms</code>，用于设置定期 DNS 解析的抖动。
请参阅 <code>https://www.envoyproxy.io/docs/envoy/latest/api-v3/config/cluster/v3/cluster.proto</code>。
这有助于减少集群 DNS 服务器上的负载。
(<a href=https://github.com/istio/istio/issues/52877>Issue #52877</a>)</p></li><li><p><strong>新增</strong> 添加了通过新的 <code>ProxyConfig</code> 字段 <code>proxyHeaders.setCurrentClientCertDetails</code>
填充 XFCC 标头时配置证书详细信息的支持。</p></li><li><p><strong>新增</strong> 添加了允许用户在 <code>networking.istio.io/exportTo</code> 注释中的命名空间之间放置额外的空格。
(<a href=https://github.com/istio/istio/issues/53429>Issue #53429</a>)</p></li><li><p><strong>新增</strong> 添加了一项实验性功能，用于启用延迟创建 Envoy 统计信息子集。
如果这些统计信息在整个过程的生命周期中从未被引用，
这将在创建拥有这些统计信息的对象时节省内存和 CPU 周期。
可以通过在代理 Deployment 中将 <code>ENABLE_DEFERRED_STATS_CREATION</code> 设置为 false 来禁用此功能。</p></li><li><p><strong>修复</strong> 修复了 ServiceEntry 中多个服务 VIP 的匹配问题。有关更多信息，请参阅升级说明。
(<a href=https://github.com/istio/istio/issues/51747>Issue #51747</a>),(<a href=https://github.com/istio/istio/issues/30282>Issue #30282</a>)</p></li><li><p><strong>修复</strong> 修复了 <code>MeshConfig</code> 的 <code>serviceSettings.settings.clusterLocal</code>，
以支持更精确的主机名，允许主机排除。</p></li><li><p><strong>修复</strong> 修复了同一主机上的 <code>DestinationRules</code>
如果具有不同的 <code>exportTo</code> 值则不会合并。
可以使用 <code>ENABLE_ENHANCED_DESTINATIONRULE_MERGE=false</code> 暂时恢复保持行为。
(<a href=https://github.com/istio/istio/issues/52519>Issue #52519</a>)</p></li><li><p><strong>修复</strong> 修复了控制器分配的 IP 不像临时自动分配的 IP 那样尊重每个代理 DNS 捕获的问题。
(<a href=https://github.com/istio/istio/issues/52609>Issue #52609</a>)</p></li><li><p><strong>修复</strong> 修复了在某些情况下导致 waypoint 忽略 <code>ServiceEntry</code> 的自动分配 IP 的问题。
(<a href=https://github.com/istio/istio/issues/52746>Issue #52746</a>)</p></li><li><p><strong>修复</strong> 修复了使用 <code>pilot-agent istio-clean-iptables</code>
命令无法删除 <code>ISTIO_OUTPUT</code> <code>iptables</code> 链的问题。
(<a href=https://github.com/istio/istio/issues/52835>Issue #52835</a>)</p></li><li><p><strong>修复</strong> 修复了在高数据包丢失网络等缓慢请求场景中使用 HTTPS 可能导致 Envoy 内存泄漏的问题。
(<a href=https://github.com/istio/istio/issues/52850>Issue #52850</a>)</p></li><li><p><strong>修复</strong> 修复了 DNS 代理包含无头服务未准备好的端点的错误。</p></li><li><p><strong>移除</strong> 删除了弃用的 <code>istio.io/gateway-name</code> 标签，
请改用 <code>gateway.networking.k8s.io/gateway-name</code> 标签。</p></li><li><p><strong>移除</strong> 删除了将 <code>kubeconfig</code> 写入 CNI 网络目录。
(<a href=https://github.com/istio/istio/issues/52315>Issue #52315</a>)</p></li><li><p><strong>移除</strong> 从 <code>istio-cni</code> 配置映射中删除了 <code>CNI_NET_DIR</code>，因为它现在不执行任何操作。
(<a href=https://github.com/istio/istio/issues/52315>Issue #52315</a>)</p></li></ul><h2 id=telemetry>遥测</h2><ul><li><p><strong>更新</strong> 更新了遥测 API 和扩展中使用的 CEL 词汇表。有关更多信息，请参阅升级说明。</p></li><li><p><strong>新增</strong> 为统计前缀添加新的模式变量 (<code>%SERVICE_NAME%</code>)
(<a href=https://github.com/istio/istio/issues/52177>Issue #52177</a>)</p></li><li><p><strong>新增</strong> 向 ztunnel Helm Chart 添加了 <code>logAsJson</code> 值
(<a href=https://github.com/istio/istio/issues/52631>Issue #52631</a>)</p></li><li><p><strong>新增</strong> 添加了守护指标的统计标签配置。
(<a href=https://github.com/istio/istio/issues/52731>Issue #52731</a>)</p></li><li><p><strong>新增</strong> 将跟踪导出到 OpenTelemetry Collector 时，添加了支持 gRPC 请求的标头和超时配置。
(<a href=https://github.com/istio/istio/issues/52873>Issue #52873</a>)</p></li><li><p><strong>新增</strong> 添加了在 <code>meshConfig.extensionProviders.zipkin.path</code> 下支持自定义 Zipkin 收集器端点。
(<a href=https://github.com/istio/istio/issues/53086>Issue #53086</a>)</p></li><li><p><strong>修复</strong> 修复了将指标端口添加到由
<a href=/v1.25/zh/docs/tasks/traffic-management/ingress/gateway-api/#automated-deployment><code>Gateway</code> 自动部署</a>创建的 Pod。</p></li><li><p><strong>修复</strong> 修复了当加载新证书时，
<code>citadel_server_root_cert_expiry_timestamp</code>、<code>citadel_server_root_cert_expiry_seconds</code>、
<code>citadel_server_cert_chain_expiry_timestamp</code> 和 <code>citadel_server_cert_chain_expiry_seconds</code> 会更新的问题。</p></li><li><p><strong>新增</strong> 添加了 <code>SECRET_GRACE_PERIOD_RATIO_JITTER</code>，
默认值为 <code>0.01</code>，以在 <code>SECRET_GRACE_PERIOD_RATIO</code> 中引入随机偏移量。
如果没有此配置，同时部署的代理将同时请求更新证书，这可能会导致 CA 服务器负载过大。
每 12 小时更新一次证书的新默认行为通过此值增加到 +/- 大约 15 分钟。
(<a href=https://github.com/istio/istio/issues/52102>Issue #52102</a>)</p></li></ul><h2 id=installation>安装</h2><ul><li><p><strong>更新</strong> 更新了 istio-cni 的 <code>securityContext.privileged</code> 为 false，
以支持特定于功能的权限。istio-cni 仍然是<a href=https://kubernetes.io/zh-cn/docs/concepts/security/pod-security-standards/#privileged>根据 Kubernetes Pod 安全标准的“特权”容器</a>，
因为即使没有此标志，它也具有特权功能，即 <code>CAP_SYS_ADMIN</code>。
(<a href=https://github.com/istio/istio/issues/52558>Issue #52558</a>)</p></li><li><p><strong>改进</strong> 改进了现在可以使用 <code>global.waypoint.resources</code> 配置 waypoint <code>resources</code>。
(<a href=https://github.com/istio/istio/issues/51496>Issue #51496</a>)</p></li><li><p><strong>改进</strong> 改进了 waypoint Pod <code>affinity</code> 现在可以使用 <code>waypoint.affinity</code> 进行配置。
(<a href=https://github.com/istio/istio/issues/52883>Issue #52883</a>)</p></li><li><p><strong>改进</strong> 改进了 waypoint Pod <code>topologySpreadConstraints</code>
现在可以使用 <code>global.waypoint.topologySpreadConstraints</code> 进行配置。
(<a href=https://github.com/istio/istio/issues/52901>Issue #52901</a>)</p></li><li><p><strong>改进</strong> 改进了 waypoint Pod <code>tolerations</code> 现在可以使用 <code>global.waypoint.tolerations</code> 进行配置。
(<a href=https://github.com/istio/istio/issues/52901>Issue #52901</a>)</p></li><li><p><strong>改进</strong> 改进了 waypoint Pod <code>nodeSelector</code> 现在可以使用 <code>global.waypoint.nodeSelector</code> 进行配置。
(<a href=https://github.com/istio/istio/issues/52901>Issue #52901</a>)</p></li><li><p><strong>改进</strong> 改进了 <code>istio-cni-node</code> DaemonSet 的内存占用。
在许多情况下，这可以减少高达 80% 的内存。
(<a href=https://github.com/istio/istio/issues/53493>Issue #53493</a>)</p></li><li><p><strong>更新</strong> 更新了 Kiali 插件示例至 <a href=https://medium.com/kialiproject/kiali-2-0-for-istio-2087810f337e>v2.0 版</a>。</p></li><li><p><strong>更新</strong> 更新了所有 Istio 组件以读取 <code>v1</code> CRD（如适用）。
这应该不会产生影响，除非集群使用的是 1.21 或更早版本的 Istio CRD（这不是受支持的版本偏差）。</p></li><li><p><strong>新增</strong> 向几乎所有资源添加了 <code>app.kubernetes.io/name</code>、
<code>app.kubernetes.io/instance</code>、<code>app.kubernetes.io/part-of</code>、
<code>app.kubernetes.io/version</code>、<code>app.kubernetes.io/managed-by</code> 和 <code>helm.sh/chart</code> 标签。
(<a href=https://github.com/istio/istio/issues/52034>Issue #52034</a>)</p></li><li><p><strong>新增</strong> 添加了 Helm 安装的平台特定配置。
示例：<code>helm install istio-cni --set profile=ambient --set global.platform=k3s</code>
<code>helm install istiod --set profile=ambient --set global.platform=k3s</code>
有关当前支持的平台覆盖列表，请参阅 <code>manifests/charts/platform-xxx.yaml</code> 文件。</p></li><li><p><strong>移除</strong> 删除了 <code>openshift</code> 配置文件变体，并用 <code>global.platform</code> 覆盖替换。
示例：<code>helm install istio-cni --set profile=ambient-openshift</code>
现在是 <code>helm install istio-cni --set profile=ambient --set global.platform=openshift</code></p></li><li><p><strong>新增</strong> 为 Istiod 添加配置 <code>initContainers</code> 的功能。
(<a href=https://github.com/istio/istio/issues/53120>Issue #53120</a>)</p></li><li><p><strong>新增</strong> 添加了设置（<code>strategy</code>、<code>minReadySeconds</code> 和 <code>terminationGracePeriodSeconds</code>）以稳定高流量网关。
(<a href=https://github.com/istio/istio/issues/53121>Issue #53121</a>)</p></li><li><p><strong>新增</strong> 向 <code>istio-cni</code> Chart 添加了值 <code>seLinuxOptions</code>。
在某些平台（例如 OpenShift）上，需要将 <code>seLinuxOptions.type</code> 设置为 <code>spc_t</code>，
以解决与 <code>hostPath</code> 卷相关的一些 SELinux 约束。
如果没有此设置，<code>istio-cni-node</code> Pod 可能无法启动。
(<a href=https://github.com/istio/istio/issues/53558>Issue #53558</a>)</p></li><li><p><strong>新增</strong> 向 <code>istio-cni</code> Chart 添加了提供任意环境变量的支持。</p></li><li><p><strong>新增</strong> 添加了新的注解 <code>sidecar.istio.io/nativeSidecar</code>，
允许用户在每个 Pod 上控制本机 Sidecar 注入。此注释可以设置为 <code>true</code> 或 <code>false</code>，
以启用或禁用 Pod 的本机 Sidecar 注入。此注解优先级高于全局 <code>ENABLE_NATIVE_SIDECARS</code> 环境变量。
(<a href=https://github.com/istio/istio/issues/53452>Issue #53452</a>)</p></li><li><p><strong>新增</strong> 添加了允许用户通过 Helm Chart 为修订标签的 <code>MutatingWebhookConfiguration</code> 添加自定义注解。</p></li><li><p><strong>修复</strong> 修复了 <code>kube-virt-interfaces</code> 规则未被 <code>istio-clean-iptables</code> 工具删除的问题。
(<a href=https://github.com/istio/istio/issues/48368>Issue #48368</a>)</p></li><li><p><strong>修复</strong> 修复了如果现有规则兼容，则允许通过跳过应用步骤重新执行 istio-iptables。</p></li><li><p><strong>修复</strong> 修复了某些安装状态行未正确完成的问题，这会在调整终端窗口大小时导致奇怪的渲染。
(<a href=https://github.com/istio/istio/issues/52525>Issue #52525</a>)</p></li><li><p><strong>修复</strong> 在 ztunnel 中将 <code>allowPrivilegeEscalation</code> 设置为 <code>true</code> - 实际上它一直被强制为 <code>true</code>，
但 K8S 没有正确验证这一点：<a href=https://github.com/kubernetes/kubernetes/issues/119568>https://github.com/kubernetes/kubernetes/issues/119568</a>。</p></li><li><p><strong>修复</strong> 修复了从 <code>base</code> Chart 中删除非关键组件，
并从 <code>istiod-remote</code> 和 <code>istio-discovery</code> Chart 中删除 <code>pilot.enabled</code>。</p></li><li><p><strong>修复</strong> 默认情况下，修复了 <code>base</code> Chart 中的模板化 CRD 安装。
以前，这仅在某些条件下有效，并且当使用某些安装标志时，
可能会导致只能通过手动 <code>kubectl</code> 干预升级 CRD。有关更多信息，请参阅升级说明。</p></li><li><p><strong>弃用</strong> 弃用了 <code>Values.base.enableCRDTemplates</code>。
此选项现在默认为 <code>true</code>，并将在未来版本中删除。
在此之前，可以通过将其设置为 <code>false</code> 来启用旧行为。
(<a href=https://github.com/istio/istio/issues/43204>Issue #43204</a>)</p></li><li><p><strong>移除</strong> 删除了 Helm Values API 中一些无效且已弃用的字段。
删除的字段包括：<code>pilot.configNamespace</code>、<code>pilot.configSource</code>、
<code>pilot.enableProtocolSniffingForOutbound</code>、<code>pilot.enableProtocolSniffingForInbound</code>、
<code>pilot.useMCP</code>、<code>global.autoscalingV2API</code>、<code>global.configRootNamespace</code>、
<code>global.defaultConfigVisibilitySettings</code>、<code>global.useMCP</code>、
<code>sidecarInjectorWebhook.objectSelector</code> 和 <code>sidecarInjectorWebhook.useLegacySelectors</code>。
(<a href=https://github.com/istio/istio/issues/51987>Issue #51987</a>)</p></li><li><p><strong>移除</strong> 删除了 2 个版本之前标记为弃用的 <code>istiod</code> Chart 中未使用的 <code>istio_cni</code> 值（#49290）。
(<a href=https://github.com/istio/istio/issues/52645>Issue #52645</a>)</p></li><li><p><strong>移除</strong> 删除了 <code>istiod-remote</code> Chart，
改为使用 <code>helm install istio-discovery --set profile=remote</code>。</p></li><li><p><strong>移除</strong> 删除了对 <code>1.20</code> <code>compatibilityProfile</code> 的支持。
这配置了以下设置：<code>ENABLE_EXTERNAL_NAME_ALIAS</code>、
<code>PERSIST_OLDEST_FIRST_HEURISTIC_FOR_VIRTUAL_SERVICE_HOST_MATCHING</code>、
<code>VERIFY_CERTIFICATE_AT_CLIENT</code> 和 <code>ENABLE_AUTO_SNI</code>。
除 <code>ENABLE_AUTO_SNI</code> 之外，所有这些标志也已从 Istio 中完全删除。</p></li><li><p><strong>移除</strong> 删除了 <code>sidecar.istio.io/enableCoreDump</code> 注解。
请参阅 <code>samples/proxy-coredump</code> 中提供的示例，了解启用核心转储的更多首选方法。</p></li><li><p><strong>移除</strong> 删除了旧版 <code>--log_rotate_*</code> 标志选项。希望使用日志轮换的用户应使用外部日志轮换工具。</p></li></ul><h2 id=istioctl>istioctl</h2><ul><li><p><strong>新增</strong> 添加了在安装过程中自动检测各种特定于平台的不兼容性。</p></li><li><p><strong>新增</strong> 添加了一个新命令 <code>istioctl manifest translate</code>，以帮助从 <code>istioctl install</code> 迁移到 <code>helm</code>。</p></li><li><p><strong>新增</strong> 在 <code>istioctl analyze</code> 命令中添加了一个新标志 <code>remote-contexts</code>，
以在多集群分析期间指定远程集群上下文。
(<a href=https://github.com/istio/istio/issues/51934>Issue #51934</a>)</p></li><li><p><strong>新增</strong> 向 <code>istioctl x envoy-stats</code> 添加了通过标签选择器过滤 Pod 的支持。</p></li><li><p><strong>新增</strong> 向 <code>istioctl experimental injector list</code> 添加了按命名空间过滤资源的支持。</p></li><li><p><strong>新增</strong> 添加了对 istioctl 中的 <code>--impersonate</code> 标志的支持。
(<a href=https://github.com/istio/istio/issues/52285>Issue #52285</a>)</p></li><li><p><strong>修复</strong> 修复了 istioctl 分析报告带有通配符主机和特定子域的 IST0145 错误。
(<a href=https://github.com/istio/istio/issues/52413>Issue #52413</a>)</p></li><li><p><strong>修复</strong> 修复了 <code>istioctl experiments injection list</code> 打印与 istio 不相关的 webhook。</p></li><li><p><strong>移除</strong> 删除了 <code>istioctl manifest diff</code> 和 <code>istioctl manifest profile diff</code> 命令。
想要比较清单的用户可以使用通用 YAML 比较工具。</p></li><li><p><strong>移除</strong> 删除了 <code>istioctl profile</code> 命令。可以在 Istio 文档中找到相同的信息。</p></li></ul><h2 id=documentation-changes>文档变更</h2><ul><li><strong>改进</strong> 通过将 <code>sleep</code> 示例重命名为 <code>curl</code>，提高了 Istio 文档的可读性。
(<a href=https://github.com/istio/istio.io/issues/15725>Issue #15725</a>)</li></ul></div><nav class=pagenav><div class=left></div><div class=right><a title="升级到 Istio 1.24.0 时要考虑的重要变更。" href=/v1.25/zh/news/releases/1.24.x/announcing-1.24/upgrade-notes/ class=next-link>Istio 1.24 升级说明<svg class="icon right-arrow"><use xlink:href="/v1.25/img/icons.svg#right-arrow"/></svg></a></div></nav></article><footer class=footer><div class="footer-wrapper container-l"><div class="user-links footer-links"><a class=channel title='Istio 的代码在 GitHub 上开发' href=https://github.com/istio/community aria-label=GitHub><svg class="icon github"><use xlink:href="/v1.25/img/icons.svg#github"/></svg>
</a><a class=channel title='如果您想深入了解 Istio 的技术细节，请查看我们日益完善的设计文档' href=https://groups.google.com/forum/#!forum/istio-team-drive-access aria-label="team drive"><svg class="icon drive"><use xlink:href="/v1.25/img/icons.svg#drive"/></svg>
</a><a class=channel title='在 Slack 上与 Istio 社区交互讨论开发问题（仅限邀请）' href=https://slack.istio.io aria-label=slack><svg class="icon slack"><use xlink:href="/v1.25/img/icons.svg#slack"/></svg>
</a><a class=channel title='Stack Overflow 中列举了针对实际问题以及部署、配置和使用 Istio 的各项回答' href=https://stackoverflow.com/questions/tagged/istio aria-label="Stack Overflow"><svg class="icon stackoverflow"><use xlink:href="/v1.25/img/icons.svg#stackoverflow"/></svg>
</a><a class=channel title='关注我们的 LinkedIn 来获取最新信息' href=https://www.linkedin.com/company/istio/ aria-label=LinkedIn><svg class="icon linkedin"><use xlink:href="/v1.25/img/icons.svg#linkedin"/></svg>
</a><a class=channel title='关注我们的 Twitter 来获取最新信息' href=https://twitter.com/IstioMesh aria-label=Twitter><svg class="icon twitter"><use xlink:href="/v1.25/img/icons.svg#twitter"/></svg>
</a><a class=channel title='关注我们的 Bluesky 来获取最新信息' href=https://bsky.app/profile/istio.io aria-label=Bluesky><svg class="icon bluesky"><use xlink:href="/v1.25/img/icons.svg#bluesky"/></svg>
</a><a class=channel title='关注我们的 Mastodon 来获取最新信息' href=https://mastodon.social/@istio aria-label=Mastodon rel=me><svg class="icon mastodon"><use xlink:href="/v1.25/img/icons.svg#mastodon"/></svg></a></div><hr class=footer-separator role=separator><div class="info footer-info"><a class=logo href=/v1.25/zh/ aria-label=logotype><svg width="128" height="60" viewBox="0 0 128 60"><path d="M58.434 48.823A.441.441.0 0158.3 48.497V22.583a.444.444.0 01.134-.326.446.446.0 01.327-.134h3.527a.447.447.0 01.325.134.447.447.0 01.134.326v25.914a.443.443.0 01-.134.326.444.444.0 01-.325.134h-3.527a.444.444.0 01-.327-.134z"/><path d="m70.969 48.477a6.556 6.556.0 01-2.818-1.955 4.338 4.338.0 01-1-2.78v-.345a.443.443.0 01.134-.326.444.444.0 01.326-.135h3.374a.444.444.0 01.326.135.445.445.0 01.134.326v.077a2.014 2.014.0 001.054 1.667 4.672 4.672.0 002.664.709 4.446 4.446.0 002.492-.633 1.862 1.862.0 00.958-1.591 1.426 1.426.0 00-.786-1.322 12.7 12.7.0 00-2.549-.939l-1.457-.46a21.526 21.526.0 01-3.3-1.227 6.57 6.57.0 01-2.262-1.783 4.435 4.435.0 01-.92-2.894 5.081 5.081.0 012.109-4.275 8.993 8.993.0 015.558-1.591 10.445 10.445.0 014.1.748 6.3 6.3.0 012.722 2.07 5 5 0 01.958 3.009.441.441.0 01-.134.326.441.441.0 01-.325.134h-3.258a.441.441.0 01-.326-.134.443.443.0 01-.134-.326 1.974 1.974.0 00-.978-1.667 4.647 4.647.0 00-2.665-.671 4.741 4.741.0 00-2.435.556 1.724 1.724.0 00-.938 1.553 1.512 1.512.0 00.9 1.4 15.875 15.875.0 003.01 1.055l.843.229a27.368 27.368.0 013.412 1.246 6.67 6.67.0 012.338 1.763 4.387 4.387.0 01.958 2.933 4.988 4.988.0 01-2.146 4.275 9.543 9.543.0 01-5.712 1.552 11.626 11.626.0 01-4.227-.709z"/><path d="m97.039 32.837a.443.443.0 01-.326.135h-3.911a.169.169.0 00-.191.192v9.239a2.951 2.951.0 00.632 2.108 2.7 2.7.0 002.013.652h1.15a.444.444.0 01.325.134.441.441.0 01.134.326v2.875a.471.471.0 01-.459.5l-1.994.039a8 8 0 01-4.524-1.035q-1.495-1.035-1.533-3.91V33.166A.17.17.0 0088.164 32.974H85.978A.441.441.0 0185.652 32.839.441.441.0 0185.518 32.513V29.83a.441.441.0 01.134-.326.444.444.0 01.326-.135h2.186a.169.169.0 00.191-.192v-4.485a.438.438.0 01.134-.326.44.44.0 01.325-.134h3.336a.443.443.0 01.325.134.442.442.0 01.135.326v4.485a.169.169.0 00.191.192h3.911a.446.446.0 01.326.135.446.446.0 01.134.326v2.683a.446.446.0 01-.133.324z"/><path d="m101.694 25.917a2.645 2.645.0 01-.767-1.955 2.65 2.65.0 01.767-1.955 2.65 2.65.0 011.955-.767 2.65 2.65.0 011.955.767 2.652 2.652.0 01.767 1.955 2.647 2.647.0 01-.767 1.955 2.646 2.646.0 01-1.955.767 2.645 2.645.0 01-1.955-.767zm-.211 22.906a.441.441.0 01-.134-.326V29.79a.444.444.0 01.134-.326.446.446.0 01.326-.134h3.527a.446.446.0 01.326.134.445.445.0 01.134.326v18.707a.443.443.0 01-.134.326.443.443.0 01-.326.134h-3.527a.443.443.0 01-.326-.134z"/><path d="m114.019 47.734a8.1 8.1.0 01-3.047-4.255 14.439 14.439.0 01-.652-4.37 14.3 14.3.0 01.614-4.371A7.869 7.869.0 01114 30.56a9.072 9.072.0 015.252-1.5 8.543 8.543.0 015.041 1.5 7.985 7.985.0 013.009 4.14 12.439 12.439.0 01.69 4.37 13.793 13.793.0 01-.651 4.37 8.255 8.255.0 01-3.028 4.275 8.475 8.475.0 01-5.1 1.553 8.754 8.754.0 01-5.194-1.534zm7.629-3.1a4.536 4.536.0 001.476-2.262 11.335 11.335.0 00.383-3.221 10.618 10.618.0 00-.383-3.22 4.169 4.169.0 00-1.457-2.243 4.066 4.066.0 00-2.531-.785 3.942 3.942.0 00-2.453.785 4.376 4.376.0 00-1.5 2.243 11.839 11.839.0 00-.383 3.22 11.84 11.84.0 00.383 3.221 4.222 4.222.0 001.476 2.262 4.075 4.075.0 002.549.8 3.8 3.8.0 002.44-.809z"/><path d="m15.105 32.057v15.565a.059.059.0 01-.049.059L.069 50.25A.06.06.0 01.005 50.167l14.987-33.47a.06.06.0 01.114.025z"/><path d="m17.631 23.087v24.6a.06.06.0 00.053.059l22.449 2.507a.06.06.0 00.061-.084L17.745.032a.06.06.0 00-.114.024z"/><path d="m39.961 52.548-24.833 7.45a.062.062.0 01-.043.0L.079 52.548a.059.059.0 01.026-.113h39.839a.06.06.0 01.017.113z"/></svg></a><div class=footer-languages><a tabindex=-1 lang=en id=switch-lang-en class=footer-languages-item>English
</a><a tabindex=-1 lang=zh id=switch-lang-zh class="footer-languages-item active"><svg class="icon tick"><use xlink:href="/v1.25/img/icons.svg#tick"/></svg>
中文
</a><a tabindex=-1 lang=uk id=switch-lang-uk class=footer-languages-item>Українська</a></div></div><ul class=footer-policies><li class=footer-policies-item><a class=footer-policies-link href=https://www.linuxfoundation.org/legal/terms>条款
</a>|
<a class=footer-policies-link href=https://www.linuxfoundation.org/legal/privacy-policy>隐私政策
</a>|
<a class=footer-policies-link href=https://www.linuxfoundation.org/legal/trademark-usage>商标
</a>|
<a class=footer-policies-link href=https://github.com/istio/istio.io/edit/release-1.25/content/zh/news/releases/1.24.x/announcing-1.24/change-notes/index.md>在 GitHub 上编辑此页</a></li></ul><div class=footer-base><span class=footer-base-copyright>&copy; 2025 the Istio Authors.</span>
<span class=footer-base-version>部分内容可能滞后于英文版本，同步工作正在进行中<br>版本
Istio
1.25.2</span><ul class=footer-base-releases><li class=footer-base-releases-item><a tabindex=-1 class=footer-base-releases-link onclick='return navigateToUrlOrRoot("https://preliminary.istio.io/news/releases/1.24.x/announcing-1.24/change-notes/"),!1'>下个版本</a></li><li class=footer-base-releases-item><a tabindex=-1 class=footer-base-releases-link href=https://istio.io/archive>旧版本</a></li></ul></div></div></footer><div id=scroll-to-top-container aria-hidden=true><button id=scroll-to-top title=回到顶部 tabindex=-1><svg class="icon top"><use xlink:href="/v1.25/img/icons.svg#top"/></svg></button></div></body></html>