<!doctype html><html lang=zh itemscope itemtype=https://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=theme-color content=#466BB0><meta name=title content=安全><meta name=description content="描述 Istio 的授权与鉴权功能。"><meta name=keywords content=microservices,services,mesh,security,authentication,authorization,rbac,access-control><meta property=og:title content=安全><meta property=og:type content=website><meta property=og:description content="描述 Istio 的授权与鉴权功能。"><meta property=og:url content=/v1.1/zh/docs/concepts/security/><meta property=og:image content=/v1.1/img/istio-whitelogo-bluebackground-framed.svg><meta property=og:image:alt content="Istio Logo"><meta property=og:image:width content=112><meta property=og:image:height content=150><meta property=og:site_name content=Istio><meta name=twitter:card content=summary><meta name=twitter:site content=@IstioMesh><title>Istioldie 1.1 / 安全</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98480406-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-98480406-2');</script><link rel=alternate type=application/rss+xml title="Istio Blog" href=/v1.1/feed.xml><link rel="shortcut icon" href=/v1.1/favicons/favicon.ico><link rel=apple-touch-icon href=/v1.1/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/v1.1/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/v1.1/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/v1.1/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/v1.1/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/v1.1/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/v1.1/favicons/android-96x96.png sizes=96xW96><link rel=icon type=image/png href=/v1.1/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/v1.1/favicons/android-192x192.png sizes=192x192><link rel=manifest href=/v1.1/manifest.json><meta name=apple-mobile-web-app-title content=Istio><meta name=application-name content=Istio><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Work+Sans:400|Chivo:400|Work+Sans:500,300,600,300italic,400italic,500italic,600italic|Chivo:500,300,600,300italic,400italic,500italic,600italic"><link rel=stylesheet href=/v1.1/css/all.css></head><body class="language-unknown archive-site"><script src=/v1.1/js/themes_init.min.js></script><script>const branchName="release-1.1";const docTitle="安全";const iconFile="\/v1.1/img/icons.svg";const buttonCopy='复制到剪切板';const buttonPrint='打印';const buttonDownload='下载';</script><script src="https://www.google.com/cse/brand?form=search-form" defer></script><script src=/v1.1/js/all.min.js data-manual defer></script><header><nav><a id=brand href=/v1.1/zh/><span class=logo><svg viewBox="0 0 300 300"><circle cx="150" cy="150" r="146" stroke-width="2" /><path d="M65 240H225L125 270z"/><path d="M65 230l60-10V110z"/><path d="M135 220l90 10L135 30z"/></svg></span><span class=name>Istioldie 1.1</span></a><div id=hamburger><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#hamburger"/></svg></div><div id=header-links><span title="了解如何部署、使用和运维 Istio。">文档</span>
<a title="关于使用 Istio 的博客文章。" href=/v1.1/zh/blog/2019/root-transition/>博客</a>
<a title="一堆帮助您部署、配置和使用 Istio 的资源。" href=/v1.1/zh/help/>帮助</a>
<a title=关于Istio的说明。 href=/v1.1/zh/about/>关于</a><div class=menu><button id=gearDropdownButton class=menu-trigger title=选项和设置 aria-label="Options and Settings" aria-controls=gearDropdownContent><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#gear"/></svg></button><div id=gearDropdownContent class=menu-content aria-labelledby=gearDropdownButton role=menu><a tabindex=-1 role=menuitem lang=en id=switch-lang-en>English</a>
<a tabindex=-1 role=menuitem lang=zh id=switch-lang-zh class=active>中文</a><div role=separator></div><a tabindex=-1 role=menuitem class=active id=light-theme-item>亮主题</a>
<a tabindex=-1 role=menuitem id=dark-theme-item>暗主题</a><div role=separator></div><a tabindex=-1 role=menuitem id=syntax-coloring-item>代码高亮</a><div role=separator></div><h6>本站的其它版本</h6><a tabindex=-1 role=menuitem onclick="navigateToUrlOrRoot('https://istio.io/docs\/concepts\/security\/');return false;">当前版本</a>
<a tabindex=-1 role=menuitem onclick="navigateToUrlOrRoot('https://preliminary.istio.io/docs\/concepts\/security\/');return false;">下个版本</a>
<a tabindex=-1 role=menuitem href=https://archive.istio.io>旧版本</a></div></div><button id=search-show title=搜索istio.io aria-label=Search><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#magnifier"/></svg></button></div><form id=search-form name=cse role=search><input type=hidden name=cx value=013699703217164175118:iwwf17ikgf4>
<input type=hidden name=ie value=utf-8>
<input type=hidden name=hl value=en>
<input type=hidden id=search-page-url value=/v1.1/search.html>
<input id=search-textbox class=form-control name=q type=search aria-label=搜索istio.io>
<button id=search-close title="Cancel search" type=reset aria-label="Cancel search"><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#cancel-x"/></svg></button></form></nav></header><main class=primary><div id=sidebar-container class="sidebar-container sidebar-offcanvas"><nav id=sidebar aria-label="Section Navigation"><div class=directory><div class=card><button class="header dynamic" id=card28 title="一些概念，理解它们有助于您更好地了解 Istio 系统的不同部分及其使用的抽象。" aria-controls=card28-body><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#concepts"/></svg>概念</button><div class="body default" aria-labelledby=card28 role=region id=card28-body><ul role=tree aria-expanded=true class=leaf-section aria-labelledby=card28><li role=none><a role=treeitem title="介绍 Istio 及其要解决的问题、顶层架构和设计目标。" href=/v1.1/zh/docs/concepts/what-is-istio/>Istio 是什么?</a></li><li role=none><a role=treeitem title="介绍 Istio 中关于流量路由与控制的各项功能。" href=/v1.1/zh/docs/concepts/traffic-management/>流量管理</a></li><li role=none><span role=treeitem class=current title="描述 Istio 的授权与鉴权功能。">安全</span></li><li role=none><a role=treeitem title=描述策略实施和遥测机制。 href=/v1.1/zh/docs/concepts/policies-and-telemetry/>策略与遥测</a></li><li role=none><a role=treeitem title="介绍 Istio 组件的性能与可伸缩性。" href=/v1.1/zh/docs/concepts/performance-and-scalability/>性能与可伸缩性</a></li><li role=none><a role=treeitem title=描述如何配置服务网格以包含来自多个集群的服务。 href=/v1.1/zh/docs/concepts/multicluster-deployments/>多集群部署</a></li></ul></div></div><div class=card><button class="header dynamic" id=card41 title="在不同的环境下（例如 Kubernetes、Consul 等）如何部署和升级 Istio。" aria-controls=card41-body><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#setup"/></svg>安装</button><div class=body aria-labelledby=card41 role=region id=card41-body><ul role=tree aria-expanded=true aria-labelledby=card41><li role=treeitem aria-label=Kubernetes><button aria-hidden=true></button><a title="关于如何在 Kubernetes 集群中安装 Istio 控制平面和添加虚拟机到 mesh 中的说明。" href=/v1.1/zh/docs/setup/kubernetes/>Kubernetes</a><ul role=group aria-expanded=false><li role=none><a role=treeitem title="关于 Istio 发布包下载过程的说明。" href=/v1.1/zh/docs/setup/kubernetes/download/>下载 Istio 发布包</a></li><li role=treeitem aria-label=准备><button aria-hidden=true></button><a title="为 Istio 做准备。" href=/v1.1/zh/docs/setup/kubernetes/prepare/>准备</a><ul role=group aria-expanded=false><li role=treeitem aria-label=平台搭建><button aria-hidden=true></button><a title="在安装 Istio 前，如何准备各种 Kubernetes 平台。" href=/v1.1/zh/docs/setup/kubernetes/prepare/platform-setup/>平台搭建</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="为 Istio 设置阿里云 Kubernetes 集群的说明。" href=/v1.1/zh/docs/setup/kubernetes/prepare/platform-setup/alicloud/>阿里云</a></li><li role=none><a role=treeitem title="对 Azure 集群进行配置以便安装运行 Istio。" href=/v1.1/zh/docs/setup/kubernetes/prepare/platform-setup/azure/>Azure</a></li><li role=none><a role=treeitem title="使用桌面版 Docker 安装 Istio 的说明。" href=/v1.1/zh/docs/setup/kubernetes/prepare/platform-setup/docker/>桌面版 Docker</a></li><li role=none><a role=treeitem title="对 Google Kubernetes Engine（GKE）集群进行配置以便安装运行 Istio。" href=/v1.1/zh/docs/setup/kubernetes/prepare/platform-setup/gke/>Google Kubernetes Engine</a></li><li role=none><a role=treeitem title="为 IBM Cloud 集群设置 Istio 的说明。" href=/v1.1/zh/docs/setup/kubernetes/prepare/platform-setup/ibm/>IBM Cloud</a></li><li role=none><a role=treeitem title="对 Minikube 集群进行配置以便安装运行 Istio。" href=/v1.1/zh/docs/setup/kubernetes/prepare/platform-setup/minikube/>Minikube</a></li><li role=none><a role=treeitem title="对 OpenShift 集群进行配置以便安装运行 Istio。" href=/v1.1/zh/docs/setup/kubernetes/prepare/platform-setup/openshift/>OpenShift</a></li><li role=none><a role=treeitem title="为 Istio 对 OKE 集群环境进行配置。" href=/v1.1/zh/docs/setup/kubernetes/prepare/platform-setup/oci/>Oracle Cloud Infrastructure</a></li></ul></li></ul></li><li role=treeitem aria-label=安装方案><button aria-hidden=true></button><a title=选择最适合您需求和平台的方案。 href=/v1.1/zh/docs/setup/kubernetes/install/>安装方案</a><ul role=group aria-expanded=false><li role=none><a role=treeitem title="在 Kubernetes 集群中快速安装 Istio 服务网格的说明。" href=/v1.1/zh/docs/setup/kubernetes/install/kubernetes/>在 Kubernetes 中快速开始</a></li><li role=none><a role=treeitem title="使用内含的 Helm chart 安装 Istio。" href=/v1.1/zh/docs/setup/kubernetes/install/helm/>使用 Helm 进行安装</a></li><li role=treeitem aria-label=多集群安装><button aria-hidden=true></button><a title="配置跨越多个 Kubernetes 集群的 Istio 服务网格。" href=/v1.1/zh/docs/setup/kubernetes/install/multicluster/>多集群安装</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="使用 Istio Gateway 跨越多个 Kubernetes 集群安装 Istio 网格以访问远程 pod。" href=/v1.1/zh/docs/setup/kubernetes/install/multicluster/gateways/>Gateway 连接</a></li><li role=none><a role=treeitem title="通过直连远程 pods 实现多 Kubernetes 集群安装 Istio 网格。" href=/v1.1/zh/docs/setup/kubernetes/install/multicluster/vpn/>VPN 连接</a></li></ul></li><li role=treeitem aria-label=特定平台安装说明><button aria-hidden=true></button><a title="支持的 Kubernetes 平台的额外安装流程。" href=/v1.1/zh/docs/setup/kubernetes/install/platform/>特定平台安装说明</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="如何使用阿里云 Kubernetes 容器服务快速安装 Istio。" href=/v1.1/zh/docs/setup/kubernetes/install/platform/alicloud/>阿里云</a></li><li role=none><a role=treeitem title="在 Google Kubernetes Engine (GKE) 上快速搭建 Istio 服务。" href=/v1.1/zh/docs/setup/kubernetes/install/platform/gke/>Google Kubernetes Engine</a></li><li role=none><a role=treeitem title="如何使用 IBM 公有云或 IBM 私有云快速安装 Istio。" href=/v1.1/zh/docs/setup/kubernetes/install/platform/ibm/>IBM Cloud</a></li></ul></li></ul></li><li role=treeitem aria-label=升级><button aria-hidden=true></button><a title="升级 Istio 的相关信息。" href=/v1.1/zh/docs/setup/kubernetes/upgrade/>升级</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="在升级到 Istio 1.1 之前，运维人员必须了解的重要更改。" href=/v1.1/zh/docs/setup/kubernetes/upgrade/notice/>1.1 升级通知</a></li><li role=none><a role=treeitem title="演示如何独立升级 Istio 控制平面和数据平面。" href=/v1.1/zh/docs/setup/kubernetes/upgrade/steps/>升级步骤</a></li></ul></li><li role=treeitem aria-label=更多指南><button aria-hidden=true></button><a title=有关其他设置任务的更多信息。 href=/v1.1/zh/docs/setup/kubernetes/additional-setup/>更多指南</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="Istio 内置的安装配置文件介绍。" href=/v1.1/zh/docs/setup/kubernetes/additional-setup/config-profiles/>安装配置</a></li><li role=none><a role=treeitem title="介绍两种将 Istio sidecar 注入应用 Pod 的方法：使用 Sidecar 注入 Webhook 自动完成，或使用 istioctl 客户端工具手工完成。" href=/v1.1/zh/docs/setup/kubernetes/additional-setup/sidecar-injection/>注入 Istio sidecar</a></li><li role=none><a role=treeitem title="这里讲述了 Istio 对 Kubernetes 中 Pod 和服务的要求。" href=/v1.1/zh/docs/setup/kubernetes/additional-setup/requirements/>Istio 对 Pod 和服务的要求</a></li><li role=none><a role=treeitem title="Istio CNI 插件的安装和使用 Istio，该插件让运维人员可以用较低的权限来完成网格服务的部署工作。" href=/v1.1/zh/docs/setup/kubernetes/additional-setup/cni/>Istio CNI 插件的安装和使用 Istio</a></li><li role=none><a role=treeitem title="部署在 Kubernetes 之中的 Istio 服务网格，将虚拟机和物理机集成进入到服务网格的方法。" href=/v1.1/zh/docs/setup/kubernetes/additional-setup/mesh-expansion/>网格扩展</a></li></ul></li></ul></li><li role=treeitem aria-label="Nomad &amp; Consul"><button aria-hidden=true></button><a title="基于 Consul 和 Nomad 安装 Istio 控制平面。" href=/v1.1/zh/docs/setup/consul/>Nomad &amp; Consul</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="通过 Docker Compose 快速安装 Istio service mesh。" href=/v1.1/zh/docs/setup/consul/quick-start/>通过 Docker 快速安装</a></li><li role=none><a role=treeitem title="基于 Consul 和 Nomad 安装 Istio 控制平面。" href=/v1.1/zh/docs/setup/consul/install/>安装</a></li></ul></li></ul></div></div><div class=card><button class="header dynamic" id=card49 title="如何用 Istio 系统实现特定目标的行为。" aria-controls=card49-body><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#tasks"/></svg>任务</button><div class=body aria-labelledby=card49 role=region id=card49-body><ul role=tree aria-expanded=true aria-labelledby=card49><li role=treeitem aria-label=流量管理><button aria-hidden=true></button><a title="演示 Istio 流量路由功能的任务。" href=/v1.1/zh/docs/tasks/traffic-management/>流量管理</a><ul role=group aria-expanded=false><li role=none><a role=treeitem title=此任务将说明如何将请求动态路由到多个版本的微服务。 href=/v1.1/zh/docs/tasks/traffic-management/request-routing/>配置请求路由</a></li><li role=none><a role=treeitem title=此任务说明如何注入延迟并测试应用程序的弹性。 href=/v1.1/zh/docs/tasks/traffic-management/fault-injection/>故障注入</a></li><li role=none><a role=treeitem title=向您展示如何将流量从旧版本迁移到新版本的服务。 href=/v1.1/zh/docs/tasks/traffic-management/traffic-shifting/>流量转移</a></li><li role=none><a role=treeitem title="展示如何将一个 TCP 服务的流量从老版本迁移到新版本。" href=/v1.1/zh/docs/tasks/traffic-management/tcp-traffic-shifting/>TCP 流量转移</a></li><li role=none><a role=treeitem title="本任务用于示范如何使用 Istio 在 Envoy 中设置请求超时。" href=/v1.1/zh/docs/tasks/traffic-management/request-timeouts/>设置请求超时</a></li><li role=none><a role=treeitem title="介绍在服务网格 Istio 中如何配置外部公开服务。" href=/v1.1/zh/docs/tasks/traffic-management/ingress/>控制 Ingress 流量</a></li><li role=treeitem aria-label="加密 Ingress Gateway"><button aria-hidden=true></button><a title="使用多种方法为 Gateway 控制器提供加密支持。" href=/v1.1/zh/docs/tasks/traffic-management/secure-ingress/>加密 Ingress Gateway</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="如何配置 Istio，借助 SDS（Secret 发现服务），使用 TLS 或双向 TLS 将服务开放到网格之外。" href=/v1.1/zh/docs/tasks/traffic-management/secure-ingress/sds/>使用 SDS 为 Gateway 提供 HTTPS 加密支持</a></li></ul></li><li role=none><a role=treeitem title="在 Istio 中配置从网格内访问外部服务的流量路由。" href=/v1.1/zh/docs/tasks/traffic-management/egress/>控制 Egress 流量</a></li><li role=none><a role=treeitem title=用连接、请求以及外部检测来进行熔断配置的过程。 href=/v1.1/zh/docs/tasks/traffic-management/circuit-breaking/>熔断</a></li><li role=none><a role=treeitem title="此任务演示了 Istio 的流量镜像功能。" href=/v1.1/zh/docs/tasks/traffic-management/mirroring/>镜像</a></li></ul></li><li role=treeitem aria-label=安全><button aria-hidden=true></button><a title=演示对服务网格进行安全加固的方法。 href=/v1.1/zh/docs/tasks/security/>安全</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="展示为 HTTP 服务设置基于角色的访问控制方法。" href=/v1.1/zh/docs/tasks/security/authz-http/>HTTP 服务的访问控制</a></li><li role=none><a role=treeitem title="整合 Vault CA 到 Istio 中为双向 TLS 提供 支持。" href=/v1.1/zh/docs/tasks/security/vault-ca/>Istio Vault CA 集成</a></li><li role=none><a role=treeitem title="有关如何在 Istio 中配置基于组的授权和配置列表类型声明的授权的教程。" href=/v1.1/zh/docs/tasks/security/rbac-groups/>基于组和列表类型声明的授权</a></li><li role=none><a role=treeitem title="介绍如何使用 Istio 认证策略设置双向 TLS 和基本的终端用户认证。" href=/v1.1/zh/docs/tasks/security/authn-policy/>基础认证策略</a></li><li role=none><a role=treeitem title="对 Istio 的自动双向 TLS 认证功能进行体验和测试。" href=/v1.1/zh/docs/tasks/security/mutual-tls/>深入了解双向 TLS</a></li><li role=none><a role=treeitem title=展示宽容模式的的鉴权过程。 href=/v1.1/zh/docs/tasks/security/authz-permissive/>鉴权过程中的宽容模式</a></li><li role=none><a role=treeitem title="展示如何为 TCP 服务设置基于角色的访问控制。" href=/v1.1/zh/docs/tasks/security/authz-tcp/>TCP 服务的访问控制</a></li><li role=none><a role=treeitem title=展示如何在服务网格中进行基于角色的访问控制。 href=/v1.1/zh/docs/tasks/security/role-based-access-control/>基于角色的访问控制</a></li><li role=none><a role=treeitem title="运维人员如何使用现有根证书配置 Citadel 进行证书以及密钥的签发。" href=/v1.1/zh/docs/tasks/security/plugin-ca-cert/>插入外部 CA 密钥和证书</a></li><li role=none><a role=treeitem title="如何在 Kubernetes 中启用 Citadel 的健康检查。" href=/v1.1/zh/docs/tasks/security/health-check/>Citadel 的健康检查</a></li><li role=none><a role=treeitem title="展示启用 SDS 来为 Istio 提供身份服务的过程。" href=/v1.1/zh/docs/tasks/security/auth-sds/>通过 SDS 提供身份服务</a></li><li role=none><a role=treeitem title="如何渐进式的为现有 Istio 服务添加双向 TLS 支持。" href=/v1.1/zh/docs/tasks/security/mtls-migration/>双向 TLS 的迁移</a></li><li role=none><a role=treeitem title="展示如何在 HTTPS 服务上启用双向 TLS。" href=/v1.1/zh/docs/tasks/security/https-overlay/>通过 HTTPS 进行双向 TLS</a></li></ul></li><li role=treeitem aria-label=策略><button aria-hidden=true></button><a title=演示策略实施功能。 href=/v1.1/zh/docs/tasks/policy-enforcement/>策略</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="本任务讲解如何启用 Istio 策略检查功能。" href=/v1.1/zh/docs/tasks/policy-enforcement/enabling-policy/>启用策略检查</a></li><li role=none><a role=treeitem title="这一任务展示了如何使用 Istio 动态的对服务通信进行速率限制。" href=/v1.1/zh/docs/tasks/policy-enforcement/rate-limiting/>启用速率限制</a></li><li role=none><a role=treeitem title="展示使用简单的 Denier 适配器或黑白名单对服务进行访问控制的方法。" href=/v1.1/zh/docs/tasks/policy-enforcement/denial-and-list/>Denier 适配器以及黑白名单</a></li><li role=none><a role=treeitem title="显示如何使用策略适配器修改请求 header 和路由。" href=/v1.1/zh/docs/tasks/policy-enforcement/control-headers/>控制 header 和路由</a></li></ul></li><li role=treeitem aria-label=遥测><button aria-hidden=true></button><a title=演示从服务网格收集遥测信息的方法。 href=/v1.1/zh/docs/tasks/telemetry/>遥测</a><ul role=group aria-expanded=false><li role=treeitem aria-label=指标度量><button aria-hidden=true></button><a title="演示 Istio 网格指标度量的配置、收集和处理。" href=/v1.1/zh/docs/tasks/telemetry/metrics/>指标度量</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="这一任务讲述如何配置 Istio，进行指标和日志的收集工作。" href=/v1.1/zh/docs/tasks/telemetry/metrics/collecting-metrics/>收集指标和日志</a></li><li role=none><a role=treeitem title="本任务展示了如何配置 Istio 进行 TCP 服务的指标收集。" href=/v1.1/zh/docs/tasks/telemetry/metrics/tcp-metrics/>获取 TCP 服务指标</a></li><li role=none><a role=treeitem title="此任务说明如何使用 Prometheus 查询 Istio 指标。" href=/v1.1/zh/docs/tasks/telemetry/metrics/querying-metrics/>查询 Prometheus 的指标</a></li><li role=none><a role=treeitem title="这个任务向您展示了如何设置和使用 Istio 仪表盘来监视网格流量。" href=/v1.1/zh/docs/tasks/telemetry/metrics/using-istio-dashboard/>使用 Grafana 可视化指标度量</a></li></ul></li><li role=treeitem aria-label=日志><button aria-hidden=true></button><a title="演示 Istio 网格日志的配置、收集和处理。" href=/v1.1/zh/docs/tasks/telemetry/logs/>日志</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="这一任务讲述如何配置 Istio，进行日志的收集工作。" href=/v1.1/zh/docs/tasks/telemetry/logs/collecting-logs/>收集日志</a></li><li role=none><a role=treeitem title="此任务向您展示如何配置 Envoy 代理将访问日志打印到其标准输出。" href=/v1.1/zh/docs/tasks/telemetry/logs/access-log/>获取 Envoy 访问日志</a></li><li role=none><a role=treeitem title="此任务说明如何配置 Istio 以将日志输出到 Fluentd 守护程序。" href=/v1.1/zh/docs/tasks/telemetry/logs/fluentd/>使用 Fluentd 记录日志</a></li></ul></li><li role=treeitem aria-label=分布式追踪><button aria-hidden=true></button><a title="该任务展示了如何为启用了 Istio 支持的应用进行追踪。" href=/v1.1/zh/docs/tasks/telemetry/distributed-tracing/>分布式追踪</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="Istio 分布式追踪概述。" href=/v1.1/zh/docs/tasks/telemetry/distributed-tracing/overview/>概述</a></li><li role=none><a role=treeitem title="了解如何配置代理以向 Jaeger 发送追踪请求。" href=/v1.1/zh/docs/tasks/telemetry/distributed-tracing/jaeger/>Jaeger</a></li><li role=none><a role=treeitem title="了解如何配置代理以向 Zipkin 发送追踪请求。" href=/v1.1/zh/docs/tasks/telemetry/distributed-tracing/zipkin/>Zipkin</a></li><li role=none><a role=treeitem title="如何配置代理以发送请求至 LightStep [𝑥]PM." href=/v1.1/zh/docs/tasks/telemetry/distributed-tracing/lightstep/>使用 LightStep [𝑥]PM 进行分布式追踪</a></li></ul></li><li role=none><a role=treeitem title="本任务展示了在 Istio 网格中对服务进行可视化的过程。" href=/v1.1/zh/docs/tasks/telemetry/kiali/>网格可视化</a></li><li role=none><a role=treeitem title="本任务展示了为 Istio 遥测插件配置外部访问的过程。" href=/v1.1/zh/docs/tasks/telemetry/gateways/>遥测插件的远程访问</a></li></ul></li></ul></div></div><div class=card><button class="header dynamic" id=card84 title="这里包括多个可供 Istio 使用的可完整工作的示例，你可以用来亲自部署和体验这些示例。" aria-controls=card84-body><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#examples"/></svg>示例</button><div class=body aria-labelledby=card84 role=region id=card84-body><ul role=tree aria-expanded=true aria-labelledby=card84><li role=none><a role=treeitem title="部署一个用于演示多种 Istio 特性的应用，由四个单独的微服务构成。" href=/v1.1/zh/docs/examples/bookinfo/>Bookinfo 应用</a></li><li role=none><a role=treeitem title="如何在 Istio 服务网格中使用多种流量管理功能。" href=/v1.1/zh/docs/examples/intelligent-routing/>智能路由</a></li><li role=none><a role=treeitem title="演示如何使用 Istio Mixer 和 Istio sidecar 获取指标和日志，并在不同的服务间进行追踪。" href=/v1.1/zh/docs/examples/telemetry/>深入遥测</a></li><li role=none><a role=treeitem title="说明如何在谷歌云 Endpoints 服务中手动整合 Istio。" href=/v1.1/zh/docs/examples/endpoints/>在谷歌云 Endpoints 服务中安装 Istio</a></li><li role=none><a role=treeitem title="在单一服务网格中，如何使用 Istio 对 Kubernetes 集群以及虚拟机进行控制。" href=/v1.1/zh/docs/examples/integrating-vms/>虚拟机集成</a></li><li role=treeitem aria-label=边缘流量控制><button aria-hidden=true></button><a title="用于管理 Istio 服务网格的边缘流量（即 Ingress 和 Egress 流量）的各种高级示例。" href=/v1.1/zh/docs/examples/advanced-gateways/>边缘流量控制</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="介绍如何为入口网关配置 SNI 直通。" href=/v1.1/zh/docs/examples/advanced-gateways/ingress-sni-passthrough/>没有 TLS 的 Ingress gateway</a></li><li role=none><a role=treeitem title="描述如何通过专用网关服务将流量定向到外部服务来配置 Istio。" href=/v1.1/zh/docs/examples/advanced-gateways/egress-gateway/>配置 Egress gateway</a></li><li role=none><a role=treeitem title="描述了配置 Egress 网关来发起对外部服务进行 TLS 通信的过程。" href=/v1.1/zh/docs/examples/advanced-gateways/egress-gateway-tls-origination/>Egress 网关的 TLS 发起过程</a></li><li role=none><a role=treeitem title="此任务描述 Istio 如何配置出口流量的 TLS。" href=/v1.1/zh/docs/examples/advanced-gateways/egress-tls-origination/>出口流量的 TLS</a></li><li role=none><a role=treeitem title="介绍如何为公共域中的一组主机启用 Egress 流量，而不是单独配置每个主机。" href=/v1.1/zh/docs/examples/advanced-gateways/wildcard-egress-hosts/>使用通配符主机配置 Egress 流量</a></li><li role=none><a role=treeitem title="如何为 Egress TLS 流量配置 SNI 监控并应用策略。" href=/v1.1/zh/docs/examples/advanced-gateways/egress_sni_monitoring_and_policies/>Egress TLS 流量中的 SNI 监控及策略</a></li><li role=none><a role=treeitem title="描述如何配置 Istio 以允许应用程序使用外部 HTTPS 代理。" href=/v1.1/zh/docs/examples/advanced-gateways/http-proxy/>连接到外部 HTTPS 代理</a></li><li role=none><a role=treeitem title="展示使用 cert-Manager 为 Kubernetes Ingress 获取 Let's Encrypt TLS 证书的过程。" href=/v1.1/zh/docs/examples/advanced-gateways/ingress-certmgr/>使用 cert-manager 加密 Kubernetes Ingress</a></li></ul></li><li role=treeitem aria-label=单一三层网络的多集群网格><button aria-hidden=true></button><a title="您可以尝试各种基于 VPN 的 Istio 多集群示例。" href=/v1.1/zh/docs/examples/multicluster/>单一三层网络的多集群网格</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title=在一个使用网关进行连接的多集群网格中配置远程服务。 href=/v1.1/zh/docs/examples/multicluster/gateways/>通过网关进行连接的多集群</a></li><li role=none><a role=treeitem title="基于 GKE 的 Istio 多集群安装。" href=/v1.1/zh/docs/examples/multicluster/gke/>Google Kubernetes Engine</a></li><li role=none><a role=treeitem title="多 IBM Cloud Private 集群安装 Istio 示例。" href=/v1.1/zh/docs/examples/multicluster/icp/>IBM Cloud Private</a></li><li role=none><a role=treeitem title="IBM Cloud Kubernetes Service 和 IBM Cloud Private 之间的多集群示例。" href=/v1.1/zh/docs/examples/multicluster/iks-icp/>IBM Cloud Kubernetes Service &amp; IBM Cloud Private</a></li><li role=none><a role=treeitem title="利用 Istio 的水平分割 EDS 来创建多集群网格。" href=/v1.1/zh/docs/examples/multicluster/split-horizon-eds/>集群感知的服务路由</a></li></ul></li></ul></div></div><div class=card><button class="header dynamic" id=card114 title="参考部分包含详细的权威参考资料，如命令行选项、配置选项和 API 调用参数。" aria-controls=card114-body><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#reference"/></svg>参考</button><div class=body aria-labelledby=card114 role=region id=card114-body><ul role=tree aria-expanded=true aria-labelledby=card114><li role=treeitem aria-label=配置><button aria-hidden=true></button><a title=关于配置选项的详细信息。 href=/v1.1/zh/docs/reference/config/>配置</a><ul role=group aria-expanded=false><li role=treeitem aria-label=流量管理><button aria-hidden=true></button><a title="描述如何配置 HTTP/TCP 路由功能。" href=/v1.1/zh/docs/reference/config/networking/>流量管理</a><ul role=group aria-expanded=false class=leaf-section></ul></li><li role=none><a role=treeitem title="描述了使用 Helm chart 安装 Istio 时可以使用的选项。" href=/v1.1/zh/docs/reference/config/installation-options/>安装选项</a></li><li role=none><a role=treeitem title="详细描述 release-1.0 和 release-1.1 之间 Helm chart 安装选项的差异。" href=/v1.1/zh/docs/reference/config/installation-options-changes/>安装选项的变更</a></li><li role=treeitem aria-label=授权><button aria-hidden=true></button><a title=关于如何配置Istio授权特性的描述。 href=/v1.1/zh/docs/reference/config/authorization/>授权</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title=描述所支持的约束和属性。 href=/v1.1/zh/docs/reference/config/authorization/constraints-and-properties/>约束和属性</a></li><li role=none><a role=treeitem title=配置基于角色的访问控制。 href=/v1.1/zh/docs/reference/config/authorization/istio.rbac.v1alpha1/>RBAC</a></li></ul></li><li role=treeitem aria-label=策略和遥测><button aria-hidden=true></button><a title="描述如何配置 Istio 的策略和遥测功能。" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/>策略和遥测</a><ul role=group aria-expanded=false><li role=none><a role=treeitem title=介绍策略和控制中会用到的一些基础属性词汇。 href=/v1.1/zh/docs/reference/config/policy-and-telemetry/attribute-vocabulary/>属性词汇</a></li><li role=none><a role=treeitem title="Mixer 的配置表达式语言参考。" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/expression-language/>表达式语言</a></li><li role=treeitem aria-label=适配器><button aria-hidden=true></button><a title="Mixer 适配器能够让 Istio 连接各种基础设施后端以完成类似指标和日志这样的功能。" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/>适配器</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="Apigee 的分布式策略检查以及分析适配器。" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/apigee/>Apigee</a></li><li role=none><a role=treeitem title="适用于 circonus.com 的监控解决方案。" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/circonus/>Circonus</a></li><li role=none><a role=treeitem title="CloudMonitor 适配器使 Istio 可以向 AliCloud CloudMonitor 提供指标。" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/cloudmonitor/>CloudMonitor</a></li><li role=none><a role=treeitem title=始终返回按前提条件拒绝的适配器。 href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/denier/>Denier</a></li><li role=none><a role=treeitem title="用于将日志发送给 Fluentd 守护进程的适配器。" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/fluentd/>Fluentd</a></li><li role=none><a role=treeitem title="将指标发送到 SignalFx 的适配器。" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/signalfx/>SignalFx</a></li><li role=none><a role=treeitem title="从 Kubernetes 环境中获取集群信息。" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/kubernetesenv/>Kubernetes Env</a></li><li role=none><a role=treeitem title=用于执行黑名单或白名单检测的适配器。 href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/list/>List</a></li><li role=none><a role=treeitem title=简单内存配额管理系统适配器。 href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/memquota/>Memory quota</a></li><li role=none><a role=treeitem title="基于 Redis 的配额管理系统。" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/redisquota/>Redis Quota</a></li><li role=none><a role=treeitem title="用于向 Google Service Control 发送日志和指标的适配器。" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/servicecontrol/>Service Control</a></li><li role=none><a role=treeitem title="该适配器用于向 statsd 后端发送指标数据。" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/statsd/>statsd</a></li><li role=none><a role=treeitem title=该适配器可以在本地输出日志和指标。 href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/stdio/>Stdio</a></li></ul></li><li role=treeitem aria-label=模板><button aria-hidden=true></button><a title="Mixer 模板用于将数据发送到各个适配器。" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/>模板</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="该模板用于表达一个 API Key。" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/apikey/>API Key</a></li><li role=none><a role=treeitem title="Analytics 模板用于向 Apigee 发送运行时遥测数据。" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/analytics/>Analytics</a></li><li role=none><a role=treeitem title=该模版用于访问控制查询。 href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/authorization/>Authorization</a></li><li role=none><a role=treeitem title=该模板不包含任何数据，用于测试。 href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/checknothing/>Check Nothing</a></li><li role=none><a role=treeitem title="用于生成 Kubernetes 的特定属性。" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/kubernetes/>Kubernetes</a></li><li role=none><a role=treeitem title=该模板用于执行列表检查操作。 href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/listentry/>List Entry</a></li><li role=none><a role=treeitem title=该模板用于表达一条运行时日志项。 href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/logentry/>Log Entry</a></li><li role=none><a role=treeitem title=该模板用于表达一个运行时产生的监控指标数据。 href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/metric/>Metric</a></li><li role=none><a role=treeitem title=该模板用于表达占用配额的请求。 href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/quota/>Quota</a></li><li role=none><a role=treeitem title=该模板不包含数据，用于测试。 href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/reportnothing/>Report Nothing</a></li><li role=none><a role=treeitem title="用于 Google Service Control 适配器的模板。" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/servicecontrolreport/>Service Control Report</a></li><li role=none><a role=treeitem title="该模板用于表达分布式追踪数据中的一个 Span。" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/tracespan/>Trace Span</a></li></ul></li><li role=none><a role=treeitem title="通过 Mixer 从 Istio 导出的默认监控指标。" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/metrics/>默认监控指标</a></li></ul></li><li role=none><a role=treeitem title=流量路由配置。 href=/v1.1/zh/docs/reference/config/istio.networking.v1alpha3/>通信路由</a></li></ul></li><li role=treeitem aria-label=命令><button aria-hidden=true></button><a title="描述 Istio 命令和工具的用法及选项。" href=/v1.1/zh/docs/reference/commands/>命令</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="Galley 为 Istio 提供配置管理服务。" href=/v1.1/zh/docs/reference/commands/galley/>galley</a></li><li role=none><a role=treeitem title="自动注入 Istio sidecar 的 Kubernetes webhook。" href=/v1.1/zh/docs/reference/commands/sidecar-injector/>sidecar-injector</a></li><li role=none><a role=treeitem title="Istio 控制界面。" href=/v1.1/zh/docs/reference/commands/istioctl/>istioctl</a></li><li role=none><a role=treeitem title="Istio 证书颁发（CA）。" href=/v1.1/zh/docs/reference/commands/istio_ca/>istio_ca</a></li><li role=none><a role=treeitem title="用于触发直接调用 Mixer API 的实用程序。" href=/v1.1/zh/docs/reference/commands/mixc/>mixc</a></li><li role=none><a role=treeitem title="Mixer 是 Istio 在后端基础设施之上的抽象。" href=/v1.1/zh/docs/reference/commands/mixs/>mixs</a></li><li role=none><a role=treeitem title="节点一级的 Istio 安全代理。" href=/v1.1/zh/docs/reference/commands/node_agent/>node_agent</a></li><li role=none><a role=treeitem title="Istio Pilot。" href=/v1.1/zh/docs/reference/commands/pilot-discovery/>pilot-discovery</a></li></ul></li></ul></div></div></div></nav></div><div class=article-container><button tabindex=-1 id=sidebar-toggler title=折叠导航栏><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#pull"/></svg></button><nav aria-label=Breadcrumb><ol><li><a href=/v1.1/zh/>Istio</a></li><li><a href=/v1.1/zh/docs/ title="了解如何部署、使用和运维 Istio。">文档</a></li><li><a href=/v1.1/zh/docs/concepts/ title="一些概念，理解它们有助于您更好地了解 Istio 系统的不同部分及其使用的抽象。">概念</a></li><li>安全</li></ol></nav><article aria-labelledby=title><div class=title-area><div><h1 id=title>安全</h1><p class=byline><span title="1388 字"><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#clock"/></svg><span>&nbsp;</span>阅读大约需要 7 分钟</span></p></div></div><nav class=toc-inlined aria-label="Table of Contents"><div><hr><ol><li role=none aria-label=高级架构><a href=#%e9%ab%98%e7%ba%a7%e6%9e%b6%e6%9e%84>高级架构</a><li role=none aria-label="Istio 身份"><a href=#istio-%e8%ba%ab%e4%bb%bd>Istio 身份</a><ol><li role=none aria-label="Istio 安全与 SPIFFE"><a href=#istio-%e5%ae%89%e5%85%a8%e4%b8%8e-spiffe>Istio 安全与 SPIFFE</a></ol></li><li role=none aria-label=PKI><a href=#pki>PKI</a><ol><li role=none aria-label="Kubernetes 方案"><a href=#kubernetes-%e6%96%b9%e6%a1%88>Kubernetes 方案</a><li role=none aria-label=本地机器方案><a href=#%e6%9c%ac%e5%9c%b0%e6%9c%ba%e5%99%a8%e6%96%b9%e6%a1%88>本地机器方案</a><li role=none aria-label="Kubernetes 中的代理节点"><a href=#kubernetes-%e4%b8%ad%e7%9a%84%e4%bb%a3%e7%90%86%e8%8a%82%e7%82%b9>Kubernetes 中的代理节点</a></ol></li><li role=none aria-label=最佳实践><a href=#%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5>最佳实践</a><ol><li role=none aria-label=部署指南><a href=#%e9%83%a8%e7%bd%b2%e6%8c%87%e5%8d%97>部署指南</a><li role=none aria-label=示例><a href=#%e7%a4%ba%e4%be%8b>示例</a></ol></li><li role=none aria-label=认证><a href=#%e8%ae%a4%e8%af%81>认证</a><ol><li role=none aria-label="双向 TLS 认证"><a href=#%e5%8f%8c%e5%90%91-tls-%e8%ae%a4%e8%af%81>双向 TLS 认证</a><ol><li role=none aria-label=宽容模式><a href=#%e5%ae%bd%e5%ae%b9%e6%a8%a1%e5%bc%8f>宽容模式</a><li role=none aria-label=安全命名><a href=#%e5%ae%89%e5%85%a8%e5%91%bd%e5%90%8d>安全命名</a></ol></li><li role=none aria-label=认证架构><a href=#%e8%ae%a4%e8%af%81%e6%9e%b6%e6%9e%84>认证架构</a><li role=none aria-label=认证策略><a href=#%e8%ae%a4%e8%af%81%e7%ad%96%e7%95%a5>认证策略</a><ol><li role=none aria-label=策略存储范围><a href=#%e7%ad%96%e7%95%a5%e5%ad%98%e5%82%a8%e8%8c%83%e5%9b%b4>策略存储范围</a><li role=none aria-label=目标选择器><a href=#%e7%9b%ae%e6%a0%87%e9%80%89%e6%8b%a9%e5%99%a8>目标选择器</a><li role=none aria-label=传输认证><a href=#%e4%bc%a0%e8%be%93%e8%ae%a4%e8%af%81>传输认证</a><li role=none aria-label=来源身份认证><a href=#%e6%9d%a5%e6%ba%90%e8%ba%ab%e4%bb%bd%e8%ae%a4%e8%af%81>来源身份认证</a><li role=none aria-label=主认证绑定><a href=#%e4%b8%bb%e8%ae%a4%e8%af%81%e7%bb%91%e5%ae%9a>主认证绑定</a></ol></li><li role=none aria-label=更新认证策略><a href=#%e6%9b%b4%e6%96%b0%e8%ae%a4%e8%af%81%e7%ad%96%e7%95%a5>更新认证策略</a></ol></li><li role=none aria-label=授权><a href=#%e6%8e%88%e6%9d%83>授权</a><ol><li role=none aria-label=授权架构><a href=#%e6%8e%88%e6%9d%83%e6%9e%b6%e6%9e%84>授权架构</a><li role=none aria-label=启用授权><a href=#%e5%90%af%e7%94%a8%e6%8e%88%e6%9d%83>启用授权</a><li role=none aria-label=授权策略><a href=#%e6%8e%88%e6%9d%83%e7%ad%96%e7%95%a5>授权策略</a><ol><li role=none aria-label=ServiceRole><a href=#servicerole><code>ServiceRole</code></a><li role=none aria-label=ServiceRoleBinding><a href=#servicerolebinding><code>ServiceRoleBinding</code></a></ol></li><li role=none aria-label="在普通 TCP 协议上使用 Istio 认证"><a href=#%e5%9c%a8%e6%99%ae%e9%80%9a-tcp-%e5%8d%8f%e8%ae%ae%e4%b8%8a%e4%bd%bf%e7%94%a8-istio-%e8%ae%a4%e8%af%81>在普通 TCP 协议上使用 Istio 认证</a><li role=none aria-label=授权宽容模式><a href=#%e6%8e%88%e6%9d%83%e5%ae%bd%e5%ae%b9%e6%a8%a1%e5%bc%8f>授权宽容模式</a><li role=none aria-label=使用其他授权机制><a href=#%e4%bd%bf%e7%94%a8%e5%85%b6%e4%bb%96%e6%8e%88%e6%9d%83%e6%9c%ba%e5%88%b6>使用其他授权机制</a></ol></li><li role=none aria-label=相关内容><a href=#see-also>相关内容</a></li></ol><hr></div></nav><p>将单一应用程序分解为微服务可提供各种好处，包括更好的灵活性、可伸缩性以及服务复用的能力。但是，微服务也有特殊的安全需求：</p><ul><li>为了抵御中间人攻击，需要流量加密。</li><li>为了提供灵活的服务访问控制，需要双向 TLS 和细粒度的访问策略。</li><li>要审核谁在什么时候做了什么，需要审计工具。</li></ul><p>Istio Security 尝试提供全面的安全解决方案来解决所有这些问题。</p><p>本页概述了如何使用 Istio 的安全功能来保护您的服务，无论您在何处运行它们。特别是 Istio 安全性可以缓解针对您的数据，端点，通信和平台的内部和外部威胁。</p><figure style=width:80%><div class=wrapper-with-intrinsic-ratio style=padding-bottom:56.25%><a data-skipendnotes=true href=/v1.1/docs/concepts/security/overview.svg title="Istio 安全概述"><img class=element-to-stretch src=/v1.1/docs/concepts/security/overview.svg alt="Istio 安全模型的组件构成。"></a></div><figcaption>Istio 安全概述</figcaption></figure><p>Istio 安全功能提供强大的身份，强大的策略，透明的 TLS 加密以及用于保护您的服务和数据的身份验证，授权和审计（AAA）工具。 Istio 安全的目标是：</p><ul><li><p><strong>默认安全</strong> : 应用程序代码和基础结构无需更改</p></li><li><p><strong>深度防御</strong> : 与现有安全系统集成，提供多层防御</p></li><li><p><strong>零信任网络</strong> : 在不受信任的网络上构建安全解决方案</p></li></ul><p>请访问我们的<a href=/v1.1/zh/docs/tasks/security/mtls-migration/>双向 TLS 迁移</a>相关文章，开始在部署的服务中使用 Istio 安全功能。
请访问我们的<a href=/v1.1/zh/docs/tasks/security/>安全任务</a>，有关使用安全功能的详细说明。</p><p>如图所示，Istio 的 Citadel 用加载 Secret 卷的方式在 Kubernetes 容器中完成证书和密钥的分发。如果服务运行在虚拟机或物理机上，则会使用运行在本地的 Node agent，它负责在本地生成私钥和 CSR（证书签发申请），把 CSR 发送给 Citadel 进行签署，并把生成的证书和私钥分发给 Envoy。</p><h2 id=高级架构>高级架构</h2><p>Istio 中的安全性涉及多个组件：</p><ul><li><p><strong>Citadel</strong> 用于密钥和证书管理</p></li><li><p><strong>Sidecar 和周边代理</strong> 实现客户端和服务器之间的安全通信</p></li><li><p><strong>Pilot</strong> 将<a href=/v1.1/zh/docs/concepts/security/#授权策略>授权策略</a>和<a href=/v1.1/zh/docs/concepts/security/#安全命名>安全命名信息</a>分发给代理</p></li><li><p><strong>Mixer</strong> 管理授权和审计</p></li></ul><figure style=width:80%><div class=wrapper-with-intrinsic-ratio style=padding-bottom:56.25%><a data-skipendnotes=true href=/v1.1/docs/concepts/security/architecture.svg title="Istio 安全架构"><img class=element-to-stretch src=/v1.1/docs/concepts/security/architecture.svg alt="Istio 安全架构"></a></div><figcaption>Istio 安全架构</figcaption></figure><p>在下面的部分中，我们将详细介绍 Istio 安全功能。</p><h2 id=istio-身份>Istio 身份</h2><p>身份是任何安全基础架构的基本概念。在服务到服务通信开始时，双方必须与其身份信息交换凭证以用于相互认证目的。
在客户端，根据<a href=/v1.1/zh/docs/concepts/security/#安全命名>安全命名</a>信息检查服务器的标识，以查看它是否是该服务的授权运行程序。
在服务器端，服务器可以根据<a href=/v1.1/zh/docs/concepts/security/#授权策略>授权策略</a>确定客户端可以访问哪些信息，审核谁在什么时间访问了什么，根据服务向客户收费他们使用并拒绝任何未能支付账单的客户访问服务。</p><p>在 Istio 身份模型中，Istio 使用一流的服务标识来确定服务的身份。
这为表示人类用户，单个服务或一组服务提供了极大的灵活性和粒度。
在没有此类身份的平台上，Istio 可以使用可以对服务实例进行分组的其他身份，例如服务名称。</p><p>不同平台上的 Istio 服务标识：</p><ul><li><p><strong>Kubernetes</strong>: Kubernetes 服务帐户</p></li><li><p><strong>GKE/GCE</strong>: 可以使用 GCP 服务帐户</p></li><li><p><strong>GCP</strong>: GCP 服务帐户</p></li><li><p><strong>AWS</strong>: AWS IAM 用户/角色 帐户</p></li><li><p><strong>On-premises （非 Kubernetes）</strong>: 用户帐户、自定义服务帐户、服务名称、Istio 服务帐户或 GCP 服务帐户。</p></li></ul><p>自定义服务帐户引用现有服务帐户，就像客户的身份目录管理的身份一样。</p><h3 id=istio-安全与-spiffe>Istio 安全与 SPIFFE</h3><p><a href=https://spiffe.io/>SPIFFE</a> 标准提供了一个框架规范，该框架能够跨异构环境引导和向服务发布身份。</p><p>Istio 和 SPIFFE 共享相同的身份文件：<a href=https://github.com/spiffe/spiffe/blob/master/standards/SPIFFE-ID.md>SVID</a>（SPIFFE 可验证身份证件）。
例如，在 Kubernetes 中，X.509 证书的 URI 字段格式为 <code>spiffe://&lt;domain&gt;/ns/&lt;namespace&gt;/sa/&lt;serviceaccount&gt;</code>。
这使 Istio 服务能够建立和接受与其他 SPIFFE 兼容系统的连接。</p><p>Istio 安全性和 <a href=https://spiffe.io/spire/>SPIRE</a>，它是 SPIFFE 的实现，在 PKI 实现细节上有所不同。Istio 提供更全面的安全解决方案，包括身份验证、授权和审计。</p><h2 id=pki>PKI</h2><p>Istio PKI 建立在 Istio Citadel 之上，可为每个工作负载安全地提供强大的工作负载标识。
Istio 使用 X.509 证书来携带 <a href=https://spiffe.io/>SPIFFE</a> 格式的身份。
PKI 还可以大规模自动化密钥和证书轮换。</p><p>Istio 支持在 Kubernetes pod 和本地计算机上运行的服务。
目前，我们为每个方案使用不同的证书密钥配置机制。</p><h3 id=kubernetes-方案>Kubernetes 方案</h3><ol><li><p>Citadel 监视 Kubernetes <code>apiserver</code>，为每个现有和新的服务帐户创建 SPIFFE 证书和密钥对。Citadel 将证书和密钥对存储为 <a href=https://kubernetes.io/docs/concepts/configuration/secret/>Kubernetes secret</a>。</p></li><li><p>创建 pod 时，Kubernetes 会根据其服务帐户通过 <a href=https://kubernetes.io/docs/concepts/storage/volumes/#secret>Kubernetes secret volume</a> 将证书和密钥对挂载到 pod。</p></li><li><p>Citadel 监视每个证书的生命周期，并通过重写 Kubernetes 秘密自动轮换证书。</p></li><li><p>Pilot 生成<a href=/v1.1/zh/docs/concepts/security/#安全命名>安全命名</a>信息，该信息定义了哪些 Service Account 可以运行哪些服务。Pilot 然后将安全命名信息传递给 envoy sidecar。</p></li></ol><h3 id=本地机器方案>本地机器方案</h3><ol><li><p>Citadel 创建 gRPC 服务来接受<a href=https://en.wikipedia.org/wiki/Certificate_signing_request>证书签名请求</a>（CSR）。</p></li><li><p>节点代理生成私钥和 CSR，并将 CSR 及其凭据发送给 Citadel 进行签名。</p></li><li><p>Citadel 验证 CSR 承载的凭证，并签署 CSR 以生成证书。</p></li><li><p>节点代理将从 Citadel 接收的证书和私钥发送给 Envoy。</p></li><li><p>上述 CSR 过程会定期重复进行证书和密钥轮换。</p></li></ol><h3 id=kubernetes-中的代理节点>Kubernetes 中的代理节点</h3><p>Istio 提供了在 Kubernetes 中使用节点代理进行证书和密钥分配的选项，如下图所示。请注意，本地计算机的标识提供流程是相同的，因此我们仅描述 Kubernetes 方案。</p><figure style=width:80%><div class=wrapper-with-intrinsic-ratio style=padding-bottom:56.25%><a data-skipendnotes=true href=/v1.1/docs/concepts/security/node_agent.svg title="PKI 与 Kubernetes 中的节点代理"><img class=element-to-stretch src=/v1.1/docs/concepts/security/node_agent.svg alt="PKI 与 Kubernetes 中的节点代理"></a></div><figcaption>PKI 与 Kubernetes 中的节点代理</figcaption></figure><p>流程如下：</p><ol><li><p>Citadel 创建一个 gRPC 服务来接受 CSR 请求。</p></li><li><p>Envoy 通过 Envoy secret 发现服务（SDS）API 发送证书和密钥请求。</p></li><li><p>收到 SDS 请求后，节点代理会创建私钥和 CSR，并将 CSR 及其凭据发送给 Citadel 进行签名。</p></li><li><p>Citadel 验证 CSR 中携带的凭证，并签署 CSR 以生成证书。</p></li><li><p>节点代理通过 Envoy SDS API 将从 Citadel 接收的证书和私钥发送给 Envoy。</p></li><li><p>上述 CSR 过程会定期重复进行证书和密钥轮换。</p></li></ol><h2 id=最佳实践>最佳实践</h2><p>在本节中，我们提供了一些部署指南并讨论了一个真实的场景。</p><h3 id=部署指南>部署指南</h3><p>如果有多个服务运维团队（又名 <a href=https://en.wikipedia.org/wiki/Site_reliability_engineering>SREs</a>）在中型或大型集群中部署不同的服务，我们建议创建一个单独的 <a href=https://kubernetes.io/docs/tasks/administer-cluster/namespaces-walkthrough/>Kubernetes 命名空间</a>让每个 SRE 团队隔离他们的访问权限。例如，您可以为 <code>team1</code> 创建 <code>team1-ns</code> 命名空间，为 <code>team2</code> 创建 <code>team2-ns</code> 命名空间，这样两个团队都无法访问彼此的服务。</p><div><aside class="callout warning"><div class=type><svg class="large-icon"><use xlink:href="/v1.1/img/icons.svg#callout-warning"/></svg></div><div class=content>如果 Citadel 遭到入侵，则可能会暴露集群中的所有托管密钥和证书。我们强烈建议在专用命名空间中运行 Citadel（例如，<code>istio-citadel-ns</code>），以便仅限管理员访问集群。</div></aside></div><h3 id=示例>示例</h3><p>让我们考虑一个带有三种服务的三层应用程序：<code>photo-frontend</code>，<code>photo-backend</code> 和 <code>datastore</code>。照片 SRE 团队管理 <code>photo-frontend</code> 和 <code>photo-backend</code> 服务，而数据存储 SRE 团队管理 <code>datastore</code> 服务。 <code>photo-frontend</code> 服务可以访问 <code>photo-backend</code>，<code>photo-backend</code> 服务可以访问 <code>datastore</code>。但是，<code>photo-frontend</code> 服务无法访问 <code>datastore</code>。</p><p>在这种情况下，集群管理员创建三个命名空间：<code>istio-citadel-ns</code>，<code>photo-ns</code> 和 <code>datastore-ns</code>。管理员可以访问所有命名空间，每个团队只能访问自己的命名空间。照片 SRE 团队创建了两个服务帐户，分别在 <code>photo-ns</code> 命名空间中运行 <code>photo-frontend</code> 和 <code>photo-backend</code>。数据存储区 SRE 团队创建一个服务帐户，以在 <code>datastore-ns</code> 命名空间中运行 <code>datastore</code> 服务。此外，我们需要在 <a href=/v1.1/zh/docs/concepts/policies-and-telemetry/>Istio Mixer</a> 中强制执行服务访问控制，使得 <code>photo-frontend</code> 无法访问数据存储区。</p><p>在此设置中，Kubernetes 可以隔离运营商管理服务的权限。 Istio 管理所有命名空间中的证书和密钥，并对服务实施不同的访问控制规则。</p><h2 id=认证>认证</h2><p>Istio 提供两种类型的身份验证：</p><ul><li><p><strong>传输身份验证</strong>，也称为<strong>服务到服务身份验证</strong>：验证建立连接的直接客户端。
Istio 提供 <a href=https://en.wikipedia.org/wiki/Mutual_authentication>双向 TLS</a> 作为传输身份验证的完整堆栈解决方案。
您可以轻松打开此功能，而无需更改服务代码。这个解决方案：</p><ul><li>为每个服务提供强大的身份，表示其角色，以实现跨集群和云的互操作性。</li><li>保护服务到服务通信和最终用户到服务通信。</li><li>提供密钥管理系统，以自动执行密钥和证书生成，分发和轮换。</li></ul></li><li><p><strong>来源身份认证</strong>，也称为<strong>最终用户身份验证</strong>：验证作为最终用户或设备发出请求的原始客户端。Istio 通过 JSON Web Token（JWT）验证和 <a href=https://auth0.com/><code>Auth0</code></a>、<a href=https://firebase.google.com/docs/auth/><code>Firebase Auth</code></a> 、<a href=https://developers.google.com/identity/protocols/OpenIDConnect><code>Google Auth</code></a> 和自定义身份验证来简化开发人员体验，并且轻松实现请求级别的身份验证。</p></li></ul><p>在这两种情况下，Istio 都通过自定义 Kubernetes API 将身份认证策略存储在 <code>Istio 配置存储</code>中。 Pilot 会在适当的时候为每个代理保持最新状态以及密钥。此外，Istio 支持在宽容模式下进行身份验证，以帮助您了解策略更改在其生效之前如何影响您的安全状态。</p><h3 id=双向-tls-认证>双向 TLS 认证</h3><p>Istio 隧道通过客户端和服务器端进行服务到服务通信 <a href=https://envoyproxy.github.io/envoy/>Envoy 代理</a>。对于客户端调用服务器，遵循的步骤是：</p><ol><li><p>Istio 将出站流量从客户端重新路由到客户端的本地 sidecar Envoy。</p></li><li><p>客户端 Envoy 和服务器端 Envoy 建立了一个双向的 TLS 连接，Istio 将流量从客户端 Envoy 转发到服务器端 Envoy。</p></li><li><p>授权后，服务器端 Envoy 通过本地 TCP 连接将流量转发到服务器服务。</p></li></ol><h4 id=宽容模式>宽容模式</h4><p>Istio 双向 TLS 具有一个宽容模式（permissive mode），允许 service 同时接受纯文本流量和双向 TLS 流量。这个功能极大的提升了双向 TLS 的入门体验。</p><p>在运维人员希望将服务移植到启用了双向 TLS 的 Istio 上时，许多非 Istio 客户端和非 Istio 服务端通信时会产生问题。通常情况下，运维人员无法同时为所有客户端安装 Istio sidecar，甚至没有这样做的权限。即使在服务端上安装了 Istio sidecar，运维人员也无法在不中断现有连接的情况下启用双向 TLS。</p><p>启用宽容模式后，服务同时接受纯文本和双向 TLS 流量。这个模式为入门提供了极大的灵活性。服务中安装的 Istio sidecar 立即接受双向 TLS 流量而不会打断现有的纯文本流量。因此，运维人员可以逐步安装和配置客户端 Istio sidecars 发送双向 TLS 流量。一旦客户端配置完成，运维人员便可以将服务端配置为仅 TLS 模式。更多信息请访问<a href=/v1.1/zh/docs/tasks/security/mtls-migration>双向 TLS 迁移向导</a>。</p><h4 id=安全命名>安全命名</h4><p>安全命名信息包含从编码在证书中的服务器标识到被发现服务或 DNS 引用的服务名称的 <em>N-到-N</em> 映射。从身份 <code>A</code> 到服务名称 <code>B</code> 的映射意味着“允许 <code>A</code> 并授权其运行服务 <code>B</code> ”。Pilot 监视 Kubernetes <code>apiserver</code>，生成安全的命名信息，并将其安全地分发给 sidecar Envoy。以下示例说明了为什么安全命名在身份验证中至关重要。</p><p>假设运行服务 <code>datastore</code> 的合法服务器仅使用 <code>infra-team</code> 标识。恶意用户拥有 <code>test-team</code> 身份的证书和密钥。恶意用户打算模拟服务以检查从客户端发送的数据。恶意用户使用证书和 <code>test-team</code> 身份的密钥部署伪造服务器。假设恶意用户成功攻击了发现服务或 DNS，以将 <code>datastore</code> 服务名称映射到伪造服务器。</p><p>当客户端调用 <code>datastore</code> 服务时，它从服务器的证书中提取 <code>test-team</code> 标识，并检查是否允许 <code>test-team</code> 运行带有安全命名信息的 <code>datastore</code>。客户端检测到 <code>test-team</code> 不允许运行 <code>datastore</code> 服务，并且验证失败。</p><h3 id=认证架构>认证架构</h3><p>您可以使用身份认证策略为在 Istio 网格中接收请求的服务指定身份验证要求。网格操作者使用 <code>.yaml</code> 文件来指定策略。部署后，策略将保存在 <code>Istio Config Store</code>。 Pilot、Istio 控制器监视配置存储。一有任何的策略变更，Pilot 会将新策略转换为适当的配置，告知 Envoy sidecar 代理如何执行所需的身份验证机制。Pilot 可以获取公钥并将其附加到 JWT 验证配置。或者，Pilot 提供 Istio 系统管理的密钥和证书的路径，并将它们挂载到应用程序 pod 以进行双向 TLS。您可以在 <a href=/v1.1/zh/docs/concepts/security/#pki>PKI 部分</a>中找到更多信息。Istio 异步发送配置到目标端点。代理收到配置后，新的身份验证要求会立即生效。</p><p>发送请求的客户端服务负责遵循必要的身份验证机制。对于源身份验证（JWT），应用程序负责获取 JWT 凭据并将其附加到请求。对于双向 TLS，Istio 提供<a href=/v1.1/zh/docs/concepts/traffic-management/#目标规则>目标规则</a>。运维人员可以使用目标规则来指示客户端代理使用 TLS 与服务器端预期的证书进行初始连接。您可以在 <a href=/v1.1/zh/docs/concepts/security/#双向-tls-认证>双向 TLS 认证</a>中找到有关双向 TLS 如何在 Istio 中工作的更多信息。</p><figure style=width:60%><div class=wrapper-with-intrinsic-ratio style=padding-bottom:52.44529668153176%><a data-skipendnotes=true href=/v1.1/docs/concepts/security/auth.svg title=认证架构><img class=element-to-stretch src=/v1.1/docs/concepts/security/auth.svg alt=认证架构></a></div><figcaption>认证架构</figcaption></figure><p>Istio 将两种类型的身份验证以及凭证中的其他声明（如果适用）输出到下一层：<a href=/v1.1/zh/docs/concepts/security/#授权>授权</a>。此外，运维人员可以指定将传输或原始身份验证中的哪个身份作为<code>委托人</code>使用。</p><h3 id=认证策略>认证策略</h3><p>本节中提供了更多 Istio 认证策略方面的细节。正如<a href=/v1.1/zh/docs/concepts/security#认证架构>认证架构</a>中所说的，认证策略是对服务收到的请求生效的。要在双向 TLS 中指定客户端认证策略，需要在 <code>DetinationRule</code> 中设置 <code>TLSSettings</code>。<a href=/v1.1/docs/reference/config/networking/v1alpha3/destination-rule/#TLSSettings>TLS 设置参考文档</a>中有更多这方面的信息。和其他的 Istio 配置一样，可以用 <code>.yaml</code> 文件的形式来编写认证策略，然后使用 <code>istioctl</code> 进行部署。</p><p>下面例子中的认证策略要求 <code>reviews</code> 服务必须使用双向 TLS：</p><pre><code class=language-yaml data-expandlinks=true>apiVersion: &#34;authentication.istio.io/v1alpha1&#34;
kind: &#34;Policy&#34;
metadata:
  name: &#34;reviews&#34;
spec:
  targets:
  - name: reviews
    peers:
  - mtls: {}
</code></pre><h4 id=策略存储范围>策略存储范围</h4><p>Istio 可以在命名空间范围或网络范围存储中存储身份认证策略：</p><ul><li><p>为 <code>kind</code> 字段指定了网格范围策略，其值为 <code>MeshPolicy</code>，名称为 <code>default</code>。例如：</p><pre><code class=language-yaml data-expandlinks=true>apiVersion: &#34;authentication.istio.io/v1alpha1&#34;
kind: &#34;MeshPolicy&#34;
metadata:
  name: &#34;default&#34;
spec:
  peers:
  - mtls: {}
</code></pre></li><li><p>为 <code>kind</code> 字段和指定的命名空间指定命名空间范围策略，其值为 <code>Policy</code>。如果未指定，则使用默认命名空间。例如，命名空间 <code>ns1</code>：</p><pre><code class=language-yaml data-expandlinks=true>apiVersion: &#34;authentication.istio.io/v1alpha1&#34;
kind: &#34;Policy&#34;
metadata:
  name: &#34;default&#34;
  namespace: &#34;ns1&#34;
spec:
  peers:
  - mtls: {}
</code></pre></li></ul><p>命名空间范围存储中的策略只能影响同一命名空间中的服务。网格范围内的策略可以影响网格中的所有服务。为防止冲突和滥用，只能在网状范围存储中定义一个策略。该策略必须命名为 <code>default</code> 并且有一个空的 <code>targets:</code> 部分。您可以在我们的<a href=/v1.1/zh/docs/concepts/security/#目标选择器>目标选择器部分</a>中找到更多信息。</p><h4 id=目标选择器>目标选择器</h4><p>身份认证策略的目标指定策略适用的服务。以下示例展示的是一个 <code>targets:</code> 部分，指定该策略适用于：</p><ul><li>任何端口上的 <code>product-page</code> 服务。</li><li>端口 <code>9000</code> 上的评论服务。</li></ul><pre><code class=language-yaml data-expandlinks=true>targets:

 - name: product-page
 - name: reviews
   ports:
   - number: 9000
</code></pre><p>如果您未提供 <code>targets:</code> 部分，则 Istio 将策略与策略存储范围内的所有服务匹配。因此，<code>targets:</code> 部分可以帮助您指定策略的范围：</p><ul><li><p>网格范围策略：在网格范围存储中定义的策略，没有目标选择器部分。<strong>网格中</strong>最多只能有<strong>一个</strong>网格范围的策略。</p></li><li><p>命名空间范围的策略：在命名空间范围存储中定义的策略，名称为 <code>default</code> 且没有目标选择器部分。<strong>每个命名空间</strong>最多只能有<strong>一个</strong>命名空间范围的策略。</p></li><li><p>特定于服务的策略：在命名空间范围存储中定义的策略，具有非空目标选择器部分。命名空间可以具有<strong>零个，一个或多个</strong>特定于服务的策略。</p></li></ul><p>对于每项服务，Istio 都应用最窄的匹配策略。顺序是：<strong>特定服务&gt;命名空间范围&gt;网格范围</strong>。如果多个特定于服务的策略与服务匹配，则 Istio 随机选择其中一个。运维人员在配置其策略时必须避免此类冲突。</p><p>为了强制网格范围和命名空间范围的策略的唯一性，Istio 每个网格只接受一个身份认证策略，每个命名空间只接受一个身份认证策略。Istio 还要求网格范围和命名空间范围的策略具有特定名称 <code>default</code>。</p><h4 id=传输认证>传输认证</h4><p><code>peers:</code> 部分定义了策略中传输身份验证支持的身份验证方法和相关参数。该部分可以列出多个方法，并且只有一个方法必须满足认证才能通过。但是，从 Istio 0.7 版本开始，当前支持的唯一传输身份验证方法是双向 TLS。如果您不需要传输身份验证，请完全跳过此部分。</p><p>以下示例显示了使用双向 TLS 启用传输身份验证的 <code>peers:</code> 部分。</p><pre><code class=language-yaml data-expandlinks=true>peers:
  - mtls: {}
</code></pre><p>目前，双向 TLS 设置不需要任何参数。因此，<code>-mtls: {}</code>、<code>- mtls:</code> 或 <code>- mtls: null</code> 声明被视为相同。将来，双向 TLS 设置可以携带参数以提供不同的双向 TLS 实现。</p><h4 id=来源身份认证>来源身份认证</h4><p><code>origins:</code> 部分定义了原始身份验证支持的身份验证方法和相关参数。Istio 仅支持 JWT 原始身份验证。但是，策略可以列出不同发行者的多个 JWT。与传输身份验证类似，只有一种列出的方法必须满足身份验证才能通过。</p><p>以下示例策略为原始身份验证指定了一个 <code>origin:</code> 部分，该部分接受 Google 发布的 JWT：</p><pre><code class=language-yaml data-expandlinks=true>origins:
- jwt:
    issuer: &#34;https://accounts.google.com&#34;
    jwksUri: &#34;https://www.googleapis.com/oauth2/v3/certs&#34;
</code></pre><h4 id=主认证绑定>主认证绑定</h4><p>主认证关系用键值对的方式存储绑定关系。默认情况下，Istio 使用 <code>peers:</code> 部分中配置的身份验证。如果在 <code>peers:</code> 部分中未配置身份验证，则 Istio 将保留身份验证。策略编写者可以使用 <code>USE_ORIGIN</code> 值覆盖此行为。此值将 Istio 配置为使用 origin 的身份验证作为主体身份验证。将来，我们将支持条件绑定，例如：当传输体为 X 时为 <code>USE_PEER</code>，否则为 <code>USE_ORIGIN</code> 。</p><p>以下示例显示了 <code>principalBinding</code> 键，其值为 <code>USE_ORIGIN</code>：</p><pre><code class=language-yaml data-expandlinks=true>principalBinding: USE_ORIGIN
</code></pre><h3 id=更新认证策略>更新认证策略</h3><p>您可以随时更改身份认证策略，Istio 几乎实时地将更改推送到端点。但是，Istio 无法保证所有端点同时收到新策略。以下是在更新身份认证策略时避免中断的建议：</p><ul><li>启用或禁用双向 TLS：使用带有 <code>mode:</code> 键和 <code>PERMISSIVE</code> 值的临时策略。这会将接收服务配置为接受两种类型的流量：纯文本和 TLS。因此，不会丢弃任何请求。一旦所有客户端切换到预期协议，无论是否有双向 TLS，您都可以将 <code>PERMISSIVE</code> 策略替换为最终策略。有关更多信息，请访问<a href=/v1.1/zh/docs/tasks/security/mtls-migration>双向 TLS 的迁移</a>。</li></ul><pre><code class=language-yaml data-expandlinks=true>peers:
- mtls:
    mode: PERMISSIVE
</code></pre><ul><li>对于 JWT 身份验证迁移：在更改策略之前，请求应包含新的 JWT。一旦服务器端完全切换到新策略，旧 JWT（如果有的话）可以被删除。需要更改客户端应用程序才能使这些更改生效。</li></ul><h2 id=授权>授权</h2><p>Istio 的授权功能也称为基于角色的访问控制（RBAC）——为 Istio 网格中的服务提供命名空间级别、服务级别和方法级别的访问控制。它的特点是：</p><ul><li><strong>基于角色的语义</strong>，简单易用。</li><li><strong>服务间和最终用户对服务的授权</strong>。</li><li><strong>通过自定义属性支持的灵活性</strong>，例如条件、角色和角色绑定。</li><li><strong>高性能</strong>，因为 Istio 授权是在 Envoy 本地强制执行的。</li><li><strong>高兼容性</strong>，原生支持 HTTP、HTTPS 和 HTTP2，以及任意普通 TCP 协议。</li></ul><h3 id=授权架构>授权架构</h3><figure style=width:90%><div class=wrapper-with-intrinsic-ratio style=padding-bottom:80%><a data-skipendnotes=true href=/v1.1/docs/concepts/security/./authz.svg title="Istio 授权架构"><img class=element-to-stretch src=/v1.1/docs/concepts/security/./authz.svg alt="Istio Authorization"></a></div><figcaption>Istio 授权架构</figcaption></figure><p>上图显示了基本的 Istio 授权架构。运维人员使用 <code>.yaml</code> 文件指定 Istio 授权策略。部署后，Istio 将策略保存在 <code>Istio Config Store</code> 中。</p><p>Pilot 监督 Istio 授权策略的变更。如果发现任何更改，它将获取更新的授权策略。 Pilot 将 Istio 授权策略分发给与服务实例位于同一位置的 Envoy 代理。</p><p>每个 Envoy 代理都运行一个授权引擎，该引擎在运行时授权请求。当请求到达代理时，授权引擎根据当前授权策略评估请求上下文，并返回授权结果 <code>ALLOW</code> 或 <code>DENY</code>。</p><h3 id=启用授权>启用授权</h3><p>您可以使用 <code>RbacConfig</code> 对象启用 Istio Authorization。<code>RbacConfig</code> 对象是一个网格范围的单例，其固定名称值为 <code>default</code>。您只能在网格中使用一个 <code>RbacConfig</code> 实例。与其他 Istio 配置对象一样，<code>RbacConfig</code> 被定义为Kubernetes <code>CustomResourceDefinition</code> <a href=https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/>(CRD)</a> 对象。</p><p>在 <code>RbacConfig</code> 对象中，运算符可以指定 <code>mode</code> 值，它可以是：</p><ul><li><strong><code>OFF</code></strong>：禁用 Istio 授权。</li><li><strong><code>ON</code></strong>：为网格中的所有服务启用了 Istio 授权。</li><li><strong><code>ON_WITH_INCLUSION</code></strong>：仅对<code>包含</code>字段中指定的服务和命名空间启用 Istio 授权。</li><li><strong><code>ON_WITH_EXCLUSION</code></strong>：除了<code>排除</code>字段中指定的服务和命名空间外，网格中的所有服务都启用了 Istio 授权。</li></ul><p>在以下示例中，为 <code>default</code> 命名空间启用了 Istio 授权。</p><pre><code class=language-yaml data-expandlinks=true>apiVersion: &#34;rbac.istio.io/v1alpha1&#34;
kind: RbacConfig
metadata:
  name: default
  namespace: istio-system
spec:
  mode: &#39;ON_WITH_INCLUSION&#39;
  inclusion:
    namespaces: [&#34;default&#34;]
</code></pre><h3 id=授权策略>授权策略</h3><p>要配置 Istio 授权策略，请指定 <code>ServiceRole</code> 和 <code>ServiceRoleBinding</code>。与其他 Istio 配置对象一样，它们被定义为 Kubernetes <code>CustomResourceDefinition</code>（ <a href=https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/>CRD</a>）对象。</p><ul><li><strong><code>ServiceRole</code></strong> 定义了一组访问服务的权限。</li><li><strong><code>ServiceRoleBinding</code></strong> 向特定主题授予 <code>ServiceRole</code>，例如用户、组或服务。</li></ul><p><code>ServiceRole</code> 和 <code>ServiceRoleBinding</code> 的组合规定： 允许<strong>谁</strong>在<strong>哪些条件</strong>下<strong>做什么</strong> 。明确地说：</p><ul><li><strong>谁</strong>指的是 <code>ServiceRoleBinding</code> 中的 <code>subject</code> 部分。</li><li><strong>做什么</strong>指的是 <code>ServiceRole</code> 中的 <code>permissions</code> 部分。</li><li><strong>哪些条件</strong>指的是你可以在 <code>ServiceRole</code> 或 <code>ServiceRoleBinding</code> 中使用 <a href=/v1.1/zh/docs/reference/config/policy-and-telemetry/attribute-vocabulary/>Istio 属性</a>指定的 <code>conditions</code> 部分。</li></ul><h4 id=servicerole><code>ServiceRole</code></h4><p><code>ServiceRole</code> 规范包括<code>规则</code>、所谓的权限列表。每条规则都有以下标准字段：</p><ul><li><p><strong><code>services</code></strong>：服务名称列表。您可以将值设置为 <code>*</code> 以包括指定命名空间中的所有服务。</p></li><li><p><strong><code>methods</code></strong>：HTTP 方法名称列表，对于 gRPC 请求的权限，HTTP 动词始终是 <code>POST</code> 。您可以将值设置为 <code>*</code> 以包含所有 HTTP 方法。</p></li><li><p><strong><code>paths</code></strong>：HTTP 路径或 gRPC 方法。 gRPC 方法必须采用 <code>/packageName.serviceName/methodName</code> 的形式，并且区分大小写。</p></li></ul><p><code>ServiceRole</code> 规范仅适用于 <code>metadata</code> 部分中指定的命名空间。规则中需要 <code>services</code> 和 <code>methods</code> 字段。 <code>paths</code> 是可选的。如果未指定规则或将其设置为 <code>*</code>，则它适用于任何实例。</p><p>下面的示例显示了一个简单的角色：<code>service-admin</code>，它可以完全访问 <code>default</code> 命名空间中的所有服务。</p><pre><code class=language-yaml data-expandlinks=true>apiVersion: &#34;rbac.istio.io/v1alpha1&#34;
kind: ServiceRole
metadata:
  name: service-admin
  namespace: default
spec:
  rules:
  - services: [&#34;*&#34;]
    methods: [&#34;*&#34;]
</code></pre><p>这是另一个角色：<code>products-viewer</code>，它有读取权限，包括 <code>GET</code> 和 <code>HEAD</code>，能够访问 <code>default</code> 命名空间中的 <code>products.default.svc.cluster.local</code> 服务。</p><pre><code class=language-yaml data-expandlinks=true>apiVersion: &#34;rbac.istio.io/v1alpha1&#34;
kind: ServiceRole
metadata:
  name: products-viewer
  namespace: default
spec:
  rules:
  - services: [&#34;products.default.svc.cluster.local&#34;]
    methods: [&#34;GET&#34;, &#34;HEAD&#34;]
</code></pre><p>此外，我们支持规则中所有字段的前缀匹配和后缀匹配。例如，您可以在 <code>default</code>命名空间中定义具有以下权限的 <code>tester</code> 角色：</p><ul><li>完全访问前缀为 <code>test-*</code> 的所有服务，例如：<code>test-bookstore</code>、<code>test-performance</code>、<code>test-api.default.svc.cluster.local</code>。</li><li>读取（<code>GET</code>）使用 <code>*/reviews</code> 后缀访问的所有路径，例如：在 <code>bookstore .default.svc.cluster.local</code> 服务中的 <code>/books/reviews</code>、<code>/events/booksale/reviews</code>、<code>/reviews</code>。</li></ul><pre><code class=language-yaml data-expandlinks=true>apiVersion: &#34;rbac.istio.io/v1alpha1&#34;
kind: ServiceRole
metadata:
  name: tester
  namespace: default
spec:
  rules:
  - services: [&#34;test-*&#34;]
    methods: [&#34;*&#34;]
  - services: [&#34;bookstore.default.svc.cluster.local&#34;]
    paths: [&#34;*/reviews&#34;]
    methods: [&#34;GET&#34;]
</code></pre><p>在 <code>ServiceRole</code> 中，<code>namespace</code> + <code>services</code> + <code>paths</code> + <code>methods</code> 的组合定义了<strong>如何访问服务</strong>。在某些情况下，您可能需要为规则指定其他条件。例如，规则可能仅适用于服务的某个<strong>版本</strong>，或仅适用于具有特定<strong>标签</strong>的服务，如 <code>foo</code>。您可以使用 <code>constraints</code> 轻松指定这些条件。</p><p>例如，下面的 <code>ServiceRole</code> 定义在以前的 <code>products-viewer</code> 角色基础之上添加了一个约束：<code>request.headers[version]</code> 为 <code>v1</code> 或 <code>v2</code> 。在<a href=/v1.1/zh/docs/reference/config/authorization/constraints-and-properties/>约束和属性页面</a>中列出了约束支持的 <code>key</code> 值。在属性值是 <code>map</code> 类型的情况下，例如 <code>request.headers</code>，<code>key</code> 是 map 中的一个条目，例如 <code>request.headers[version]</code>。</p><pre><code class=language-yaml data-expandlinks=true>apiVersion: &#34;rbac.istio.io/v1alpha1&#34;
kind: ServiceRole
metadata:
  name: products-viewer-version
  namespace: default
spec:
  rules:
  - services: [&#34;products.default.svc.cluster.local&#34;]
    methods: [&#34;GET&#34;, &#34;HEAD&#34;]
    constraints:
    - key: request.headers[version]
      values: [&#34;v1&#34;, &#34;v2&#34;]
</code></pre><h4 id=servicerolebinding><code>ServiceRoleBinding</code></h4><p><code>ServiceRoleBinding</code> 规范包括两部分：</p><ul><li><strong><code>roleRef</code></strong> 指的是同一命名空间中的 <code>ServiceRole</code> 资源。</li><li><strong><code>subjects</code></strong> 分配给角色的列表。</li></ul><p>您可以使用 <code>user</code> 或一组 <code>properties</code> 显式指定 *subject*。<code>ServiceRoleBinding</code> <em>subject</em> 中的 <em>property</em> 类似于 <code>ServiceRole</code> 规范中的 *constraint*。 <em>property</em> 还允许您使用条件指定分配给此角色的一组帐户。它包含一个 <code>key</code> 及其允许的*值*。约束支持的 <code>key</code> 值列在<a href=/v1.1/zh/docs/reference/config/authorization/constraints-and-properties/>约束和属性页面</a>中。</p><p>下面的例子显示了一个名为 <code>test-binding-products</code> 的 <code>ServiceRoleBinding</code>，它将两个 <code>subject</code> 绑定到名为 <code>product-viewer</code> 的 <code>ServiceRole</code> 并具有以下 <code>subject</code></p><ul><li>代表服务 <strong>a</strong> 的服务帐户，<code>service-account-a</code>。</li><li>代表 Ingress 服务的服务帐户 <code>istio-ingress-service-account</code> <strong>并且</strong> 它的 JWT 中的 <code>mail</code> 项声明为 <code>a@foo.com</code>。</li></ul><pre><code class=language-yaml data-expandlinks=true>apiVersion: &#34;rbac.istio.io/v1alpha1&#34;
kind: ServiceRoleBinding
metadata:
  name: test-binding-products
  namespace: default
spec:
  subjects:
  - user: &#34;service-account-a&#34;
  - user: &#34;istio-ingress-service-account&#34;
    properties:
      request.auth.claims[email]: &#34;a@foo.com&#34;
    roleRef:
    kind: ServiceRole
    name: &#34;products-viewer&#34;
</code></pre><p>如果您想要公开访问服务，可以将 <code>subject</code> 设置为 <code>user：&quot;*&quot;</code> 。此值将 <code>ServiceRole</code> 分配给<strong>所有（经过身份验证和未经身份验证的）</strong>用户和服务，例如：</p><pre><code class=language-yaml data-expandlinks=true>apiVersion: &#34;rbac.istio.io/v1alpha1&#34;
kind: ServiceRoleBinding
metadata:
  name: binding-products-allusers
  namespace: default
spec:
  subjects:
  - user: &#34;*&#34;
    roleRef:
    kind: ServiceRole
    name: &#34;products-viewer&#34;
</code></pre><p>要将 <code>ServiceRole</code> 分配给<strong>经过身份验证的</strong>用户和服务，请使用 <code>source.principal：&quot;*&quot;</code> 代替，例如：</p><pre><code class=language-yaml data-expandlinks=true>apiVersion: &#34;rbac.istio.io/v1alpha1&#34;
kind: ServiceRoleBinding
kind: ServiceRoleBinding
metadata:
  name: binding-products-all-authenticated-users
  namespace: default
spec:
  subjects:
  - properties:
      source.principal: &#34;*&#34;
    roleRef:
    kind: ServiceRole
    name: &#34;products-viewer&#34;
</code></pre><h3 id=在普通-tcp-协议上使用-istio-认证>在普通 TCP 协议上使用 Istio 认证</h3><p><a href=#servicerole>Service role</a> 和 <a href=#servicerolebinding>Service role binding</a> 中的例子展示了在使用 HTTP 协议的 service 上使用 Istio 认证的典型方法。在那些例子中，service role 和 service role binding 里的所有字段都可以支持。</p><p>Istio 授权支持使用任何普通 TCP 协议的 service，例如 MongoDB。在这种情况下，您可以像配置 HTTP 服务一样配置 service role 和 service role binding。不同之处在于某些字段，约束和属性仅适用于 HTTP 服务。这些字段包括：</p><ul><li>service role 配置对象中的 <code>paths</code> 和 <code>methods</code> 字段。</li><li>service role binding 配置对象中的 <code>group</code> 字段。</li></ul><p>支持的约束和属性在<a href=/v1.1/zh/docs/reference/config/authorization/constraints-and-properties/>约束和属性页面</a>中列出。</p><p>如果您在 TCP service 中使用了任意 HTTP 独有的字段，Istio 将会完全忽略 service role 或 service role binding 自定义资源，以及里面设置的策略。</p><p>假设您有一个 MongoDB service 在 27017 端口上监听，下面的示例配置了一个 service role 和一个 service role binding，仅允许 Istio 网格中的 `bookinfo-ratings-v2 访问 MongoDB service。</p><pre><code class=language-yaml data-expandlinks=true>apiVersion: &#34;rbac.istio.io/v1alpha1&#34;
kind: ServiceRole
metadata:
  name: mongodb-viewer
  namespace: default
spec:
  rules:
  - services: [&#34;mongodb.default.svc.cluster.local&#34;]
    constraints:
    - key: &#34;destination.port&#34;
      values: [&#34;27017&#34;]
---
apiVersion: &#34;rbac.istio.io/v1alpha1&#34;
kind: ServiceRoleBinding
metadata:
  name: bind-mongodb-viewer
  namespace: default
spec:
  subjects:
  - user: &#34;cluster.local/ns/default/sa/bookinfo-ratings-v2&#34;
  roleRef:
    kind: ServiceRole
    name: &#34;mongodb-viewer&#34;
</code></pre><h3 id=授权宽容模式>授权宽容模式</h3><p>授权宽容模式（authorization permissive mode）是 Istio 1.1 发布版中的实验特性。其接口可能在未来的发布中发生变化。</p><p>授权宽容模式允许您在将授权策略提交到生产环境部署之前对其进行验证。</p><p>您可以在全局授权配置和单个独立策略中启用授权宽容模式。如果在全局授权配置中设置，所有策略都将切换至授权宽容模式，不管其本身的模式。如果您设置全局授权模式为 ENFORCED，单个策略设置的强制模式将起作用。如果您没有设置任何模式，全局授权配置和单个策略都将默认被设置为 ENFORCED。</p><p>要全局启用宽容模式，请将全局 Istio RBAC 授权配置中的 enforcement_mode: 设置为 PERMISSIVE，如下面的示例所示。</p><pre><code class=language-yaml data-expandlinks=true>apiVersion: &#34;rbac.istio.io/v1alpha1&#34;
kind: ClusterRbacConfig
metadata:
  name: default
spec:
  mode: &#39;ON_WITH_INCLUSION&#39;
  inclusion:
    namespaces: [&#34;default&#34;]
  enforcement_mode: PERMISSIVE
</code></pre><p>如要为特定策略启用宽容模式，请将策略配置文件中的 <code>mode:</code> 设置为 <code>PERMISSIVE</code>，如下面的示例所示。</p><pre><code class=language-yaml data-expandlinks=true>apiVersion: &#34;rbac.istio.io/v1alpha1&#34;
kind: ServiceRoleBinding
metadata:
  name: bind-details-reviews
  namespace: default
spec:
  subjects:
    - user: &#34;cluster.local/ns/default/sa/bookinfo-productpage&#34;
  roleRef:
    kind: ServiceRole
    name: &#34;details-reviews-viewer&#34;
  mode: PERMISSIVE
</code></pre><h3 id=使用其他授权机制>使用其他授权机制</h3><p>虽然我们强烈建议使用 Istio 授权机制，但 Istio 足够灵活，允许您通过 Mixer 组件插入自己的身份验证和授权机制。
要在 Mixer 中使用和配置插件，请访问我们的<a href=/v1.1/zh/docs/concepts/policies-and-telemetry/#适配器>策略和遥测适配器文档</a>。</p><nav id=see-also><h2>相关内容</h2><div class=see-also><div class=entry><p class=link><a data-skipendnotes=true href=/v1.1/zh/docs/tasks/security/authz-http/>HTTP 服务的访问控制</a></p><p class=desc>展示为 HTTP 服务设置基于角色的访问控制方法。</p></div><div class=entry><p class=link><a data-skipendnotes=true href=/v1.1/zh/docs/tasks/security/authz-tcp/>TCP 服务的访问控制</a></p><p class=desc>展示如何为 TCP 服务设置基于角色的访问控制。</p></div><div class=entry><p class=link><a data-skipendnotes=true href=/v1.1/zh/docs/tasks/security/authz-permissive/>鉴权过程中的宽容模式</a></p><p class=desc>展示宽容模式的的鉴权过程。</p></div><div class=entry><p class=link><a data-skipendnotes=true href=/v1.1/zh/blog/2018/istio-authorization/>基于 Istio 的 Micro-Segmentation 授权</a></p><p class=desc>描述 Istio 的授权功能以及如何在各种用例中使用它。</p></div><div class=entry><p class=link><a data-skipendnotes=true href=/v1.1/zh/help/ops/security/debugging-authorization/>调试授权</a></p><p class=desc>展示授权功能的调试过程。</p></div><div class=entry><p class=link><a data-skipendnotes=true href=/v1.1/zh/docs/tasks/security/mtls-migration/>双向 TLS 的迁移</a></p><p class=desc>如何渐进式的为现有 Istio 服务添加双向 TLS 支持。</p></div></div></nav></article><nav class=pagenav><div class=left><a title="介绍 Istio 中关于流量路由与控制的各项功能。" href=/v1.1/zh/docs/concepts/traffic-management/><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#left-arrow"/></svg>流量管理</a></div><div class=right><a title=描述策略实施和遥测机制。 href=/v1.1/zh/docs/concepts/policies-and-telemetry/>策略与遥测<svg class="icon"><use xlink:href="/v1.1/img/icons.svg#right-arrow"/></svg></a></div></nav><div id=endnotes-container aria-hidden=true><h2>链接</h2><ol id=endnotes></ol></div></div><div class=toc-container><nav class=toc aria-label="Table of Contents"><div id=toc><ol><li role=none aria-label=高级架构><a href=#%e9%ab%98%e7%ba%a7%e6%9e%b6%e6%9e%84>高级架构</a><li role=none aria-label="Istio 身份"><a href=#istio-%e8%ba%ab%e4%bb%bd>Istio 身份</a><ol><li role=none aria-label="Istio 安全与 SPIFFE"><a href=#istio-%e5%ae%89%e5%85%a8%e4%b8%8e-spiffe>Istio 安全与 SPIFFE</a></ol></li><li role=none aria-label=PKI><a href=#pki>PKI</a><ol><li role=none aria-label="Kubernetes 方案"><a href=#kubernetes-%e6%96%b9%e6%a1%88>Kubernetes 方案</a><li role=none aria-label=本地机器方案><a href=#%e6%9c%ac%e5%9c%b0%e6%9c%ba%e5%99%a8%e6%96%b9%e6%a1%88>本地机器方案</a><li role=none aria-label="Kubernetes 中的代理节点"><a href=#kubernetes-%e4%b8%ad%e7%9a%84%e4%bb%a3%e7%90%86%e8%8a%82%e7%82%b9>Kubernetes 中的代理节点</a></ol></li><li role=none aria-label=最佳实践><a href=#%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5>最佳实践</a><ol><li role=none aria-label=部署指南><a href=#%e9%83%a8%e7%bd%b2%e6%8c%87%e5%8d%97>部署指南</a><li role=none aria-label=示例><a href=#%e7%a4%ba%e4%be%8b>示例</a></ol></li><li role=none aria-label=认证><a href=#%e8%ae%a4%e8%af%81>认证</a><ol><li role=none aria-label="双向 TLS 认证"><a href=#%e5%8f%8c%e5%90%91-tls-%e8%ae%a4%e8%af%81>双向 TLS 认证</a><ol><li role=none aria-label=宽容模式><a href=#%e5%ae%bd%e5%ae%b9%e6%a8%a1%e5%bc%8f>宽容模式</a><li role=none aria-label=安全命名><a href=#%e5%ae%89%e5%85%a8%e5%91%bd%e5%90%8d>安全命名</a></ol></li><li role=none aria-label=认证架构><a href=#%e8%ae%a4%e8%af%81%e6%9e%b6%e6%9e%84>认证架构</a><li role=none aria-label=认证策略><a href=#%e8%ae%a4%e8%af%81%e7%ad%96%e7%95%a5>认证策略</a><ol><li role=none aria-label=策略存储范围><a href=#%e7%ad%96%e7%95%a5%e5%ad%98%e5%82%a8%e8%8c%83%e5%9b%b4>策略存储范围</a><li role=none aria-label=目标选择器><a href=#%e7%9b%ae%e6%a0%87%e9%80%89%e6%8b%a9%e5%99%a8>目标选择器</a><li role=none aria-label=传输认证><a href=#%e4%bc%a0%e8%be%93%e8%ae%a4%e8%af%81>传输认证</a><li role=none aria-label=来源身份认证><a href=#%e6%9d%a5%e6%ba%90%e8%ba%ab%e4%bb%bd%e8%ae%a4%e8%af%81>来源身份认证</a><li role=none aria-label=主认证绑定><a href=#%e4%b8%bb%e8%ae%a4%e8%af%81%e7%bb%91%e5%ae%9a>主认证绑定</a></ol></li><li role=none aria-label=更新认证策略><a href=#%e6%9b%b4%e6%96%b0%e8%ae%a4%e8%af%81%e7%ad%96%e7%95%a5>更新认证策略</a></ol></li><li role=none aria-label=授权><a href=#%e6%8e%88%e6%9d%83>授权</a><ol><li role=none aria-label=授权架构><a href=#%e6%8e%88%e6%9d%83%e6%9e%b6%e6%9e%84>授权架构</a><li role=none aria-label=启用授权><a href=#%e5%90%af%e7%94%a8%e6%8e%88%e6%9d%83>启用授权</a><li role=none aria-label=授权策略><a href=#%e6%8e%88%e6%9d%83%e7%ad%96%e7%95%a5>授权策略</a><ol><li role=none aria-label=ServiceRole><a href=#servicerole><code>ServiceRole</code></a><li role=none aria-label=ServiceRoleBinding><a href=#servicerolebinding><code>ServiceRoleBinding</code></a></ol></li><li role=none aria-label="在普通 TCP 协议上使用 Istio 认证"><a href=#%e5%9c%a8%e6%99%ae%e9%80%9a-tcp-%e5%8d%8f%e8%ae%ae%e4%b8%8a%e4%bd%bf%e7%94%a8-istio-%e8%ae%a4%e8%af%81>在普通 TCP 协议上使用 Istio 认证</a><li role=none aria-label=授权宽容模式><a href=#%e6%8e%88%e6%9d%83%e5%ae%bd%e5%ae%b9%e6%a8%a1%e5%bc%8f>授权宽容模式</a><li role=none aria-label=使用其他授权机制><a href=#%e4%bd%bf%e7%94%a8%e5%85%b6%e4%bb%96%e6%8e%88%e6%9d%83%e6%9c%ba%e5%88%b6>使用其他授权机制</a></ol></li><li role=none aria-label=相关内容><a href=#see-also>相关内容</a></li></ol></div></nav></div></main><footer><div class=user-links><a class=channel title="Go download Istio 1.1.9 now" href=https://github.com/istio/istio/releases/tag/1.1.9 aria-label="Download Istio"><span>download</span><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#download"/></svg>
</a><a class=channel title="加入 Istio discussion board 参与讨论获取帮助" href=https://discuss.istio.io aria-label="Istio discussion board"><span>discuss</span><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#discourse"/></svg></a>
<a class=channel title="Stack Overflow 中列举了针对实际问题以及部署、配置和使用 Istio 的各项回答" href=https://stackoverflow.com/questions/tagged/istio aria-label="Stack Overflow"><span>stack overflow</span><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#stackoverflow"/></svg></a>
<a class=channel title="关注我们的 Twitter 来获取最新信息" href=https://twitter.com/IstioMesh aria-label=Twitter><span>twitter</span><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#twitter"/></svg></a><div class=tag>对于用户</div></div><div class=info><p class=copyright>中文内容由 ServiceMesher 社区维护，部分文档可能稍微滞后于英文版本，同步工作持续进行中<br>Istio 归档
1.1.9<br>&copy; 2019 Istio Authors, <a href=https://policies.google.com/privacy>隐私政策</a><br>归档于 2019年6月18日</p></div><div class=dev-links><a class=channel title="Istio 的代码在 GitHub 上开发" href=https://github.com/istio/community aria-label=GitHub><span>github</span><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#github"/></svg></a>
<a class=channel title="在 Slack 上与 Istio 社区交互讨论开发问题（仅限邀请）" href=https://istio.slack.com aria-label=slack><span>slack</span><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#slack"/></svg></a>
<a class=channel title="如果您想深入了解 Istio 的技术细节，请查看我们日益完善的设计文档" href=https://groups.google.com/forum/#!forum/istio-team-drive-access aria-label="team drive"><span>drive</span><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#drive"/></svg></a>
<a class=channel title="如果您想为 Istio 项目做出贡献，请考虑加入我们的工作组" href=https://github.com/istio/community/blob/master/WORKING-GROUPS.md aria-label="working groups"><span>working groups</span><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#working-groups"/></svg></a><div class=tag>对于开发者</div></div></footer><div id=scroll-to-top-container aria-hidden=true><button id=scroll-to-top title=回到顶部><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#top"/></svg></button></div></body></html>