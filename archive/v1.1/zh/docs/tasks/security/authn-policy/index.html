<!doctype html><html lang=zh itemscope itemtype=https://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=theme-color content=#466BB0><meta name=title content=åŸºç¡€è®¤è¯ç­–ç•¥><meta name=description content="ä»‹ç»å¦‚ä½•ä½¿ç”¨ Istio è®¤è¯ç­–ç•¥è®¾ç½®åŒå‘ TLS å’ŒåŸºæœ¬çš„ç»ˆç«¯ç”¨æˆ·è®¤è¯ã€‚"><meta name=keywords content=microservices,services,mesh,security,authentication><meta property=og:title content=åŸºç¡€è®¤è¯ç­–ç•¥><meta property=og:type content=website><meta property=og:description content="ä»‹ç»å¦‚ä½•ä½¿ç”¨ Istio è®¤è¯ç­–ç•¥è®¾ç½®åŒå‘ TLS å’ŒåŸºæœ¬çš„ç»ˆç«¯ç”¨æˆ·è®¤è¯ã€‚"><meta property=og:url content=/v1.1/zh/docs/tasks/security/authn-policy/><meta property=og:image content=/v1.1/img/istio-whitelogo-bluebackground-framed.svg><meta property=og:image:alt content="Istio Logo"><meta property=og:image:width content=112><meta property=og:image:height content=150><meta property=og:site_name content=Istio><meta name=twitter:card content=summary><meta name=twitter:site content=@IstioMesh><title>Istioldie 1.1 / åŸºç¡€è®¤è¯ç­–ç•¥</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98480406-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-98480406-2');</script><link rel=alternate type=application/rss+xml title="Istio Blog" href=/v1.1/feed.xml><link rel="shortcut icon" href=/v1.1/favicons/favicon.ico><link rel=apple-touch-icon href=/v1.1/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/v1.1/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/v1.1/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/v1.1/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/v1.1/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/v1.1/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/v1.1/favicons/android-96x96.png sizes=96xW96><link rel=icon type=image/png href=/v1.1/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/v1.1/favicons/android-192x192.png sizes=192x192><link rel=manifest href=/v1.1/manifest.json><meta name=apple-mobile-web-app-title content=Istio><meta name=application-name content=Istio><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Work+Sans:400|Chivo:400|Work+Sans:500,300,600,300italic,400italic,500italic,600italic|Chivo:500,300,600,300italic,400italic,500italic,600italic"><link rel=stylesheet href=/v1.1/css/all.css></head><body class="language-unknown archive-site"><script src=/v1.1/js/themes_init.min.js></script><script>const branchName="release-1.1";const docTitle="åŸºç¡€è®¤è¯ç­–ç•¥";const iconFile="\/v1.1/img/icons.svg";const buttonCopy='å¤åˆ¶åˆ°å‰ªåˆ‡æ¿';const buttonPrint='æ‰“å°';const buttonDownload='ä¸‹è½½';</script><script src="https://www.google.com/cse/brand?form=search-form" defer></script><script src=/v1.1/js/all.min.js data-manual defer></script><header><nav><a id=brand href=/v1.1/zh/><span class=logo><svg viewBox="0 0 300 300"><circle cx="150" cy="150" r="146" stroke-width="2" /><path d="M65 240H225L125 270z"/><path d="M65 230l60-10V110z"/><path d="M135 220l90 10L135 30z"/></svg></span><span class=name>Istioldie 1.1</span></a><div id=hamburger><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#hamburger"/></svg></div><div id=header-links><span title="äº†è§£å¦‚ä½•éƒ¨ç½²ã€ä½¿ç”¨å’Œè¿ç»´ Istioã€‚">æ–‡æ¡£</span>
<a title="å…³äºä½¿ç”¨ Istio çš„åšå®¢æ–‡ç« ã€‚" href=/v1.1/zh/blog/2019/root-transition/>åšå®¢</a>
<a title="ä¸€å †å¸®åŠ©æ‚¨éƒ¨ç½²ã€é…ç½®å’Œä½¿ç”¨ Istio çš„èµ„æºã€‚" href=/v1.1/zh/help/>å¸®åŠ©</a>
<a title=å…³äºIstioçš„è¯´æ˜ã€‚ href=/v1.1/zh/about/>å…³äº</a><div class=menu><button id=gearDropdownButton class=menu-trigger title=é€‰é¡¹å’Œè®¾ç½® aria-label="Options and Settings" aria-controls=gearDropdownContent><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#gear"/></svg></button><div id=gearDropdownContent class=menu-content aria-labelledby=gearDropdownButton role=menu><a tabindex=-1 role=menuitem lang=en id=switch-lang-en>English</a>
<a tabindex=-1 role=menuitem lang=zh id=switch-lang-zh class=active>ä¸­æ–‡</a><div role=separator></div><a tabindex=-1 role=menuitem class=active id=light-theme-item>äº®ä¸»é¢˜</a>
<a tabindex=-1 role=menuitem id=dark-theme-item>æš—ä¸»é¢˜</a><div role=separator></div><a tabindex=-1 role=menuitem id=syntax-coloring-item>ä»£ç é«˜äº®</a><div role=separator></div><h6>æœ¬ç«™çš„å…¶å®ƒç‰ˆæœ¬</h6><a tabindex=-1 role=menuitem onclick="navigateToUrlOrRoot('https://istio.io/docs\/tasks\/security\/authn-policy\/');return false;">å½“å‰ç‰ˆæœ¬</a>
<a tabindex=-1 role=menuitem onclick="navigateToUrlOrRoot('https://preliminary.istio.io/docs\/tasks\/security\/authn-policy\/');return false;">ä¸‹ä¸ªç‰ˆæœ¬</a>
<a tabindex=-1 role=menuitem href=https://archive.istio.io>æ—§ç‰ˆæœ¬</a></div></div><button id=search-show title=æœç´¢istio.io aria-label=Search><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#magnifier"/></svg></button></div><form id=search-form name=cse role=search><input type=hidden name=cx value=013699703217164175118:iwwf17ikgf4>
<input type=hidden name=ie value=utf-8>
<input type=hidden name=hl value=en>
<input type=hidden id=search-page-url value=/v1.1/search.html>
<input id=search-textbox class=form-control name=q type=search aria-label=æœç´¢istio.io>
<button id=search-close title="Cancel search" type=reset aria-label="Cancel search"><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#cancel-x"/></svg></button></form></nav></header><main class=primary><div id=sidebar-container class="sidebar-container sidebar-offcanvas"><nav id=sidebar aria-label="Section Navigation"><div class=directory><div class=card><button class="header dynamic" id=card28 title="ä¸€äº›æ¦‚å¿µï¼Œç†è§£å®ƒä»¬æœ‰åŠ©äºæ‚¨æ›´å¥½åœ°äº†è§£ Istio ç³»ç»Ÿçš„ä¸åŒéƒ¨åˆ†åŠå…¶ä½¿ç”¨çš„æŠ½è±¡ã€‚" aria-controls=card28-body><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#concepts"/></svg>æ¦‚å¿µ</button><div class=body aria-labelledby=card28 role=region id=card28-body><ul role=tree aria-expanded=true class=leaf-section aria-labelledby=card28><li role=none><a role=treeitem title="ä»‹ç» Istio åŠå…¶è¦è§£å†³çš„é—®é¢˜ã€é¡¶å±‚æ¶æ„å’Œè®¾è®¡ç›®æ ‡ã€‚" href=/v1.1/zh/docs/concepts/what-is-istio/>Istio æ˜¯ä»€ä¹ˆ?</a></li><li role=none><a role=treeitem title="ä»‹ç» Istio ä¸­å…³äºæµé‡è·¯ç”±ä¸æ§åˆ¶çš„å„é¡¹åŠŸèƒ½ã€‚" href=/v1.1/zh/docs/concepts/traffic-management/>æµé‡ç®¡ç†</a></li><li role=none><a role=treeitem title="æè¿° Istio çš„æˆæƒä¸é‰´æƒåŠŸèƒ½ã€‚" href=/v1.1/zh/docs/concepts/security/>å®‰å…¨</a></li><li role=none><a role=treeitem title=æè¿°ç­–ç•¥å®æ–½å’Œé¥æµ‹æœºåˆ¶ã€‚ href=/v1.1/zh/docs/concepts/policies-and-telemetry/>ç­–ç•¥ä¸é¥æµ‹</a></li><li role=none><a role=treeitem title="ä»‹ç» Istio ç»„ä»¶çš„æ€§èƒ½ä¸å¯ä¼¸ç¼©æ€§ã€‚" href=/v1.1/zh/docs/concepts/performance-and-scalability/>æ€§èƒ½ä¸å¯ä¼¸ç¼©æ€§</a></li><li role=none><a role=treeitem title=æè¿°å¦‚ä½•é…ç½®æœåŠ¡ç½‘æ ¼ä»¥åŒ…å«æ¥è‡ªå¤šä¸ªé›†ç¾¤çš„æœåŠ¡ã€‚ href=/v1.1/zh/docs/concepts/multicluster-deployments/>å¤šé›†ç¾¤éƒ¨ç½²</a></li></ul></div></div><div class=card><button class="header dynamic" id=card41 title="åœ¨ä¸åŒçš„ç¯å¢ƒä¸‹ï¼ˆä¾‹å¦‚ Kubernetesã€Consul ç­‰ï¼‰å¦‚ä½•éƒ¨ç½²å’Œå‡çº§ Istioã€‚" aria-controls=card41-body><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#setup"/></svg>å®‰è£…</button><div class=body aria-labelledby=card41 role=region id=card41-body><ul role=tree aria-expanded=true aria-labelledby=card41><li role=treeitem aria-label=Kubernetes><button aria-hidden=true></button><a title="å…³äºå¦‚ä½•åœ¨ Kubernetes é›†ç¾¤ä¸­å®‰è£… Istio æ§åˆ¶å¹³é¢å’Œæ·»åŠ è™šæ‹Ÿæœºåˆ° mesh ä¸­çš„è¯´æ˜ã€‚" href=/v1.1/zh/docs/setup/kubernetes/>Kubernetes</a><ul role=group aria-expanded=false><li role=none><a role=treeitem title="å…³äº Istio å‘å¸ƒåŒ…ä¸‹è½½è¿‡ç¨‹çš„è¯´æ˜ã€‚" href=/v1.1/zh/docs/setup/kubernetes/download/>ä¸‹è½½ Istio å‘å¸ƒåŒ…</a></li><li role=treeitem aria-label=å‡†å¤‡><button aria-hidden=true></button><a title="ä¸º Istio åšå‡†å¤‡ã€‚" href=/v1.1/zh/docs/setup/kubernetes/prepare/>å‡†å¤‡</a><ul role=group aria-expanded=false><li role=treeitem aria-label=å¹³å°æ­å»º><button aria-hidden=true></button><a title="åœ¨å®‰è£… Istio å‰ï¼Œå¦‚ä½•å‡†å¤‡å„ç§ Kubernetes å¹³å°ã€‚" href=/v1.1/zh/docs/setup/kubernetes/prepare/platform-setup/>å¹³å°æ­å»º</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="ä¸º Istio è®¾ç½®é˜¿é‡Œäº‘ Kubernetes é›†ç¾¤çš„è¯´æ˜ã€‚" href=/v1.1/zh/docs/setup/kubernetes/prepare/platform-setup/alicloud/>é˜¿é‡Œäº‘</a></li><li role=none><a role=treeitem title="å¯¹ Azure é›†ç¾¤è¿›è¡Œé…ç½®ä»¥ä¾¿å®‰è£…è¿è¡Œ Istioã€‚" href=/v1.1/zh/docs/setup/kubernetes/prepare/platform-setup/azure/>Azure</a></li><li role=none><a role=treeitem title="ä½¿ç”¨æ¡Œé¢ç‰ˆ Docker å®‰è£… Istio çš„è¯´æ˜ã€‚" href=/v1.1/zh/docs/setup/kubernetes/prepare/platform-setup/docker/>æ¡Œé¢ç‰ˆ Docker</a></li><li role=none><a role=treeitem title="å¯¹ Google Kubernetes Engineï¼ˆGKEï¼‰é›†ç¾¤è¿›è¡Œé…ç½®ä»¥ä¾¿å®‰è£…è¿è¡Œ Istioã€‚" href=/v1.1/zh/docs/setup/kubernetes/prepare/platform-setup/gke/>Google Kubernetes Engine</a></li><li role=none><a role=treeitem title="ä¸º IBM Cloud é›†ç¾¤è®¾ç½® Istio çš„è¯´æ˜ã€‚" href=/v1.1/zh/docs/setup/kubernetes/prepare/platform-setup/ibm/>IBM Cloud</a></li><li role=none><a role=treeitem title="å¯¹ Minikube é›†ç¾¤è¿›è¡Œé…ç½®ä»¥ä¾¿å®‰è£…è¿è¡Œ Istioã€‚" href=/v1.1/zh/docs/setup/kubernetes/prepare/platform-setup/minikube/>Minikube</a></li><li role=none><a role=treeitem title="å¯¹ OpenShift é›†ç¾¤è¿›è¡Œé…ç½®ä»¥ä¾¿å®‰è£…è¿è¡Œ Istioã€‚" href=/v1.1/zh/docs/setup/kubernetes/prepare/platform-setup/openshift/>OpenShift</a></li><li role=none><a role=treeitem title="ä¸º Istio å¯¹ OKE é›†ç¾¤ç¯å¢ƒè¿›è¡Œé…ç½®ã€‚" href=/v1.1/zh/docs/setup/kubernetes/prepare/platform-setup/oci/>Oracle Cloud Infrastructure</a></li></ul></li></ul></li><li role=treeitem aria-label=å®‰è£…æ–¹æ¡ˆ><button aria-hidden=true></button><a title=é€‰æ‹©æœ€é€‚åˆæ‚¨éœ€æ±‚å’Œå¹³å°çš„æ–¹æ¡ˆã€‚ href=/v1.1/zh/docs/setup/kubernetes/install/>å®‰è£…æ–¹æ¡ˆ</a><ul role=group aria-expanded=false><li role=none><a role=treeitem title="åœ¨ Kubernetes é›†ç¾¤ä¸­å¿«é€Ÿå®‰è£… Istio æœåŠ¡ç½‘æ ¼çš„è¯´æ˜ã€‚" href=/v1.1/zh/docs/setup/kubernetes/install/kubernetes/>åœ¨ Kubernetes ä¸­å¿«é€Ÿå¼€å§‹</a></li><li role=none><a role=treeitem title="ä½¿ç”¨å†…å«çš„ Helm chart å®‰è£… Istioã€‚" href=/v1.1/zh/docs/setup/kubernetes/install/helm/>ä½¿ç”¨ Helm è¿›è¡Œå®‰è£…</a></li><li role=treeitem aria-label=å¤šé›†ç¾¤å®‰è£…><button aria-hidden=true></button><a title="é…ç½®è·¨è¶Šå¤šä¸ª Kubernetes é›†ç¾¤çš„ Istio æœåŠ¡ç½‘æ ¼ã€‚" href=/v1.1/zh/docs/setup/kubernetes/install/multicluster/>å¤šé›†ç¾¤å®‰è£…</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="ä½¿ç”¨ Istio Gateway è·¨è¶Šå¤šä¸ª Kubernetes é›†ç¾¤å®‰è£… Istio ç½‘æ ¼ä»¥è®¿é—®è¿œç¨‹ podã€‚" href=/v1.1/zh/docs/setup/kubernetes/install/multicluster/gateways/>Gateway è¿æ¥</a></li><li role=none><a role=treeitem title="é€šè¿‡ç›´è¿è¿œç¨‹ pods å®ç°å¤š Kubernetes é›†ç¾¤å®‰è£… Istio ç½‘æ ¼ã€‚" href=/v1.1/zh/docs/setup/kubernetes/install/multicluster/vpn/>VPN è¿æ¥</a></li></ul></li><li role=treeitem aria-label=ç‰¹å®šå¹³å°å®‰è£…è¯´æ˜><button aria-hidden=true></button><a title="æ”¯æŒçš„ Kubernetes å¹³å°çš„é¢å¤–å®‰è£…æµç¨‹ã€‚" href=/v1.1/zh/docs/setup/kubernetes/install/platform/>ç‰¹å®šå¹³å°å®‰è£…è¯´æ˜</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="å¦‚ä½•ä½¿ç”¨é˜¿é‡Œäº‘ Kubernetes å®¹å™¨æœåŠ¡å¿«é€Ÿå®‰è£… Istioã€‚" href=/v1.1/zh/docs/setup/kubernetes/install/platform/alicloud/>é˜¿é‡Œäº‘</a></li><li role=none><a role=treeitem title="åœ¨ Google Kubernetes Engine (GKE) ä¸Šå¿«é€Ÿæ­å»º Istio æœåŠ¡ã€‚" href=/v1.1/zh/docs/setup/kubernetes/install/platform/gke/>Google Kubernetes Engine</a></li><li role=none><a role=treeitem title="å¦‚ä½•ä½¿ç”¨ IBM å…¬æœ‰äº‘æˆ– IBM ç§æœ‰äº‘å¿«é€Ÿå®‰è£… Istioã€‚" href=/v1.1/zh/docs/setup/kubernetes/install/platform/ibm/>IBM Cloud</a></li></ul></li></ul></li><li role=treeitem aria-label=å‡çº§><button aria-hidden=true></button><a title="å‡çº§ Istio çš„ç›¸å…³ä¿¡æ¯ã€‚" href=/v1.1/zh/docs/setup/kubernetes/upgrade/>å‡çº§</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="åœ¨å‡çº§åˆ° Istio 1.1 ä¹‹å‰ï¼Œè¿ç»´äººå‘˜å¿…é¡»äº†è§£çš„é‡è¦æ›´æ”¹ã€‚" href=/v1.1/zh/docs/setup/kubernetes/upgrade/notice/>1.1 å‡çº§é€šçŸ¥</a></li><li role=none><a role=treeitem title="æ¼”ç¤ºå¦‚ä½•ç‹¬ç«‹å‡çº§ Istio æ§åˆ¶å¹³é¢å’Œæ•°æ®å¹³é¢ã€‚" href=/v1.1/zh/docs/setup/kubernetes/upgrade/steps/>å‡çº§æ­¥éª¤</a></li></ul></li><li role=treeitem aria-label=æ›´å¤šæŒ‡å—><button aria-hidden=true></button><a title=æœ‰å…³å…¶ä»–è®¾ç½®ä»»åŠ¡çš„æ›´å¤šä¿¡æ¯ã€‚ href=/v1.1/zh/docs/setup/kubernetes/additional-setup/>æ›´å¤šæŒ‡å—</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="Istio å†…ç½®çš„å®‰è£…é…ç½®æ–‡ä»¶ä»‹ç»ã€‚" href=/v1.1/zh/docs/setup/kubernetes/additional-setup/config-profiles/>å®‰è£…é…ç½®</a></li><li role=none><a role=treeitem title="ä»‹ç»ä¸¤ç§å°† Istio sidecar æ³¨å…¥åº”ç”¨ Pod çš„æ–¹æ³•ï¼šä½¿ç”¨ Sidecar æ³¨å…¥ Webhook è‡ªåŠ¨å®Œæˆï¼Œæˆ–ä½¿ç”¨ istioctl å®¢æˆ·ç«¯å·¥å…·æ‰‹å·¥å®Œæˆã€‚" href=/v1.1/zh/docs/setup/kubernetes/additional-setup/sidecar-injection/>æ³¨å…¥ Istio sidecar</a></li><li role=none><a role=treeitem title="è¿™é‡Œè®²è¿°äº† Istio å¯¹ Kubernetes ä¸­ Pod å’ŒæœåŠ¡çš„è¦æ±‚ã€‚" href=/v1.1/zh/docs/setup/kubernetes/additional-setup/requirements/>Istio å¯¹ Pod å’ŒæœåŠ¡çš„è¦æ±‚</a></li><li role=none><a role=treeitem title="Istio CNI æ’ä»¶çš„å®‰è£…å’Œä½¿ç”¨ Istioï¼Œè¯¥æ’ä»¶è®©è¿ç»´äººå‘˜å¯ä»¥ç”¨è¾ƒä½çš„æƒé™æ¥å®Œæˆç½‘æ ¼æœåŠ¡çš„éƒ¨ç½²å·¥ä½œã€‚" href=/v1.1/zh/docs/setup/kubernetes/additional-setup/cni/>Istio CNI æ’ä»¶çš„å®‰è£…å’Œä½¿ç”¨ Istio</a></li><li role=none><a role=treeitem title="éƒ¨ç½²åœ¨ Kubernetes ä¹‹ä¸­çš„ Istio æœåŠ¡ç½‘æ ¼ï¼Œå°†è™šæ‹Ÿæœºå’Œç‰©ç†æœºé›†æˆè¿›å…¥åˆ°æœåŠ¡ç½‘æ ¼çš„æ–¹æ³•ã€‚" href=/v1.1/zh/docs/setup/kubernetes/additional-setup/mesh-expansion/>ç½‘æ ¼æ‰©å±•</a></li></ul></li></ul></li><li role=treeitem aria-label="Nomad &amp; Consul"><button aria-hidden=true></button><a title="åŸºäº Consul å’Œ Nomad å®‰è£… Istio æ§åˆ¶å¹³é¢ã€‚" href=/v1.1/zh/docs/setup/consul/>Nomad &amp; Consul</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="é€šè¿‡ Docker Compose å¿«é€Ÿå®‰è£… Istio service meshã€‚" href=/v1.1/zh/docs/setup/consul/quick-start/>é€šè¿‡ Docker å¿«é€Ÿå®‰è£…</a></li><li role=none><a role=treeitem title="åŸºäº Consul å’Œ Nomad å®‰è£… Istio æ§åˆ¶å¹³é¢ã€‚" href=/v1.1/zh/docs/setup/consul/install/>å®‰è£…</a></li></ul></li></ul></div></div><div class=card><button class="header dynamic" id=card49 title="å¦‚ä½•ç”¨ Istio ç³»ç»Ÿå®ç°ç‰¹å®šç›®æ ‡çš„è¡Œä¸ºã€‚" aria-controls=card49-body><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#tasks"/></svg>ä»»åŠ¡</button><div class="body default" aria-labelledby=card49 role=region id=card49-body><ul role=tree aria-expanded=true aria-labelledby=card49><li role=treeitem aria-label=æµé‡ç®¡ç†><button aria-hidden=true></button><a title="æ¼”ç¤º Istio æµé‡è·¯ç”±åŠŸèƒ½çš„ä»»åŠ¡ã€‚" href=/v1.1/zh/docs/tasks/traffic-management/>æµé‡ç®¡ç†</a><ul role=group aria-expanded=false><li role=none><a role=treeitem title=æ­¤ä»»åŠ¡å°†è¯´æ˜å¦‚ä½•å°†è¯·æ±‚åŠ¨æ€è·¯ç”±åˆ°å¤šä¸ªç‰ˆæœ¬çš„å¾®æœåŠ¡ã€‚ href=/v1.1/zh/docs/tasks/traffic-management/request-routing/>é…ç½®è¯·æ±‚è·¯ç”±</a></li><li role=none><a role=treeitem title=æ­¤ä»»åŠ¡è¯´æ˜å¦‚ä½•æ³¨å…¥å»¶è¿Ÿå¹¶æµ‹è¯•åº”ç”¨ç¨‹åºçš„å¼¹æ€§ã€‚ href=/v1.1/zh/docs/tasks/traffic-management/fault-injection/>æ•…éšœæ³¨å…¥</a></li><li role=none><a role=treeitem title=å‘æ‚¨å±•ç¤ºå¦‚ä½•å°†æµé‡ä»æ—§ç‰ˆæœ¬è¿ç§»åˆ°æ–°ç‰ˆæœ¬çš„æœåŠ¡ã€‚ href=/v1.1/zh/docs/tasks/traffic-management/traffic-shifting/>æµé‡è½¬ç§»</a></li><li role=none><a role=treeitem title="å±•ç¤ºå¦‚ä½•å°†ä¸€ä¸ª TCP æœåŠ¡çš„æµé‡ä»è€ç‰ˆæœ¬è¿ç§»åˆ°æ–°ç‰ˆæœ¬ã€‚" href=/v1.1/zh/docs/tasks/traffic-management/tcp-traffic-shifting/>TCP æµé‡è½¬ç§»</a></li><li role=none><a role=treeitem title="æœ¬ä»»åŠ¡ç”¨äºç¤ºèŒƒå¦‚ä½•ä½¿ç”¨ Istio åœ¨ Envoy ä¸­è®¾ç½®è¯·æ±‚è¶…æ—¶ã€‚" href=/v1.1/zh/docs/tasks/traffic-management/request-timeouts/>è®¾ç½®è¯·æ±‚è¶…æ—¶</a></li><li role=none><a role=treeitem title="ä»‹ç»åœ¨æœåŠ¡ç½‘æ ¼ Istio ä¸­å¦‚ä½•é…ç½®å¤–éƒ¨å…¬å¼€æœåŠ¡ã€‚" href=/v1.1/zh/docs/tasks/traffic-management/ingress/>æ§åˆ¶ Ingress æµé‡</a></li><li role=treeitem aria-label="åŠ å¯† Ingress Gateway"><button aria-hidden=true></button><a title="ä½¿ç”¨å¤šç§æ–¹æ³•ä¸º Gateway æ§åˆ¶å™¨æä¾›åŠ å¯†æ”¯æŒã€‚" href=/v1.1/zh/docs/tasks/traffic-management/secure-ingress/>åŠ å¯† Ingress Gateway</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="å¦‚ä½•é…ç½® Istioï¼Œå€ŸåŠ© SDSï¼ˆSecret å‘ç°æœåŠ¡ï¼‰ï¼Œä½¿ç”¨ TLS æˆ–åŒå‘ TLS å°†æœåŠ¡å¼€æ”¾åˆ°ç½‘æ ¼ä¹‹å¤–ã€‚" href=/v1.1/zh/docs/tasks/traffic-management/secure-ingress/sds/>ä½¿ç”¨ SDS ä¸º Gateway æä¾› HTTPS åŠ å¯†æ”¯æŒ</a></li></ul></li><li role=none><a role=treeitem title="åœ¨ Istio ä¸­é…ç½®ä»ç½‘æ ¼å†…è®¿é—®å¤–éƒ¨æœåŠ¡çš„æµé‡è·¯ç”±ã€‚" href=/v1.1/zh/docs/tasks/traffic-management/egress/>æ§åˆ¶ Egress æµé‡</a></li><li role=none><a role=treeitem title=ç”¨è¿æ¥ã€è¯·æ±‚ä»¥åŠå¤–éƒ¨æ£€æµ‹æ¥è¿›è¡Œç†”æ–­é…ç½®çš„è¿‡ç¨‹ã€‚ href=/v1.1/zh/docs/tasks/traffic-management/circuit-breaking/>ç†”æ–­</a></li><li role=none><a role=treeitem title="æ­¤ä»»åŠ¡æ¼”ç¤ºäº† Istio çš„æµé‡é•œåƒåŠŸèƒ½ã€‚" href=/v1.1/zh/docs/tasks/traffic-management/mirroring/>é•œåƒ</a></li></ul></li><li role=treeitem aria-label=å®‰å…¨><button class=show aria-hidden=true></button><a title=æ¼”ç¤ºå¯¹æœåŠ¡ç½‘æ ¼è¿›è¡Œå®‰å…¨åŠ å›ºçš„æ–¹æ³•ã€‚ href=/v1.1/zh/docs/tasks/security/>å®‰å…¨</a><ul role=group aria-expanded=true class=leaf-section><li role=none><a role=treeitem title="å±•ç¤ºä¸º HTTP æœåŠ¡è®¾ç½®åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶æ–¹æ³•ã€‚" href=/v1.1/zh/docs/tasks/security/authz-http/>HTTP æœåŠ¡çš„è®¿é—®æ§åˆ¶</a></li><li role=none><a role=treeitem title="æ•´åˆ Vault CA åˆ° Istio ä¸­ä¸ºåŒå‘ TLS æä¾› æ”¯æŒã€‚" href=/v1.1/zh/docs/tasks/security/vault-ca/>Istio Vault CA é›†æˆ</a></li><li role=none><a role=treeitem title="æœ‰å…³å¦‚ä½•åœ¨ Istio ä¸­é…ç½®åŸºäºç»„çš„æˆæƒå’Œé…ç½®åˆ—è¡¨ç±»å‹å£°æ˜çš„æˆæƒçš„æ•™ç¨‹ã€‚" href=/v1.1/zh/docs/tasks/security/rbac-groups/>åŸºäºç»„å’Œåˆ—è¡¨ç±»å‹å£°æ˜çš„æˆæƒ</a></li><li role=none><span role=treeitem class=current title="ä»‹ç»å¦‚ä½•ä½¿ç”¨ Istio è®¤è¯ç­–ç•¥è®¾ç½®åŒå‘ TLS å’ŒåŸºæœ¬çš„ç»ˆç«¯ç”¨æˆ·è®¤è¯ã€‚">åŸºç¡€è®¤è¯ç­–ç•¥</span></li><li role=none><a role=treeitem title="å¯¹ Istio çš„è‡ªåŠ¨åŒå‘ TLS è®¤è¯åŠŸèƒ½è¿›è¡Œä½“éªŒå’Œæµ‹è¯•ã€‚" href=/v1.1/zh/docs/tasks/security/mutual-tls/>æ·±å…¥äº†è§£åŒå‘ TLS</a></li><li role=none><a role=treeitem title=å±•ç¤ºå®½å®¹æ¨¡å¼çš„çš„é‰´æƒè¿‡ç¨‹ã€‚ href=/v1.1/zh/docs/tasks/security/authz-permissive/>é‰´æƒè¿‡ç¨‹ä¸­çš„å®½å®¹æ¨¡å¼</a></li><li role=none><a role=treeitem title="å±•ç¤ºå¦‚ä½•ä¸º TCP æœåŠ¡è®¾ç½®åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ã€‚" href=/v1.1/zh/docs/tasks/security/authz-tcp/>TCP æœåŠ¡çš„è®¿é—®æ§åˆ¶</a></li><li role=none><a role=treeitem title=å±•ç¤ºå¦‚ä½•åœ¨æœåŠ¡ç½‘æ ¼ä¸­è¿›è¡ŒåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ã€‚ href=/v1.1/zh/docs/tasks/security/role-based-access-control/>åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶</a></li><li role=none><a role=treeitem title="è¿ç»´äººå‘˜å¦‚ä½•ä½¿ç”¨ç°æœ‰æ ¹è¯ä¹¦é…ç½® Citadel è¿›è¡Œè¯ä¹¦ä»¥åŠå¯†é’¥çš„ç­¾å‘ã€‚" href=/v1.1/zh/docs/tasks/security/plugin-ca-cert/>æ’å…¥å¤–éƒ¨ CA å¯†é’¥å’Œè¯ä¹¦</a></li><li role=none><a role=treeitem title="å¦‚ä½•åœ¨ Kubernetes ä¸­å¯ç”¨ Citadel çš„å¥åº·æ£€æŸ¥ã€‚" href=/v1.1/zh/docs/tasks/security/health-check/>Citadel çš„å¥åº·æ£€æŸ¥</a></li><li role=none><a role=treeitem title="å±•ç¤ºå¯ç”¨ SDS æ¥ä¸º Istio æä¾›èº«ä»½æœåŠ¡çš„è¿‡ç¨‹ã€‚" href=/v1.1/zh/docs/tasks/security/auth-sds/>é€šè¿‡ SDS æä¾›èº«ä»½æœåŠ¡</a></li><li role=none><a role=treeitem title="å¦‚ä½•æ¸è¿›å¼çš„ä¸ºç°æœ‰ Istio æœåŠ¡æ·»åŠ åŒå‘ TLS æ”¯æŒã€‚" href=/v1.1/zh/docs/tasks/security/mtls-migration/>åŒå‘ TLS çš„è¿ç§»</a></li><li role=none><a role=treeitem title="å±•ç¤ºå¦‚ä½•åœ¨ HTTPS æœåŠ¡ä¸Šå¯ç”¨åŒå‘ TLSã€‚" href=/v1.1/zh/docs/tasks/security/https-overlay/>é€šè¿‡ HTTPS è¿›è¡ŒåŒå‘ TLS</a></li></ul></li><li role=treeitem aria-label=ç­–ç•¥><button aria-hidden=true></button><a title=æ¼”ç¤ºç­–ç•¥å®æ–½åŠŸèƒ½ã€‚ href=/v1.1/zh/docs/tasks/policy-enforcement/>ç­–ç•¥</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="æœ¬ä»»åŠ¡è®²è§£å¦‚ä½•å¯ç”¨ Istio ç­–ç•¥æ£€æŸ¥åŠŸèƒ½ã€‚" href=/v1.1/zh/docs/tasks/policy-enforcement/enabling-policy/>å¯ç”¨ç­–ç•¥æ£€æŸ¥</a></li><li role=none><a role=treeitem title="è¿™ä¸€ä»»åŠ¡å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Istio åŠ¨æ€çš„å¯¹æœåŠ¡é€šä¿¡è¿›è¡Œé€Ÿç‡é™åˆ¶ã€‚" href=/v1.1/zh/docs/tasks/policy-enforcement/rate-limiting/>å¯ç”¨é€Ÿç‡é™åˆ¶</a></li><li role=none><a role=treeitem title="å±•ç¤ºä½¿ç”¨ç®€å•çš„ Denier é€‚é…å™¨æˆ–é»‘ç™½åå•å¯¹æœåŠ¡è¿›è¡Œè®¿é—®æ§åˆ¶çš„æ–¹æ³•ã€‚" href=/v1.1/zh/docs/tasks/policy-enforcement/denial-and-list/>Denier é€‚é…å™¨ä»¥åŠé»‘ç™½åå•</a></li><li role=none><a role=treeitem title="æ˜¾ç¤ºå¦‚ä½•ä½¿ç”¨ç­–ç•¥é€‚é…å™¨ä¿®æ”¹è¯·æ±‚ header å’Œè·¯ç”±ã€‚" href=/v1.1/zh/docs/tasks/policy-enforcement/control-headers/>æ§åˆ¶ header å’Œè·¯ç”±</a></li></ul></li><li role=treeitem aria-label=é¥æµ‹><button aria-hidden=true></button><a title=æ¼”ç¤ºä»æœåŠ¡ç½‘æ ¼æ”¶é›†é¥æµ‹ä¿¡æ¯çš„æ–¹æ³•ã€‚ href=/v1.1/zh/docs/tasks/telemetry/>é¥æµ‹</a><ul role=group aria-expanded=false><li role=treeitem aria-label=æŒ‡æ ‡åº¦é‡><button aria-hidden=true></button><a title="æ¼”ç¤º Istio ç½‘æ ¼æŒ‡æ ‡åº¦é‡çš„é…ç½®ã€æ”¶é›†å’Œå¤„ç†ã€‚" href=/v1.1/zh/docs/tasks/telemetry/metrics/>æŒ‡æ ‡åº¦é‡</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="è¿™ä¸€ä»»åŠ¡è®²è¿°å¦‚ä½•é…ç½® Istioï¼Œè¿›è¡ŒæŒ‡æ ‡å’Œæ—¥å¿—çš„æ”¶é›†å·¥ä½œã€‚" href=/v1.1/zh/docs/tasks/telemetry/metrics/collecting-metrics/>æ”¶é›†æŒ‡æ ‡å’Œæ—¥å¿—</a></li><li role=none><a role=treeitem title="æœ¬ä»»åŠ¡å±•ç¤ºäº†å¦‚ä½•é…ç½® Istio è¿›è¡Œ TCP æœåŠ¡çš„æŒ‡æ ‡æ”¶é›†ã€‚" href=/v1.1/zh/docs/tasks/telemetry/metrics/tcp-metrics/>è·å– TCP æœåŠ¡æŒ‡æ ‡</a></li><li role=none><a role=treeitem title="æ­¤ä»»åŠ¡è¯´æ˜å¦‚ä½•ä½¿ç”¨ Prometheus æŸ¥è¯¢ Istio æŒ‡æ ‡ã€‚" href=/v1.1/zh/docs/tasks/telemetry/metrics/querying-metrics/>æŸ¥è¯¢ Prometheus çš„æŒ‡æ ‡</a></li><li role=none><a role=treeitem title="è¿™ä¸ªä»»åŠ¡å‘æ‚¨å±•ç¤ºäº†å¦‚ä½•è®¾ç½®å’Œä½¿ç”¨ Istio ä»ªè¡¨ç›˜æ¥ç›‘è§†ç½‘æ ¼æµé‡ã€‚" href=/v1.1/zh/docs/tasks/telemetry/metrics/using-istio-dashboard/>ä½¿ç”¨ Grafana å¯è§†åŒ–æŒ‡æ ‡åº¦é‡</a></li></ul></li><li role=treeitem aria-label=æ—¥å¿—><button aria-hidden=true></button><a title="æ¼”ç¤º Istio ç½‘æ ¼æ—¥å¿—çš„é…ç½®ã€æ”¶é›†å’Œå¤„ç†ã€‚" href=/v1.1/zh/docs/tasks/telemetry/logs/>æ—¥å¿—</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="è¿™ä¸€ä»»åŠ¡è®²è¿°å¦‚ä½•é…ç½® Istioï¼Œè¿›è¡Œæ—¥å¿—çš„æ”¶é›†å·¥ä½œã€‚" href=/v1.1/zh/docs/tasks/telemetry/logs/collecting-logs/>æ”¶é›†æ—¥å¿—</a></li><li role=none><a role=treeitem title="æ­¤ä»»åŠ¡å‘æ‚¨å±•ç¤ºå¦‚ä½•é…ç½® Envoy ä»£ç†å°†è®¿é—®æ—¥å¿—æ‰“å°åˆ°å…¶æ ‡å‡†è¾“å‡ºã€‚" href=/v1.1/zh/docs/tasks/telemetry/logs/access-log/>è·å– Envoy è®¿é—®æ—¥å¿—</a></li><li role=none><a role=treeitem title="æ­¤ä»»åŠ¡è¯´æ˜å¦‚ä½•é…ç½® Istio ä»¥å°†æ—¥å¿—è¾“å‡ºåˆ° Fluentd å®ˆæŠ¤ç¨‹åºã€‚" href=/v1.1/zh/docs/tasks/telemetry/logs/fluentd/>ä½¿ç”¨ Fluentd è®°å½•æ—¥å¿—</a></li></ul></li><li role=treeitem aria-label=åˆ†å¸ƒå¼è¿½è¸ª><button aria-hidden=true></button><a title="è¯¥ä»»åŠ¡å±•ç¤ºäº†å¦‚ä½•ä¸ºå¯ç”¨äº† Istio æ”¯æŒçš„åº”ç”¨è¿›è¡Œè¿½è¸ªã€‚" href=/v1.1/zh/docs/tasks/telemetry/distributed-tracing/>åˆ†å¸ƒå¼è¿½è¸ª</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="Istio åˆ†å¸ƒå¼è¿½è¸ªæ¦‚è¿°ã€‚" href=/v1.1/zh/docs/tasks/telemetry/distributed-tracing/overview/>æ¦‚è¿°</a></li><li role=none><a role=treeitem title="äº†è§£å¦‚ä½•é…ç½®ä»£ç†ä»¥å‘ Jaeger å‘é€è¿½è¸ªè¯·æ±‚ã€‚" href=/v1.1/zh/docs/tasks/telemetry/distributed-tracing/jaeger/>Jaeger</a></li><li role=none><a role=treeitem title="äº†è§£å¦‚ä½•é…ç½®ä»£ç†ä»¥å‘ Zipkin å‘é€è¿½è¸ªè¯·æ±‚ã€‚" href=/v1.1/zh/docs/tasks/telemetry/distributed-tracing/zipkin/>Zipkin</a></li><li role=none><a role=treeitem title="å¦‚ä½•é…ç½®ä»£ç†ä»¥å‘é€è¯·æ±‚è‡³ LightStep [ğ‘¥]PM." href=/v1.1/zh/docs/tasks/telemetry/distributed-tracing/lightstep/>ä½¿ç”¨ LightStep [ğ‘¥]PM è¿›è¡Œåˆ†å¸ƒå¼è¿½è¸ª</a></li></ul></li><li role=none><a role=treeitem title="æœ¬ä»»åŠ¡å±•ç¤ºäº†åœ¨ Istio ç½‘æ ¼ä¸­å¯¹æœåŠ¡è¿›è¡Œå¯è§†åŒ–çš„è¿‡ç¨‹ã€‚" href=/v1.1/zh/docs/tasks/telemetry/kiali/>ç½‘æ ¼å¯è§†åŒ–</a></li><li role=none><a role=treeitem title="æœ¬ä»»åŠ¡å±•ç¤ºäº†ä¸º Istio é¥æµ‹æ’ä»¶é…ç½®å¤–éƒ¨è®¿é—®çš„è¿‡ç¨‹ã€‚" href=/v1.1/zh/docs/tasks/telemetry/gateways/>é¥æµ‹æ’ä»¶çš„è¿œç¨‹è®¿é—®</a></li></ul></li></ul></div></div><div class=card><button class="header dynamic" id=card84 title="è¿™é‡ŒåŒ…æ‹¬å¤šä¸ªå¯ä¾› Istio ä½¿ç”¨çš„å¯å®Œæ•´å·¥ä½œçš„ç¤ºä¾‹ï¼Œä½ å¯ä»¥ç”¨æ¥äº²è‡ªéƒ¨ç½²å’Œä½“éªŒè¿™äº›ç¤ºä¾‹ã€‚" aria-controls=card84-body><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#examples"/></svg>ç¤ºä¾‹</button><div class=body aria-labelledby=card84 role=region id=card84-body><ul role=tree aria-expanded=true aria-labelledby=card84><li role=none><a role=treeitem title="éƒ¨ç½²ä¸€ä¸ªç”¨äºæ¼”ç¤ºå¤šç§ Istio ç‰¹æ€§çš„åº”ç”¨ï¼Œç”±å››ä¸ªå•ç‹¬çš„å¾®æœåŠ¡æ„æˆã€‚" href=/v1.1/zh/docs/examples/bookinfo/>Bookinfo åº”ç”¨</a></li><li role=none><a role=treeitem title="å¦‚ä½•åœ¨ Istio æœåŠ¡ç½‘æ ¼ä¸­ä½¿ç”¨å¤šç§æµé‡ç®¡ç†åŠŸèƒ½ã€‚" href=/v1.1/zh/docs/examples/intelligent-routing/>æ™ºèƒ½è·¯ç”±</a></li><li role=none><a role=treeitem title="æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ Istio Mixer å’Œ Istio sidecar è·å–æŒ‡æ ‡å’Œæ—¥å¿—ï¼Œå¹¶åœ¨ä¸åŒçš„æœåŠ¡é—´è¿›è¡Œè¿½è¸ªã€‚" href=/v1.1/zh/docs/examples/telemetry/>æ·±å…¥é¥æµ‹</a></li><li role=none><a role=treeitem title="è¯´æ˜å¦‚ä½•åœ¨è°·æ­Œäº‘ Endpoints æœåŠ¡ä¸­æ‰‹åŠ¨æ•´åˆ Istioã€‚" href=/v1.1/zh/docs/examples/endpoints/>åœ¨è°·æ­Œäº‘ Endpoints æœåŠ¡ä¸­å®‰è£… Istio</a></li><li role=none><a role=treeitem title="åœ¨å•ä¸€æœåŠ¡ç½‘æ ¼ä¸­ï¼Œå¦‚ä½•ä½¿ç”¨ Istio å¯¹ Kubernetes é›†ç¾¤ä»¥åŠè™šæ‹Ÿæœºè¿›è¡Œæ§åˆ¶ã€‚" href=/v1.1/zh/docs/examples/integrating-vms/>è™šæ‹Ÿæœºé›†æˆ</a></li><li role=treeitem aria-label=è¾¹ç¼˜æµé‡æ§åˆ¶><button aria-hidden=true></button><a title="ç”¨äºç®¡ç† Istio æœåŠ¡ç½‘æ ¼çš„è¾¹ç¼˜æµé‡ï¼ˆå³ Ingress å’Œ Egress æµé‡ï¼‰çš„å„ç§é«˜çº§ç¤ºä¾‹ã€‚" href=/v1.1/zh/docs/examples/advanced-gateways/>è¾¹ç¼˜æµé‡æ§åˆ¶</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="ä»‹ç»å¦‚ä½•ä¸ºå…¥å£ç½‘å…³é…ç½® SNI ç›´é€šã€‚" href=/v1.1/zh/docs/examples/advanced-gateways/ingress-sni-passthrough/>æ²¡æœ‰ TLS çš„ Ingress gateway</a></li><li role=none><a role=treeitem title="æè¿°å¦‚ä½•é€šè¿‡ä¸“ç”¨ç½‘å…³æœåŠ¡å°†æµé‡å®šå‘åˆ°å¤–éƒ¨æœåŠ¡æ¥é…ç½® Istioã€‚" href=/v1.1/zh/docs/examples/advanced-gateways/egress-gateway/>é…ç½® Egress gateway</a></li><li role=none><a role=treeitem title="æè¿°äº†é…ç½® Egress ç½‘å…³æ¥å‘èµ·å¯¹å¤–éƒ¨æœåŠ¡è¿›è¡Œ TLS é€šä¿¡çš„è¿‡ç¨‹ã€‚" href=/v1.1/zh/docs/examples/advanced-gateways/egress-gateway-tls-origination/>Egress ç½‘å…³çš„ TLS å‘èµ·è¿‡ç¨‹</a></li><li role=none><a role=treeitem title="æ­¤ä»»åŠ¡æè¿° Istio å¦‚ä½•é…ç½®å‡ºå£æµé‡çš„ TLSã€‚" href=/v1.1/zh/docs/examples/advanced-gateways/egress-tls-origination/>å‡ºå£æµé‡çš„ TLS</a></li><li role=none><a role=treeitem title="ä»‹ç»å¦‚ä½•ä¸ºå…¬å…±åŸŸä¸­çš„ä¸€ç»„ä¸»æœºå¯ç”¨ Egress æµé‡ï¼Œè€Œä¸æ˜¯å•ç‹¬é…ç½®æ¯ä¸ªä¸»æœºã€‚" href=/v1.1/zh/docs/examples/advanced-gateways/wildcard-egress-hosts/>ä½¿ç”¨é€šé…ç¬¦ä¸»æœºé…ç½® Egress æµé‡</a></li><li role=none><a role=treeitem title="å¦‚ä½•ä¸º Egress TLS æµé‡é…ç½® SNI ç›‘æ§å¹¶åº”ç”¨ç­–ç•¥ã€‚" href=/v1.1/zh/docs/examples/advanced-gateways/egress_sni_monitoring_and_policies/>Egress TLS æµé‡ä¸­çš„ SNI ç›‘æ§åŠç­–ç•¥</a></li><li role=none><a role=treeitem title="æè¿°å¦‚ä½•é…ç½® Istio ä»¥å…è®¸åº”ç”¨ç¨‹åºä½¿ç”¨å¤–éƒ¨ HTTPS ä»£ç†ã€‚" href=/v1.1/zh/docs/examples/advanced-gateways/http-proxy/>è¿æ¥åˆ°å¤–éƒ¨ HTTPS ä»£ç†</a></li><li role=none><a role=treeitem title="å±•ç¤ºä½¿ç”¨ cert-Manager ä¸º Kubernetes Ingress è·å– Let's Encrypt TLS è¯ä¹¦çš„è¿‡ç¨‹ã€‚" href=/v1.1/zh/docs/examples/advanced-gateways/ingress-certmgr/>ä½¿ç”¨ cert-manager åŠ å¯† Kubernetes Ingress</a></li></ul></li><li role=treeitem aria-label=å•ä¸€ä¸‰å±‚ç½‘ç»œçš„å¤šé›†ç¾¤ç½‘æ ¼><button aria-hidden=true></button><a title="æ‚¨å¯ä»¥å°è¯•å„ç§åŸºäº VPN çš„ Istio å¤šé›†ç¾¤ç¤ºä¾‹ã€‚" href=/v1.1/zh/docs/examples/multicluster/>å•ä¸€ä¸‰å±‚ç½‘ç»œçš„å¤šé›†ç¾¤ç½‘æ ¼</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title=åœ¨ä¸€ä¸ªä½¿ç”¨ç½‘å…³è¿›è¡Œè¿æ¥çš„å¤šé›†ç¾¤ç½‘æ ¼ä¸­é…ç½®è¿œç¨‹æœåŠ¡ã€‚ href=/v1.1/zh/docs/examples/multicluster/gateways/>é€šè¿‡ç½‘å…³è¿›è¡Œè¿æ¥çš„å¤šé›†ç¾¤</a></li><li role=none><a role=treeitem title="åŸºäº GKE çš„ Istio å¤šé›†ç¾¤å®‰è£…ã€‚" href=/v1.1/zh/docs/examples/multicluster/gke/>Google Kubernetes Engine</a></li><li role=none><a role=treeitem title="å¤š IBM Cloud Private é›†ç¾¤å®‰è£… Istio ç¤ºä¾‹ã€‚" href=/v1.1/zh/docs/examples/multicluster/icp/>IBM Cloud Private</a></li><li role=none><a role=treeitem title="IBM Cloud Kubernetes Service å’Œ IBM Cloud Private ä¹‹é—´çš„å¤šé›†ç¾¤ç¤ºä¾‹ã€‚" href=/v1.1/zh/docs/examples/multicluster/iks-icp/>IBM Cloud Kubernetes Service &amp; IBM Cloud Private</a></li><li role=none><a role=treeitem title="åˆ©ç”¨ Istio çš„æ°´å¹³åˆ†å‰² EDS æ¥åˆ›å»ºå¤šé›†ç¾¤ç½‘æ ¼ã€‚" href=/v1.1/zh/docs/examples/multicluster/split-horizon-eds/>é›†ç¾¤æ„ŸçŸ¥çš„æœåŠ¡è·¯ç”±</a></li></ul></li></ul></div></div><div class=card><button class="header dynamic" id=card114 title="å‚è€ƒéƒ¨åˆ†åŒ…å«è¯¦ç»†çš„æƒå¨å‚è€ƒèµ„æ–™ï¼Œå¦‚å‘½ä»¤è¡Œé€‰é¡¹ã€é…ç½®é€‰é¡¹å’Œ API è°ƒç”¨å‚æ•°ã€‚" aria-controls=card114-body><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#reference"/></svg>å‚è€ƒ</button><div class=body aria-labelledby=card114 role=region id=card114-body><ul role=tree aria-expanded=true aria-labelledby=card114><li role=treeitem aria-label=é…ç½®><button aria-hidden=true></button><a title=å…³äºé…ç½®é€‰é¡¹çš„è¯¦ç»†ä¿¡æ¯ã€‚ href=/v1.1/zh/docs/reference/config/>é…ç½®</a><ul role=group aria-expanded=false><li role=treeitem aria-label=æµé‡ç®¡ç†><button aria-hidden=true></button><a title="æè¿°å¦‚ä½•é…ç½® HTTP/TCP è·¯ç”±åŠŸèƒ½ã€‚" href=/v1.1/zh/docs/reference/config/networking/>æµé‡ç®¡ç†</a><ul role=group aria-expanded=false class=leaf-section></ul></li><li role=none><a role=treeitem title="æè¿°äº†ä½¿ç”¨ Helm chart å®‰è£… Istio æ—¶å¯ä»¥ä½¿ç”¨çš„é€‰é¡¹ã€‚" href=/v1.1/zh/docs/reference/config/installation-options/>å®‰è£…é€‰é¡¹</a></li><li role=none><a role=treeitem title="è¯¦ç»†æè¿° release-1.0 å’Œ release-1.1 ä¹‹é—´ Helm chart å®‰è£…é€‰é¡¹çš„å·®å¼‚ã€‚" href=/v1.1/zh/docs/reference/config/installation-options-changes/>å®‰è£…é€‰é¡¹çš„å˜æ›´</a></li><li role=treeitem aria-label=æˆæƒ><button aria-hidden=true></button><a title=å…³äºå¦‚ä½•é…ç½®Istioæˆæƒç‰¹æ€§çš„æè¿°ã€‚ href=/v1.1/zh/docs/reference/config/authorization/>æˆæƒ</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title=æè¿°æ‰€æ”¯æŒçš„çº¦æŸå’Œå±æ€§ã€‚ href=/v1.1/zh/docs/reference/config/authorization/constraints-and-properties/>çº¦æŸå’Œå±æ€§</a></li><li role=none><a role=treeitem title=é…ç½®åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ã€‚ href=/v1.1/zh/docs/reference/config/authorization/istio.rbac.v1alpha1/>RBAC</a></li></ul></li><li role=treeitem aria-label=ç­–ç•¥å’Œé¥æµ‹><button aria-hidden=true></button><a title="æè¿°å¦‚ä½•é…ç½® Istio çš„ç­–ç•¥å’Œé¥æµ‹åŠŸèƒ½ã€‚" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/>ç­–ç•¥å’Œé¥æµ‹</a><ul role=group aria-expanded=false><li role=none><a role=treeitem title=ä»‹ç»ç­–ç•¥å’Œæ§åˆ¶ä¸­ä¼šç”¨åˆ°çš„ä¸€äº›åŸºç¡€å±æ€§è¯æ±‡ã€‚ href=/v1.1/zh/docs/reference/config/policy-and-telemetry/attribute-vocabulary/>å±æ€§è¯æ±‡</a></li><li role=none><a role=treeitem title="Mixer çš„é…ç½®è¡¨è¾¾å¼è¯­è¨€å‚è€ƒã€‚" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/expression-language/>è¡¨è¾¾å¼è¯­è¨€</a></li><li role=treeitem aria-label=é€‚é…å™¨><button aria-hidden=true></button><a title="Mixer é€‚é…å™¨èƒ½å¤Ÿè®© Istio è¿æ¥å„ç§åŸºç¡€è®¾æ–½åç«¯ä»¥å®Œæˆç±»ä¼¼æŒ‡æ ‡å’Œæ—¥å¿—è¿™æ ·çš„åŠŸèƒ½ã€‚" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/>é€‚é…å™¨</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="Apigee çš„åˆ†å¸ƒå¼ç­–ç•¥æ£€æŸ¥ä»¥åŠåˆ†æé€‚é…å™¨ã€‚" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/apigee/>Apigee</a></li><li role=none><a role=treeitem title="é€‚ç”¨äº circonus.com çš„ç›‘æ§è§£å†³æ–¹æ¡ˆã€‚" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/circonus/>Circonus</a></li><li role=none><a role=treeitem title="CloudMonitor é€‚é…å™¨ä½¿ Istio å¯ä»¥å‘ AliCloud CloudMonitor æä¾›æŒ‡æ ‡ã€‚" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/cloudmonitor/>CloudMonitor</a></li><li role=none><a role=treeitem title=å§‹ç»ˆè¿”å›æŒ‰å‰ææ¡ä»¶æ‹’ç»çš„é€‚é…å™¨ã€‚ href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/denier/>Denier</a></li><li role=none><a role=treeitem title="ç”¨äºå°†æ—¥å¿—å‘é€ç»™ Fluentd å®ˆæŠ¤è¿›ç¨‹çš„é€‚é…å™¨ã€‚" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/fluentd/>Fluentd</a></li><li role=none><a role=treeitem title="å°†æŒ‡æ ‡å‘é€åˆ° SignalFx çš„é€‚é…å™¨ã€‚" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/signalfx/>SignalFx</a></li><li role=none><a role=treeitem title="ä» Kubernetes ç¯å¢ƒä¸­è·å–é›†ç¾¤ä¿¡æ¯ã€‚" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/kubernetesenv/>Kubernetes Env</a></li><li role=none><a role=treeitem title=ç”¨äºæ‰§è¡Œé»‘åå•æˆ–ç™½åå•æ£€æµ‹çš„é€‚é…å™¨ã€‚ href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/list/>List</a></li><li role=none><a role=treeitem title=ç®€å•å†…å­˜é…é¢ç®¡ç†ç³»ç»Ÿé€‚é…å™¨ã€‚ href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/memquota/>Memory quota</a></li><li role=none><a role=treeitem title="åŸºäº Redis çš„é…é¢ç®¡ç†ç³»ç»Ÿã€‚" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/redisquota/>Redis Quota</a></li><li role=none><a role=treeitem title="ç”¨äºå‘ Google Service Control å‘é€æ—¥å¿—å’ŒæŒ‡æ ‡çš„é€‚é…å™¨ã€‚" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/servicecontrol/>Service Control</a></li><li role=none><a role=treeitem title="è¯¥é€‚é…å™¨ç”¨äºå‘ statsd åç«¯å‘é€æŒ‡æ ‡æ•°æ®ã€‚" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/statsd/>statsd</a></li><li role=none><a role=treeitem title=è¯¥é€‚é…å™¨å¯ä»¥åœ¨æœ¬åœ°è¾“å‡ºæ—¥å¿—å’ŒæŒ‡æ ‡ã€‚ href=/v1.1/zh/docs/reference/config/policy-and-telemetry/adapters/stdio/>Stdio</a></li></ul></li><li role=treeitem aria-label=æ¨¡æ¿><button aria-hidden=true></button><a title="Mixer æ¨¡æ¿ç”¨äºå°†æ•°æ®å‘é€åˆ°å„ä¸ªé€‚é…å™¨ã€‚" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/>æ¨¡æ¿</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="è¯¥æ¨¡æ¿ç”¨äºè¡¨è¾¾ä¸€ä¸ª API Keyã€‚" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/apikey/>API Key</a></li><li role=none><a role=treeitem title="Analytics æ¨¡æ¿ç”¨äºå‘ Apigee å‘é€è¿è¡Œæ—¶é¥æµ‹æ•°æ®ã€‚" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/analytics/>Analytics</a></li><li role=none><a role=treeitem title=è¯¥æ¨¡ç‰ˆç”¨äºè®¿é—®æ§åˆ¶æŸ¥è¯¢ã€‚ href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/authorization/>Authorization</a></li><li role=none><a role=treeitem title=è¯¥æ¨¡æ¿ä¸åŒ…å«ä»»ä½•æ•°æ®ï¼Œç”¨äºæµ‹è¯•ã€‚ href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/checknothing/>Check Nothing</a></li><li role=none><a role=treeitem title="ç”¨äºç”Ÿæˆ Kubernetes çš„ç‰¹å®šå±æ€§ã€‚" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/kubernetes/>Kubernetes</a></li><li role=none><a role=treeitem title=è¯¥æ¨¡æ¿ç”¨äºæ‰§è¡Œåˆ—è¡¨æ£€æŸ¥æ“ä½œã€‚ href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/listentry/>List Entry</a></li><li role=none><a role=treeitem title=è¯¥æ¨¡æ¿ç”¨äºè¡¨è¾¾ä¸€æ¡è¿è¡Œæ—¶æ—¥å¿—é¡¹ã€‚ href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/logentry/>Log Entry</a></li><li role=none><a role=treeitem title=è¯¥æ¨¡æ¿ç”¨äºè¡¨è¾¾ä¸€ä¸ªè¿è¡Œæ—¶äº§ç”Ÿçš„ç›‘æ§æŒ‡æ ‡æ•°æ®ã€‚ href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/metric/>Metric</a></li><li role=none><a role=treeitem title=è¯¥æ¨¡æ¿ç”¨äºè¡¨è¾¾å ç”¨é…é¢çš„è¯·æ±‚ã€‚ href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/quota/>Quota</a></li><li role=none><a role=treeitem title=è¯¥æ¨¡æ¿ä¸åŒ…å«æ•°æ®ï¼Œç”¨äºæµ‹è¯•ã€‚ href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/reportnothing/>Report Nothing</a></li><li role=none><a role=treeitem title="ç”¨äº Google Service Control é€‚é…å™¨çš„æ¨¡æ¿ã€‚" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/servicecontrolreport/>Service Control Report</a></li><li role=none><a role=treeitem title="è¯¥æ¨¡æ¿ç”¨äºè¡¨è¾¾åˆ†å¸ƒå¼è¿½è¸ªæ•°æ®ä¸­çš„ä¸€ä¸ª Spanã€‚" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/templates/tracespan/>Trace Span</a></li></ul></li><li role=none><a role=treeitem title="é€šè¿‡ Mixer ä» Istio å¯¼å‡ºçš„é»˜è®¤ç›‘æ§æŒ‡æ ‡ã€‚" href=/v1.1/zh/docs/reference/config/policy-and-telemetry/metrics/>é»˜è®¤ç›‘æ§æŒ‡æ ‡</a></li></ul></li><li role=none><a role=treeitem title=æµé‡è·¯ç”±é…ç½®ã€‚ href=/v1.1/zh/docs/reference/config/istio.networking.v1alpha3/>é€šä¿¡è·¯ç”±</a></li></ul></li><li role=treeitem aria-label=å‘½ä»¤><button aria-hidden=true></button><a title="æè¿° Istio å‘½ä»¤å’Œå·¥å…·çš„ç”¨æ³•åŠé€‰é¡¹ã€‚" href=/v1.1/zh/docs/reference/commands/>å‘½ä»¤</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="Galley ä¸º Istio æä¾›é…ç½®ç®¡ç†æœåŠ¡ã€‚" href=/v1.1/zh/docs/reference/commands/galley/>galley</a></li><li role=none><a role=treeitem title="è‡ªåŠ¨æ³¨å…¥ Istio sidecar çš„ Kubernetes webhookã€‚" href=/v1.1/zh/docs/reference/commands/sidecar-injector/>sidecar-injector</a></li><li role=none><a role=treeitem title="Istio æ§åˆ¶ç•Œé¢ã€‚" href=/v1.1/zh/docs/reference/commands/istioctl/>istioctl</a></li><li role=none><a role=treeitem title="Istio è¯ä¹¦é¢å‘ï¼ˆCAï¼‰ã€‚" href=/v1.1/zh/docs/reference/commands/istio_ca/>istio_ca</a></li><li role=none><a role=treeitem title="ç”¨äºè§¦å‘ç›´æ¥è°ƒç”¨ Mixer API çš„å®ç”¨ç¨‹åºã€‚" href=/v1.1/zh/docs/reference/commands/mixc/>mixc</a></li><li role=none><a role=treeitem title="Mixer æ˜¯ Istio åœ¨åç«¯åŸºç¡€è®¾æ–½ä¹‹ä¸Šçš„æŠ½è±¡ã€‚" href=/v1.1/zh/docs/reference/commands/mixs/>mixs</a></li><li role=none><a role=treeitem title="èŠ‚ç‚¹ä¸€çº§çš„ Istio å®‰å…¨ä»£ç†ã€‚" href=/v1.1/zh/docs/reference/commands/node_agent/>node_agent</a></li><li role=none><a role=treeitem title="Istio Pilotã€‚" href=/v1.1/zh/docs/reference/commands/pilot-discovery/>pilot-discovery</a></li></ul></li></ul></div></div></div></nav></div><div class=article-container><button tabindex=-1 id=sidebar-toggler title=æŠ˜å å¯¼èˆªæ ><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#pull"/></svg></button><nav aria-label=Breadcrumb><ol><li><a href=/v1.1/zh/>Istio</a></li><li><a href=/v1.1/zh/docs/ title="äº†è§£å¦‚ä½•éƒ¨ç½²ã€ä½¿ç”¨å’Œè¿ç»´ Istioã€‚">æ–‡æ¡£</a></li><li><a href=/v1.1/zh/docs/tasks/ title="å¦‚ä½•ç”¨ Istio ç³»ç»Ÿå®ç°ç‰¹å®šç›®æ ‡çš„è¡Œä¸ºã€‚">ä»»åŠ¡</a></li><li><a href=/v1.1/zh/docs/tasks/security/ title=æ¼”ç¤ºå¯¹æœåŠ¡ç½‘æ ¼è¿›è¡Œå®‰å…¨åŠ å›ºçš„æ–¹æ³•ã€‚>å®‰å…¨</a></li><li>åŸºç¡€è®¤è¯ç­–ç•¥</li></ol></nav><article aria-labelledby=title><div class=title-area><div><h1 id=title>åŸºç¡€è®¤è¯ç­–ç•¥</h1><p class=byline><span title="1968 å­—"><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#clock"/></svg><span>&nbsp;</span>é˜…è¯»å¤§çº¦éœ€è¦ 10 åˆ†é’Ÿ</span></p></div></div><nav class=toc-inlined aria-label="Table of Contents"><div><hr><ol><li role=none aria-label=å¼€å§‹ä¹‹å‰><a href=#%e5%bc%80%e5%a7%8b%e4%b9%8b%e5%89%8d>å¼€å§‹ä¹‹å‰</a><ol><li role=none aria-label=å®‰è£…><a href=#%e5%ae%89%e8%a3%85>å®‰è£…</a></ol></li><li role=none aria-label="ä¸ºç½‘æ ¼ä¸­çš„æ‰€æœ‰æœåŠ¡å¯ç”¨åŒå‘ TLS è®¤è¯"><a href=#%e4%b8%ba%e7%bd%91%e6%a0%bc%e4%b8%ad%e7%9a%84%e6%89%80%e6%9c%89%e6%9c%8d%e5%8a%a1%e5%90%af%e7%94%a8%e5%8f%8c%e5%90%91-tls-%e8%ae%a4%e8%af%81>ä¸ºç½‘æ ¼ä¸­çš„æ‰€æœ‰æœåŠ¡å¯ç”¨åŒå‘ TLS è®¤è¯</a><ol><li role=none aria-label="ä»é Istio æœåŠ¡è¯·æ±‚åˆ° Istio æœåŠ¡"><a href=#%e4%bb%8e%e9%9d%9e-istio-%e6%9c%8d%e5%8a%a1%e8%af%b7%e6%b1%82%e5%88%b0-istio-%e6%9c%8d%e5%8a%a1>ä»é Istio æœåŠ¡è¯·æ±‚åˆ° Istio æœåŠ¡</a><li role=none aria-label="ä» Istio æœåŠ¡è¯·æ±‚é Istio æœåŠ¡"><a href=#%e4%bb%8e-istio-%e6%9c%8d%e5%8a%a1%e8%af%b7%e6%b1%82%e9%9d%9e-istio-%e6%9c%8d%e5%8a%a1>ä» Istio æœåŠ¡è¯·æ±‚é Istio æœåŠ¡</a><li role=none aria-label="ä» Istio æœåŠ¡è¯·æ±‚åˆ° Kubernetes API Server"><a href=#%e4%bb%8e-istio-%e6%9c%8d%e5%8a%a1%e8%af%b7%e6%b1%82%e5%88%b0-kubernetes-api-server>ä» Istio æœåŠ¡è¯·æ±‚åˆ° Kubernetes API Server</a><li role=none aria-label="æ¸…ç†ç¬¬ 1 éƒ¨åˆ†"><a href=#%e6%b8%85%e7%90%86%e7%ac%ac-1-%e9%83%a8%e5%88%86>æ¸…ç†ç¬¬ 1 éƒ¨åˆ†</a></ol></li><li role=none aria-label="ä¸ºæ¯ä¸ªå‘½åç©ºé—´æˆ–æœåŠ¡å¯ç”¨åŒå‘ TLS"><a href=#%e4%b8%ba%e6%af%8f%e4%b8%aa%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4%e6%88%96%e6%9c%8d%e5%8a%a1%e5%90%af%e7%94%a8%e5%8f%8c%e5%90%91-tls>ä¸ºæ¯ä¸ªå‘½åç©ºé—´æˆ–æœåŠ¡å¯ç”¨åŒå‘ TLS</a><ol><li role=none aria-label=å‘½åç©ºé—´èŒƒå›´çš„ç­–ç•¥><a href=#%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4%e8%8c%83%e5%9b%b4%e7%9a%84%e7%ad%96%e7%95%a5>å‘½åç©ºé—´èŒƒå›´çš„ç­–ç•¥</a></ol></li><li role=none aria-label=ç‰¹å®šäºæœåŠ¡çš„ç­–ç•¥><a href=#%e7%89%b9%e5%ae%9a%e4%ba%8e%e6%9c%8d%e5%8a%a1%e7%9a%84%e7%ad%96%e7%95%a5>ç‰¹å®šäºæœåŠ¡çš„ç­–ç•¥</a><li role=none aria-label=ç­–ç•¥ä¼˜å…ˆçº§><a href=#%e7%ad%96%e7%95%a5%e4%bc%98%e5%85%88%e7%ba%a7>ç­–ç•¥ä¼˜å…ˆçº§</a><ol><li role=none aria-label="æ¸…ç†ç¬¬ 2 éƒ¨åˆ†"><a href=#%e6%b8%85%e7%90%86%e7%ac%ac-2-%e9%83%a8%e5%88%86>æ¸…ç†ç¬¬ 2 éƒ¨åˆ†</a></ol></li><li role=none aria-label=è®¾ç½®ç»ˆç«¯ç”¨æˆ·è®¤è¯><a href=#%e8%ae%be%e7%bd%ae%e7%bb%88%e7%ab%af%e7%94%a8%e6%88%b7%e8%ae%a4%e8%af%81>è®¾ç½®ç»ˆç«¯ç”¨æˆ·è®¤è¯</a><ol><li role=none aria-label=å…·æœ‰æ¯ä¸ªè·¯å¾„è¦æ±‚çš„æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯><a href=#%e5%85%b7%e6%9c%89%e6%af%8f%e4%b8%aa%e8%b7%af%e5%be%84%e8%a6%81%e6%b1%82%e7%9a%84%e6%9c%80%e7%bb%88%e7%94%a8%e6%88%b7%e8%ba%ab%e4%bb%bd%e9%aa%8c%e8%af%81>å…·æœ‰æ¯ä¸ªè·¯å¾„è¦æ±‚çš„æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯</a><ol><li role=none aria-label=ç¦ç”¨ç‰¹å®šè·¯å¾„çš„æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯><a href=#%e7%a6%81%e7%94%a8%e7%89%b9%e5%ae%9a%e8%b7%af%e5%be%84%e7%9a%84%e6%9c%80%e7%bb%88%e7%94%a8%e6%88%b7%e8%ba%ab%e4%bb%bd%e9%aa%8c%e8%af%81>ç¦ç”¨ç‰¹å®šè·¯å¾„çš„æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯</a><li role=none aria-label=ä¸ºç‰¹å®šè·¯å¾„å¯ç”¨æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯><a href=#%e4%b8%ba%e7%89%b9%e5%ae%9a%e8%b7%af%e5%be%84%e5%90%af%e7%94%a8%e6%9c%80%e7%bb%88%e7%94%a8%e6%88%b7%e8%ba%ab%e4%bb%bd%e9%aa%8c%e8%af%81>ä¸ºç‰¹å®šè·¯å¾„å¯ç”¨æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯</a></ol></li><li role=none aria-label="ä½¿ç”¨åŒå‘ TLS è¿›è¡Œæœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯"><a href=#%e4%bd%bf%e7%94%a8%e5%8f%8c%e5%90%91-tls-%e8%bf%9b%e8%a1%8c%e6%9c%80%e7%bb%88%e7%94%a8%e6%88%b7%e8%ba%ab%e4%bb%bd%e9%aa%8c%e8%af%81>ä½¿ç”¨åŒå‘ TLS è¿›è¡Œæœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯</a><li role=none aria-label="æ¸…ç†ç¬¬ 3 éƒ¨åˆ†"><a href=#%e6%b8%85%e7%90%86%e7%ac%ac-3-%e9%83%a8%e5%88%86>æ¸…ç†ç¬¬ 3 éƒ¨åˆ†</a></ol></li><li role=none aria-label=ç›¸å…³å†…å®¹><a href=#see-also>ç›¸å…³å†…å®¹</a></li></ol><hr></div></nav><p>æ­¤ä»»åŠ¡æ¶µç›–å¯ç”¨ã€é…ç½®å’Œä½¿ç”¨ Istio èº«ä»½éªŒè¯ç­–ç•¥æ—¶å¯èƒ½éœ€è¦æ‰§è¡Œçš„ä¸»è¦æ´»åŠ¨ã€‚<a href=/v1.1/zh/docs/concepts/security/#è®¤è¯>è®¤è¯æ¦‚è¿°</a>ä¸­å¯ä»¥äº†è§£æ›´å¤šç›¸å…³çš„åŸºæœ¬æ¦‚å¿µã€‚</p><h2 id=å¼€å§‹ä¹‹å‰>å¼€å§‹ä¹‹å‰</h2><ul><li><p>ç†è§£ Istio <a href=/v1.1/zh/docs/concepts/security/#è®¤è¯ç­–ç•¥>è®¤è¯ç­–ç•¥</a>å’Œç›¸å…³çš„
<a href=/v1.1/zh/docs/concepts/security/#åŒå‘-tls-è®¤è¯>åŒå‘ TLS è®¤è¯</a>æ¦‚å¿µã€‚</p></li><li><p>æ‹¥æœ‰ä¸€ä¸ªå®‰è£…å¥½ Istio çš„ Kubernetes é›†ç¾¤ï¼Œå¹¶ä¸”ç¦ç”¨å…¨å±€åŒå‘ TLSï¼ˆå¯ä½¿ç”¨<a href=/v1.1/zh/docs/setup/kubernetes/install/kubernetes/#å®‰è£…æ­¥éª¤>å®‰è£…æ­¥éª¤</a>ä¸­æä¾›çš„ç¤ºä¾‹é…ç½®
<code>install/kubernetes/istio.yaml</code>ï¼Œæˆ–è€…ä½¿ç”¨ <a href=/v1.1/zh/docs/setup/kubernetes/install/helm/>Helm</a>
è®¾ç½® <code>global.mtls.enabled</code> ä¸º falseï¼‰ã€‚</p></li></ul><h3 id=å®‰è£…>å®‰è£…</h3><p>ä¸ºäº†æ¼”ç¤ºï¼Œéœ€è¦åˆ›å»ºä¸¤ä¸ªå‘½åç©ºé—´ <code>foo</code> å’Œ <code>bar</code>ï¼Œå¹¶ä¸”åœ¨ä¸¤ä¸ªç©ºé—´ä¸­éƒ½éƒ¨ç½²å¸¦æœ‰ sidecar çš„
<a href=https://github.com/istio/istio/tree/release-1.1/samples/httpbin>httpbin</a> åº”ç”¨å’Œ <a href=https://github.com/istio/istio/tree/release-1.1/samples/sleep>sleep</a> åº”ç”¨ã€‚åŒæ—¶è¿è¡Œå¦å¤–ä¸€ä»½ä¸å¸¦æœ‰ Sidecar çš„ httpbin å’Œ sleep åº”ç”¨ï¼ˆä¸ºäº†ä¿è¯ç‹¬ç«‹æ€§ï¼Œ
åœ¨ <code>legacy</code> å‘½åç©ºé—´ä¸­è¿è¡Œå®ƒä»¬ï¼‰ã€‚å¦‚æœæ‚¨åœ¨å°è¯•ä»»åŠ¡æ—¶æƒ³è¦ä½¿ç”¨ç›¸åŒçš„ç¤ºä¾‹ï¼Œè¿è¡Œä»¥ä¸‹å†…å®¹ï¼š</p><div><a data-skipendnotes=true style=display:none href=https://raw.githubusercontent.com/istio/istio/release-1.1/samples/sleep/sleep.yaml>Zip</a><a data-skipendnotes=true style=display:none href=https://raw.githubusercontent.com/istio/istio/release-1.1/samples/httpbin/httpbin.yaml>Zip</a><a data-skipendnotes=true style=display:none href=https://raw.githubusercontent.com/istio/istio/release-1.1/samples/sleep/sleep.yaml>Zip</a><a data-skipendnotes=true style=display:none href=https://raw.githubusercontent.com/istio/istio/release-1.1/samples/httpbin/httpbin.yaml>Zip</a><a data-skipendnotes=true style=display:none href=https://raw.githubusercontent.com/istio/istio/release-1.1/samples/sleep/sleep.yaml>Zip</a><a data-skipendnotes=true style=display:none href=https://raw.githubusercontent.com/istio/istio/release-1.1/samples/httpbin/httpbin.yaml>Zip</a><pre><code class=language-bash data-expandlinks=true>$ kubectl create ns foo
$ kubectl apply -f &lt;(istioctl kube-inject -f @samples/httpbin/httpbin.yaml@) -n foo
$ kubectl apply -f &lt;(istioctl kube-inject -f @samples/sleep/sleep.yaml@) -n foo
$ kubectl create ns bar
$ kubectl apply -f &lt;(istioctl kube-inject -f @samples/httpbin/httpbin.yaml@) -n bar
$ kubectl apply -f &lt;(istioctl kube-inject -f @samples/sleep/sleep.yaml@) -n bar
$ kubectl create ns legacy
$ kubectl apply -f @samples/httpbin/httpbin.yaml@ -n legacy
$ kubectl apply -f @samples/sleep/sleep.yaml@ -n legacy
</code></pre></div><p>é€šè¿‡ä»ä»»æ„å®¢æˆ·ç«¯ï¼ˆä¾‹å¦‚ <code>sleep.foo</code>ã€<code>sleep.bar</code> å’Œ <code>sleep.legacy</code>ï¼‰å‘ä»»æ„æœåŠ¡ç«¯ï¼ˆ<code>httpbin.foo</code> ã€<code>httpbin.bar</code> æˆ– <code>httpbin.legacy</code>ï¼‰å‘é€ HTTP è¯·æ±‚ï¼ˆå¯ä»¥ä½¿ç”¨ curl å‘½ä»¤ï¼‰æ¥éªŒè¯ä»¥ä¸Šè®¾ç½®ã€‚æ‰€æœ‰è¯·æ±‚éƒ½åº”è¯¥æˆåŠŸè¿›è¡Œå¹¶ä¸”è¿”å›çš„ HTTP çŠ¶æ€ç ä¸º 200ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä» <code>sleep.bar</code> åˆ° <code>httpbin.foo</code> å¯è¾¾æ€§çš„æ£€æŸ¥å‘½ä»¤ç¤ºä¾‹ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ kubectl exec $(kubectl get pod -l app=sleep -n bar -o jsonpath={.items..metadata.name}) -c sleep -n bar -- curl http://httpbin.foo:8000/ip -s -o /dev/null -w &#34;%{http_code}\n&#34;
200
</code></pre><p>ä»¥ä¸‹å•è¡Œå‘½ä»¤å¯ä»¥æ–¹ä¾¿å¯¹æ‰€æœ‰å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ç»„åˆè¿›è¡Œæ£€æŸ¥ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ for from in &#34;foo&#34; &#34;bar&#34; &#34;legacy&#34;; do for to in &#34;foo&#34; &#34;bar&#34; &#34;legacy&#34;; do kubectl exec $(kubectl get pod -l app=sleep -n ${from} -o jsonpath={.items..metadata.name}) -c sleep -n ${from} -- curl &#34;http://httpbin.${to}:8000/ip&#34; -s -o /dev/null -w &#34;sleep.${from} to httpbin.${to}: %{http_code}\n&#34;; done; done
sleep.foo to httpbin.foo: 200
sleep.foo to httpbin.bar: 200
sleep.foo to httpbin.legacy: 200
sleep.bar to httpbin.foo: 200
sleep.bar to httpbin.bar: 200
sleep.bar to httpbin.legacy: 200
sleep.legacy to httpbin.foo: 200
sleep.legacy to httpbin.bar: 200
sleep.legacy to httpbin.legacy: 200
</code></pre><p>é‡è¦çš„æ˜¯ï¼ŒéªŒè¯ç³»ç»Ÿç›®å‰æ²¡æœ‰è®¤è¯ç­–ç•¥ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ kubectl get policies.authentication.istio.io --all-namespaces
No resources found.
</code></pre><pre><code class=language-bash data-expandlinks=true>$ kubectl get meshpolicies.authentication.istio.io
NAME      AGE
default   3m
</code></pre><p>æœ€åè¦è¿›è¡Œçš„éªŒè¯æ˜¯ï¼Œç¡®ä¿æ²¡æœ‰ä¸ºç¤ºä¾‹æœåŠ¡å®šä¹‰åŒ¹é…çš„ç›®æ ‡è§„åˆ™ã€‚ä¸€ä¸ªéªŒè¯æ–¹æ³•æ˜¯ï¼šè·å–ç°å­˜ç›®æ ‡è§„åˆ™ï¼ŒæŸ¥çœ‹ <code>host:</code> å­—æ®µå€¼æ˜¯å¦åŒ¹é…ç¤ºä¾‹æœåŠ¡çš„ FQDNã€‚ä¾‹å¦‚ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ kubectl get destinationrules.networking.istio.io --all-namespaces -o yaml | grep &#34;host:&#34;
    host: istio-policy.istio-system.svc.cluster.local
    host: istio-telemetry.istio-system.svc.cluster.local
</code></pre><div><aside class="callout tip"><div class=type><svg class="large-icon"><use xlink:href="/v1.1/img/icons.svg#callout-tip"/></svg></div><div class=content>ä½ å¯èƒ½çœ‹åˆ°ä¸€äº›ç­–ç•¥å’Œ/æˆ–ç”± Istio å®‰è£…æ—¶è‡ªåŠ¨æ·»åŠ çš„ç›®çš„åœ°è§„åˆ™ï¼Œå…·ä½“å–å†³äºæ‰€é€‰çš„å®‰è£…æ¨¡å¼ã€‚ä½†æ˜¯åœ¨ <code>foo</code>ã€<code>bar</code> å’Œ <code>legacy</code> å‘½åç©ºé—´ä¸­æ²¡æœ‰ä»»ä½•çš„ç­–ç•¥æˆ–è§„åˆ™ã€‚</div></aside></div><h2 id=ä¸ºç½‘æ ¼ä¸­çš„æ‰€æœ‰æœåŠ¡å¯ç”¨åŒå‘-tls-è®¤è¯>ä¸ºç½‘æ ¼ä¸­çš„æ‰€æœ‰æœåŠ¡å¯ç”¨åŒå‘ TLS è®¤è¯</h2><p>ä½ å¯ä»¥æäº¤å¦‚ä¸‹<strong>ç½‘æ ¼èŒƒå›´çš„è®¤è¯ç­–ç•¥ï¼ˆ<code>MeshPolicy</code>ï¼‰</strong>å’Œç›®çš„åœ°è§„åˆ™ä¸ºç½‘æ ¼ä¸­æ‰€æœ‰æœåŠ¡å¯ç”¨åŒå‘ TLS è®¤è¯ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ kubectl apply -f - &lt;&lt;EOF
apiVersion: &#34;authentication.istio.io/v1alpha1&#34;
kind: &#34;MeshPolicy&#34;
metadata:
  name: &#34;default&#34;
spec:
  peers:
  - mtls: {}
EOF
</code></pre><div><aside class="callout tip"><div class=type><svg class="large-icon"><use xlink:href="/v1.1/img/icons.svg#callout-tip"/></svg></div><div class=content>ç½‘æ ¼èº«ä»½éªŒè¯ç­–ç•¥ä½¿ç”¨åœ¨é›†ç¾¤èŒƒå›´çš„ <code>MeshPolicy</code> CRD ä¸­å®šä¹‰çš„<a href=/v1.1/docs/reference/config/istio.authentication.v1alpha1/>å¸¸è§„èº«ä»½éªŒè¯ç­–ç•¥ API</a>ã€‚</div></aside></div><p>æ­¤ç­–ç•¥æŒ‡å®šç½‘æ ¼ä¸­çš„æ‰€æœ‰å·¥ä½œè´Ÿè·ä»…æ¥å—ä½¿ç”¨ TLS çš„åŠ å¯†è¯·æ±‚ã€‚å¦‚æ‚¨æ‰€è§ï¼Œæ­¤èº«ä»½éªŒè¯ç­–ç•¥çš„ç±»å‹æ˜¯
<code>MeshPolicy</code>ï¼Œè¿™ç§ç­–ç•¥çš„ç”Ÿæ•ˆèŒƒå›´æ˜¯æ•´ä¸ªç½‘æ ¼å†…çš„æ‰€æœ‰æœåŠ¡ï¼Œå› æ­¤åç§°å¿…é¡»æ˜¯ <code>default</code>ï¼Œå¦å¤–ä¹Ÿä¸åŒ…å« <code>targets</code> å­—æ®µã€‚</p><p>æ­¤æ—¶ï¼Œåªæœ‰æ¥æ”¶æ–¹è¢«é…ç½®ä¸ºä½¿ç”¨åŒå‘ TLSã€‚å¦‚æœåœ¨ Istio æœåŠ¡ï¼ˆå³é‚£äº›å¸¦æœ‰ Sidecar çš„æœåŠ¡ï¼‰ä¹‹é—´è¿è¡Œ <code>curl</code> å‘½ä»¤ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½å°†å¤±è´¥å¹¶æ˜¾ç¤º 503 é”™è¯¯ä»£ç ï¼ŒåŸå› æ˜¯å®¢æˆ·ç«¯ä»åœ¨ä½¿ç”¨æ˜æ–‡è¯·æ±‚ã€‚</p><pre><code class=language-bash data-expandlinks=true>$ for from in &#34;foo&#34; &#34;bar&#34;; do for to in &#34;foo&#34; &#34;bar&#34;; do kubectl exec $(kubectl get pod -l app=sleep -n ${from} -o jsonpath={.items..metadata.name}) -c sleep -n ${from} -- curl &#34;http://httpbin.${to}:8000/ip&#34; -s -o /dev/null -w &#34;sleep.${from} to httpbin.${to}: %{http_code}\n&#34;; done; done
sleep.foo to httpbin.foo: 503
sleep.foo to httpbin.bar: 503
sleep.bar to httpbin.foo: 503
sleep.bar to httpbin.bar: 503
</code></pre><p>è¦é…ç½®å®¢æˆ·ç«¯ä¹Ÿä½¿ç”¨åŒå‘ TLSï¼Œå°±éœ€è¦è®¾ç½®<a href=/v1.1/zh/docs/concepts/traffic-management/#ç›®æ ‡è§„åˆ™>ç›®æ ‡è§„åˆ™</a>ã€‚å¯ä»¥ä½¿ç”¨å¤šä¸ªç›®æ ‡è§„åˆ™ï¼Œä¸€ä¸ªä¸€ä¸ªçš„ä¸ºæ¯ä¸ªé€‚ç”¨çš„æœåŠ¡ï¼ˆæˆ–å‘½åç©ºé—´ï¼‰è¿›è¡Œé…ç½®ï¼›ç„¶è€Œåœ¨è§„åˆ™ä¸­ä½¿ç”¨ <code>*</code> ç¬¦å·æ¥åŒ¹é…æ‰€æœ‰æœåŠ¡ä¼šæ›´æ–¹ä¾¿ï¼Œè¿™æ ·ä¹Ÿå°±è·Ÿç½‘æ ¼èŒƒå›´çš„è®¤è¯ç­–ç•¥ä¸€è‡´äº†ã€‚</p><pre><code class=language-bash data-expandlinks=true>$ kubectl apply -f - &lt;&lt;EOF
apiVersion: &#34;networking.istio.io/v1alpha3&#34;
kind: &#34;DestinationRule&#34;
metadata:
  name: &#34;default&#34;
  namespace: &#34;istio-system&#34;
spec:
  host: &#34;*.local&#34;
  trafficPolicy:
    tls:
      mode: ISTIO_MUTUAL
EOF
</code></pre><div><aside class="callout tip"><div class=type><svg class="large-icon"><use xlink:href="/v1.1/img/icons.svg#callout-tip"/></svg></div><div class=content>*ä» Istio 1.1 å¼€å§‹ï¼Œå°†æŒ‰é¡ºåºè€ƒè™‘æœåŠ¡ä¸­çš„å®¢æˆ·å‘½åç©ºé—´ï¼ŒæœåŠ¡å™¨å‘½åç©ºé—´å’Œ <code>global</code> å‘½åç©ºé—´ï¼ˆé»˜è®¤ä¸º <code>istio-system</code>ï¼‰ä¸­çš„ç›®æ ‡è§„åˆ™ã€‚
* ä¸»æœºå€¼ <code>*.local</code> ä»…é™äºä¸é›†ç¾¤ä¸­çš„æœåŠ¡åŒ¹é…ï¼Œè€Œä¸æ˜¯å¤–éƒ¨æœåŠ¡ã€‚å¦è¯·æ³¨æ„ï¼Œç›®æ ‡è§„åˆ™ä¸­æ²¡æœ‰é’ˆå¯¹åç§°æˆ–å‘½åç©ºé—´çš„é™åˆ¶ã€‚
* åœ¨ <code>ISTIO_MUTUAL</code> TLS æ¨¡å¼ä¸­ï¼ŒIstio å°†æ ¹æ®å…¶å†…éƒ¨å®ç°è®¾ç½®å¯†é’¥å’Œè¯ä¹¦ï¼ˆä¾‹å¦‚å®¢æˆ·ç«¯è¯ä¹¦ã€ç§é’¥å’Œ CA è¯ä¹¦ï¼‰çš„è·¯å¾„ã€‚</div></aside></div><p>é™¤äº†è®¤è¯åœºåˆä¹‹å¤–ï¼Œç›®æ ‡è§„åˆ™è¿˜æœ‰å…¶å®ƒæ–¹é¢çš„åº”ç”¨ï¼Œä¾‹å¦‚é‡‘ä¸é›€éƒ¨ç½²ã€‚ä½†æ˜¯æ‰€æœ‰çš„ç›®æ ‡è§„åˆ™éƒ½é€‚ç”¨ç›¸åŒçš„ä¼˜å…ˆé¡ºåºã€‚å› æ­¤ï¼Œå¦‚æœä¸€ä¸ªæœåŠ¡éœ€è¦é…ç½®å…¶å®ƒç›®æ ‡è§„åˆ™ï¼ˆä¾‹å¦‚é…ç½®è´Ÿè½½å‡è¡¡ï¼‰ï¼Œé‚£ä¹ˆæ–°è§„åˆ™å®šä¹‰ä¸­å¿…é¡»åŒ…å«ç±»ä¼¼çš„ TLS å—æ¥å®šä¹‰ <code>ISTIO_MUTUAL</code> æ¨¡å¼ï¼Œå¦åˆ™å®ƒå°†è¦†ç›–ç½‘æ ¼æˆ–å‘½åç©ºé—´èŒƒå›´çš„ TLS è®¾ç½®å¹¶ç¦ç”¨ TLSã€‚</p><p>å¦‚ä¸Šæ‰€è¿°é‡æ–°è¿è¡Œæµ‹è¯•å‘½ä»¤ï¼Œæ‚¨å°†çœ‹åˆ° Istio æœåŠ¡ä¹‹é—´çš„æ‰€æœ‰è¯·æ±‚ç°å·²æˆåŠŸå®Œæˆï¼š</p><pre><code class=language-bash data-expandlinks=true>$ for from in &#34;foo&#34; &#34;bar&#34;; do for to in &#34;foo&#34; &#34;bar&#34;; do kubectl exec $(kubectl get pod -l app=sleep -n ${from} -o jsonpath={.items..metadata.name}) -c sleep -n ${from} -- curl &#34;http://httpbin.${to}:8000/ip&#34; -s -o /dev/null -w &#34;sleep.${from} to httpbin.${to}: %{http_code}\n&#34;; done; done
sleep.foo to httpbin.foo: 200
sleep.foo to httpbin.bar: 200
sleep.bar to httpbin.foo: 200
sleep.bar to httpbin.bar: 200
</code></pre><h3 id=ä»é-istio-æœåŠ¡è¯·æ±‚åˆ°-istio-æœåŠ¡>ä»é Istio æœåŠ¡è¯·æ±‚åˆ° Istio æœåŠ¡</h3><p>é Istio æœåŠ¡ï¼Œä¾‹å¦‚ <code>sleep.legacy</code> æ²¡æœ‰ Sidecarï¼Œå› æ­¤å®ƒæ— æ³•å¯åŠ¨ä¸ Istio æœåŠ¡é€šä¿¡æ‰€éœ€çš„ TLS è¿æ¥ã€‚å› æ­¤ä» <code>sleep.legacy</code> åˆ° <code>httpbin.foo</code> æˆ– <code>httpbin.bar</code> çš„è¯·æ±‚å°†å¤±è´¥ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ for from in &#34;legacy&#34;; do for to in &#34;foo&#34; &#34;bar&#34;; do kubectl exec $(kubectl get pod -l app=sleep -n ${from} -o jsonpath={.items..metadata.name}) -c sleep -n ${from} -- curl &#34;http://httpbin.${to}:8000/ip&#34; -s -o /dev/null -w &#34;sleep.${from} to httpbin.${to}: %{http_code}\n&#34;; done; done
sleep.legacy to httpbin.foo: 000
command terminated with exit code 56
sleep.legacy to httpbin.bar: 000
command terminated with exit code 56
</code></pre><div><aside class="callout tip"><div class=type><svg class="large-icon"><use xlink:href="/v1.1/img/icons.svg#callout-tip"/></svg></div><div class=content>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”±äº Envoy æ‹’ç»äº†æ˜æ–‡è¯·æ±‚ï¼Œå› æ­¤ <code>curl</code> ä¼šä»¥é”™è¯¯ä»£ç  56ï¼ˆæ¥æ”¶ç½‘ç»œæ•°æ®å¤±è´¥ï¼‰é€€å‡ºã€‚</div></aside></div><p>è¿™ä¸€ç»“æœæ˜¯ç¬¦åˆé¢„æœŸçš„ï¼Œä½†é—æ†¾çš„æ˜¯ï¼Œå¦‚æœä¸é™ä½è¿™äº›æœåŠ¡çš„èº«ä»½éªŒè¯è¦æ±‚ï¼Œå°±æ— æ³•å®Œæˆè¿™ç§è®¿é—®ã€‚</p><h3 id=ä»-istio-æœåŠ¡è¯·æ±‚é-istio-æœåŠ¡>ä» Istio æœåŠ¡è¯·æ±‚é Istio æœåŠ¡</h3><p>å¦‚æœä» <code>sleep.foo</code>ï¼ˆæˆ– <code>sleep.bar</code>ï¼‰å‘ <code>httpbin.legacy</code> å‘é€è¯·æ±‚ï¼Œä¹Ÿä¼šçœ‹åˆ°è¯·æ±‚å¤±è´¥ï¼Œå› ä¸º Istio æŒ‰ç…§æˆ‘ä»¬çš„æŒ‡ç¤ºé…ç½®å®¢æˆ·ç«¯ç›®æ ‡è§„åˆ™ä½¿ç”¨åŒå‘ TLSï¼Œä½† <code>httpbin.legacy</code> æ²¡æœ‰ Sidecarï¼Œæ‰€ä»¥å®ƒæ— æ³•å¤„ç†å®ƒã€‚</p><pre><code class=language-bash data-expandlinks=true>$ for from in &#34;foo&#34; &#34;bar&#34;; do for to in &#34;legacy&#34;; do kubectl exec $(kubectl get pod -l app=sleep -n ${from} -o jsonpath={.items..metadata.name}) -c sleep -n ${from} -- curl &#34;http://httpbin.${to}:8000/ip&#34; -s -o /dev/null -w &#34;sleep.${from} to httpbin.${to}: %{http_code}\n&#34;; done; done
sleep.foo to httpbin.legacy: 503
sleep.bar to httpbin.legacy: 503
</code></pre><p>è¦è§£å†³æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ ç›®æ ‡è§„åˆ™æ¥è¦†ç›– <code>httpbin.legacy</code> çš„ TLS è®¾ç½®ã€‚ä¾‹å¦‚ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ kubectl apply -f - &lt;&lt;EOF
apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
 name: &#34;httpbin-legacy&#34;
 namespace: &#34;legacy&#34;
spec:
 host: &#34;httpbin.legacy.svc.cluster.local&#34;
 trafficPolicy:
   tls:
     mode: DISABLE
EOF
</code></pre><div><aside class="callout tip"><div class=type><svg class="large-icon"><use xlink:href="/v1.1/img/icons.svg#callout-tip"/></svg></div><div class=content>æ­¤ç›®æ ‡è§„åˆ™ä½äºæœåŠ¡ï¼ˆ<code>httpbin.legacy</code>ï¼‰çš„å‘½åç©ºé—´ä¸­ï¼Œå› æ­¤å®ƒä¼˜å…ˆäº <code>istio-system</code> ä¸­å®šä¹‰çš„å…¨å±€ç›®æ ‡è§„åˆ™ã€‚</div></aside></div><h3 id=ä»-istio-æœåŠ¡è¯·æ±‚åˆ°-kubernetes-api-server>ä» Istio æœåŠ¡è¯·æ±‚åˆ° Kubernetes API Server</h3><p>Kubernetes API Server æ²¡æœ‰ Sidecarï¼Œå› æ­¤æ¥è‡ª <code>sleep.foo</code> ç­‰ Istio æœåŠ¡çš„è¯·æ±‚ä¼šå¤±è´¥ï¼Œå‡ºç°åƒè¯·æ±‚é Istio æœåŠ¡æ—¶åŒæ ·çš„é—®é¢˜è€Œå¤±è´¥ã€‚</p><pre><code class=language-bash data-expandlinks=true>$ TOKEN=$(kubectl describe secret $(kubectl get secrets | grep default-token | cut -f1 -d &#39; &#39; | head -1) | grep -E &#39;^token&#39; | cut -f2 -d&#39;:&#39; | tr -d &#39;\t&#39;)
$ kubectl exec $(kubectl get pod -l app=sleep -n foo -o jsonpath={.items..metadata.name}) -c sleep -n foo -- curl https://kubernetes.default/api --header &#34;Authorization: Bearer $TOKEN&#34; --insecure -s -o /dev/null -w &#34;%{http_code}\n&#34;
000
command terminated with exit code 35
</code></pre><p>åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¦†ç›– API æœåŠ¡å™¨çš„ç›®æ ‡è§„åˆ™æ¥æ›´æ­£æ­¤é—®é¢˜ï¼ˆ <code>kubernetes.default</code> ï¼‰</p><pre><code class=language-bash data-expandlinks=true>$ kubectl apply -f - &lt;&lt;EOF
apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
 name: &#34;api-server&#34;
 namespace: istio-system
spec:
 host: &#34;kubernetes.default.svc.cluster.local&#34;
 trafficPolicy:
   tls:
     mode: DISABLE
EOF
</code></pre><div><aside class="callout tip"><div class=type><svg class="large-icon"><use xlink:href="/v1.1/img/icons.svg#callout-tip"/></svg></div><div class=content>å¦‚æœä½¿ç”¨<a href=/v1.1/zh/docs/setup/kubernetes/install/kubernetes/#å®‰è£…æ­¥éª¤>é»˜è®¤åŒå‘ TLS é€‰é¡¹</a>å®‰è£… Istioï¼Œæ­¤è§„åˆ™ä¸ä¸Šè¿°å…¨å±€èº«ä»½éªŒè¯ç­–ç•¥å’Œç›®æ ‡è§„åˆ™ä¸€èµ·å°†åœ¨å®‰è£…è¿‡ç¨‹ä¸­æ³¨å…¥ç³»ç»Ÿã€‚</div></aside></div><p>é‡æ–°è¿è¡Œä¸Šé¢çš„æµ‹è¯•å‘½ä»¤ï¼Œç¡®è®¤åœ¨æ·»åŠ è§„åˆ™åèƒ½å¤ŸæˆåŠŸè¿”å› 200ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ TOKEN=$(kubectl describe secret $(kubectl get secrets | grep default-token | cut -f1 -d &#39; &#39; | head -1) | grep -E &#39;^token&#39; | cut -f2 -d&#39;:&#39; | tr -d &#39;\t&#39;)
$ kubectl exec $(kubectl get pod -l app=sleep -n foo -o jsonpath={.items..metadata.name}) -c sleep -n foo -- curl https://kubernetes.default/api --header &#34;Authorization: Bearer $TOKEN&#34; --insecure -s -o /dev/null -w &#34;%{http_code}\n&#34;
200
</code></pre><h3 id=æ¸…ç†ç¬¬-1-éƒ¨åˆ†>æ¸…ç†ç¬¬ 1 éƒ¨åˆ†</h3><p>åˆ é™¤åœ¨ä¸Šè¿°æ­¥éª¤ä¸­åˆ›å»ºçš„ç­–ç•¥å’Œç›®æ ‡è§„åˆ™ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ kubectl delete meshpolicy default
$ kubectl delete destinationrules httpbin-legacy -n legacy
$ kubectl delete destinationrules api-server -n istio-system
</code></pre><h2 id=ä¸ºæ¯ä¸ªå‘½åç©ºé—´æˆ–æœåŠ¡å¯ç”¨åŒå‘-tls>ä¸ºæ¯ä¸ªå‘½åç©ºé—´æˆ–æœåŠ¡å¯ç”¨åŒå‘ TLS</h2><p>é™¤äº†ä¸ºæ•´ä¸ªç½‘æ ¼æŒ‡å®šèº«ä»½éªŒè¯ç­–ç•¥ä¹‹å¤–ï¼ŒIstio è¿˜å…è®¸æ‚¨ä¸ºç‰¹å®šå‘½åç©ºé—´æˆ–æœåŠ¡æŒ‡å®šç­–ç•¥ã€‚ä¸€ä¸ª
å‘½åç©ºé—´èŒƒå›´çš„ç­–ç•¥ä¼˜å…ˆäºç½‘æ ¼èŒƒå›´çš„ç­–ç•¥ï¼Œè€Œç‰¹å®šäºæœåŠ¡çš„ç­–ç•¥ä»å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚</p><h3 id=å‘½åç©ºé—´èŒƒå›´çš„ç­–ç•¥>å‘½åç©ºé—´èŒƒå›´çš„ç­–ç•¥</h3><p>ä¸‹é¢çš„ç¤ºä¾‹æ˜¾ç¤ºäº†ä¸ºå‘½åç©ºé—´ <code>foo</code> ä¸­çš„æ‰€æœ‰æœåŠ¡å¯ç”¨åŒå‘ TLS çš„ç­–ç•¥ã€‚æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œå®ƒä½¿ç”¨çš„ç±»åˆ«æ˜¯ <code>Policy</code> è€Œä¸æ˜¯ <code>MeshPolicy</code>ï¼Œå¹¶æŒ‡å®šäº†ä¸€ä¸ªå‘½åç©ºé—´ï¼Œåœ¨æœ¬ä¾‹ä¸­ä¸º <code>foo</code>ã€‚å¦‚æœæœªæŒ‡å®šå‘½åç©ºé—´å€¼ï¼Œåˆ™ç­–ç•¥å°†åº”ç”¨äºé»˜è®¤å‘½åç©ºé—´ã€‚</p><pre><code class=language-bash data-expandlinks=true>$ kubectl apply -f - &lt;&lt;EOF
apiVersion: &#34;authentication.istio.io/v1alpha1&#34;
kind: &#34;Policy&#34;
metadata:
  name: &#34;default&#34;
  namespace: &#34;foo&#34;
spec:
  peers:
  - mtls: {}
EOF
</code></pre><div><aside class="callout tip"><div class=type><svg class="large-icon"><use xlink:href="/v1.1/img/icons.svg#callout-tip"/></svg></div><div class=content>ç±»ä¼¼äº<strong>ç½‘æ ¼èŒƒå›´çš„ç­–ç•¥</strong>ï¼Œå‘½åç©ºé—´èŒƒå›´çš„ç­–ç•¥å¿…é¡»å‘½åä¸º <code>default</code>ï¼Œå¹¶ä¸”ä¸é™å®šä»»ä½•ç‰¹å®šçš„æœåŠ¡ï¼ˆæ²¡æœ‰ <code>targets</code> å­—æ®µï¼‰ã€‚</div></aside></div><p>æ·»åŠ ç›¸åº”çš„ç›®çš„åœ°è§„åˆ™ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ kubectl apply -f - &lt;&lt;EOF
apiVersion: &#34;networking.istio.io/v1alpha3&#34;
kind: &#34;DestinationRule&#34;
metadata:
  name: &#34;default&#34;
  namespace: &#34;foo&#34;
spec:
  host: &#34;*.foo.svc.cluster.local&#34;
  trafficPolicy:
    tls:
      mode: ISTIO_MUTUAL
EOF
</code></pre><div><aside class="callout tip"><div class=type><svg class="large-icon"><use xlink:href="/v1.1/img/icons.svg#callout-tip"/></svg></div><div class=content>ä¸»æœºåç§° <code>*.foo.svc.cluster.local</code> é™åˆ¶äº†åªèƒ½åŒ¹é…å‘½åç©ºé—´ <code>foo</code> ä¸­çš„æœåŠ¡ã€‚</div></aside></div><p>ç”±äºè¿™äº›ç­–ç•¥å’Œç›®çš„åœ°è§„åˆ™åªå¯¹å‘½åç©ºé—´ <code>foo</code> ä¸­çš„æœåŠ¡æœ‰æ•ˆï¼Œä½ åº”è¯¥çœ‹åˆ°åªæœ‰ä»ä¸å¸¦ Sidecar çš„å®¢æˆ·ç«¯ï¼ˆ<code>sleep.legacy</code>ï¼‰åˆ° <code>httpbin.foo</code> çš„è¯·æ±‚ä¼šå‡ºç°å¤±è´¥ã€‚</p><pre><code class=language-bash data-expandlinks=true>$ for from in &#34;foo&#34; &#34;bar&#34; &#34;legacy&#34;; do for to in &#34;foo&#34; &#34;bar&#34; &#34;legacy&#34;; do kubectl exec $(kubectl get pod -l app=sleep -n ${from} -o jsonpath={.items..metadata.name}) -c sleep -n ${from} -- curl &#34;http://httpbin.${to}:8000/ip&#34; -s -o /dev/null -w &#34;sleep.${from} to httpbin.${to}: %{http_code}\n&#34;; done; done
sleep.foo to httpbin.foo: 200
sleep.foo to httpbin.bar: 200
sleep.foo to httpbin.legacy: 200
sleep.bar to httpbin.foo: 200
sleep.bar to httpbin.bar: 200
sleep.bar to httpbin.legacy: 200
sleep.legacy to httpbin.foo: 000
command terminated with exit code 56
sleep.legacy to httpbin.bar: 200
sleep.legacy to httpbin.legacy: 200
</code></pre><h2 id=ç‰¹å®šäºæœåŠ¡çš„ç­–ç•¥>ç‰¹å®šäºæœåŠ¡çš„ç­–ç•¥</h2><p>ä¹Ÿå¯ä»¥ä¸ºæŸä¸ªç‰¹å®šçš„æœåŠ¡è®¾ç½®è®¤è¯ç­–ç•¥å’Œç›®çš„åœ°è§„åˆ™ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåªä¸º <code>httpbin.bar</code> æœåŠ¡æ–°å¢ä¸€é¡¹ç­–ç•¥ã€‚</p><pre><code class=language-bash data-expandlinks=true>$ cat &lt;&lt;EOF | kubectl apply -n bar -f -
apiVersion: &#34;authentication.istio.io/v1alpha1&#34;
kind: &#34;Policy&#34;
metadata:
  name: &#34;httpbin&#34;
spec:
  targets:
  - name: httpbin
  peers:
  - mtls: {}
EOF
</code></pre><p>åŒæ—¶å¢åŠ ç›®çš„åœ°è§„åˆ™ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ cat &lt;&lt;EOF | kubectl apply -n bar -f -
apiVersion: &#34;networking.istio.io/v1alpha3&#34;
kind: &#34;DestinationRule&#34;
metadata:
  name: &#34;httpbin&#34;
spec:
  host: &#34;httpbin.bar.svc.cluster.local&#34;
  trafficPolicy:
    tls:
      mode: ISTIO_MUTUAL
EOF
</code></pre><div><aside class="callout tip"><div class=type><svg class="large-icon"><use xlink:href="/v1.1/img/icons.svg#callout-tip"/></svg></div><div class=content><ul><li>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬<strong>ä¸</strong>åœ¨ metadata ä¸­æŒ‡å®šå‘½åç©ºé—´è€Œæ˜¯æ”¾åœ¨å‘½ä»¤è¡Œï¼ˆ<code>-n bar</code>ï¼‰ä¸­ã€‚å®ƒä»¬çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</li><li>å¯¹äºè®¤è¯ç­–ç•¥å’Œç›®çš„åœ°è§„åˆ™çš„åç§°å¹¶æ²¡æœ‰ä»»ä½•é™å®šã€‚åœ¨æœ¬ä¾‹ä¸­ä¸ºäº†ç®€å•ï¼Œä½¿ç”¨æœåŠ¡æœ¬èº«çš„åç§°ä¸ºç­–ç•¥å’Œè§„åˆ™å‘½åã€‚</li></ul></div></aside></div><p>åŒæ ·åœ°ï¼Œè¿è¡Œä¸Šæ–‡ä¸­æä¾›çš„æµ‹è¯•å‘½ä»¤ã€‚å’Œé¢„æœŸä¸€è‡´ï¼Œä» <code>sleep.legacy</code> åˆ° <code>httpbin.bar</code> çš„è¯·æ±‚å› ä¸ºåŒæ ·çš„åŸå› å¼€å§‹å‡ºç°å¤±è´¥ã€‚</p><pre><code class=language-plain data-expandlinks=true>...
sleep.legacy to httpbin.bar: 000
command terminated with exit code 56
</code></pre><p>å¦‚æœåœ¨å‘½åç©ºé—´ <code>bar</code> ä¸­è¿˜å­˜åœ¨å…¶ä»–æœåŠ¡ï¼Œæˆ‘ä»¬ä¼šå‘ç°ç›®æ ‡ä¸ºè¿™äº›æœåŠ¡çš„æµé‡ä¸ä¼šå—åˆ°å½±å“ã€‚éªŒè¯è¿™ä¸€è¡Œä¸ºæœ‰ä¸¤ç§æ–¹æ³•ï¼šä¸€ç§æ˜¯åŠ å…¥æ›´å¤šæœåŠ¡ï¼›å¦ä¸€ç§æ˜¯æŠŠè¿™ä¸€ç­–ç•¥é™åˆ¶åˆ°æŸä¸ªç«¯å£ã€‚è¿™é‡Œæˆ‘ä»¬å±•ç¤ºç¬¬äºŒç§æ–¹æ³•ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ cat &lt;&lt;EOF | kubectl apply -n bar -f -
apiVersion: &#34;authentication.istio.io/v1alpha1&#34;
kind: &#34;Policy&#34;
metadata:
  name: &#34;httpbin&#34;
spec:
  targets:
  - name: httpbin
    ports:
    - number: 1234
  peers:
  - mtls: {}
EOF
</code></pre><p>åŒæ—¶å¯¹ç›®çš„åœ°è§„åˆ™åšå‡ºç›¸åº”çš„æ”¹å˜ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ cat &lt;&lt;EOF | kubectl apply -n bar -f -
apiVersion: &#34;networking.istio.io/v1alpha3&#34;
kind: &#34;DestinationRule&#34;
metadata:
  name: &#34;httpbin&#34;
spec:
  host: httpbin.bar.svc.cluster.local
  trafficPolicy:
    tls:
      mode: DISABLE
    portLevelSettings:
    - port:
        number: 1234
      tls:
        mode: ISTIO_MUTUAL
EOF
</code></pre><p>æ–°çš„ç­–ç•¥åªä½œç”¨äº <code>httpbin</code> æœåŠ¡çš„ <code>1234</code> ç«¯å£ä¸Šã€‚ç»“æœæ˜¯ï¼ŒåŒå‘ TLS åœ¨ç«¯å£ <code>8000</code> ä¸Šï¼ˆåˆï¼‰è¢«ç¦ç”¨å¹¶ä¸”ä» <code>sleep.legacy</code> å‘å‡ºçš„è¯·æ±‚ä¼šæ¢å¤å·¥ä½œã€‚</p><pre><code class=language-bash data-expandlinks=true>$ kubectl exec $(kubectl get pod -l app=sleep -n legacy -o jsonpath={.items..metadata.name}) -c sleep -n legacy -- curl http://httpbin.bar:8000/ip -s -o /dev/null -w &#34;%{http_code}\n&#34;
200
</code></pre><h2 id=ç­–ç•¥ä¼˜å…ˆçº§>ç­–ç•¥ä¼˜å…ˆçº§</h2><p>æœåŠ¡çº§ç­–ç•¥æ˜¯ä¼˜å…ˆäºå‘½åç©ºé—´çº§ç­–ç•¥çš„ï¼Œä¸ºäº†è¯å®è¿™ä¸€è¡Œä¸ºï¼Œå¯ä»¥æ–°å»ºä¸€æ¡ç­–ç•¥ï¼Œç¦æ­¢ <code>httpbin.foo</code> çš„åŒå‘ TLS è®¾ç½®ï¼›è€Œæ­¤æ—¶ç½‘æ ¼ä¸­å·²ç»åˆ›å»ºäº†ä¸€ä¸ªå‘½åç©ºé—´çº§çš„ç­–ç•¥ï¼Œè¯¥ç­–ç•¥ä¸º <code>foo</code> å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰æœåŠ¡å¯ç”¨äº†åŒå‘ TLSï¼Œä¸‹é¢å°±æ¥è§‚å¯Ÿä¸€ä¸‹ä» <code>sleep.legacy</code> åˆ° <code>httpbin.foo</code> çš„è¯·æ±‚æ˜¯å¦‚ä½•å¤±è´¥çš„ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ cat &lt;&lt;EOF | kubectl apply -n foo -f -
apiVersion: &#34;authentication.istio.io/v1alpha1&#34;
kind: &#34;Policy&#34;
metadata:
  name: &#34;overwrite-example&#34;
spec:
  targets:
  - name: httpbin
EOF
</code></pre><p>å¦å¤–æ·»åŠ å¯¹åº”çš„ç›®çš„åœ°è§„åˆ™ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ cat &lt;&lt;EOF | kubectl apply -n foo -f -
apiVersion: &#34;networking.istio.io/v1alpha3&#34;
kind: &#34;DestinationRule&#34;
metadata:
  name: &#34;overwrite-example&#34;
spec:
  host: httpbin.foo.svc.cluster.local
  trafficPolicy:
    tls:
      mode: DISABLE
EOF
</code></pre><p>é‡æ–°ä» <code>sleep.legacy</code> å‘é€è¯·æ±‚ï¼Œæˆ‘ä»¬åº”å½“çœ‹åˆ°è¯·æ±‚æˆåŠŸè¿”å›çš„çŠ¶æ€ç ï¼ˆ<code>200</code>ï¼‰ï¼Œè¡¨æ˜æœåŠ¡çº§çš„ç­–ç•¥è¦†ç›–äº†å‘½åç©ºé—´å±‚çº§çš„ç­–ç•¥ã€‚</p><pre><code class=language-bash data-expandlinks=true>$ kubectl exec $(kubectl get pod -l app=sleep -n legacy -o jsonpath={.items..metadata.name}) -c sleep -n legacy -- curl http://httpbin.foo:8000/ip -s -o /dev/null -w &#34;%{http_code}\n&#34;
200
</code></pre><h3 id=æ¸…ç†ç¬¬-2-éƒ¨åˆ†>æ¸…ç†ç¬¬ 2 éƒ¨åˆ†</h3><p>åˆ é™¤åœ¨ä¸Šè¿°æ­¥éª¤ä¸­åˆ›å»ºçš„ç­–ç•¥å’Œç›®æ ‡è§„åˆ™ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ kubectl delete policy default overwrite-example -n foo
$ kubectl delete policy httpbin -n bar
$ kubectl delete destinationrules default overwrite-example -n foo
$ kubectl delete destinationrules httpbin -n bar
</code></pre><h2 id=è®¾ç½®ç»ˆç«¯ç”¨æˆ·è®¤è¯>è®¾ç½®ç»ˆç«¯ç”¨æˆ·è®¤è¯</h2><p>è¦éªŒè¯è¿™ä¸€åŠŸèƒ½ï¼Œé¦–å…ˆè¦æœ‰ä¸€ä¸ªæœ‰æ•ˆçš„ JWTã€‚JWT å¿…é¡»ä¸æœ¬ä¾‹ä¸­çš„ JWKS ç«¯ç‚¹ç›¸åŒ¹é…ã€‚æœ¬ä¾‹ä¸­æˆ‘ä»¬ä½¿ç”¨ Istio ä»£ç åº“ä¸­çš„ <a href=https://raw.githubusercontent.com/istio/istio/release-1.1/security/tools/jwt/samples/demo.jwt>JWT test</a> ä»¥åŠ
<a href=https://raw.githubusercontent.com/istio/istio/release-1.1/security/tools/jwt/samples/jwks.json>JWKS endpoint</a> è¿›è¡Œæ¼”ç¤ºã€‚</p><p>å¦å¤–ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>ingressgateway</code> å¼€æ”¾äº† <code>httpbin.foo</code> æœåŠ¡ï¼ˆè¿™éƒ¨åˆ†å†…å®¹å¯ä»¥å‚çœ‹<a href=/v1.1/zh/docs/tasks/traffic-management/ingress/>æ§åˆ¶ Ingress æµé‡</a>ä»»åŠ¡ä¸­çš„ä»‹ç»ï¼‰ã€‚</p><pre><code class=language-bash data-expandlinks=true>$ kubectl apply -f - &lt;&lt;EOF
apiVersion: networking.istio.io/v1alpha3
kind: Gateway
metadata:
  name: httpbin-gateway
  namespace: foo
spec:
  selector:
    istio: ingressgateway # use Istio default gateway implementation
  servers:
  - port:
      number: 80
      name: http
      protocol: HTTP
    hosts:
    - &#34;*&#34;
EOF
</code></pre><pre><code class=language-bash data-expandlinks=true>$ kubectl apply -f - &lt;&lt;EOF
apiVersion: networking.istio.io/v1alpha3
kind: VirtualService
metadata:
  name: httpbin
  namespace: foo
spec:
  hosts:
  - &#34;*&#34;
  gateways:
  - httpbin-gateway
  http:
  - route:
    - destination:
        port:
          number: 8000
        host: httpbin.foo.svc.cluster.local
EOF
</code></pre><p>è·å–å…¥å£ IPï¼š</p><pre><code class=language-bash data-expandlinks=true>$ export INGRESS_HOST=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath=&#39;{.status.loadBalancer.ingress[0].ip}&#39;)
</code></pre><p>å¹¶ä¸”è¿è¡ŒæŸ¥è¯¢æµ‹è¯•ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ curl $INGRESS_HOST/headers -s -o /dev/null -w &#34;%{http_code}\n&#34;
200
</code></pre><p>ç°åœ¨æ·»åŠ ä¸€æ¡ç­–ç•¥ï¼Œå¼ºåˆ¶ <code>httpbin.org</code> ä½¿ç”¨ç»ˆç«¯ç”¨æˆ· JWTã€‚ä¸‹ä¸€ä¸ªå‘½ä»¤å‡è®¾æ²¡æœ‰ä¸º <code>httpbin.org</code> æŒ‡å®šæœåŠ¡çº§ç­–ç•¥ï¼ˆä¹Ÿå°±æ˜¯è¯´æˆåŠŸè¿è¡Œäº†ä¸Šé¢<a href=#æ¸…ç†ç¬¬-2-éƒ¨åˆ†>æ¸…ç†ç¬¬ 2 éƒ¨åˆ†</a>çš„å†…å®¹ï¼‰ã€‚å¯ä»¥ç”¨å‘½ä»¤ <code>kubectl get policies.authentication.istio.io -n foo</code> æ¥éªŒè¯è¿™ä¸€å‡è®¾ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ cat &lt;&lt;EOF | kubectl apply -n foo -f -
apiVersion: &#34;authentication.istio.io/v1alpha1&#34;
kind: &#34;Policy&#34;
metadata:
  name: &#34;jwt-example&#34;
spec:
  targets:
  - name: httpbin
  origins:
  - jwt:
      issuer: &#34;testing@secure.istio.io&#34;
      jwksUri: &#34;https://raw.githubusercontent.com/istio/istio/release-1.1/security/tools/jwt/samples/jwks.json&#34;
  principalBinding: USE_ORIGIN
EOF
</code></pre><p>ä½¿ç”¨ä¸Šé¢å°èŠ‚ä¸­åŒæ ·çš„ curl å‘½ä»¤è¿›è¡Œæµ‹è¯•æ—¶ä¼šè¿”å› 401 é”™è¯¯çŠ¶æ€ç ï¼Œè¿™æ˜¯å› ä¸ºæœåŠ¡ç«¯éœ€è¦ JWT è¿›è¡Œè®¤è¯ä½†è¯·æ±‚ç«¯å¹¶æ²¡æœ‰æä¾›ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ curl $INGRESS_HOST/headers -s -o /dev/null -w &#34;%{http_code}\n&#34;
401
</code></pre><p>ç”¨ä¸‹é¢çš„ <code>curl</code> å‘½ä»¤ç”Ÿæˆ Token å¹¶é™„åŠ åœ¨è¯·æ±‚ä¸­ï¼Œç„¶åæ‰§è¡Œè¯·æ±‚å°±ä¼šè¿”å›æˆåŠŸä¿¡æ¯ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ TOKEN=$(curl https://raw.githubusercontent.com/istio/istio/release-1.1/security/tools/jwt/samples/demo.jwt -s)
$ curl --header &#34;Authorization: Bearer $TOKEN&#34; $INGRESS_HOST/headers -s -o /dev/null -w &#34;%{http_code}\n&#34;
200
</code></pre><p>è¦è§‚å¯Ÿ JWT éªŒè¯çš„å…¶ä»–æ–¹é¢ï¼Œè¯·ä½¿ç”¨è„šæœ¬ <a href=https://github.com/istio/istio/tree/release-1.1/security/tools/jwt/samples/gen-jwt.py><code>gen-jwt.py</code></a> ç”Ÿæˆæ–°çš„ä»¤ç‰Œä»¥æµ‹è¯•ä¸åŒçš„å‘è¡Œè€…ã€å—ä¼—å’Œåˆ°æœŸæ—¥æœŸç­‰ã€‚ä¾‹å¦‚ä¸‹é¢çš„å‘½ä»¤åˆ›å»ºä¸€ä¸ª 5 ç§’ååˆ°æœŸçš„ Tokenã€‚Istio é¦–å…ˆæˆåŠŸé€šè¿‡è¯¥ä»¤ç‰Œçš„éªŒè¯è¯·æ±‚ï¼Œä½†åœ¨ 5 ç§’åå°±ä¼šæ‹’ç»è¿™ä¸€ Token äº†ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ wget https://raw.githubusercontent.com/istio/istio/release-1.1/security/tools/jwt/samples/key.pem
</code></pre><p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„å‘½ä»¤ä¼šåˆ›å»ºä¸€ä¸ªåœ¨ 5 ç§’å†…åˆ°æœŸçš„ä»¤ç‰Œã€‚
å¦‚æ‚¨æ‰€è§ï¼ŒIstio é¦–å…ˆæˆåŠŸä½¿ç”¨è¯¥ä»¤ç‰ŒéªŒè¯è¯·æ±‚ï¼Œä½†åœ¨ 5 ç§’åæ‹’ç»å®ƒä»¬ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ TOKEN=$(./gen-jwt.py ./key.pem --expire 5)
$ for i in `seq 1 10`; do curl --header &#34;Authorization: Bearer $TOKEN&#34; $INGRESS_HOST/headers -s -o /dev/null -w &#34;%{http_code}\n&#34;; sleep 1; done
200
200
200
200
200
401
401
401
401
401
</code></pre><p>æ‚¨è¿˜å¯ä»¥å°† JWT ç­–ç•¥æ·»åŠ åˆ°å…¥å£ç½‘å…³ï¼ˆä¾‹å¦‚ï¼ŒæœåŠ¡ <code>istio-ingressgateway.istio-system.svc.cluster.local</code>ï¼‰ã€‚
è¿™é€šå¸¸ç”¨äºä¸ºç»‘å®šåˆ°ç½‘å…³çš„æ‰€æœ‰æœåŠ¡å®šä¹‰ JWT ç­–ç•¥ï¼Œè€Œä¸æ˜¯é’ˆå¯¹å•ä¸ªæœåŠ¡ã€‚</p><h3 id=å…·æœ‰æ¯ä¸ªè·¯å¾„è¦æ±‚çš„æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯>å…·æœ‰æ¯ä¸ªè·¯å¾„è¦æ±‚çš„æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯</h3><p>å¯ä»¥æ ¹æ®è¯·æ±‚è·¯å¾„å¯ç”¨æˆ–ç¦ç”¨æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯ã€‚å¦‚æœè¦ç¦ç”¨æŸäº›è·¯å¾„çš„èº«ä»½éªŒè¯ï¼ˆä¾‹å¦‚ï¼Œç”¨äºè¿è¡ŒçŠ¶å†µæ£€æŸ¥æˆ–çŠ¶æ€æŠ¥å‘Šçš„è·¯å¾„ï¼‰ï¼Œè¿™å°†éå¸¸æœ‰ç”¨ã€‚
æ‚¨è¿˜å¯ä»¥åœ¨ä¸åŒè·¯å¾„ä¸ŠæŒ‡å®šä¸åŒçš„ JWT è¦æ±‚ã€‚</p><div><aside class="callout warning"><div class=type><svg class="large-icon"><use xlink:href="/v1.1/img/icons.svg#callout-warning"/></svg></div><div class=content>å…·æœ‰æ¯è·¯å¾„è¦æ±‚çš„æœ€ç»ˆç”¨æˆ·è®¤è¯æ˜¯ Istio 1.1 ä¸­çš„å®éªŒæ€§åŠŸèƒ½ï¼Œå¹¶ä¸”ä¸å»ºè®®ç”¨äºç”Ÿäº§ç”¨é€”ã€‚</div></aside></div><h4 id=ç¦ç”¨ç‰¹å®šè·¯å¾„çš„æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯>ç¦ç”¨ç‰¹å®šè·¯å¾„çš„æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯</h4><p>ä¿®æ”¹ <code>jwt-example</code> ç­–ç•¥ä»¥ç¦ç”¨è·¯å¾„ <code>/user-agent</code> çš„æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ cat &lt;&lt;EOF | kubectl apply -n foo -f -
apiVersion: &#34;authentication.istio.io/v1alpha1&#34;
kind: &#34;Policy&#34;
metadata:
  name: &#34;jwt-example&#34;
spec:
  targets:
  - name: httpbin
  origins:
  - jwt:
      issuer: &#34;testing@secure.istio.io&#34;
      jwksUri: &#34;https://raw.githubusercontent.com/istio/istio/release-1.1/security/tools/jwt/samples/jwks.json&#34;
      trigger_rules:
      - excluded_paths:
        - exact: /user-agent
  principalBinding: USE_ORIGIN
EOF
</code></pre><p>ç¡®è®¤å…è®¸åœ¨æ²¡æœ‰ JWT ä»¤ç‰Œçš„æƒ…å†µä¸‹è®¿é—®è·¯å¾„ <code>/user-agent</code>ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ curl $INGRESS_HOST/user-agent -s -o /dev/null -w &#34;%{http_code}\n&#34;
200
</code></pre><p>ç¡®è®¤åœ¨æ²¡æœ‰ JWT ä»¤ç‰Œçš„æƒ…å†µä¸‹æ‹’ç»è®¿é—®é™¤ <code>/user-agent</code> ä»¥å¤–çš„è·¯å¾„ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ curl $INGRESS_HOST/headers -s -o /dev/null -w &#34;%{http_code}\n&#34;
401
</code></pre><h4 id=ä¸ºç‰¹å®šè·¯å¾„å¯ç”¨æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯>ä¸ºç‰¹å®šè·¯å¾„å¯ç”¨æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯</h4><p>ä¿®æ”¹ <code>jwt-example</code> ç­–ç•¥ï¼Œåªä¸ºè·¯å¾„ <code>/ip</code> å¯ç”¨æœ€ç»ˆç”¨æˆ·è®¤è¯ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ cat &lt;&lt;EOF | kubectl apply -n foo -f -
apiVersion: &#34;authentication.istio.io/v1alpha1&#34;
kind: &#34;Policy&#34;
metadata:
  name: &#34;jwt-example&#34;
spec:
  targets:
  - name: httpbin
  origins:
  - jwt:
      issuer: &#34;testing@secure.istio.io&#34;
      jwksUri: &#34;https://raw.githubusercontent.com/istio/istio/release-1.1/security/tools/jwt/samples/jwks.json&#34;
      trigger_rules:
      - included_paths:
        - exact: /ip
  principalBinding: USE_ORIGIN
EOF
</code></pre><p>ç¡®è®¤å…è®¸åœ¨æ²¡æœ‰ JWT ä»¤ç‰Œçš„æƒ…å†µä¸‹è®¿é—®é™¤ <code>/ip</code> ä»¥å¤–çš„è·¯å¾„ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ curl $INGRESS_HOST/user-agent -s -o /dev/null -w &#34;%{http_code}\n&#34;
200
</code></pre><p>ç¡®è®¤åœ¨æ²¡æœ‰ JWT ä»¤ç‰Œçš„æƒ…å†µä¸‹æ‹’ç»è®¿é—®è·¯å¾„ <code>/ip</code>ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ curl $INGRESS_HOST/ip -s -o /dev/null -w &#34;%{http_code}\n&#34;
401
</code></pre><p>ç¡®è®¤å…è®¸ä½¿ç”¨æœ‰æ•ˆçš„ JWT ä»¤ç‰Œè®¿é—®è·¯å¾„ <code>/ip</code>ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ TOKEN=$(curl https://raw.githubusercontent.com/istio/istio/release-1.1/security/tools/jwt/samples/demo.jwt -s)
$ curl --header &#34;Authorization: Bearer $TOKEN&#34; $INGRESS_HOST/ip -s -o /dev/null -w &#34;%{http_code}\n&#34;
200
</code></pre><h3 id=ä½¿ç”¨åŒå‘-tls-è¿›è¡Œæœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯>ä½¿ç”¨åŒå‘ TLS è¿›è¡Œæœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯</h3><p>æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯å’ŒåŒå‘ TLS å¯ä»¥ä¸€èµ·ä½¿ç”¨ã€‚ä¿®æ”¹ä¸Šé¢çš„ç­–ç•¥ä»¥å®šä¹‰åŒå‘ TLS å’Œæœ€ç»ˆç”¨æˆ· JWT èº«ä»½éªŒè¯ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ cat &lt;&lt;EOF | kubectl apply -n foo -f -
apiVersion: &#34;authentication.istio.io/v1alpha1&#34;
kind: &#34;Policy&#34;
metadata:
  name: &#34;jwt-example&#34;
spec:
  targets:
  - name: httpbin
  peers:
  - mtls: {}
  origins:
  - jwt:
      issuer: &#34;testing@secure.istio.io&#34;
      jwksUri: &#34;https://raw.githubusercontent.com/istio/istio/release-1.1/security/tools/jwt/samples/jwks.json&#34;
  principalBinding: USE_ORIGIN
EOF
</code></pre><div><aside class="callout tip"><div class=type><svg class="large-icon"><use xlink:href="/v1.1/img/icons.svg#callout-tip"/></svg></div><div class=content>å¦‚æœå°šæœªæäº¤ <code>jwt-example</code> ç­–ç•¥ï¼Œè¯·ä½¿ç”¨ <code>istio create</code>ã€‚</div></aside></div><p>å¹¶æ·»åŠ ç›®æ ‡è§„åˆ™ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ kubectl apply -f - &lt;&lt;EOF
apiVersion: &#34;networking.istio.io/v1alpha3&#34;
kind: &#34;DestinationRule&#34;
metadata:
  name: &#34;httpbin&#34;
  namespace: &#34;foo&#34;
spec:
  host: &#34;httpbin.foo.svc.cluster.local&#34;
  trafficPolicy:
    tls:
      mode: ISTIO_MUTUAL
EOF
</code></pre><div><aside class="callout tip"><div class=type><svg class="large-icon"><use xlink:href="/v1.1/img/icons.svg#callout-tip"/></svg></div><div class=content>å¦‚æœå·²ç»åœ¨ç½‘æ ¼çº§æˆ–è€…å‘½åç©ºé—´çº§çš„ç­–ç•¥ä¸­å¯ç”¨äº†åŒå‘ TLSï¼Œåˆ™ä¸»æœº <code>httpbin.foo</code> å·²è¢«å…¶å®ƒç›®æ ‡è§„åˆ™è¦†ç›–ã€‚å› æ­¤å°±ä¸éœ€è¦æ·»åŠ æ­¤ç›®æ ‡è§„åˆ™äº†ã€‚å¦ä¸€æ–¹é¢ï¼Œä»ç„¶éœ€è¦å°† <code>mtls</code> èŠ‚æ·»åŠ åˆ°èº«ä»½éªŒè¯ç­–ç•¥ï¼Œå› ä¸ºæœåŠ¡çº§çš„ç­–ç•¥å°†å®Œå…¨è¦†ç›–ç½‘æ ¼çº§ï¼ˆæˆ–å‘½åç©ºé—´çº§ï¼‰çš„ç­–ç•¥ã€‚</div></aside></div><p>åœ¨è¿™äº›æ›´æ”¹ä¹‹åï¼Œæ¥è‡ª Istio æœåŠ¡ï¼ˆåŒ…æ‹¬ ingress gatewayï¼‰åˆ° <code>httpbin.foo</code> çš„æµé‡å°†ä½¿ç”¨åŒå‘ TLSã€‚ä¸Šé¢çš„æµ‹è¯•å‘½ä»¤ä»ç„¶æœ‰æ•ˆã€‚åœ¨ä½¿ç”¨æ­£ç¡®çš„ä»¤ç‰Œçš„æƒ…å†µä¸‹ï¼ŒIstio æœåŠ¡ç›´æ¥å‘ <code>httpbin.foo</code> å‘å‡ºçš„è¯·æ±‚ä¹Ÿå¯ä»¥æ­£å¸¸å·¥ä½œï¼š</p><pre><code class=language-bash data-expandlinks=true>$ TOKEN=$(curl https://raw.githubusercontent.com/istio/istio/release-1.1/security/tools/jwt/samples/demo.jwt -s)
$ kubectl exec $(kubectl get pod -l app=sleep -n foo -o jsonpath={.items..metadata.name}) -c sleep -n foo -- curl http://httpbin.foo:8000/ip -s -o /dev/null -w &#34;%{http_code}\n&#34; --header &#34;Authorization: Bearer $TOKEN&#34;
200
</code></pre><p>ä½†æ˜¯ï¼Œæ¥è‡ªé Istio æœåŠ¡çš„æ˜æ–‡è¯·æ±‚å°†å¤±è´¥ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ kubectl exec $(kubectl get pod -l app=sleep -n legacy -o jsonpath={.items..metadata.name}) -c sleep -n legacy -- curl http://httpbin.foo:8000/ip -s -o /dev/null -w &#34;%{http_code}\n&#34; --header &#34;Authorization: Bearer $TOKEN&#34;
401
</code></pre><h3 id=æ¸…ç†ç¬¬-3-éƒ¨åˆ†>æ¸…ç†ç¬¬ 3 éƒ¨åˆ†</h3><ol><li><p>åˆ é™¤èº«ä»½éªŒè¯ç­–ç•¥ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ kubectl -n foo delete policy jwt-example
</code></pre></li><li><p>åˆ é™¤ç›®æ ‡è§„åˆ™ï¼š</p><pre><code class=language-bash data-expandlinks=true>$ kubectl -n foo delete destinationrule httpbin
</code></pre></li><li><p>å¦‚æœæ‚¨ä¸æ‰“ç®—æ¢ç´¢ä»»ä½•åç»­ä»»åŠ¡ï¼Œåˆ™åªéœ€åˆ é™¤æµ‹è¯•å‘½åç©ºé—´å³å¯åˆ é™¤æ‰€æœ‰èµ„æºï¼š</p><pre><code class=language-bash data-expandlinks=true>$ kubectl delete ns foo bar legacy
</code></pre></li></ol><nav id=see-also><h2>ç›¸å…³å†…å®¹</h2><div class=see-also><div class=entry><p class=link><a data-skipendnotes=true href=/v1.1/zh/docs/tasks/security/mtls-migration/>åŒå‘ TLS çš„è¿ç§»</a></p><p class=desc>å¦‚ä½•æ¸è¿›å¼çš„ä¸ºç°æœ‰ Istio æœåŠ¡æ·»åŠ åŒå‘ TLS æ”¯æŒã€‚</p></div><div class=entry><p class=link><a data-skipendnotes=true href=/v1.1/zh/docs/concepts/security/>å®‰å…¨</a></p><p class=desc>æè¿° Istio çš„æˆæƒä¸é‰´æƒåŠŸèƒ½ã€‚</p></div><div class=entry><p class=link><a data-skipendnotes=true href=/v1.1/zh/blog/2019/root-transition/>å»¶é•¿ Istio è‡ªç­¾å‘æ ¹è¯ä¹¦çš„æœ‰æ•ˆæœŸ</a></p><p class=desc>å­¦ä¹ å»¶é•¿ Istio è‡ªç­¾å‘æ ¹è¯ä¹¦çš„æœ‰æ•ˆæœŸçš„æ–¹æ³•ã€‚</p></div><div class=entry><p class=link><a data-skipendnotes=true href=/v1.1/zh/blog/2018/istio-authorization/>åŸºäº Istio çš„ Micro-Segmentation æˆæƒ</a></p><p class=desc>æè¿° Istio çš„æˆæƒåŠŸèƒ½ä»¥åŠå¦‚ä½•åœ¨å„ç§ç”¨ä¾‹ä¸­ä½¿ç”¨å®ƒã€‚</p></div><div class=entry><p class=link><a data-skipendnotes=true href=/v1.1/zh/docs/tasks/security/health-check/>Citadel çš„å¥åº·æ£€æŸ¥</a></p><p class=desc>å¦‚ä½•åœ¨ Kubernetes ä¸­å¯ç”¨ Citadel çš„å¥åº·æ£€æŸ¥ã€‚</p></div><div class=entry><p class=link><a data-skipendnotes=true href=/v1.1/zh/docs/tasks/security/authz-http/>HTTP æœåŠ¡çš„è®¿é—®æ§åˆ¶</a></p><p class=desc>å±•ç¤ºä¸º HTTP æœåŠ¡è®¾ç½®åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶æ–¹æ³•ã€‚</p></div></div></nav></article><nav class=pagenav><div class=left><a title="æœ‰å…³å¦‚ä½•åœ¨ Istio ä¸­é…ç½®åŸºäºç»„çš„æˆæƒå’Œé…ç½®åˆ—è¡¨ç±»å‹å£°æ˜çš„æˆæƒçš„æ•™ç¨‹ã€‚" href=/v1.1/zh/docs/tasks/security/rbac-groups/><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#left-arrow"/></svg>åŸºäºç»„å’Œåˆ—è¡¨ç±»å‹å£°æ˜çš„æˆæƒ</a></div><div class=right><a title="å¯¹ Istio çš„è‡ªåŠ¨åŒå‘ TLS è®¤è¯åŠŸèƒ½è¿›è¡Œä½“éªŒå’Œæµ‹è¯•ã€‚" href=/v1.1/zh/docs/tasks/security/mutual-tls/>æ·±å…¥äº†è§£åŒå‘ TLS<svg class="icon"><use xlink:href="/v1.1/img/icons.svg#right-arrow"/></svg></a></div></nav><div id=endnotes-container aria-hidden=true><h2>é“¾æ¥</h2><ol id=endnotes></ol></div></div><div class=toc-container><nav class=toc aria-label="Table of Contents"><div id=toc><ol><li role=none aria-label=å¼€å§‹ä¹‹å‰><a href=#%e5%bc%80%e5%a7%8b%e4%b9%8b%e5%89%8d>å¼€å§‹ä¹‹å‰</a><ol><li role=none aria-label=å®‰è£…><a href=#%e5%ae%89%e8%a3%85>å®‰è£…</a></ol></li><li role=none aria-label="ä¸ºç½‘æ ¼ä¸­çš„æ‰€æœ‰æœåŠ¡å¯ç”¨åŒå‘ TLS è®¤è¯"><a href=#%e4%b8%ba%e7%bd%91%e6%a0%bc%e4%b8%ad%e7%9a%84%e6%89%80%e6%9c%89%e6%9c%8d%e5%8a%a1%e5%90%af%e7%94%a8%e5%8f%8c%e5%90%91-tls-%e8%ae%a4%e8%af%81>ä¸ºç½‘æ ¼ä¸­çš„æ‰€æœ‰æœåŠ¡å¯ç”¨åŒå‘ TLS è®¤è¯</a><ol><li role=none aria-label="ä»é Istio æœåŠ¡è¯·æ±‚åˆ° Istio æœåŠ¡"><a href=#%e4%bb%8e%e9%9d%9e-istio-%e6%9c%8d%e5%8a%a1%e8%af%b7%e6%b1%82%e5%88%b0-istio-%e6%9c%8d%e5%8a%a1>ä»é Istio æœåŠ¡è¯·æ±‚åˆ° Istio æœåŠ¡</a><li role=none aria-label="ä» Istio æœåŠ¡è¯·æ±‚é Istio æœåŠ¡"><a href=#%e4%bb%8e-istio-%e6%9c%8d%e5%8a%a1%e8%af%b7%e6%b1%82%e9%9d%9e-istio-%e6%9c%8d%e5%8a%a1>ä» Istio æœåŠ¡è¯·æ±‚é Istio æœåŠ¡</a><li role=none aria-label="ä» Istio æœåŠ¡è¯·æ±‚åˆ° Kubernetes API Server"><a href=#%e4%bb%8e-istio-%e6%9c%8d%e5%8a%a1%e8%af%b7%e6%b1%82%e5%88%b0-kubernetes-api-server>ä» Istio æœåŠ¡è¯·æ±‚åˆ° Kubernetes API Server</a><li role=none aria-label="æ¸…ç†ç¬¬ 1 éƒ¨åˆ†"><a href=#%e6%b8%85%e7%90%86%e7%ac%ac-1-%e9%83%a8%e5%88%86>æ¸…ç†ç¬¬ 1 éƒ¨åˆ†</a></ol></li><li role=none aria-label="ä¸ºæ¯ä¸ªå‘½åç©ºé—´æˆ–æœåŠ¡å¯ç”¨åŒå‘ TLS"><a href=#%e4%b8%ba%e6%af%8f%e4%b8%aa%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4%e6%88%96%e6%9c%8d%e5%8a%a1%e5%90%af%e7%94%a8%e5%8f%8c%e5%90%91-tls>ä¸ºæ¯ä¸ªå‘½åç©ºé—´æˆ–æœåŠ¡å¯ç”¨åŒå‘ TLS</a><ol><li role=none aria-label=å‘½åç©ºé—´èŒƒå›´çš„ç­–ç•¥><a href=#%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4%e8%8c%83%e5%9b%b4%e7%9a%84%e7%ad%96%e7%95%a5>å‘½åç©ºé—´èŒƒå›´çš„ç­–ç•¥</a></ol></li><li role=none aria-label=ç‰¹å®šäºæœåŠ¡çš„ç­–ç•¥><a href=#%e7%89%b9%e5%ae%9a%e4%ba%8e%e6%9c%8d%e5%8a%a1%e7%9a%84%e7%ad%96%e7%95%a5>ç‰¹å®šäºæœåŠ¡çš„ç­–ç•¥</a><li role=none aria-label=ç­–ç•¥ä¼˜å…ˆçº§><a href=#%e7%ad%96%e7%95%a5%e4%bc%98%e5%85%88%e7%ba%a7>ç­–ç•¥ä¼˜å…ˆçº§</a><ol><li role=none aria-label="æ¸…ç†ç¬¬ 2 éƒ¨åˆ†"><a href=#%e6%b8%85%e7%90%86%e7%ac%ac-2-%e9%83%a8%e5%88%86>æ¸…ç†ç¬¬ 2 éƒ¨åˆ†</a></ol></li><li role=none aria-label=è®¾ç½®ç»ˆç«¯ç”¨æˆ·è®¤è¯><a href=#%e8%ae%be%e7%bd%ae%e7%bb%88%e7%ab%af%e7%94%a8%e6%88%b7%e8%ae%a4%e8%af%81>è®¾ç½®ç»ˆç«¯ç”¨æˆ·è®¤è¯</a><ol><li role=none aria-label=å…·æœ‰æ¯ä¸ªè·¯å¾„è¦æ±‚çš„æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯><a href=#%e5%85%b7%e6%9c%89%e6%af%8f%e4%b8%aa%e8%b7%af%e5%be%84%e8%a6%81%e6%b1%82%e7%9a%84%e6%9c%80%e7%bb%88%e7%94%a8%e6%88%b7%e8%ba%ab%e4%bb%bd%e9%aa%8c%e8%af%81>å…·æœ‰æ¯ä¸ªè·¯å¾„è¦æ±‚çš„æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯</a><ol><li role=none aria-label=ç¦ç”¨ç‰¹å®šè·¯å¾„çš„æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯><a href=#%e7%a6%81%e7%94%a8%e7%89%b9%e5%ae%9a%e8%b7%af%e5%be%84%e7%9a%84%e6%9c%80%e7%bb%88%e7%94%a8%e6%88%b7%e8%ba%ab%e4%bb%bd%e9%aa%8c%e8%af%81>ç¦ç”¨ç‰¹å®šè·¯å¾„çš„æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯</a><li role=none aria-label=ä¸ºç‰¹å®šè·¯å¾„å¯ç”¨æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯><a href=#%e4%b8%ba%e7%89%b9%e5%ae%9a%e8%b7%af%e5%be%84%e5%90%af%e7%94%a8%e6%9c%80%e7%bb%88%e7%94%a8%e6%88%b7%e8%ba%ab%e4%bb%bd%e9%aa%8c%e8%af%81>ä¸ºç‰¹å®šè·¯å¾„å¯ç”¨æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯</a></ol></li><li role=none aria-label="ä½¿ç”¨åŒå‘ TLS è¿›è¡Œæœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯"><a href=#%e4%bd%bf%e7%94%a8%e5%8f%8c%e5%90%91-tls-%e8%bf%9b%e8%a1%8c%e6%9c%80%e7%bb%88%e7%94%a8%e6%88%b7%e8%ba%ab%e4%bb%bd%e9%aa%8c%e8%af%81>ä½¿ç”¨åŒå‘ TLS è¿›è¡Œæœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯</a><li role=none aria-label="æ¸…ç†ç¬¬ 3 éƒ¨åˆ†"><a href=#%e6%b8%85%e7%90%86%e7%ac%ac-3-%e9%83%a8%e5%88%86>æ¸…ç†ç¬¬ 3 éƒ¨åˆ†</a></ol></li><li role=none aria-label=ç›¸å…³å†…å®¹><a href=#see-also>ç›¸å…³å†…å®¹</a></li></ol></div></nav></div></main><footer><div class=user-links><a class=channel title="Go download Istio 1.1.9 now" href=https://github.com/istio/istio/releases/tag/1.1.9 aria-label="Download Istio"><span>download</span><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#download"/></svg>
</a><a class=channel title="åŠ å…¥ Istio discussion board å‚ä¸è®¨è®ºè·å–å¸®åŠ©" href=https://discuss.istio.io aria-label="Istio discussion board"><span>discuss</span><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#discourse"/></svg></a>
<a class=channel title="Stack Overflow ä¸­åˆ—ä¸¾äº†é’ˆå¯¹å®é™…é—®é¢˜ä»¥åŠéƒ¨ç½²ã€é…ç½®å’Œä½¿ç”¨ Istio çš„å„é¡¹å›ç­”" href=https://stackoverflow.com/questions/tagged/istio aria-label="Stack Overflow"><span>stack overflow</span><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#stackoverflow"/></svg></a>
<a class=channel title="å…³æ³¨æˆ‘ä»¬çš„ Twitter æ¥è·å–æœ€æ–°ä¿¡æ¯" href=https://twitter.com/IstioMesh aria-label=Twitter><span>twitter</span><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#twitter"/></svg></a><div class=tag>å¯¹äºç”¨æˆ·</div></div><div class=info><p class=copyright>ä¸­æ–‡å†…å®¹ç”± ServiceMesher ç¤¾åŒºç»´æŠ¤ï¼Œéƒ¨åˆ†æ–‡æ¡£å¯èƒ½ç¨å¾®æ»åäºè‹±æ–‡ç‰ˆæœ¬ï¼ŒåŒæ­¥å·¥ä½œæŒç»­è¿›è¡Œä¸­<br>Istio å½’æ¡£
1.1.9<br>&copy; 2019 Istio Authors, <a href=https://policies.google.com/privacy>éšç§æ”¿ç­–</a><br>å½’æ¡£äº 2019å¹´6æœˆ18æ—¥</p></div><div class=dev-links><a class=channel title="Istio çš„ä»£ç åœ¨ GitHub ä¸Šå¼€å‘" href=https://github.com/istio/community aria-label=GitHub><span>github</span><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#github"/></svg></a>
<a class=channel title="åœ¨ Slack ä¸Šä¸ Istio ç¤¾åŒºäº¤äº’è®¨è®ºå¼€å‘é—®é¢˜ï¼ˆä»…é™é‚€è¯·ï¼‰" href=https://istio.slack.com aria-label=slack><span>slack</span><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#slack"/></svg></a>
<a class=channel title="å¦‚æœæ‚¨æƒ³æ·±å…¥äº†è§£ Istio çš„æŠ€æœ¯ç»†èŠ‚ï¼Œè¯·æŸ¥çœ‹æˆ‘ä»¬æ—¥ç›Šå®Œå–„çš„è®¾è®¡æ–‡æ¡£" href=https://groups.google.com/forum/#!forum/istio-team-drive-access aria-label="team drive"><span>drive</span><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#drive"/></svg></a>
<a class=channel title="å¦‚æœæ‚¨æƒ³ä¸º Istio é¡¹ç›®åšå‡ºè´¡çŒ®ï¼Œè¯·è€ƒè™‘åŠ å…¥æˆ‘ä»¬çš„å·¥ä½œç»„" href=https://github.com/istio/community/blob/master/WORKING-GROUPS.md aria-label="working groups"><span>working groups</span><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#working-groups"/></svg></a><div class=tag>å¯¹äºå¼€å‘è€…</div></div></footer><div id=scroll-to-top-container aria-hidden=true><button id=scroll-to-top title=å›åˆ°é¡¶éƒ¨><svg class="icon"><use xlink:href="/v1.1/img/icons.svg#top"/></svg></button></div></body></html>