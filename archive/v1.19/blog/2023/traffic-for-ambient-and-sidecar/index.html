<!doctype html><html lang=en itemscope itemtype=https://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=theme-color content="#466BB0"><meta name=title content="Deep Dive into the Network Traffic Path of the Coexistence of Ambient and Sidecar"><meta name=description content="Deep Dive into the Traffic Path of the Coexistence of Ambient and Sidecar."><meta name=author content="Steve Zhang (Intel), John Howard (Google), Yuxing Zeng(Alibaba), Peter Jausovec(Solo.io)"><meta name=keywords content="microservices,services,mesh,traffic,ambient,sidecar,coexistence"><meta property="og:title" content="Deep Dive into the Network Traffic Path of the Coexistence of Ambient and Sidecar"><meta property="og:type" content="website"><meta property="og:description" content="Deep Dive into the Traffic Path of the Coexistence of Ambient and Sidecar."><meta property="og:url" content="/v1.19/blog/2023/traffic-for-ambient-and-sidecar/"><meta property="og:image" content="https://raw.githubusercontent.com/istio/istio.io/master/static/img/istio-social.svg"><meta property="og:image:alt" content="Istio Logo"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="600"><meta property="og:site_name" content="Istio"><meta name=twitter:card content="summary"><meta name=twitter:site content="@IstioMesh"><title>Istioldie 1.19 / Deep Dive into the Network Traffic Path of the Coexistence of Ambient and Sidecar</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98480406-2"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-98480406-2")</script><link rel=alternate type=application/rss+xml title="Istio Blog" href=/v1.19/blog/feed.xml><link rel=alternate type=application/rss+xml title="Istio News" href=/v1.19/news/feed.xml><link rel=alternate type=application/rss+xml title="Istio Blog and News" href=/v1.19/feed.xml><link rel="shortcut icon" href=/v1.19/favicons/favicon.ico><link rel=apple-touch-icon href=/v1.19/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/v1.19/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/v1.19/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/v1.19/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/v1.19/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/v1.19/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/v1.19/favicons/android-96x96.png sizes=96xW96><link rel=icon type=image/png href=/v1.19/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/v1.19/favicons/android-192x192.png sizes=192x192><link rel=icon type=image/svg+xml href=/v1.19/favicons/favicon.svg><link rel=icon type=image/png href=/v1.19/favicons/favicon.png><link rel=mask-icon href=/v1.19/favicons/safari-pinned-tab.svg color=#466bb0><link rel=manifest href=/v1.19/manifest.json><meta name=apple-mobile-web-app-title content="Istio"><meta name=application-name content="Istio"><meta name=msapplication-config content="/browserconfig.xml"><meta name=msapplication-TileColor content="#466BB0"><meta name=theme-color content="#466BB0"><link rel=stylesheet href=/v1.19/css/all.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,400;0,500;0,600;0,700;1,400;1,600&display=swap"><script src=/v1.19/js/themes_init.min.js></script></head><body class="language-unknown archive-site"><script>const branchName="release-1.19",docTitle="Deep Dive into the Network Traffic Path of the Coexistence of Ambient and Sidecar",iconFile="/v1.19/img/icons.svg",buttonCopy="Copy to clipboard",buttonPrint="Print",buttonDownload="Download"</script><script src="https://www.google.com/cse/brand?form=search-form" defer></script>
<script src=/v1.19/js/all.min.js data-manual defer></script><header class=main-navigation><nav class="main-navigation-wrapper container-l"><div class=main-navigation-header><a id=brand href=/v1.19/ aria-label=logotype><span class=logo><svg xmlns="http://www.w3.org/2000/svg" width="128" height="60" viewBox="0 0 128 60"><path d="M58.434 48.823A.441.441.0 0158.3 48.497V22.583a.444.444.0 01.134-.326.446.446.0 01.327-.134h3.527a.447.447.0 01.325.134.447.447.0 01.134.326v25.914a.443.443.0 01-.134.326.444.444.0 01-.325.134h-3.527a.444.444.0 01-.327-.134z"/><path d="m70.969 48.477a6.556 6.556.0 01-2.818-1.955 4.338 4.338.0 01-1-2.78v-.345a.443.443.0 01.134-.326.444.444.0 01.326-.135h3.374a.444.444.0 01.326.135.445.445.0 01.134.326v.077a2.014 2.014.0 001.054 1.667 4.672 4.672.0 002.664.709 4.446 4.446.0 002.492-.633 1.862 1.862.0 00.958-1.591 1.426 1.426.0 00-.786-1.322 12.7 12.7.0 00-2.549-.939l-1.457-.46a21.526 21.526.0 01-3.3-1.227 6.57 6.57.0 01-2.262-1.783 4.435 4.435.0 01-.92-2.894 5.081 5.081.0 012.109-4.275 8.993 8.993.0 015.558-1.591 10.445 10.445.0 014.1.748 6.3 6.3.0 012.722 2.07 5 5 0 01.958 3.009.441.441.0 01-.134.326.441.441.0 01-.325.134h-3.258a.441.441.0 01-.326-.134.443.443.0 01-.134-.326 1.974 1.974.0 00-.978-1.667 4.647 4.647.0 00-2.665-.671 4.741 4.741.0 00-2.435.556 1.724 1.724.0 00-.938 1.553 1.512 1.512.0 00.9 1.4 15.875 15.875.0 003.01 1.055l.843.229a27.368 27.368.0 013.412 1.246 6.67 6.67.0 012.338 1.763 4.387 4.387.0 01.958 2.933 4.988 4.988.0 01-2.146 4.275 9.543 9.543.0 01-5.712 1.552 11.626 11.626.0 01-4.227-.709z"/><path d="m97.039 32.837a.443.443.0 01-.326.135h-3.911a.169.169.0 00-.191.192v9.239a2.951 2.951.0 00.632 2.108 2.7 2.7.0 002.013.652h1.15a.444.444.0 01.325.134.441.441.0 01.134.326v2.875a.471.471.0 01-.459.5l-1.994.039a8 8 0 01-4.524-1.035q-1.495-1.035-1.533-3.91V33.166A.17.17.0 0088.164 32.974H85.978A.441.441.0 0185.652 32.839.441.441.0 0185.518 32.513V29.83a.441.441.0 01.134-.326.444.444.0 01.326-.135h2.186a.169.169.0 00.191-.192v-4.485a.438.438.0 01.134-.326.44.44.0 01.325-.134h3.336a.443.443.0 01.325.134.442.442.0 01.135.326v4.485a.169.169.0 00.191.192h3.911a.446.446.0 01.326.135.446.446.0 01.134.326v2.683a.446.446.0 01-.133.324z"/><path d="m101.694 25.917a2.645 2.645.0 01-.767-1.955 2.65 2.65.0 01.767-1.955 2.65 2.65.0 011.955-.767 2.65 2.65.0 011.955.767 2.652 2.652.0 01.767 1.955 2.647 2.647.0 01-.767 1.955 2.646 2.646.0 01-1.955.767 2.645 2.645.0 01-1.955-.767zm-.211 22.906a.441.441.0 01-.134-.326V29.79a.444.444.0 01.134-.326.446.446.0 01.326-.134h3.527a.446.446.0 01.326.134.445.445.0 01.134.326v18.707a.443.443.0 01-.134.326.443.443.0 01-.326.134h-3.527a.443.443.0 01-.326-.134z"/><path d="m114.019 47.734a8.1 8.1.0 01-3.047-4.255 14.439 14.439.0 01-.652-4.37 14.3 14.3.0 01.614-4.371A7.869 7.869.0 01114 30.56a9.072 9.072.0 015.252-1.5 8.543 8.543.0 015.041 1.5 7.985 7.985.0 013.009 4.14 12.439 12.439.0 01.69 4.37 13.793 13.793.0 01-.651 4.37 8.255 8.255.0 01-3.028 4.275 8.475 8.475.0 01-5.1 1.553 8.754 8.754.0 01-5.194-1.534zm7.629-3.1a4.536 4.536.0 001.476-2.262 11.335 11.335.0 00.383-3.221 10.618 10.618.0 00-.383-3.22 4.169 4.169.0 00-1.457-2.243 4.066 4.066.0 00-2.531-.785 3.942 3.942.0 00-2.453.785 4.376 4.376.0 00-1.5 2.243 11.839 11.839.0 00-.383 3.22 11.84 11.84.0 00.383 3.221 4.222 4.222.0 001.476 2.262 4.075 4.075.0 002.549.8 3.8 3.8.0 002.44-.809z"/><path d="m15.105 32.057v15.565a.059.059.0 01-.049.059L.069 50.25A.06.06.0 01.005 50.167l14.987-33.47a.06.06.0 01.114.025z"/><path d="m17.631 23.087v24.6a.06.06.0 00.053.059l22.449 2.507a.06.06.0 00.061-.084L17.745.032a.06.06.0 00-.114.024z"/><path d="m39.961 52.548-24.833 7.45a.062.062.0 01-.043.0L.079 52.548a.059.059.0 01.026-.113h39.839a.06.06.0 01.017.113z"/></svg></span></a><button id=hamburger class=main-navigation-toggle aria-label="Open navigation"><svg class="icon menu-hamburger"><use xlink:href="/v1.19/img/icons.svg#menu-hamburger"/></svg></button>
<button id=menu-close class=main-navigation-toggle aria-label="Close navigation"><svg class="icon menu-close"><use xlink:href="/v1.19/img/icons.svg#menu-close"/></svg></button></div><div id=header-links class=main-navigation-links-wrapper><ul class=main-navigation-links><li class=main-navigation-links-item><a class="main-navigation-links-link has-dropdown"><span>About</span><svg class="icon dropdown-arrow"><use xlink:href="/v1.19/img/icons.svg#dropdown-arrow"/></svg></a><ul class=main-navigation-links-dropdown><li class=main-navigation-links-dropdown-item><a href=/v1.19/about/service-mesh class=main-navigation-links-link>Service mesh</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.19/about/solutions class=main-navigation-links-link>Solutions</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.19/about/case-studies class=main-navigation-links-link>Case studies</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.19/about/ecosystem class=main-navigation-links-link>Ecosystem</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.19/about/deployment class=main-navigation-links-link>Deployment</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.19/about/faq class=main-navigation-links-link>FAQ</a></li></ul></li><li class=main-navigation-links-item><a href=/v1.19/blog/ class=main-navigation-links-link><span>Blog</span></a></li><li class=main-navigation-links-item><a href=/v1.19/news/ class=main-navigation-links-link><span>News</span></a></li><li class=main-navigation-links-item><a href=/v1.19/get-involved/ class=main-navigation-links-link><span>Get involved</span></a></li><li class=main-navigation-links-item><a href=/v1.19/docs/ class=main-navigation-links-link><span>Documentation</span></a></li></ul><div class=main-navigation-footer><button id=search-show class=search-show title='Search this site' aria-label=Search><svg class="icon magnifier"><use xlink:href="/v1.19/img/icons.svg#magnifier"/></svg></button>
<a href=/v1.19/docs/setup/getting-started class="btn btn--primary" id=try-istio>Try Istio</a></div></div><form id=search-form class=search name=cse role=search><input type=hidden name=cx value=002184991200833970123:iwwf17ikgf4>
<input type=hidden name=ie value=utf-8>
<input type=hidden name=hl value=en>
<input type=hidden id=search-page-url value=/search>
<input id=search-textbox class="search-textbox form-control" name=q type=search aria-label='Search this site' placeholder=Search>
<button id=search-close title='Cancel search' type=reset aria-label='Cancel search'><svg class="icon menu-close"><use xlink:href="/v1.19/img/icons.svg#menu-close"/></svg></button></form></nav></header><div class=banner-container><a href=/v1.19/news/releases/1.19.x/announcing-1.19.4/ class=banner data-title="Latest Release-2023-11-13 00:00:00 +0000 UTC" data-period-start=1699833600000 data-period-end=1700438400000 data-max-impressions=3 data-timeout><div class=content><p>Istio 1.19.4 is now available! Click here to learn more</p></div><div class=frame></div></a></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><div class=header-content><h1>Deep Dive into the Network Traffic Path of the Coexistence of Ambient and Sidecar</h1><p>Deep Dive into the Traffic Path of the Coexistence of Ambient and Sidecar.</p></div><p class=post-author>Sep 18, 2023 <span>|</span> By Steve Zhang - Intel, John Howard - Google, Yuxing Zeng- Alibaba, Peter Jausovec- Solo.io</p><div><p>There are 2 deployment modes for Istio: ambient mode and sidecar mode. The former is still on the way, the latter is the classic one. Therefore, the coexistence of ambient mode and sidecar mode should be a normal deployment form and the reason why this blog may be helpful for Istio users.</p><h2 id=background>Background</h2><p>In the architecture of modern microservices, communication and management among services is critical. To address the challenge, Istio emerged as a service mesh technology. It provides traffic control, security, and superior observation capabilities by utilizing the sidecar. In order to further improve the adaptability and flexibility of Istio, the Istio community began to explore a new mode - ambient mode. In this mode, Istio no longer relies on explicit sidecar injection, but achieves communication and mesh management among services through ztunnel and waypoint proxies. Ambient also brings a series of improvements, such as lower resource consumption, simpler deployment, and more flexible configuration options. When enabling ambient mode, we don&rsquo;t have to restart pods anymore which enables Istio to play a better role in various scenarios.</p><p>There are many blogs, which can be found in the <a href=#reference-resources>Reference Resources</a> section of this blog, that introduce and analyze ambient, and this blog will analyze the network traffic path in Istio ambient and sidecar modes.</p><p>To clarify the network traffic paths and make it easier to understand, this blog post explores the following two scenarios with corresponding diagrams:</p><ul><li><strong>The network path of services in ambient mode to services in sidecar mode</strong></li><li><strong>The network path of services in sidecar mode to services in ambient mode</strong></li></ul><h2 id=information-about-the-analysis>Information about the analysis</h2><p>The analysis is based on Istio 1.18.2, where ambient mode uses iptables for redirection.</p><h2 id=ambient-mode-sleep-to-sidecar-mode-httpbin>Ambient mode <code>sleep</code> to sidecar mode <code>httpbin</code></h2><h3 id=deployment-and-configuration-for-the-first-scenario>Deployment and configuration for the first scenario</h3><ul><li><code>sleep</code> is deployed in namespace foo<ul><li><code>sleep</code> pod is scheduled to Node A</li></ul></li><li><code>httpbin</code> is deployed in namespace bar<ul><li><code>httpbin</code> is scheduled to Node B</li></ul></li><li>foo namespace enables ambient mode (foo namespace contains label: <code>istio.io/dataplane-mode=ambient</code>)</li><li>bar namespace enables sidecar injection (bar namespace contains label: <code>istio-injection: enabled</code>)</li></ul><p>With the above description, the deployment and network traffic paths are:</p><figure style=width:100%><div class=wrapper-with-intrinsic-ratio style=padding-bottom:72.63901147396294%><a data-skipendnotes=true href=/v1.19/blog/2023/traffic-for-ambient-and-sidecar/ambient-to-sidecar.png title="Ambient mode sleep to Sidecar mode httpbin"><img class=element-to-stretch src=/v1.19/blog/2023/traffic-for-ambient-and-sidecar/ambient-to-sidecar.png alt="Ambient mode sleep to Sidecar mode httpbin"></a></div><figcaption>Ambient mode sleep to Sidecar mode httpbin</figcaption></figure><p>ztunnel will be deployed as a DaemonSet in istio-system namespace if ambient mode is enabled, while istio-cni and ztunnel would generate iptables rules and routes for both the ztunnel pod and pods on each node.</p><p>All network traffic coming in/out of the pod with ambient mode enabled will go through ztunnel based on the network redirection logic. The ztunnel will then forward the traffic to the correct endpoints.</p><h3 id=network-traffic-path-analysis-of-ambient-mode-sleep-to-sidecar-mode-httpbin>Network traffic path analysis of ambient mode <code>sleep</code> to sidecar mode <code>httpbin</code></h3><p>According to above diagram, the details of network traffic path is demonstrated as below:</p><p><strong>(1) (2) (3)</strong> Request traffic of the <code>sleep</code> service is sent out from the <code>veth</code> of the <code>sleep</code> pod where it will be marked and forwarded to the <code>istioout</code> device in the node by following the iptables rules and route rules. The <code>istioout</code> device on node A is a <a href=https://www.rfc-editor.org/rfc/rfc8926.html>Geneve</a> tunnel, and the other end of the tunnel is <code>pistioout</code>, which is inside the ztunnel pod on the same node.</p><p><strong>(4) (5)</strong> When the traffic arrives through the <code>pistioout</code> device, the iptables rules inside the pod intercept and redirect it through the <code>eth0</code> interface in the pod to port <code>15001</code>.</p><p><strong>(6)</strong> According to the original request information, ztunnel can obtain the endpoint list of the target service. It will then handle sending the request to the endpoint, such as one of the <code>httpbin</code> pods. Finally, the request traffic would get into the <code>httpbin</code> pod via the container network.</p><p><strong>(7)</strong> The request traffic arriving in <code>httpbin</code> pod will be intercepted and redirected through port <code>15006</code> of the sidecar by its iptables rules.</p><p><strong>(8)</strong> Sidecar handles the inbound request traffic coming in via port 15006, and forwards the traffic to the <code>httpbin</code> container in the same pod.</p><h2 id=sidecar-mode-sleep-to-ambient-mode-httpbin-and-helloworld>Sidecar mode <code>sleep</code> to ambient mode <code>httpbin</code> and <code>helloworld</code></h2><h3 id=deployment-and-configuration-for-the-second-scenario>Deployment and configuration for the second scenario</h3><ul><li><code>sleep</code> is deployed in namespace foo<ul><li><code>sleep</code> pod is scheduled to Node A</li></ul></li><li><code>httpbin</code> deployed in namespace bar-1<ul><li><code>httpbin</code> pod is scheduled to Node B</li><li>the waypoint proxy of <code>httpbin</code> is disabled</li></ul></li><li><code>helloworld</code> is deployed in namespace bar-2<ul><li><code>helloworld</code> pod is scheduled to Node D</li><li>the waypoint proxy of <code>helloworld</code> is enabled</li><li>the waypoint proxy is scheduled to Node C</li></ul></li><li>foo namespace enables sidecar injection (foo namespace contains label: <code>istio-injection: enabled</code>)</li><li>bar-1 namespace enables ambient mode (bar-1 namespace contains label: <code>istio.io/dataplane-mode=ambient</code>)</li></ul><p>With the above description, the deployment and network traffic paths are:</p><figure style=width:100%><div class=wrapper-with-intrinsic-ratio style=padding-bottom:120.53639846743296%><a data-skipendnotes=true href=/v1.19/blog/2023/traffic-for-ambient-and-sidecar/sidecar-to-ambient.png title="sleep to httpbin and helloworld"><img class=element-to-stretch src=/v1.19/blog/2023/traffic-for-ambient-and-sidecar/sidecar-to-ambient.png alt="sleep to httpbin and helloworld"></a></div><figcaption>sleep to httpbin and helloworld</figcaption></figure><h3 id=network-traffic-path-analysis-of-sidecar-mode-sleep-to-ambient-mode-httpbin>Network traffic path analysis of sidecar mode <code>sleep</code> to ambient mode <code>httpbin</code></h3><p>Network traffic path of a request from the <code>sleep</code> pod (sidecar mode) to the <code>httpbin</code> pod (ambient mode) is depicted in the top half of the diagram above.</p><p><strong>(1) (2) (3) (4)</strong> the <code>sleep</code> container sends a request to <code>httpbin</code>. The request is intercepted by iptables rules and directed to port <code>15001</code> on the sidecar in the <code>sleep</code> pod. Then, the sidecar handles the request and routes the traffic based on the configuration received from istiod (control plane) forwarding the traffic to an IP address corresponding to the <code>httpbin</code> pod on node B.</p><p><strong>(5) (6)</strong> After the request is sent to the device pair (<code>veth httpbin &lt;-> eth0 inside httpbin pod</code>), the request is intercepted and forwarded using the iptables and route rules to the <code>istioin</code> device on node B where <code>httpbin</code> pod is running by following its iptables and route rules. The <code>istioin</code> device on node B and the <code>pistion</code> device inside the ztunnel pod on the same node are connected by a <a href=https://www.rfc-editor.org/rfc/rfc8926.html>Geneve</a> tunnel.</p><p><strong>(7) (8)</strong> After the request enters the <code>pistioin</code> device of the ztunnel pod, the iptables rules in the ztunnel pod intercept and redirect the traffic through port 15008 on the ztunnel proxy running inside the pod.</p><p><strong>(9)</strong> The traffic getting into the port 15008 would be considered as a inbound request, and the ztunnel will then forward the request to the <code>httpbin</code> pod in the same node B.</p><h3 id=network-traffic-path-analysis-of-sidecar-mode-sleep-to-ambient-mode-httpbin-via-waypoint-proxy>Network traffic path analysis of sidecar mode <code>sleep</code> to ambient mode <code>httpbin</code> via waypoint proxy</h3><p>Comparing with the top part of the diagram, the bottom part inserts a waypoint proxy in the path between the <code>sleep</code>, ztunnel and <code>httpbin</code> pods. The Istio control plane has all the service information and configuration of the service mesh. When <code>helloworld</code> pod is deployed with a waypoint proxy, the EDS configuration of <code>helloworld</code> service received by the <code>sleep</code> pod sidecar will be changed to the type of <code>envoy_internal_address</code>. This causes that the request traffic going through the sidecar to be forwarded to port 15008 of the waypoint proxy on node C via the <a href=https://docs.google.com/document/d/1Ofqtxqzk-c_wn0EgAXjaJXDHB9KhDuLe-W3YGG67Y8g/edit>HTTP Based Overlay Network (HBONE)</a> protocol.</p><p>Waypoint proxy is an instance of Envoy proxy and forwards the request to the <code>helloworld</code> pod based on the routing configuration received from the control plane. Once traffic reaches the <code>veth</code> on node D, it follows the same path as the previous scenario.</p><h2 id=wrapping-up>Wrapping up</h2><p>The sidecar mode is what made Istio a great service mesh. However, the sidecar mode can also cause problems as it requires the app and sidecar containers to run in the same pod. Istio ambient mode implements communication among services through centralized proxies (ztunnel and waypoint). The ambient mode provides greater flexibility and scalability, reduces resource consumption as it doesn&rsquo;t require a sidecar for each pod in the mesh, and allows more precise configuration. Therefore, there&rsquo;s no doubt ambient mode is the next evolution of Istio. It&rsquo;s obvious that the coexistence of sidecar and ambient modes may be last a very long time, although the ambient mode is still in alpha stage and the sidecar mode is still the recommended mode of Istio, it will give users a more light-weight option of running and adopting the Istio service mesh as the ambient mode moves towards beta and future releases.</p><h2 id=reference-resources>Reference Resources</h2><ul><li><a href=https://www.solo.io/blog/traffic-ambient-mesh-istio-cni-node-configuration/>Traffic in ambient mesh: Istio CNI and node configuration</a></li><li><a href=https://www.solo.io/blog/traffic-ambient-mesh-redirection-iptables-geneve-tunnels/>Traffic in ambient mesh: Redirection using iptables and Geneve tunnels</a></li><li><a href=https://www.solo.io/blog/traffic-ambient-mesh-ztunnel-ebpf-waypoint/>Traffic in ambient mesh: ztunnel, eBPF configuration, and waypoint proxies</a></li></ul></div><nav class=pagenav><div class=left><a title="A quick recap of Istio at KubeCon + CloudNativeCon + Open Source Summit China in Shanghai." href=/v1.19/blog/2023/istiocon-china/ class=next-link><svg class="icon left-arrow"><use xlink:href="/v1.19/img/icons.svg#left-arrow"/></svg>IstioCon China 2023 wrap-up</a></div><div class=right><a title="Announcing the newest Istio Steering Committee members." href=/v1.19/blog/2023/steering-election-results/ class=next-link>Istio Announces Winners of 2023 Steering Committee Election<svg class="icon right-arrow"><use xlink:href="/v1.19/img/icons.svg#right-arrow"/></svg></a></div></nav></article><footer class=footer><div class="footer-wrapper container-l"><div class="user-links footer-links"><a class=channel title='GitHub is where development takes place on Istio code' href=https://github.com/istio/community aria-label=GitHub><svg class="icon github"><use xlink:href="/v1.19/img/icons.svg#github"/></svg></a><a class=channel title="Access our team drive if you'd like to take a look at the Istio technical design documents" href=https://groups.google.com/forum/#!forum/istio-team-drive-access aria-label="team drive"><svg class="icon drive"><use xlink:href="/v1.19/img/icons.svg#drive"/></svg></a><a class=channel title='Interactively discuss issues with the Istio community on Slack' href=https://slack.istio.io aria-label=slack><svg class="icon slack"><use xlink:href="/v1.19/img/icons.svg#slack"/></svg></a><a class=channel title='Stack Overflow is where you can ask questions and find curated answers on deploying, configuring, and using Istio' href=https://stackoverflow.com/questions/tagged/istio aria-label="Stack Overflow"><svg class="icon stackoverflow"><use xlink:href="/v1.19/img/icons.svg#stackoverflow"/></svg></a><a class=channel title='Follow us on Twitter to get the latest news' href=https://twitter.com/IstioMesh aria-label=Twitter><svg class="icon twitter"><use xlink:href="/v1.19/img/icons.svg#twitter"/></svg></a></div><hr class=footer-separator role=separator><div class="info footer-info"><a class=logo href=/v1.19/ aria-label=logotype><svg xmlns="http://www.w3.org/2000/svg" width="128" height="60" viewBox="0 0 128 60"><path d="M58.434 48.823A.441.441.0 0158.3 48.497V22.583a.444.444.0 01.134-.326.446.446.0 01.327-.134h3.527a.447.447.0 01.325.134.447.447.0 01.134.326v25.914a.443.443.0 01-.134.326.444.444.0 01-.325.134h-3.527a.444.444.0 01-.327-.134z"/><path d="m70.969 48.477a6.556 6.556.0 01-2.818-1.955 4.338 4.338.0 01-1-2.78v-.345a.443.443.0 01.134-.326.444.444.0 01.326-.135h3.374a.444.444.0 01.326.135.445.445.0 01.134.326v.077a2.014 2.014.0 001.054 1.667 4.672 4.672.0 002.664.709 4.446 4.446.0 002.492-.633 1.862 1.862.0 00.958-1.591 1.426 1.426.0 00-.786-1.322 12.7 12.7.0 00-2.549-.939l-1.457-.46a21.526 21.526.0 01-3.3-1.227 6.57 6.57.0 01-2.262-1.783 4.435 4.435.0 01-.92-2.894 5.081 5.081.0 012.109-4.275 8.993 8.993.0 015.558-1.591 10.445 10.445.0 014.1.748 6.3 6.3.0 012.722 2.07 5 5 0 01.958 3.009.441.441.0 01-.134.326.441.441.0 01-.325.134h-3.258a.441.441.0 01-.326-.134.443.443.0 01-.134-.326 1.974 1.974.0 00-.978-1.667 4.647 4.647.0 00-2.665-.671 4.741 4.741.0 00-2.435.556 1.724 1.724.0 00-.938 1.553 1.512 1.512.0 00.9 1.4 15.875 15.875.0 003.01 1.055l.843.229a27.368 27.368.0 013.412 1.246 6.67 6.67.0 012.338 1.763 4.387 4.387.0 01.958 2.933 4.988 4.988.0 01-2.146 4.275 9.543 9.543.0 01-5.712 1.552 11.626 11.626.0 01-4.227-.709z"/><path d="m97.039 32.837a.443.443.0 01-.326.135h-3.911a.169.169.0 00-.191.192v9.239a2.951 2.951.0 00.632 2.108 2.7 2.7.0 002.013.652h1.15a.444.444.0 01.325.134.441.441.0 01.134.326v2.875a.471.471.0 01-.459.5l-1.994.039a8 8 0 01-4.524-1.035q-1.495-1.035-1.533-3.91V33.166A.17.17.0 0088.164 32.974H85.978A.441.441.0 0185.652 32.839.441.441.0 0185.518 32.513V29.83a.441.441.0 01.134-.326.444.444.0 01.326-.135h2.186a.169.169.0 00.191-.192v-4.485a.438.438.0 01.134-.326.44.44.0 01.325-.134h3.336a.443.443.0 01.325.134.442.442.0 01.135.326v4.485a.169.169.0 00.191.192h3.911a.446.446.0 01.326.135.446.446.0 01.134.326v2.683a.446.446.0 01-.133.324z"/><path d="m101.694 25.917a2.645 2.645.0 01-.767-1.955 2.65 2.65.0 01.767-1.955 2.65 2.65.0 011.955-.767 2.65 2.65.0 011.955.767 2.652 2.652.0 01.767 1.955 2.647 2.647.0 01-.767 1.955 2.646 2.646.0 01-1.955.767 2.645 2.645.0 01-1.955-.767zm-.211 22.906a.441.441.0 01-.134-.326V29.79a.444.444.0 01.134-.326.446.446.0 01.326-.134h3.527a.446.446.0 01.326.134.445.445.0 01.134.326v18.707a.443.443.0 01-.134.326.443.443.0 01-.326.134h-3.527a.443.443.0 01-.326-.134z"/><path d="m114.019 47.734a8.1 8.1.0 01-3.047-4.255 14.439 14.439.0 01-.652-4.37 14.3 14.3.0 01.614-4.371A7.869 7.869.0 01114 30.56a9.072 9.072.0 015.252-1.5 8.543 8.543.0 015.041 1.5 7.985 7.985.0 013.009 4.14 12.439 12.439.0 01.69 4.37 13.793 13.793.0 01-.651 4.37 8.255 8.255.0 01-3.028 4.275 8.475 8.475.0 01-5.1 1.553 8.754 8.754.0 01-5.194-1.534zm7.629-3.1a4.536 4.536.0 001.476-2.262 11.335 11.335.0 00.383-3.221 10.618 10.618.0 00-.383-3.22 4.169 4.169.0 00-1.457-2.243 4.066 4.066.0 00-2.531-.785 3.942 3.942.0 00-2.453.785 4.376 4.376.0 00-1.5 2.243 11.839 11.839.0 00-.383 3.22 11.84 11.84.0 00.383 3.221 4.222 4.222.0 001.476 2.262 4.075 4.075.0 002.549.8 3.8 3.8.0 002.44-.809z"/><path d="m15.105 32.057v15.565a.059.059.0 01-.049.059L.069 50.25A.06.06.0 01.005 50.167l14.987-33.47a.06.06.0 01.114.025z"/><path d="m17.631 23.087v24.6a.06.06.0 00.053.059l22.449 2.507a.06.06.0 00.061-.084L17.745.032a.06.06.0 00-.114.024z"/><path d="m39.961 52.548-24.833 7.45a.062.062.0 01-.043.0L.079 52.548a.059.059.0 01.026-.113h39.839a.06.06.0 01.017.113z"/></svg></a><div class=footer-languages><a tabindex=-1 lang=en id=switch-lang-en class="footer-languages-item active"><svg class="icon tick"><use xlink:href="/v1.19/img/icons.svg#tick"/></svg>English</a>
<a tabindex=-1 lang=zh id=switch-lang-zh class=footer-languages-item>中文</a></div></div><ul class=footer-policies><li class=footer-policies-item><a class=footer-policies-link href=https://www.linuxfoundation.org/legal/terms>Terms and Conditions</a> |
<a class=footer-policies-link href=https://www.linuxfoundation.org/legal/privacy-policy>Privacy policy</a> |
<a class=footer-policies-link href=https://github.com/istio/istio.io/edit/release-1.19/content/en/blog/2023/traffic-for-ambient-and-sidecar/index.md>Edit this Page on GitHub</a></li></ul><div class=footer-base><span class=footer-base-copyright>&copy; 2023 the Istio Authors.</span>
<span class=footer-base-version>Version
Archive
1.19.4</span><ul class=footer-base-releases><li class=footer-base-releases-item><a tabindex=-1 class=footer-base-releases-link onclick='return navigateToUrlOrRoot("https://istio.io/blog/2023/traffic-for-ambient-and-sidecar/"),!1'>current release</a></li><li class=footer-base-releases-item><a tabindex=-1 class=footer-base-releases-link onclick='return navigateToUrlOrRoot("https://preliminary.istio.io/blog/2023/traffic-for-ambient-and-sidecar/"),!1'>next release</a></li><li class=footer-base-releases-item><a tabindex=-1 class=footer-base-releases-link href=https://istio.io/archive>older releases</a></li></ul></div></div></footer><div id=scroll-to-top-container aria-hidden=true><button id=scroll-to-top title='Back to top' tabindex=-1><svg class="icon top"><use xlink:href="/v1.19/img/icons.svg#top"/></svg></button></div></body></html>