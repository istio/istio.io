<!doctype html><html lang=zh itemscope itemtype=https://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=theme-color content="#466BB0"><meta name=title content="Destination Rule"><meta name=description content="Configuration affecting load balancing, outlier detection, etc."><meta name=keywords content="microservices,services,mesh"><meta property="og:title" content="Destination Rule"><meta property="og:type" content="website"><meta property="og:description" content="Configuration affecting load balancing, outlier detection, etc."><meta property="og:url" content="/v1.19/zh/docs/reference/config/networking/destination-rule/"><meta property="og:image" content="https://raw.githubusercontent.com/istio/istio.io/master/static/img/istio-social.svg"><meta property="og:image:alt" content="Istio Logo"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="600"><meta property="og:site_name" content="Istio"><meta name=twitter:card content="summary"><meta name=twitter:site content="@IstioMesh"><title>Istioldie 1.19 / Destination Rule</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98480406-2"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-98480406-2")</script><link rel=alternate type=application/rss+xml title="Istio Blog" href=/v1.19/blog/feed.xml><link rel=alternate type=application/rss+xml title="Istio News" href=/v1.19/news/feed.xml><link rel=alternate type=application/rss+xml title="Istio Blog and News" href=/v1.19/feed.xml><link rel="shortcut icon" href=/v1.19/favicons/favicon.ico><link rel=apple-touch-icon href=/v1.19/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/v1.19/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/v1.19/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/v1.19/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/v1.19/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/v1.19/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/v1.19/favicons/android-96x96.png sizes=96xW96><link rel=icon type=image/png href=/v1.19/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/v1.19/favicons/android-192x192.png sizes=192x192><link rel=icon type=image/svg+xml href=/v1.19/favicons/favicon.svg><link rel=icon type=image/png href=/v1.19/favicons/favicon.png><link rel=mask-icon href=/v1.19/favicons/safari-pinned-tab.svg color=#466bb0><link rel=manifest href=/v1.19/manifest.json><meta name=apple-mobile-web-app-title content="Istio"><meta name=application-name content="Istio"><meta name=msapplication-config content="/browserconfig.xml"><meta name=msapplication-TileColor content="#466BB0"><meta name=theme-color content="#466BB0"><link rel=stylesheet href=/v1.19/css/all.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,400;0,500;0,600;0,700;1,400;1,600&display=swap"><script src=/v1.19/js/themes_init.min.js></script></head><body class="language-unknown archive-site"><script>const branchName="release-1.19",docTitle="Destination Rule",iconFile="/v1.19/img/icons.svg",buttonCopy="复制到剪切板",buttonPrint="打印",buttonDownload="下载"</script><script src="https://www.google.com/cse/brand?form=search-form" defer></script>
<script src=/v1.19/js/all.min.js data-manual defer></script><header class=main-navigation><nav class="main-navigation-wrapper container-l"><div class=main-navigation-header><a id=brand href=/v1.19/zh/ aria-label=logotype><span class=logo><svg xmlns="http://www.w3.org/2000/svg" width="128" height="60" viewBox="0 0 128 60"><path d="M58.434 48.823A.441.441.0 0158.3 48.497V22.583a.444.444.0 01.134-.326.446.446.0 01.327-.134h3.527a.447.447.0 01.325.134.447.447.0 01.134.326v25.914a.443.443.0 01-.134.326.444.444.0 01-.325.134h-3.527a.444.444.0 01-.327-.134z"/><path d="m70.969 48.477a6.556 6.556.0 01-2.818-1.955 4.338 4.338.0 01-1-2.78v-.345a.443.443.0 01.134-.326.444.444.0 01.326-.135h3.374a.444.444.0 01.326.135.445.445.0 01.134.326v.077a2.014 2.014.0 001.054 1.667 4.672 4.672.0 002.664.709 4.446 4.446.0 002.492-.633 1.862 1.862.0 00.958-1.591 1.426 1.426.0 00-.786-1.322 12.7 12.7.0 00-2.549-.939l-1.457-.46a21.526 21.526.0 01-3.3-1.227 6.57 6.57.0 01-2.262-1.783 4.435 4.435.0 01-.92-2.894 5.081 5.081.0 012.109-4.275 8.993 8.993.0 015.558-1.591 10.445 10.445.0 014.1.748 6.3 6.3.0 012.722 2.07 5 5 0 01.958 3.009.441.441.0 01-.134.326.441.441.0 01-.325.134h-3.258a.441.441.0 01-.326-.134.443.443.0 01-.134-.326 1.974 1.974.0 00-.978-1.667 4.647 4.647.0 00-2.665-.671 4.741 4.741.0 00-2.435.556 1.724 1.724.0 00-.938 1.553 1.512 1.512.0 00.9 1.4 15.875 15.875.0 003.01 1.055l.843.229a27.368 27.368.0 013.412 1.246 6.67 6.67.0 012.338 1.763 4.387 4.387.0 01.958 2.933 4.988 4.988.0 01-2.146 4.275 9.543 9.543.0 01-5.712 1.552 11.626 11.626.0 01-4.227-.709z"/><path d="m97.039 32.837a.443.443.0 01-.326.135h-3.911a.169.169.0 00-.191.192v9.239a2.951 2.951.0 00.632 2.108 2.7 2.7.0 002.013.652h1.15a.444.444.0 01.325.134.441.441.0 01.134.326v2.875a.471.471.0 01-.459.5l-1.994.039a8 8 0 01-4.524-1.035q-1.495-1.035-1.533-3.91V33.166A.17.17.0 0088.164 32.974H85.978A.441.441.0 0185.652 32.839.441.441.0 0185.518 32.513V29.83a.441.441.0 01.134-.326.444.444.0 01.326-.135h2.186a.169.169.0 00.191-.192v-4.485a.438.438.0 01.134-.326.44.44.0 01.325-.134h3.336a.443.443.0 01.325.134.442.442.0 01.135.326v4.485a.169.169.0 00.191.192h3.911a.446.446.0 01.326.135.446.446.0 01.134.326v2.683a.446.446.0 01-.133.324z"/><path d="m101.694 25.917a2.645 2.645.0 01-.767-1.955 2.65 2.65.0 01.767-1.955 2.65 2.65.0 011.955-.767 2.65 2.65.0 011.955.767 2.652 2.652.0 01.767 1.955 2.647 2.647.0 01-.767 1.955 2.646 2.646.0 01-1.955.767 2.645 2.645.0 01-1.955-.767zm-.211 22.906a.441.441.0 01-.134-.326V29.79a.444.444.0 01.134-.326.446.446.0 01.326-.134h3.527a.446.446.0 01.326.134.445.445.0 01.134.326v18.707a.443.443.0 01-.134.326.443.443.0 01-.326.134h-3.527a.443.443.0 01-.326-.134z"/><path d="m114.019 47.734a8.1 8.1.0 01-3.047-4.255 14.439 14.439.0 01-.652-4.37 14.3 14.3.0 01.614-4.371A7.869 7.869.0 01114 30.56a9.072 9.072.0 015.252-1.5 8.543 8.543.0 015.041 1.5 7.985 7.985.0 013.009 4.14 12.439 12.439.0 01.69 4.37 13.793 13.793.0 01-.651 4.37 8.255 8.255.0 01-3.028 4.275 8.475 8.475.0 01-5.1 1.553 8.754 8.754.0 01-5.194-1.534zm7.629-3.1a4.536 4.536.0 001.476-2.262 11.335 11.335.0 00.383-3.221 10.618 10.618.0 00-.383-3.22 4.169 4.169.0 00-1.457-2.243 4.066 4.066.0 00-2.531-.785 3.942 3.942.0 00-2.453.785 4.376 4.376.0 00-1.5 2.243 11.839 11.839.0 00-.383 3.22 11.84 11.84.0 00.383 3.221 4.222 4.222.0 001.476 2.262 4.075 4.075.0 002.549.8 3.8 3.8.0 002.44-.809z"/><path d="m15.105 32.057v15.565a.059.059.0 01-.049.059L.069 50.25A.06.06.0 01.005 50.167l14.987-33.47a.06.06.0 01.114.025z"/><path d="m17.631 23.087v24.6a.06.06.0 00.053.059l22.449 2.507a.06.06.0 00.061-.084L17.745.032a.06.06.0 00-.114.024z"/><path d="m39.961 52.548-24.833 7.45a.062.062.0 01-.043.0L.079 52.548a.059.059.0 01.026-.113h39.839a.06.06.0 01.017.113z"/></svg></span></a><button id=hamburger class=main-navigation-toggle aria-label="Open navigation"><svg class="icon menu-hamburger"><use xlink:href="/v1.19/img/icons.svg#menu-hamburger"/></svg></button>
<button id=menu-close class=main-navigation-toggle aria-label="Close navigation"><svg class="icon menu-close"><use xlink:href="/v1.19/img/icons.svg#menu-close"/></svg></button></div><div id=header-links class=main-navigation-links-wrapper><ul class=main-navigation-links><li class=main-navigation-links-item><a class="main-navigation-links-link has-dropdown"><span>关于</span><svg class="icon dropdown-arrow"><use xlink:href="/v1.19/img/icons.svg#dropdown-arrow"/></svg></a><ul class=main-navigation-links-dropdown><li class=main-navigation-links-dropdown-item><a href=/v1.19/zh/about/service-mesh class=main-navigation-links-link>服务网格</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.19/zh/about/solutions class=main-navigation-links-link>解决方案</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.19/zh/about/case-studies class=main-navigation-links-link>案例学习</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.19/zh/about/ecosystem class=main-navigation-links-link>生态系统</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.19/zh/about/deployment class=main-navigation-links-link>部署</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.19/zh/about/faq class=main-navigation-links-link>FAQ</a></li></ul></li><li class=main-navigation-links-item><a href=/v1.19/zh/blog/ class=main-navigation-links-link><span>博客</span></a></li><li class=main-navigation-links-item><a href=/v1.19/zh/news/ class=main-navigation-links-link><span>新闻</span></a></li><li class=main-navigation-links-item><a href=/v1.19/zh/get-involved/ class=main-navigation-links-link><span>加入我们</span></a></li><li class=main-navigation-links-item><a href=/v1.19/zh/docs/ class=main-navigation-links-link><span>文档</span></a></li></ul><div class=main-navigation-footer><button id=search-show class=search-show title='搜索 istio.io' aria-label=搜索><svg class="icon magnifier"><use xlink:href="/v1.19/img/icons.svg#magnifier"/></svg></button>
<a href=/v1.19/zh/docs/setup/getting-started class="btn btn--primary" id=try-istio>试用 Istio</a></div></div><form id=search-form class=search name=cse role=search><input type=hidden name=cx value=002184991200833970123:iwwf17ikgf4>
<input type=hidden name=ie value=utf-8>
<input type=hidden name=hl value=zh>
<input type=hidden id=search-page-url value=/zh/search>
<input id=search-textbox class="search-textbox form-control" name=q type=search aria-label='搜索 istio.io' placeholder=搜索>
<button id=search-close title=取消搜索 type=reset aria-label=取消搜索><svg class="icon menu-close"><use xlink:href="/v1.19/img/icons.svg#menu-close"/></svg></button></form></nav></header><div class=banner-container></div><main class="primary container has-sidebar has-toc docs"><div id=sidebar-container class=sidebar-container><nav id=sidebar aria-label="Section Navigation"><button id=sidebar-close class="main-navigation-toggle sidebar-close" aria-label="Close sidebar"><svg class="icon menu-close"><use xlink:href="/v1.19/img/icons.svg#menu-close"/></svg></button><div class=sidebar-nav><div class=search><form id=search-docs-form name=cse role=search><input type=hidden name=ie value=utf-8>
<input type=hidden name=hl value=en>
<input type=hidden id=search-docs-url value=/v1.19/search>
<input id=search-docs-textbox class=form-control name=docs-search type=search aria-label='搜索 istio.io' placeholder=搜索>
<button id=search-show2 class=search-show title='搜索 istio.io' aria-label=搜索><svg class="icon magnifier"><use xlink:href="/v1.19/img/icons.svg#magnifier"/></svg></button></form></div><div class=card><div class="body default" aria-labelledby=header0><ul role=tree aria-expanded=true aria-labelledby=header0><li role=treeitem aria-label=概念><a class=main title="一些概念，理解它们有助于您更好地了解 Istio 系统的不同部分及其使用的抽象。" href=/v1.19/zh/docs/concepts/>概念</a><ul role=group aria-expanded=true class=leaf-section><li role=none><a role=treeitem title="描述 Istio 多样的流量路由和控制特性。" href=/v1.19/zh/docs/concepts/traffic-management/>流量管理</a></li><li role=none><a role=treeitem title="描述 Istio 的授权与认证功能。" href=/v1.19/zh/docs/concepts/security/>安全</a></li><li role=none><a role=treeitem title="描述 Istio 提供的遥测和监控特性。" href=/v1.19/zh/docs/concepts/observability/>可观测性</a></li><li role=none><a role=treeitem title="讲述 Istio 的 WebAssembly 插件系统。" href=/v1.19/zh/docs/concepts/wasm/>扩展性</a></li></ul></li><li role=treeitem aria-label=安装><a class=main title="关于如何在 Kubernetes 集群中安装 Istio 控制平面和添加虚拟机到 mesh 中的说明。" href=/v1.19/zh/docs/setup/>安装</a><ul role=group aria-expanded=true><li role=none><a role=treeitem title="快速、轻松地尝试 Istio 特性。" href=/v1.19/zh/docs/setup/getting-started/>入门</a></li><li role=treeitem aria-label=平台安装><button aria-hidden=true tabindex=-1></button><a title="在安装 Istio 之前如何准备各种 Kubernetes 平台。" href=/v1.19/zh/docs/setup/platform-setup/>平台安装</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="在各平台上安装 Istio 的前提条件。" href=/v1.19/zh/docs/setup/platform-setup/prerequisites/>平台前提条件</a></li><li role=none><a role=treeitem title="在阿里云 Kubernetes 集群进行配置以便安装运行 Istio。" href=/v1.19/zh/docs/setup/platform-setup/alicloud/>阿里云</a></li><li role=none><a role=treeitem title="有关在 AWS 云中的 Amazon EKS 上设置 Istio 的说明。" href=/v1.19/zh/docs/setup/platform-setup/amazon-eks/>Amazon EKS</a></li><li role=none><a role=treeitem title="为 Istio 设置一个 Azure 集群的操作说明。" href=/v1.19/zh/docs/setup/platform-setup/azure/>Azure</a></li><li role=none><a role=treeitem title="在 Docker Desktop 中运行 Istio 的设置说明。" href=/v1.19/zh/docs/setup/platform-setup/docker/>Docker Desktop</a></li><li role=none><a role=treeitem title="在 Google Kubernetes Engine (GKE) 上快速搭建 Istio 服务。" href=/v1.19/zh/docs/setup/platform-setup/gke/>使用 Google Kubernetes Engine 快速开始</a></li><li role=none><a role=treeitem title="为 Istio 设置一个华为云 Kubernetes 集群的操作说明。" href=/v1.19/zh/docs/setup/platform-setup/huaweicloud/>华为云</a></li><li role=none><a role=treeitem title="在 IBM 公有云或私有云上快速搭建 Istio 服务。" href=/v1.19/zh/docs/setup/platform-setup/ibm/>IBM Cloud 快速开始</a></li><li role=none><a role=treeitem title="为 Istio 设置 k3d 的说明。" href=/v1.19/zh/docs/setup/platform-setup/k3d/>k3d</a></li><li role=none><a role=treeitem title="为 Istio 设置 kind 的说明。" href=/v1.19/zh/docs/setup/platform-setup/kind/>kind</a></li><li role=none><a role=treeitem title="为 Istio 搭建 Kops 的设置说明。" href=/v1.19/zh/docs/setup/platform-setup/kops/>Kops</a></li><li role=none><a role=treeitem title="使用 Gardener 快速搭建 Istio 服务。" href=/v1.19/zh/docs/setup/platform-setup/gardener/>Kubernetes Gardener 快速开始</a></li><li role=none><a role=treeitem title="Istio 适配 KubeSphere 容器平台指南。" href=/v1.19/zh/docs/setup/platform-setup/kubesphere/>KubeSphere Container Platform</a></li><li role=none><a role=treeitem title="配置 MicroK8s 以便使用 Istio。" href=/v1.19/zh/docs/setup/platform-setup/microk8s/>MicroK8s</a></li><li role=none><a role=treeitem title="在 minikube 上配置 Istio。" href=/v1.19/zh/docs/setup/platform-setup/minikube/>minikube</a></li><li role=none><a role=treeitem title="在 OpenShift 集群上快速搭建 Istio 服务。" href=/v1.19/zh/docs/setup/platform-setup/openshift/>OpenShift</a></li><li role=none><a role=treeitem title="使用 Oracle Container 为 Istio 准备集群的说明。" href=/v1.19/zh/docs/setup/platform-setup/oci/>Oracle Cloud 基础架构</a></li><li role=none><a role=treeitem title="在腾讯云上快速创建 Istio 服务。" href=/v1.19/zh/docs/setup/platform-setup/tencent-cloud-mesh/>腾讯云</a></li></ul></li><li role=treeitem aria-label=安装><button aria-hidden=true tabindex=-1></button><a title=选择最适合您需求和平台的安装指南。 href=/v1.19/zh/docs/setup/install/>安装</a><ul role=group aria-expanded=false><li role=none><a role=treeitem title="安装、定制 Istio 配置文件，用于深入评估及生产发布。" href=/v1.19/zh/docs/setup/install/istioctl/>使用 Istioctl 安装</a></li><li role=none><a role=treeitem title="使用 Helm 在 K8s 集群中安装和配置 Istio。" href=/v1.19/zh/docs/setup/install/helm/>使用 Helm 安装</a></li><li role=treeitem aria-label=多集群安装><button aria-hidden=true tabindex=-1></button><a title="跨多 Kubernetes 集群，安装 Istio 服务网格。" href=/v1.19/zh/docs/setup/install/multicluster/>多集群安装</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="在多个集群上安装 Istio 之前的初始步骤。" href=/v1.19/zh/docs/setup/install/multicluster/before-you-begin/>准备工作</a></li><li role=none><a role=treeitem title="跨多个主集群，安装 Istio 网格。" href=/v1.19/zh/docs/setup/install/multicluster/multi-primary/>多主架构的安装</a></li><li role=none><a role=treeitem title="跨主从集群，安装 Istio 网格。" href=/v1.19/zh/docs/setup/install/multicluster/primary-remote/>主从架构的安装</a></li><li role=none><a role=treeitem title="跨网络、多主架构的 Istio 网格安装。" href=/v1.19/zh/docs/setup/install/multicluster/multi-primary_multi-network/>跨网络多主架构的安装</a></li><li role=none><a role=treeitem title="跨网络、主从架构的 Istio 网格安装。" href=/v1.19/zh/docs/setup/install/multicluster/primary-remote_multi-network/>跨网络主从架构的安装</a></li><li role=none><a role=treeitem title="验证 Istio 已成功安装到多集群环境中。" href=/v1.19/zh/docs/setup/install/multicluster/verify/>验证安装结果</a></li></ul></li><li role=none><a role=treeitem title="使用修订和 discoverySelectors 在单集群中安装多个 Istio 控制面。" href=/v1.19/zh/docs/setup/install/multiple-controlplanes/>在单集群中安装多个 Istio 控制面</a></li><li role=none><a role=treeitem title="部署 Istio，接入虚拟机中运行的工作负载。" href=/v1.19/zh/docs/setup/install/virtual-machine/>虚拟机安装</a></li><li role=none><a role=treeitem title=安装外部控制平面和从集群。 href=/v1.19/zh/docs/setup/install/external-controlplane/>使用外部控制平面安装 Istio</a></li><li role=none><a role=treeitem title="使用 Istio Operator 在 Kubernetes 集群中安装 Istio 的说明。" href=/v1.19/zh/docs/setup/install/operator/>使用 Istio Operator 安装</a></li></ul></li><li role=treeitem aria-label=升级><button aria-hidden=true tabindex=-1></button><a title="跨多个控制平面升级、降级和管理 Istio。" href=/v1.19/zh/docs/setup/upgrade/>升级</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="通过先运行一个金丝雀部署的新控制平面升级 Istio。" href=/v1.19/zh/docs/setup/upgrade/canary/>金丝雀升级</a></li><li role=none><a role=treeitem title=原地升级和回退。 href=/v1.19/zh/docs/setup/upgrade/in-place/>原地升级</a></li><li role=none><a role=treeitem title="使用 Helm 升级 Istio 的说明。" href=/v1.19/zh/docs/setup/upgrade/helm/>使用 Helm 升级</a></li></ul></li><li role=treeitem aria-label=更多指南><button aria-hidden=true tabindex=-1></button><a title=有关其他设置任务的更多信息。 href=/v1.19/zh/docs/setup/additional-setup/>更多指南</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="轻松试用 Istio 的各项功能。" href=/v1.19/zh/docs/setup/additional-setup/getting-started/>开始使用 Istio 和 Kubernetes Gateway API</a></li><li role=none><a role=treeitem title="描述 Istio 内置的安装配置文件。" href=/v1.19/zh/docs/setup/additional-setup/config-profiles/>安装配置文件</a></li><li role=none><a role=treeitem title="安装和定制 Istio Gateway。" href=/v1.19/zh/docs/setup/additional-setup/gateway/>安装 Gateway</a></li><li role=none><a role=treeitem title="在应用程序 Pod 中使用 Sidecar Injector Webhook 自动安装或使用 Istioctl CLI 手动安装 Istio Sidecar。" href=/v1.19/zh/docs/setup/additional-setup/sidecar-injection/>安装 Sidecar</a></li><li role=none><a role=treeitem title=描述如何定制安装配置选项。 href=/v1.19/zh/docs/setup/additional-setup/customize-installation/>定制安装配置</a></li><li role=none><a role=treeitem title="描述使用 Helm 安装时如何自定义安装配置选项。" href=/v1.19/zh/docs/setup/additional-setup/customize-installation-helm/>高级 Helm chart 自定义</a></li><li role=none><a role=treeitem title="安装并使用 Istio CNI 插件，可以让运维人员用更低的权限来部署服务。" href=/v1.19/zh/docs/setup/additional-setup/cni/>安装 Istio CNI 插件</a></li><li role=none><a role=treeitem title="通过 Pod Security 准入控制器安装和使用 Istio。" href=/v1.19/zh/docs/setup/additional-setup/pod-security-admission/>通过 Pod 安全准入安装 Istio</a></li></ul></li></ul></li><li role=treeitem aria-label=任务><a class=main title="如何用 Istio 实现单个特定的目标行为。" href=/v1.19/zh/docs/tasks/>任务</a><ul role=group aria-expanded=true><li role=treeitem aria-label=流量管理><button aria-hidden=true tabindex=-1></button><a title="演示 Istio 的流量路由功能的任务。" href=/v1.19/zh/docs/tasks/traffic-management/>流量管理</a><ul role=group aria-expanded=false><li role=none><a role=treeitem title=如何将请求动态路由到微服务的多个版本。 href=/v1.19/zh/docs/tasks/traffic-management/request-routing/>配置请求路由</a></li><li role=none><a role=treeitem title=此任务说明如何注入故障并测试应用程序的弹性。 href=/v1.19/zh/docs/tasks/traffic-management/fault-injection/>故障注入</a></li><li role=none><a role=treeitem title=展示如何将流量从旧版本迁移到新版本的服务。 href=/v1.19/zh/docs/tasks/traffic-management/traffic-shifting/>流量转移</a></li><li role=none><a role=treeitem title="展示如何将一个服务的 TCP 流量从旧版本迁移到新版本。" href=/v1.19/zh/docs/tasks/traffic-management/tcp-traffic-shifting/>TCP 流量转移</a></li><li role=none><a role=treeitem title="本任务用于示范如何使用 Istio 在 Envoy 中设置请求超时。" href=/v1.19/zh/docs/tasks/traffic-management/request-timeouts/>设置请求超时</a></li><li role=none><a role=treeitem title=本任务展示如何为连接、请求以及异常检测配置熔断。 href=/v1.19/zh/docs/tasks/traffic-management/circuit-breaking/>熔断</a></li><li role=none><a role=treeitem title="此任务演示了 Istio 的流量镜像/影子功能。" href=/v1.19/zh/docs/tasks/traffic-management/mirroring/>镜像</a></li><li role=treeitem aria-label=地域负载均衡><button aria-hidden=true tabindex=-1></button><a title="本系列任务演示如何在 Istio 中配置地域负载均衡。" href=/v1.19/zh/docs/tasks/traffic-management/locality-load-balancing/>地域负载均衡</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title=配置地域负载均衡前的初始化步骤。 href=/v1.19/zh/docs/tasks/traffic-management/locality-load-balancing/before-you-begin/>开始之前</a></li><li role=none><a role=treeitem title=本任务演示如何为网格配置地域故障转移。 href=/v1.19/zh/docs/tasks/traffic-management/locality-load-balancing/failover/>地域故障转移</a></li><li role=none><a role=treeitem title=本指南演示如何配置地域权重分配。 href=/v1.19/zh/docs/tasks/traffic-management/locality-load-balancing/distribute/>地域权重分布</a></li><li role=none><a role=treeitem title=地域负载均衡的清理步骤。 href=/v1.19/zh/docs/tasks/traffic-management/locality-load-balancing/cleanup/>清理</a></li></ul></li><li role=treeitem aria-label=Ingress><button aria-hidden=true tabindex=-1></button><a title="控制 Istio 服务网格的入口流量。" href=/v1.19/zh/docs/tasks/traffic-management/ingress/>Ingress</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="描述如何配置 Istio Gateway 对象，以将服务暴露至服务网格之外。" href=/v1.19/zh/docs/tasks/traffic-management/ingress/ingress-control/>入口网关</a></li><li role=none><a role=treeitem title="通过 TLS 或 mTLS 将服务暴露到服务网格外。" href=/v1.19/zh/docs/tasks/traffic-management/ingress/secure-ingress/>安全网关</a></li><li role=none><a role=treeitem title="描述了如何在不使用 Ingress Gateway 的情况下，在一个 Sidecar 上终止 TLS 流量。" href=/v1.19/zh/docs/tasks/traffic-management/ingress/ingress-sidecar-tls-termination/>Ingress Sidecar TLS 终止</a></li><li role=none><a role=treeitem title="如何为一个 Ingress Gateway 配置 SNI 透传。" href=/v1.19/zh/docs/tasks/traffic-management/ingress/ingress-sni-passthrough/>无 TLS 终止的 Ingress Gateway</a></li><li role=none><a role=treeitem title="展示如何配置 Kubernetes Ingress 对象，使得从服务网格外部可以访问网格内服务。" href=/v1.19/zh/docs/tasks/traffic-management/ingress/kubernetes-ingress/>Kubernetes Ingress</a></li><li role=none><a role=treeitem title="描述在 Istio 中如何配置 Kubernetes Gateway API。" href=/v1.19/zh/docs/tasks/traffic-management/ingress/gateway-api/>Kubernetes Gateway API</a></li></ul></li><li role=treeitem aria-label=Egress><button aria-hidden=true tabindex=-1></button><a title="控制 Istio 服务网格的出口流量。" href=/v1.19/zh/docs/tasks/traffic-management/egress/>Egress</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="描述如何配置 Istio 以将流量从网格中的服务路由到外部服务。" href=/v1.19/zh/docs/tasks/traffic-management/egress/egress-control/>访问外部服务</a></li><li role=none><a role=treeitem title="描述如何配置 Istio 对来自外部服务的流量执行 TLS 发起。" href=/v1.19/zh/docs/tasks/traffic-management/egress/egress-tls-origination/>Egress TLS Origination</a></li><li role=none><a role=treeitem title="描述如何配置 Istio 通过专用网关服务将流量定向到外部服务。" href=/v1.19/zh/docs/tasks/traffic-management/egress/egress-gateway/>出口网关</a></li><li role=none><a role=treeitem title="描述如何配置一个 Egress 网关，来向外部服务发起 TLS 连接。" href=/v1.19/zh/docs/tasks/traffic-management/egress/egress-gateway-tls-origination/>Egress 网关的 TLS 发起过程</a></li><li role=none><a role=treeitem title="描述如何开启通用域中一组主机的 egress，无需单独配置每一台主机。" href=/v1.19/zh/docs/tasks/traffic-management/egress/wildcard-egress-hosts/>Wildcard 主机的 egress</a></li><li role=none><a role=treeitem title="展示如何配置 Istio Kubernetes 外部服务。" href=/v1.19/zh/docs/tasks/traffic-management/egress/egress-kubernetes-services/>Kubernetes Egress 流量服务</a></li><li role=none><a role=treeitem title="描述如何配置 Istio 以允许应用程序使用外部 HTTPS 代理。" href=/v1.19/zh/docs/tasks/traffic-management/egress/http-proxy/>使用外部 HTTPS 代理</a></li></ul></li></ul></li><li role=treeitem aria-label=安全><button aria-hidden=true tabindex=-1></button><a title=演示如何保护网格。 href=/v1.19/zh/docs/tasks/security/>安全</a><ul role=group aria-expanded=false><li role=treeitem aria-label=认证><button aria-hidden=true tabindex=-1></button><a title="管控网格服务间的双向 TLS 和终端用户的身份认证。" href=/v1.19/zh/docs/tasks/security/authentication/>认证</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="演示如何使用基于 JWT 声明路由请求的 Istio 身份验证策略。 (Alpha)" href=/v1.19/zh/docs/tasks/security/authentication/jwt-route/>基于 JWT 声明的路由 *</a></li><li role=none><a role=treeitem title="向您展示如何通过使用 Istio 认证策略来设置双向 TLS 和基本的终端用户认证。" href=/v1.19/zh/docs/tasks/security/authentication/authn-policy/>认证策略</a></li><li role=none><a role=treeitem title="展示用户如何能将 JWT 声明复制到 HTTP 头。 (Experimental)" href=/v1.19/zh/docs/tasks/security/authentication/claim-to-header/>复制 JWT 声明到 HTTP 头 *</a></li><li role=none><a role=treeitem title="阐述如何将 Istio 服务逐步迁移至双向 TLS 通信模式。" href=/v1.19/zh/docs/tasks/security/authentication/mtls-migration/>双向 TLS 迁移</a></li></ul></li><li role=treeitem aria-label=证书管理><button aria-hidden=true tabindex=-1></button><a title="管理 Istio 的证书。" href=/v1.19/zh/docs/tasks/security/cert-management/>证书管理</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="系统管理员如何通过根证书、签名证书和密钥来配置 Istio 的 CA。" href=/v1.19/zh/docs/tasks/security/cert-management/plugin-ca-cert/>插入 CA 证书</a></li><li role=none><a role=treeitem title="如何在 Istiod 中配置和管理 DNS 证书。" href=/v1.19/zh/docs/tasks/security/cert-management/dns-cert/>Istio 的 DNS 证书管理</a></li><li role=none><a role=treeitem title="演示如何使用自定义证书颁发机构（与 Kubernetes CSR API 集成）来提供 Istio 工作负载证书。 (Experimental)" href=/v1.19/zh/docs/tasks/security/cert-management/custom-ca-k8s/>使用 Kubernetes CSR 自定义 CA 集成 *</a></li></ul></li><li role=treeitem aria-label=授权><button aria-hidden=true tabindex=-1></button><a title="展示如何控制到 Istio 服务的访问。" href=/v1.19/zh/docs/tasks/security/authorization/>授权</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="展示如何设置 HTTP 流量访问控制。" href=/v1.19/zh/docs/tasks/security/authorization/authz-http/>HTTP 流量</a></li><li role=none><a role=treeitem title="展示如何设置 TCP 流量的访问控制。" href=/v1.19/zh/docs/tasks/security/authorization/authz-tcp/>TCP 流量</a></li><li role=none><a role=treeitem title="演示如何为 JWT 令牌设置访问控制。" href=/v1.19/zh/docs/tasks/security/authorization/authz-jwt/>JWT 令牌</a></li><li role=none><a role=treeitem title=如何集成访问控制并将其委托给外部授权系统。 href=/v1.19/zh/docs/tasks/security/authorization/authz-custom/>外部授权</a></li><li role=none><a role=treeitem title=如何设置访问控制以明确地拒绝流量。 href=/v1.19/zh/docs/tasks/security/authorization/authz-deny/>明确拒绝</a></li><li role=none><a role=treeitem title="展示如何在 Ingress 网关上设置访问控制。" href=/v1.19/zh/docs/tasks/security/authorization/authz-ingress/>Ingress 网关</a></li><li role=none><a role=treeitem title=阐述如何在不更改授权策略的前提下从一个信任域迁移到另一个。 href=/v1.19/zh/docs/tasks/security/authorization/authz-td-migration/>信任域迁移</a></li><li role=none><a role=treeitem title="展示如何在不实际执行的情况下，观察授权策略应用后的效果。 (Alpha)" href=/v1.19/zh/docs/tasks/security/authorization/authz-dry-run/>模拟运行 *</a></li></ul></li><li role=treeitem aria-label="TLS 配置"><button aria-hidden=true tabindex=-1></button><a title="在 Istio 中配置 TLS。" href=/v1.19/zh/docs/tasks/security/tls-configuration/>TLS 配置</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="演示如何为 Istio 工作负载配置最低版本的 TLS。" href=/v1.19/zh/docs/tasks/security/tls-configuration/workload-min-tls-version/>Istio 工作负载的最低 TLS 版本配置</a></li></ul></li></ul></li><li role=treeitem aria-label=策略执行><button aria-hidden=true tabindex=-1></button><a title=演示策略执行特性。 href=/v1.19/zh/docs/tasks/policy-enforcement/>策略执行</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="此任务将展示如何配置 Istio 来动态地限制服务的流量。" href=/v1.19/zh/docs/tasks/policy-enforcement/rate-limit/>使用 Envoy 启用速率限制</a></li></ul></li><li role=treeitem aria-label=可观察性><button aria-hidden=true tabindex=-1></button><a title=演示如何从网格收集遥测信息。 href=/v1.19/zh/docs/tasks/observability/>可观察性</a><ul role=group aria-expanded=false><li role=none><a role=treeitem title="本任务向您演示如何配置 Telemetry API。 (Alpha)" href=/v1.19/zh/docs/tasks/observability/telemetry/>Telemetry API *</a></li><li role=treeitem aria-label=指标><button aria-hidden=true tabindex=-1></button><a title="演示 Istio 中指标的收集和查询。" href=/v1.19/zh/docs/tasks/observability/metrics/>指标</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="这个任务向您展示如何使用 Telemetry API 自定义 Istio 监控指标。" href=/v1.19/zh/docs/tasks/observability/metrics/telemetry-api/>使用 Telemetry API 自定义 Istio 监控指标</a></li><li role=none><a role=treeitem title="本任务展示了如何配置 Istio 进行 TCP 服务的指标收集。" href=/v1.19/zh/docs/tasks/observability/metrics/tcp-metrics/>收集 TCP 服务指标</a></li><li role=none><a role=treeitem title="此任务向您展示如何自定义 Istio 指标。" href=/v1.19/zh/docs/tasks/observability/metrics/customize-metrics/>自定义 Istio 指标</a></li><li role=none><a role=treeitem title=此任务向您展示如何通过按类型对请求和响应进行分组来改进遥测。 href=/v1.19/zh/docs/tasks/observability/metrics/classify-metrics/>根据请求或响应对指标进行分类</a></li><li role=none><a role=treeitem title="本任务介绍如何通过 Prometheus 查询 Istio 度量指标。" href=/v1.19/zh/docs/tasks/observability/metrics/querying-metrics/>通过 Prometheus 查询度量指标</a></li><li role=none><a role=treeitem title="此任务展示了如何设置和使用 Istio Dashboard 监控网格流量。" href=/v1.19/zh/docs/tasks/observability/metrics/using-istio-dashboard/>使用 Grafana 可视化指标</a></li></ul></li><li role=treeitem aria-label=日志><button aria-hidden=true tabindex=-1></button><a title="演示 Istio 网格日志的配置、收集和处理。" href=/v1.19/zh/docs/tasks/observability/logs/>日志</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="本任务向您演示如何使用 OpenTelemetry 收集器配置 Envoy 代理来发送访问日志。" href=/v1.19/zh/docs/tasks/observability/logs/otel-provider/>OpenTelemetry</a></li><li role=none><a role=treeitem title="此任务向您展示如何配置 Envoy 代理将访问日志打印到其标准输出。" href=/v1.19/zh/docs/tasks/observability/logs/access-log/>获取 Envoy 访问日志</a></li><li role=none><a role=treeitem title="此任务向您演示如何使用 Telemetry API 配置 Envoy 代理来发送访问日志。" href=/v1.19/zh/docs/tasks/observability/logs/telemetry-api/>使用 Telemetry API 配置访问日志</a></li></ul></li><li role=treeitem aria-label=分布式追踪><button aria-hidden=true tabindex=-1></button><a title="该任务展示了如何为启用了 Istio 支持的应用进行追踪。" href=/v1.19/zh/docs/tasks/observability/distributed-tracing/>分布式追踪</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="Istio 分布式追踪的概述。" href=/v1.19/zh/docs/tasks/observability/distributed-tracing/overview/>概述</a></li><li role=none><a role=treeitem title="如何使用 Telemetry API 配置链路追踪。" href=/v1.19/zh/docs/tasks/observability/distributed-tracing/telemetry-api/>使用 Telemetry API 配置链路追踪</a></li><li role=none><a role=treeitem title="学习如何配置代理将跟踪请求发送到 Apache SkyWalking。" href=/v1.19/zh/docs/tasks/observability/distributed-tracing/skywalking/>Apache SkyWalking</a></li><li role=none><a role=treeitem title="了解如何配置代理以向 Jaeger 发送追踪请求。" href=/v1.19/zh/docs/tasks/observability/distributed-tracing/jaeger/>Jaeger</a></li><li role=none><a role=treeitem title="学习如何配置代理将 OpenCensus 格式化的 span 发送到 OpenTelemetry Collector。" href=/v1.19/zh/docs/tasks/observability/distributed-tracing/opencensusagent/>OpenCensus Agent</a></li><li role=none><a role=treeitem title="了解如何通过配置代理以向 Zipkin 发送追踪请求。" href=/v1.19/zh/docs/tasks/observability/distributed-tracing/zipkin/>Zipkin</a></li><li role=none><a role=treeitem title="怎样配置代理才能把追踪请求发送到 Lightstep。" href=/v1.19/zh/docs/tasks/observability/distributed-tracing/lightstep/>Lightstep</a></li><li role=none><a role=treeitem title="如何使用 MeshConfig 和 Pod 注释配置跟踪选项。" href=/v1.19/zh/docs/tasks/observability/distributed-tracing/mesh-and-proxy-config/>使用 MeshConfig 和 Pod 注释配置跟踪</a></li></ul></li><li role=none><a role=treeitem title="此任务向您展示如何在 Istio 网格中可视化服务。" href=/v1.19/zh/docs/tasks/observability/kiali/>网格可视化</a></li><li role=none><a role=treeitem title="此任务向您展示如何配置从外部访问 Istio 遥测插件。" href=/v1.19/zh/docs/tasks/observability/gateways/>远程访问遥测插件</a></li></ul></li><li role=treeitem aria-label=可扩展性><button aria-hidden=true tabindex=-1></button><a title=演示如何扩展网格行为。 href=/v1.19/zh/docs/tasks/extensibility/>可扩展性</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="描述如何在网格中使用远程 WebAssembly 模块。 (Alpha)" href=/v1.19/zh/docs/tasks/extensibility/wasm-module-distribution/>WebAssembly 模块分发 *</a></li></ul></li></ul></li><li role=treeitem aria-label=示例><a class=main title="这里包括多个可供 Istio 使用的可完整工作的示例，您可以用来亲自部署和体验这些示例。" href=/v1.19/zh/docs/examples/>示例</a><ul role=group aria-expanded=true><li role=none><a role=treeitem title="部署一个用于演示多种 Istio 特性的应用，由四个单独的微服务构成。" href=/v1.19/zh/docs/examples/bookinfo/>Bookinfo 应用</a></li><li role=none><a role=treeitem title="使用在网格内的虚拟机上运行的 MySQL 服务运行 Bookinfo 应用程序。" href=/v1.19/zh/docs/examples/virtual-machines/>在虚拟机上部署 Bookinfo 应用程序</a></li><li role=treeitem aria-label="使用 Kubernetes 和 Istio 学习微服务"><button aria-hidden=true tabindex=-1></button><a title="该模块化教程为新用户提供了一步步将 Istio 应用于常见微服务场景的动手经验。" href=/v1.19/zh/docs/examples/microservices-istio/>使用 Kubernetes 和 Istio 学习微服务</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title href=/v1.19/zh/docs/examples/microservices-istio/prereq/>前提条件</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/examples/microservices-istio/setup-kubernetes-cluster/>设置 Kubernetes 集群</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/examples/microservices-istio/setup-local-computer/>设置本地计算机</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/examples/microservices-istio/single/>本地运行微服务</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/examples/microservices-istio/package-service/>在 Docker 中运行 ratings 服务</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/examples/microservices-istio/bookinfo-kubernetes/>使用 Kubernetes 运行 Bookinfo</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/examples/microservices-istio/production-testing/>生产测试</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/examples/microservices-istio/add-new-microservice-version/>添加一个新版本的 reviews</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/examples/microservices-istio/add-istio/>在 productpage 启用 Istio</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/examples/microservices-istio/enable-istio-all-microservices/>在所有微服务中启用 Istio</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/examples/microservices-istio/istio-ingress-gateway/>配置 Istio Ingress Gateway</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/examples/microservices-istio/logs-istio/>监控 Istio</a></li></ul></li></ul></li><li role=treeitem aria-label=运维><a class=main title="关于部署和管理 Istio 网格的概念、工具和技术。" href=/v1.19/zh/docs/ops/>运维</a><ul role=group aria-expanded=true><li role=treeitem aria-label=部署><button aria-hidden=true tabindex=-1></button><a title="设置 Istio 部署的要求、概念和注意事项。" href=/v1.19/zh/docs/ops/deployment/>部署</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="描述 Istio 的整体架构与设计目标。" href=/v1.19/zh/docs/ops/deployment/architecture/>架构</a></li><li role=none><a role=treeitem title="描述 Istio 部署中的选择和建议。" href=/v1.19/zh/docs/ops/deployment/deployment-models/>部署模型</a></li><li role=none><a role=treeitem title="阐述 Istio 针对虚拟机的高级架构。" href=/v1.19/zh/docs/ops/deployment/vm-architecture/>虚拟机架构</a></li><li role=none><a role=treeitem title="介绍 Istio 的性能和可扩展性。" href=/v1.19/zh/docs/ops/deployment/performance-and-scalability/>性能和可扩展性</a></li><li role=none><a role=treeitem title="部署在支持 Istio 的集群中的应用程序的要求。" href=/v1.19/zh/docs/ops/deployment/requirements/>应用程序要求</a></li></ul></li><li role=treeitem aria-label=配置><button aria-hidden=true tabindex=-1></button><a title="配置运行中的 Istio 网格的高级概念和功能。" href=/v1.19/zh/docs/ops/configuration/>配置</a><ul role=group aria-expanded=false><li role=treeitem aria-label=网格配置><button aria-hidden=true tabindex=-1></button><a title=帮助您管理全局网格配置。 href=/v1.19/zh/docs/ops/configuration/mesh/>网格配置</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="简要描述 Istio 对 Kubernetes webhook 的使用以及可能出现的相关问题。" href=/v1.19/zh/docs/ops/configuration/mesh/webhook/>动态准入 Webhook 概述</a></li><li role=none><a role=treeitem title=如何等待资源达到给定的就绪状态。 href=/v1.19/zh/docs/ops/configuration/mesh/config-resource-ready/>等待应用的配置资源状态就绪</a></li><li role=none><a role=treeitem title="为您展示如何对 Istio 服务做健康检查。" href=/v1.19/zh/docs/ops/configuration/mesh/app-health-check/>Istio 服务的健康检查</a></li></ul></li><li role=treeitem aria-label=流量管理><button aria-hidden=true tabindex=-1></button><a title=帮助您管理正在运行的网格的网络方面。 href=/v1.19/zh/docs/ops/configuration/traffic-management/>流量管理</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title=关于如何声明协议。 href=/v1.19/zh/docs/ops/configuration/traffic-management/protocol-selection/>协议选择</a></li><li role=none><a role=treeitem title="如何使用 TLS 配置设置安全的网络流量。" href=/v1.19/zh/docs/ops/configuration/traffic-management/tls-configuration/>TLS 配置</a></li><li role=none><a role=treeitem title="Istio 如何通过网格来路由流量。" href=/v1.19/zh/docs/ops/configuration/traffic-management/traffic-routing/>Traffic Routing</a></li><li role=none><a role=treeitem title="理解 Istio 如何与 DNS 交互。" href=/v1.19/zh/docs/ops/configuration/traffic-management/dns/>DNS</a></li><li role=none><a role=treeitem title="如何配置 DNS 代理。" href=/v1.19/zh/docs/ops/configuration/traffic-management/dns-proxy/>DNS 代理</a></li><li role=none><a role=treeitem title="如何配置 Gateway 网络拓扑。 (Alpha)" href=/v1.19/zh/docs/ops/configuration/traffic-management/network-topologies/>配置 Gateway 网络拓扑 *</a></li><li role=none><a role=treeitem title=如何配置流量在网格集群之间如何分发的。 href=/v1.19/zh/docs/ops/configuration/traffic-management/multicluster/>多集群流量管理</a></li></ul></li><li role=treeitem aria-label=安全><button aria-hidden=true tabindex=-1></button><a title=帮助您管理正在运行的网格的安全性方面。 href=/v1.19/zh/docs/ops/configuration/security/>安全</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="展示使用 Istio 安全策略的通用示例。" href=/v1.19/zh/docs/ops/configuration/security/security-policy-examples/>安全策略示例</a></li><li role=none><a role=treeitem title="使用加固的容器镜像来减小 Istio 的攻击面。 (Alpha)" href=/v1.19/zh/docs/ops/configuration/security/harden-docker-images/>加固 Docker 容器镜像 *</a></li></ul></li><li role=treeitem aria-label=可观测性><button aria-hidden=true tabindex=-1></button><a title=帮助您管理正在运行的网格中的遥测收集和可视化。 href=/v1.19/zh/docs/ops/configuration/telemetry/>可观测性</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="精细化控制 Envoy 的统计信息。" href=/v1.19/zh/docs/ops/configuration/telemetry/envoy-stats/>Envoy 的统计信息</a></li><li role=none><a role=treeitem title="配置 Prometheus 监控 Istio 多集群。" href=/v1.19/zh/docs/ops/configuration/telemetry/monitoring-multicluster-prometheus/>使用 Prometheus 监控 Istio 多集群</a></li></ul></li><li role=treeitem aria-label=可扩展性><button aria-hidden=true tabindex=-1></button><a title=帮助您管理服务网格的扩展。 href=/v1.19/zh/docs/ops/configuration/extensibility/>可扩展性</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="描述 Istio 如何决定是拉取 Wasm 模块还是使用缓存的版本。 (Alpha)" href=/v1.19/zh/docs/ops/configuration/extensibility/wasm-pull-policy/>WebAssembly 模块的拉取策略 *</a></li></ul></li></ul></li><li role=treeitem aria-label=最佳实践><button aria-hidden=true tabindex=-1></button><a title="设置和管理 Istio 服务网格的最佳实践。" href=/v1.19/zh/docs/ops/best-practices/>最佳实践</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="设置 Istio 服务网格时的最佳实践。" href=/v1.19/zh/docs/ops/best-practices/deployment/>Deployment 最佳实践</a></li><li role=none><a role=treeitem title=避免网络或流量管理问题的配置最佳实践。 href=/v1.19/zh/docs/ops/best-practices/traffic-management/>流量管理最佳实践</a></li><li role=none><a role=treeitem title="使用 Istio 保护应用的最佳实践。" href=/v1.19/zh/docs/ops/best-practices/security/>安全最佳实践</a></li><li role=none><a role=treeitem title="描述如何使用镜像签名来验证 Istio 镜像的出处。" href=/v1.19/zh/docs/ops/best-practices/image-signing-validation/>镜像签名和验证</a></li><li role=none><a role=treeitem title="使用 Istio 观测应用时的最佳实践。" href=/v1.19/zh/docs/ops/best-practices/observability/>可观测性最佳实践</a></li></ul></li><li role=treeitem aria-label=常见问题><button aria-hidden=true tabindex=-1></button><a title="描述如何辨认和解决 Istio 中的常见问题。" href=/v1.19/zh/docs/ops/common-problems/>常见问题</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="定位常见的 Istio 流量管理和网络问题的技术。" href=/v1.19/zh/docs/ops/common-problems/network-issues/>流量管理问题</a></li><li role=none><a role=treeitem title="定位常见 Istio 认证、授权、安全相关问题的技巧。" href=/v1.19/zh/docs/ops/common-problems/security-issues/>安全问题</a></li><li role=none><a role=treeitem title="处理 Telemetry 收集问题。" href=/v1.19/zh/docs/ops/common-problems/observability-issues/>可观测性问题</a></li><li role=none><a role=treeitem title="解决 Istio 使用 Kubernetes Webhooks 进行 Sidecar 自动注入的常见问题。" href=/v1.19/zh/docs/ops/common-problems/injection/>Sidecar 自动注入问题</a></li><li role=none><a role=treeitem title=如何解决配置验证的问题。 href=/v1.19/zh/docs/ops/common-problems/validation/>配置验证的问题</a></li><li role=none><a role=treeitem title="解决 Istio 升级遇到的常见问题。" href=/v1.19/zh/docs/ops/common-problems/upgrade-issues/>升级问题</a></li></ul></li><li role=treeitem aria-label=诊断工具><button aria-hidden=true tabindex=-1></button><a title="帮助解决 Istio 网格问题的工具和技术。" href=/v1.19/zh/docs/ops/diagnostic-tools/>诊断工具</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="Istio 自带的一个可以为服务网格部署提供调试和诊断的补充工具。" href=/v1.19/zh/docs/ops/diagnostic-tools/istioctl/>使用 Istioctl 命令行工具</a></li><li role=none><a role=treeitem title="描述诊断与流量管理相关的 Envoy 配置问题的工具和技术。" href=/v1.19/zh/docs/ops/diagnostic-tools/proxy-cmd/>调试 Envoy 和 Istiod</a></li><li role=none><a role=treeitem title="展示如何使用 istioctl describe 来验证网格中的 Pod 的配置。" href=/v1.19/zh/docs/ops/diagnostic-tools/istioctl-describe/>通过 istioctl describe 检查您的网格</a></li><li role=none><a role=treeitem title="演示如何使用 istioctl analyze 来识别配置中的潜在问题。" href=/v1.19/zh/docs/ops/diagnostic-tools/istioctl-analyze/>使用 Istioctl Analyze 诊断配置</a></li><li role=none><a role=treeitem title="了解如何使用 istioctl check-inject 来确认是否为您的 Deployment 正确启用了 Istio Sidecar 注入。" href=/v1.19/zh/docs/ops/diagnostic-tools/check-inject/>使用 istioctl check-inject 验证 Istio Sidecar 注入</a></li><li role=none><a role=treeitem title="介绍如何使用 ControlZ 深入了解正在运行的 istiod 组件。" href=/v1.19/zh/docs/ops/diagnostic-tools/controlz/>组件自检</a></li><li role=none><a role=treeitem title=如何使用组件级别日志来深入了解正在运行的组件的行为。 href=/v1.19/zh/docs/ops/diagnostic-tools/component-logging/>组件日志记录</a></li><li role=none><a role=treeitem title=介绍关于虚拟机调试的技术和工具。 href=/v1.19/zh/docs/ops/diagnostic-tools/virtual-machines/>虚拟机调试</a></li><li role=none><a role=treeitem title="描述使用 Istio 和 CNI 插件诊断问题的工具和技术。" href=/v1.19/zh/docs/ops/diagnostic-tools/cni/>Istio CNI 插件故障排除</a></li><li role=none><a role=treeitem title=介绍用来诊断多集群和多网络下安装问题的工具和技术。 href=/v1.19/zh/docs/ops/diagnostic-tools/multicluster/>多集群下的故障排除</a></li></ul></li><li role=treeitem aria-label="Ambient Mesh"><button aria-hidden=true tabindex=-1></button><a title="搭建和操作 Istio Ambient Mesh 的指示信息。" href=/v1.19/zh/docs/ops/ambient/>Ambient Mesh</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="如何部署和安装 Ambient Mesh。" href=/v1.19/zh/docs/ops/ambient/getting-started/>Ambient Mesh 入门</a></li><li role=none><a role=treeitem title="如何使用 Ambient Mesh。" href=/v1.19/zh/docs/ops/ambient/usage/>Ambient Mesh 使用指南</a></li><li role=none><a role=treeitem title="深入了解 Ambient Mesh 架构。" href=/v1.19/zh/docs/ops/ambient/architecture/>Ambient Mesh 架构</a></li></ul></li><li role=treeitem aria-label=集成><button aria-hidden=true tabindex=-1></button><a title="能够与 Istio 集成以提供额外功能的其他软件。" href=/v1.19/zh/docs/ops/integrations/>集成</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="关于如何与 cert-manager 集成的相关说明。" href=/v1.19/zh/docs/ops/integrations/certmanager/>cert-manager</a></li><li role=none><a role=treeitem title="关于如何与 Grafana 集成构建 Istio 仪表盘的相关文档。" href=/v1.19/zh/docs/ops/integrations/grafana/>Grafana</a></li><li role=none><a role=treeitem title="如何与 Jaeger 集成。" href=/v1.19/zh/docs/ops/integrations/jaeger/>Jaeger</a></li><li role=none><a role=treeitem title="有关如何与 Kiali 集成的信息。" href=/v1.19/zh/docs/ops/integrations/kiali/>Kiali</a></li><li role=none><a role=treeitem title="如何集成 Prometheus。" href=/v1.19/zh/docs/ops/integrations/prometheus/>Prometheus</a></li><li role=none><a role=treeitem title="如何配置 Istio 以集成 SPIRE 通过 Envoy 的 SDS API 获取加密身份。" href=/v1.19/zh/docs/ops/integrations/spire/>SPIRE</a></li><li role=none><a role=treeitem title="如何与 Zipkin 进行集成。" href=/v1.19/zh/docs/ops/integrations/zipkin/>Zipkin</a></li><li role=none><a role=treeitem title="如何集成 Apache SkyWalking。" href=/v1.19/zh/docs/ops/integrations/skywalking/>Apache SkyWalking</a></li><li role=none><a role=treeitem title="Istio 如何集成第三方负载均衡器。" href=/v1.19/zh/docs/ops/integrations/loadbalancers/>第三方负载均衡器</a></li></ul></li></ul></li><li role=treeitem aria-label=发布><a class=main title="与 Istio 发布有关的信息。" href=/v1.19/zh/docs/releases/>发布</a><ul role=group aria-expanded=true><li role=none><a role=treeitem title=特性及其发布阶段的列表。 href=/v1.19/zh/docs/releases/feature-stages/>功能状态</a></li><li role=none><a role=treeitem title=如果发现错误该怎么办。 href=/v1.19/zh/docs/releases/bugs/>报告错误</a></li><li role=none><a role=treeitem title=我们如何处理安全漏洞。 href=/v1.19/zh/docs/releases/security-vulnerabilities/>安全漏洞</a></li><li role=none><a role=treeitem title="当前支持的 Istio 版本。" href=/v1.19/zh/docs/releases/supported-releases/>版本支持</a></li><li role=treeitem aria-label=贡献文档><button aria-hidden=true tabindex=-1></button><a title="详细介绍了如何创建和维护 Istio 文档。" href=/v1.19/zh/docs/releases/contribute/>贡献文档</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="向您展示如何使用 GitHub 参与贡献 Istio 文档。" href=/v1.19/zh/docs/releases/contribute/github/>使用 GitHub 参与社区活动</a></li><li role=none><a role=treeitem title="介绍如何为 Istio 贡献新文档。" href=/v1.19/zh/docs/releases/contribute/add-content/>添加新文档</a></li><li role=none><a role=treeitem title="详细说明如何将已停用的文档提交给 Istio。" href=/v1.19/zh/docs/releases/contribute/remove-content/>删除已停用的文档</a></li><li role=none><a role=treeitem title=介绍如何在本地进行本网站的构建，测试，运行和预览。 href=/v1.19/zh/docs/releases/contribute/build/>本地构建和运行本网站</a></li><li role=none><a role=treeitem title=介绍了文档中使用的文章头及其可用字段。 href=/v1.19/zh/docs/releases/contribute/front-matter/>文章头部</a></li><li role=none><a role=treeitem title="向您展示如何审阅和批准对 Istio 文档和网站的更改。" href=/v1.19/zh/docs/releases/contribute/review/>文档审阅流程</a></li><li role=none><a role=treeitem title=介绍如何在您的文档中添加代码。 href=/v1.19/zh/docs/releases/contribute/code-blocks/>添加代码块</a></li><li role=none><a role=treeitem title="介绍可用的 Shortcode 及其用法。" href=/v1.19/zh/docs/releases/contribute/shortcodes/>使用 Shortcode</a></li><li role=none><a role=treeitem title="介绍 Istio 文档的格式标准。" href=/v1.19/zh/docs/releases/contribute/formatting/>格式标准</a></li><li role=none><a role=treeitem title="介绍 Istio 文档所使用的风格规则。" href=/v1.19/zh/docs/releases/contribute/style-guide/>风格指南</a></li><li role=none><a role=treeitem title="解释 Istio 文档中使用的术语标准。" href=/v1.19/zh/docs/releases/contribute/terminology/>术语标准</a></li><li role=none><a role=treeitem title="为 Istio 文档创建图表提供素材和说明。" href=/v1.19/zh/docs/releases/contribute/diagrams/>创建图表指南</a></li></ul></li><li role=none><a role=treeitem title=该网站的最新更改列表。 href=/v1.19/zh/docs/releases/log/>网站内容更改</a></li></ul></li><li role=treeitem aria-label=参考><a class=main title="参考部分包含详细的权威参考资料，如命令行选项、配置选项和 API 调用参数。" href=/v1.19/zh/docs/reference/>参考</a><ul role=group aria-expanded=true><li role=treeitem aria-label=配置><button class=show aria-hidden=true tabindex=-1></button><a title=关于配置选项的详细信息。 href=/v1.19/zh/docs/reference/config/>配置</a><ul role=group aria-expanded=true><li role=none><a role=treeitem title="Telemetry configuration for workloads." href=/v1.19/zh/docs/reference/config/telemetry/>Telemetry</a></li><li role=none><a role=treeitem title="Describes the structure of messages generated by Istio analyzers." href=/v1.19/zh/docs/reference/config/istio.analysis.v1alpha1/>Analysis Messages</a></li><li role=none><a role=treeitem title="Configuration affecting the service mesh as a whole." href=/v1.19/zh/docs/reference/config/istio.mesh.v1alpha1/>Global Mesh Options</a></li><li role=none><a role=treeitem title="Configuration affecting Istio control plane installation version and shape." href=/v1.19/zh/docs/reference/config/istio.operator.v1alpha1/>IstioOperator Options</a></li><li role=none><a role=treeitem title=描述“状态”字段在配置工作流程中的作用。 href=/v1.19/zh/docs/reference/config/config-status/>状态字段配置</a></li><li role=treeitem aria-label=代理扩展><button aria-hidden=true tabindex=-1></button><a title="描述如何配置 Istio 代理扩展。" href=/v1.19/zh/docs/reference/config/proxy_extensions/>代理扩展</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="Extend the functionality provided by the Istio proxy through WebAssembly filters." href=/v1.19/zh/docs/reference/config/proxy_extensions/wasm-plugin/>Wasm Plugin</a></li><li role=none><a role=treeitem title="Configuration for AccessLogPolicy Filter." href=/v1.19/zh/docs/reference/config/proxy_extensions/accesslogpolicy/>AccessLogPolicy Config</a></li><li role=none><a role=treeitem title="Configuration for Metadata Exchange Filter." href=/v1.19/zh/docs/reference/config/proxy_extensions/metadata_exchange/>Metadata Exchange Config</a></li><li role=none><a role=treeitem title="Configuration for Stackdriver filter." href=/v1.19/zh/docs/reference/config/proxy_extensions/stackdriver/>Stackdriver Config</a></li><li role=none><a role=treeitem title="如何使用 Wasm 进行遥测。 (Experimental)" href=/v1.19/zh/docs/reference/config/proxy_extensions/wasm_telemetry/>基于 Wasm 的遥测 *</a></li></ul></li><li role=treeitem aria-label=流量管理><button class=show aria-hidden=true tabindex=-1></button><a title="描述如何配置 HTTP/TCP 路由功能。" href=/v1.19/zh/docs/reference/config/networking/>流量管理</a><ul role=group aria-expanded=true class=leaf-section><li role=none><a role=treeitem title="Configuration affecting load balancing, outlier detection, etc." href=/v1.19/zh/docs/reference/config/networking/destination-rule/>Destination Rule</a></li><li role=none><a role=treeitem title="Customizing Envoy configuration generated by Istio." href=/v1.19/zh/docs/reference/config/networking/envoy-filter/>Envoy Filter</a></li><li role=none><a role=treeitem title="Configuration affecting edge load balancer." href=/v1.19/zh/docs/reference/config/networking/gateway/>Gateway</a></li><li role=none><a role=treeitem title="Provides configuration for individual workloads." href=/v1.19/zh/docs/reference/config/networking/proxy-config/>ProxyConfig</a></li><li role=none><a role=treeitem title="Configuration affecting service registry." href=/v1.19/zh/docs/reference/config/networking/service-entry/>Service Entry</a></li><li role=none><a role=treeitem title="Configuration affecting network reachability of a sidecar." href=/v1.19/zh/docs/reference/config/networking/sidecar/>Sidecar</a></li><li role=none><a role=treeitem title="Configuration affecting label/content routing, sni routing, etc." href=/v1.19/zh/docs/reference/config/networking/virtual-service/>Virtual Service</a></li><li role=none><a role=treeitem title="Configuration affecting VMs onboarded into the mesh." href=/v1.19/zh/docs/reference/config/networking/workload-entry/>Workload Entry</a></li><li role=none><a role=treeitem title="Describes a collection of workload instances." href=/v1.19/zh/docs/reference/config/networking/workload-group/>Workload Group</a></li></ul></li><li role=treeitem aria-label=Security><button aria-hidden=true tabindex=-1></button><a title="如何配置 Istio 的安全功能。" href=/v1.19/zh/docs/reference/config/security/>Security</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="Configuration to validate JWT." href=/v1.19/zh/docs/reference/config/security/jwt/>JWTRule</a></li><li role=none><a role=treeitem title="Peer authentication configuration for workloads." href=/v1.19/zh/docs/reference/config/security/peer_authentication/>PeerAuthentication</a></li><li role=none><a role=treeitem title="Request authentication configuration for workloads." href=/v1.19/zh/docs/reference/config/security/request_authentication/>RequestAuthentication</a></li><li role=none><a role=treeitem title="Configuration for access control on workloads." href=/v1.19/zh/docs/reference/config/security/authorization-policy/>Authorization Policy</a></li><li role=none><a role=treeitem title=授权策略中支持的条件。 href=/v1.19/zh/docs/reference/config/security/conditions/>授权策略</a></li><li role=none><a role=treeitem title=描述了授权策略中支持的规范化。 href=/v1.19/zh/docs/reference/config/security/normalization/>授权策略规范化</a></li></ul></li><li role=none><a role=treeitem title="通过 Istio 遥测导出的 Istio 标准指标。" href=/v1.19/zh/docs/reference/config/metrics/>Istio 标准指标</a></li><li role=treeitem aria-label=常见类型><button aria-hidden=true tabindex=-1></button><a title="描述 Istio API 中的常见类型。" href=/v1.19/zh/docs/reference/config/type/>常见类型</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="Definition of a workload selector." href=/v1.19/zh/docs/reference/config/type/workload-selector/>Workload Selector</a></li></ul></li><li role=none><a role=treeitem title="Resource annotations used by Istio." href=/v1.19/zh/docs/reference/config/annotations/>Resource Annotations</a></li><li role=none><a role=treeitem title="Resource labels used by Istio." href=/v1.19/zh/docs/reference/config/labels/>Resource Labels</a></li><li role=treeitem aria-label=配置分析消息><button aria-hidden=true tabindex=-1></button><a title=记录配置分析期间产生的各个错误和警告消息。 href=/v1.19/zh/docs/reference/config/analysis/>配置分析消息</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0136/>AlphaAnnotation</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/message-format/>Analyzer Message Format</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0109/>ConflictingMeshGatewayVirtualServiceHosts</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0110/>ConflictingSidecarWorkloadSelectors</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0159/>ConflictingTelemetryWorkloadSelectors</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0116/>DeploymentAssociatedToMultipleServices</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0137/>DeploymentConflictingPorts</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0117/>DeploymentRequiresServiceAssociated</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0002/>Deprecated</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0135/>DeprecatedAnnotation</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0153/>EnvoyFilterUsesAddOperationIncorrectly</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0151/>EnvoyFilterUsesRelativeOperation</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0155/>EnvoyFilterUsesRelativeOperationWithProxyVersion</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0154/>EnvoyFilterUsesRemoveOperationIncorrectly</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0152/>EnvoyFilterUsesReplaceOperationIncorrectly</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0150/>ExternalNameServiceTypeInvalidPortName</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0104/>GatewayPortNotOnWorkload</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0001/>InternalError</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0125/>InvalidAnnotation</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0144/>InvalidApplicationUID</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0161/>InvalidGatewayCredential</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0122/>InvalidRegexp</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0157/>InvalidTelemetryProvider</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0119/>JwtFailureDueToInvalidServicePortPrefix</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0143/>LocalhostListener</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0107/>MisplacedAnnotation</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0113/>MTLSPolicyConflict</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0111/>MultipleSidecarsWithoutWorkloadSelectors</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0160/>MultipleTelemetriesWithoutWorkloadSelectors</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0123/>NamespaceMultipleInjectionLabels</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0102/>NamespaceNotInjected</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0127/>NoMatchingWorkloadsFound</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0128/>NoServerCertificateVerificationDestinationLevel</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0129/>NoServerCertificateVerificationPortLevel</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0103/>PodMissingProxy</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0158/>PodsIstioProxyImageMismatchInNamespace</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0118/>PortNameIsNotUnderNamingConvention</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0101/>ReferencedResourceNotFound</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0106/>SchemaValidationError</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0134/>ServiceEntryAddressesRequired</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0108/>UnknownAnnotation</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0112/>VirtualServiceDestinationPortSelectorRequired</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0132/>VirtualServiceHostNotFoundInGateway</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0131/>VirtualServiceIneffectiveMatch</a></li><li role=none><a role=treeitem title href=/v1.19/zh/docs/reference/config/analysis/ist0130/>VirtualServiceUnreachableRule</a></li></ul></li></ul></li><li role=treeitem aria-label=命令><button aria-hidden=true tabindex=-1></button><a title="描述 Istio 命令和工具的用法及选项。" href=/v1.19/zh/docs/reference/commands/>命令</a><ul role=group aria-expanded=false class=leaf-section><li role=none><a role=treeitem title="Install and configure Istio CNI plugin on a node, detect and repair pod which is broken by race condition." href=/v1.19/zh/docs/reference/commands/install-cni/>install-cni</a></li><li role=none><a role=treeitem title="Istio control interface." href=/v1.19/zh/docs/reference/commands/istioctl/>istioctl</a></li><li role=none><a role=treeitem title="The Istio operator." href=/v1.19/zh/docs/reference/commands/operator/>operator</a></li><li role=none><a role=treeitem title="Istio Pilot agent." href=/v1.19/zh/docs/reference/commands/pilot-agent/>pilot-agent</a></li><li role=none><a role=treeitem title="Istio Pilot." href=/v1.19/zh/docs/reference/commands/pilot-discovery/>pilot-discovery</a></li></ul></li><li role=none><a role=treeitem title="Istio 常用术语的词汇表。" href=/v1.19/zh/docs/reference/glossary/>术语表</a></li></ul></li></ul></div></div></div></nav></div><div class=article-container><button id=sidebar-toggle class=main-navigation-toggle aria-label="Open sidebar"><svg class="icon hamburger-sidebar"><use xlink:href="/v1.19/img/icons.svg#hamburger-sidebar"/></svg>
目录</button><article aria-labelledby=title><nav aria-label=Breadcrumb><ol><li><a href=/v1.19/zh/docs/ title="了解如何部署、使用和运维 Istio。">文档</a><svg class="icon breadcrumb-arrow"><use xlink:href="/v1.19/img/icons.svg#breadcrumb-arrow"/></svg></li><li><a href=/v1.19/zh/docs/reference/ title="参考部分包含详细的权威参考资料，如命令行选项、配置选项和 API 调用参数。">参考</a><svg class="icon breadcrumb-arrow"><use xlink:href="/v1.19/img/icons.svg#breadcrumb-arrow"/></svg></li><li><a href=/v1.19/zh/docs/reference/config/ title=关于配置选项的详细信息。>配置</a><svg class="icon breadcrumb-arrow"><use xlink:href="/v1.19/img/icons.svg#breadcrumb-arrow"/></svg></li><li><a href=/v1.19/zh/docs/reference/config/networking/ title="描述如何配置 HTTP/TCP 路由功能。">流量管理</a><svg class="icon breadcrumb-arrow"><use xlink:href="/v1.19/img/icons.svg#breadcrumb-arrow"/></svg></li><li>Destination Rule</li></ol></nav><div class=title-area><div style=width:100%><h1 id=title>Destination Rule</h1><p class=byline><span class=reading-time title="5574 字"><svg class="icon clock"><use xlink:href="/v1.19/img/icons.svg#clock"/></svg><span>&nbsp;</span>阅读大约需要 27 分钟</span>
<span>&nbsp;</span>
<span></span></p></div></div><nav class=toc-inlined aria-label="Table of Contents"><div><hr><ol><li role=none aria-label=DestinationRule><a href=#DestinationRule>DestinationRule</a><li role=none aria-label=TrafficPolicy><a href=#TrafficPolicy>TrafficPolicy</a><li role=none aria-label=Subset><a href=#Subset>Subset</a><li role=none aria-label=LoadBalancerSettings><a href=#LoadBalancerSettings>LoadBalancerSettings</a><li role=none aria-label=ConnectionPoolSettings><a href=#ConnectionPoolSettings>ConnectionPoolSettings</a><li role=none aria-label=OutlierDetection><a href=#OutlierDetection>OutlierDetection</a><li role=none aria-label=ClientTLSSettings><a href=#ClientTLSSettings>ClientTLSSettings</a><li role=none aria-label=LocalityLoadBalancerSetting><a href=#LocalityLoadBalancerSetting>LocalityLoadBalancerSetting</a><li role=none aria-label=TrafficPolicy.PortTrafficPolicy><a href=#TrafficPolicy-PortTrafficPolicy>TrafficPolicy.PortTrafficPolicy</a><li role=none aria-label=TrafficPolicy.TunnelSettings><a href=#TrafficPolicy-TunnelSettings>TrafficPolicy.TunnelSettings</a><li role=none aria-label=LoadBalancerSettings.ConsistentHashLB><a href=#LoadBalancerSettings-ConsistentHashLB>LoadBalancerSettings.ConsistentHashLB</a><li role=none aria-label=LoadBalancerSettings.ConsistentHashLB.RingHash><a href=#LoadBalancerSettings-ConsistentHashLB-RingHash>LoadBalancerSettings.ConsistentHashLB.RingHash</a><li role=none aria-label=LoadBalancerSettings.ConsistentHashLB.MagLev><a href=#LoadBalancerSettings-ConsistentHashLB-MagLev>LoadBalancerSettings.ConsistentHashLB.MagLev</a><li role=none aria-label=LoadBalancerSettings.ConsistentHashLB.HTTPCookie><a href=#LoadBalancerSettings-ConsistentHashLB-HTTPCookie>LoadBalancerSettings.ConsistentHashLB.HTTPCookie</a><li role=none aria-label=ConnectionPoolSettings.TCPSettings><a href=#ConnectionPoolSettings-TCPSettings>ConnectionPoolSettings.TCPSettings</a><li role=none aria-label=ConnectionPoolSettings.HTTPSettings><a href=#ConnectionPoolSettings-HTTPSettings>ConnectionPoolSettings.HTTPSettings</a><li role=none aria-label=ConnectionPoolSettings.TCPSettings.TcpKeepalive><a href=#ConnectionPoolSettings-TCPSettings-TcpKeepalive>ConnectionPoolSettings.TCPSettings.TcpKeepalive</a><li role=none aria-label=LocalityLoadBalancerSetting.Distribute><a href=#LocalityLoadBalancerSetting-Distribute>LocalityLoadBalancerSetting.Distribute</a><li role=none aria-label=LocalityLoadBalancerSetting.Failover><a href=#LocalityLoadBalancerSetting-Failover>LocalityLoadBalancerSetting.Failover</a><li role=none aria-label=google.protobuf.UInt32Value><a href=#google-protobuf-UInt32Value>google.protobuf.UInt32Value</a><li role=none aria-label=LoadBalancerSettings.SimpleLB><a href=#LoadBalancerSettings-SimpleLB>LoadBalancerSettings.SimpleLB</a><li role=none aria-label=ConnectionPoolSettings.HTTPSettings.H2UpgradePolicy><a href=#ConnectionPoolSettings-HTTPSettings-H2UpgradePolicy>ConnectionPoolSettings.HTTPSettings.H2UpgradePolicy</a><li role=none aria-label=ClientTLSSettings.TLSmode><a href=#ClientTLSSettings-TLSmode>ClientTLSSettings.TLSmode</a></ol><hr></div></nav><p><code>DestinationRule</code> defines policies that apply to traffic intended for a
service after routing has occurred. These rules specify configuration
for load balancing, connection pool size from the sidecar, and outlier
detection settings to detect and evict unhealthy hosts from the load
balancing pool. For example, a simple load balancing policy for the
ratings service would look as follows:</p><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-1 role=tablist class=tabset><div class=tab-strip data-category-name=example><button aria-selected=true data-category-value=v1alpha3 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-1-0-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-1-0-tab role=tab><span>v1alpha3</span>
</button><button tabindex=-1 data-category-value=v1beta1 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-1-1-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-1-1-tab role=tab><span>v1beta1</span></button></div><div class=tab-content><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-1-0-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-1-0-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  name: bookinfo-ratings
spec:
  host: ratings.prod.svc.cluster.local
  trafficPolicy:
    loadBalancer:
      simple: LEAST_REQUEST
</code></pre></div><div hidden id=tabset-zhdocsreferenceconfignetworkingdestination-rule-1-1-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-1-1-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: bookinfo-ratings
spec:
  host: ratings.prod.svc.cluster.local
  trafficPolicy:
    loadBalancer:
      simple: LEAST_REQUEST
</code></pre></div></div></div><p>Version specific policies can be specified by defining a named
<code>subset</code> and overriding the settings specified at the service level. The
following rule uses a round robin load balancing policy for all traffic
going to a subset named testversion that is composed of endpoints (e.g.,
pods) with labels (version:v3).</p><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-2 role=tablist class=tabset><div class=tab-strip data-category-name=example><button aria-selected=true data-category-value=v1alpha3 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-2-0-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-2-0-tab role=tab><span>v1alpha3</span>
</button><button tabindex=-1 data-category-value=v1beta1 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-2-1-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-2-1-tab role=tab><span>v1beta1</span></button></div><div class=tab-content><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-2-0-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-2-0-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  name: bookinfo-ratings
spec:
  host: ratings.prod.svc.cluster.local
  trafficPolicy:
    loadBalancer:
      simple: LEAST_REQUEST
  subsets:
  - name: testversion
    labels:
      version: v3
    trafficPolicy:
      loadBalancer:
        simple: ROUND_ROBIN
</code></pre></div><div hidden id=tabset-zhdocsreferenceconfignetworkingdestination-rule-2-1-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-2-1-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: bookinfo-ratings
spec:
  host: ratings.prod.svc.cluster.local
  trafficPolicy:
    loadBalancer:
      simple: LEAST_REQUEST
  subsets:
  - name: testversion
    labels:
      version: v3
    trafficPolicy:
      loadBalancer:
        simple: ROUND_ROBIN
</code></pre></div></div></div><p><strong>Note:</strong> Policies specified for subsets will not take effect until
a route rule explicitly sends traffic to this subset.</p><p>Traffic policies can be customized to specific ports as well. The
following rule uses the least connection load balancing policy for all
traffic to port 80, while uses a round robin load balancing setting for
traffic to the port 9080.</p><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-3 role=tablist class=tabset><div class=tab-strip data-category-name=example><button aria-selected=true data-category-value=v1alpha3 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-3-0-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-3-0-tab role=tab><span>v1alpha3</span>
</button><button tabindex=-1 data-category-value=v1beta1 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-3-1-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-3-1-tab role=tab><span>v1beta1</span></button></div><div class=tab-content><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-3-0-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-3-0-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  name: bookinfo-ratings-port
spec:
  host: ratings.prod.svc.cluster.local
  trafficPolicy: # Apply to all ports
    portLevelSettings:
    - port:
        number: 80
      loadBalancer:
        simple: LEAST_REQUEST
    - port:
        number: 9080
      loadBalancer:
        simple: ROUND_ROBIN
</code></pre></div><div hidden id=tabset-zhdocsreferenceconfignetworkingdestination-rule-3-1-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-3-1-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: bookinfo-ratings-port
spec:
  host: ratings.prod.svc.cluster.local
  trafficPolicy: # Apply to all ports
    portLevelSettings:
    - port:
        number: 80
      loadBalancer:
        simple: LEAST_REQUEST
    - port:
        number: 9080
      loadBalancer:
        simple: ROUND_ROBIN
</code></pre></div></div></div><p>Destination Rules can be customized to specific workloads as well.
The following example shows how a destination rule can be applied to a
specific workload using the workloadSelector configuration.</p><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-4 role=tablist class=tabset><div class=tab-strip data-category-name=selector-example><button aria-selected=true data-category-value=v1alpha3 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-4-0-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-4-0-tab role=tab><span>v1alpha3</span>
</button><button tabindex=-1 data-category-value=v1beta1 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-4-1-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-4-1-tab role=tab><span>v1beta1</span></button></div><div class=tab-content><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-4-0-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-4-0-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  name: configure-client-mtls-dr-with-workloadselector
spec:
  host: example.com
  workloadSelector:
    matchLabels:
      app: ratings
  trafficPolicy:
    loadBalancer:
      simple: ROUND_ROBIN
    portLevelSettings:
    - port:
        number: 31443
      tls:
        credentialName: client-credential
        mode: MUTUAL
</code></pre></div><div hidden id=tabset-zhdocsreferenceconfignetworkingdestination-rule-4-1-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-4-1-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: configure-client-mtls-dr-with-workloadselector
spec:
  host: example.com
  workloadSelector:
    matchLabels:
      app: ratings
  trafficPolicy:
    loadBalancer:
      simple: ROUND_ROBIN
    portLevelSettings:
    - port:
        number: 31443
      tls:
        credentialName: client-credential
        mode: MUTUAL
</code></pre></div></div></div><h2 id=DestinationRule>DestinationRule</h2><section><p>DestinationRule defines policies that apply to traffic intended for a service
after routing has occurred.</p><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=DestinationRule-host><td><code>host</code></td><td><code>string</code></td><td><p>The name of a service from the service registry. Service
names are looked up from the platform&rsquo;s service registry (e.g.,
Kubernetes services, Consul services, etc.) and from the hosts
declared by <a href=/v1.19/zh/docs/reference/config/networking/service-entry/#ServiceEntry>ServiceEntries</a>. Rules defined for
services that do not exist in the service registry will be ignored.</p><p><em>Note for Kubernetes users</em>: When short names are used (e.g. &ldquo;reviews&rdquo;
instead of &ldquo;reviews.default.svc.cluster.local&rdquo;), Istio will interpret
the short name based on the namespace of the rule, not the service. A
rule in the &ldquo;default&rdquo; namespace containing a host &ldquo;reviews&rdquo; will be
interpreted as &ldquo;reviews.default.svc.cluster.local&rdquo;, irrespective of
the actual namespace associated with the reviews service. <em>To avoid
potential misconfigurations, it is recommended to always use fully
qualified domain names over short names.</em></p><p>Note that the host field applies to both HTTP and TCP services.</p></td><td>Yes</td></tr><tr id=DestinationRule-traffic_policy><td><code>trafficPolicy</code></td><td><code><a href=#TrafficPolicy>TrafficPolicy</a></code></td><td><p>Traffic policies to apply (load balancing policy, connection pool
sizes, outlier detection).</p></td><td>No</td></tr><tr id=DestinationRule-subsets><td><code>subsets</code></td><td><code><a href=#Subset>Subset[]</a></code></td><td><p>One or more named sets that represent individual versions of a
service. Traffic policies can be overridden at subset level.</p></td><td>No</td></tr><tr id=DestinationRule-export_to><td><code>exportTo</code></td><td><code>string[]</code></td><td><p>A list of namespaces to which this destination rule is exported.
The resolution of a destination rule to apply to a service occurs in the
context of a hierarchy of namespaces. Exporting a destination rule allows
it to be included in the resolution hierarchy for services in
other namespaces. This feature provides a mechanism for service owners
and mesh administrators to control the visibility of destination rules
across namespace boundaries.</p><p>If no namespaces are specified then the destination rule is exported to all
namespaces by default.</p><p>The value &ldquo;.&rdquo; is reserved and defines an export to the same namespace that
the destination rule is declared in. Similarly, the value &ldquo;*&rdquo; is reserved and
defines an export to all namespaces.</p></td><td>No</td></tr><tr id=DestinationRule-workload_selector><td><code>workloadSelector</code></td><td><code><a href=/v1.19/zh/docs/reference/config/type/workload-selector/#WorkloadSelector>WorkloadSelector</a></code></td><td><p>Criteria used to select the specific set of pods/VMs on which this
<code>DestinationRule</code> configuration should be applied. If specified, the <code>DestinationRule</code>
configuration will be applied only to the workload instances matching the workload selector
label in the same namespace. Workload selectors do not apply across namespace boundaries.
If omitted, the <code>DestinationRule</code> falls back to its default behavior.
For example, if specific sidecars need to have egress TLS settings for services outside
of the mesh, instead of every sidecar in the mesh needing to have the
configuration (which is the default behaviour), a workload selector can be specified.</p></td><td>No</td></tr></tbody></table></section><h2 id=TrafficPolicy>TrafficPolicy</h2><section><p>Traffic policies to apply for a specific destination, across all
destination ports. See DestinationRule for examples.</p><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=TrafficPolicy-load_balancer><td><code>loadBalancer</code></td><td><code><a href=#LoadBalancerSettings>LoadBalancerSettings</a></code></td><td><p>Settings controlling the load balancer algorithms.</p></td><td>No</td></tr><tr id=TrafficPolicy-connection_pool><td><code>connectionPool</code></td><td><code><a href=#ConnectionPoolSettings>ConnectionPoolSettings</a></code></td><td><p>Settings controlling the volume of connections to an upstream service</p></td><td>No</td></tr><tr id=TrafficPolicy-outlier_detection><td><code>outlierDetection</code></td><td><code><a href=#OutlierDetection>OutlierDetection</a></code></td><td><p>Settings controlling eviction of unhealthy hosts from the load balancing pool</p></td><td>No</td></tr><tr id=TrafficPolicy-tls><td><code>tls</code></td><td><code><a href=#ClientTLSSettings>ClientTLSSettings</a></code></td><td><p>TLS related settings for connections to the upstream service.</p></td><td>No</td></tr><tr id=TrafficPolicy-port_level_settings><td><code>portLevelSettings</code></td><td><code><a href=#TrafficPolicy-PortTrafficPolicy>PortTrafficPolicy[]</a></code></td><td><p>Traffic policies specific to individual ports. Note that port level
settings will override the destination-level settings. Traffic
settings specified at the destination-level will not be inherited when
overridden by port-level settings, i.e. default values will be applied
to fields omitted in port-level traffic policies.</p></td><td>No</td></tr><tr id=TrafficPolicy-tunnel><td><code>tunnel</code></td><td><code><a href=#TrafficPolicy-TunnelSettings>TunnelSettings</a></code></td><td><p>Configuration of tunneling TCP over other transport or application layers
for the host configured in the DestinationRule.
Tunnel settings can be applied to TCP or TLS routes and can&rsquo;t be applied to HTTP routes.</p></td><td>No</td></tr></tbody></table></section><h2 id=Subset>Subset</h2><section><p>A subset of endpoints of a service. Subsets can be used for scenarios
like A/B testing, or routing to a specific version of a service. Refer
to <a href=/v1.19/zh/docs/reference/config/networking/virtual-service/#VirtualService>VirtualService</a> documentation for examples of using
subsets in these scenarios. In addition, traffic policies defined at the
service-level can be overridden at a subset-level. The following rule
uses a round robin load balancing policy for all traffic going to a
subset named testversion that is composed of endpoints (e.g., pods) with
labels (version:v3).</p><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-5 role=tablist class=tabset><div class=tab-strip data-category-name=example><button aria-selected=true data-category-value=v1alpha3 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-5-0-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-5-0-tab role=tab><span>v1alpha3</span>
</button><button tabindex=-1 data-category-value=v1beta1 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-5-1-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-5-1-tab role=tab><span>v1beta1</span></button></div><div class=tab-content><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-5-0-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-5-0-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  name: bookinfo-ratings
spec:
  host: ratings.prod.svc.cluster.local
  trafficPolicy:
    loadBalancer:
      simple: LEAST_REQUEST
  subsets:
  - name: testversion
    labels:
      version: v3
    trafficPolicy:
      loadBalancer:
        simple: ROUND_ROBIN
</code></pre></div><div hidden id=tabset-zhdocsreferenceconfignetworkingdestination-rule-5-1-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-5-1-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: bookinfo-ratings
spec:
  host: ratings.prod.svc.cluster.local
  trafficPolicy:
    loadBalancer:
      simple: LEAST_REQUEST
  subsets:
  - name: testversion
    labels:
      version: v3
    trafficPolicy:
      loadBalancer:
        simple: ROUND_ROBIN
</code></pre></div></div></div><p><strong>Note:</strong> Policies specified for subsets will not take effect until
a route rule explicitly sends traffic to this subset.</p><p>One or more labels are typically required to identify the subset destination,
however, when the corresponding DestinationRule represents a host that
supports multiple SNI hosts (e.g., an egress gateway), a subset without labels
may be meaningful. In this case a traffic policy with <a href=#ClientTLSSettings>ClientTLSSettings</a>
can be used to identify a specific SNI host corresponding to the named subset.</p><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=Subset-name><td><code>name</code></td><td><code>string</code></td><td><p>Name of the subset. The service name and the subset name can
be used for traffic splitting in a route rule.</p></td><td>Yes</td></tr><tr id=Subset-labels><td><code>labels</code></td><td><code>map&lt;string,&nbsp;string></code></td><td><p>Labels apply a filter over the endpoints of a service in the
service registry. See route rules for examples of usage.</p></td><td>No</td></tr><tr id=Subset-traffic_policy><td><code>trafficPolicy</code></td><td><code><a href=#TrafficPolicy>TrafficPolicy</a></code></td><td><p>Traffic policies that apply to this subset. Subsets inherit the
traffic policies specified at the DestinationRule level. Settings
specified at the subset level will override the corresponding settings
specified at the DestinationRule level.</p></td><td>No</td></tr></tbody></table></section><h2 id=LoadBalancerSettings>LoadBalancerSettings</h2><section><p>Load balancing policies to apply for a specific destination. See Envoy&rsquo;s
load balancing
<a href=https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/load_balancing/load_balancing>documentation</a>
for more details.</p><p>For example, the following rule uses a round robin load balancing policy
for all traffic going to the ratings service.</p><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-6 role=tablist class=tabset><div class=tab-strip data-category-name=example><button aria-selected=true data-category-value=v1alpha3 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-6-0-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-6-0-tab role=tab><span>v1alpha3</span>
</button><button tabindex=-1 data-category-value=v1beta1 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-6-1-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-6-1-tab role=tab><span>v1beta1</span></button></div><div class=tab-content><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-6-0-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-6-0-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  name: bookinfo-ratings
spec:
  host: ratings.prod.svc.cluster.local
  trafficPolicy:
    loadBalancer:
      simple: ROUND_ROBIN
</code></pre></div><div hidden id=tabset-zhdocsreferenceconfignetworkingdestination-rule-6-1-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-6-1-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: bookinfo-ratings
spec:
  host: ratings.prod.svc.cluster.local
  trafficPolicy:
    loadBalancer:
      simple: ROUND_ROBIN
</code></pre></div></div></div><p>The following example sets up sticky sessions for the ratings service
hashing-based load balancer for the same ratings service using the
the User cookie as the hash key.</p><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-7 role=tablist class=tabset><div class=tab-strip data-category-name=example><button aria-selected=true data-category-value=v1alpha3 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-7-0-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-7-0-tab role=tab><span>v1alpha3</span>
</button><button tabindex=-1 data-category-value=v1beta1 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-7-1-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-7-1-tab role=tab><span>v1beta1</span></button></div><div class=tab-content><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-7-0-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-7-0-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  name: bookinfo-ratings
spec:
  host: ratings.prod.svc.cluster.local
  trafficPolicy:
    loadBalancer:
      consistentHash:
        httpCookie:
          name: user
          ttl: 0s
</code></pre></div><div hidden id=tabset-zhdocsreferenceconfignetworkingdestination-rule-7-1-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-7-1-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: bookinfo-ratings
spec:
  host: ratings.prod.svc.cluster.local
  trafficPolicy:
    loadBalancer:
      consistentHash:
        httpCookie:
          name: user
          ttl: 0s
</code></pre></div></div></div><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=LoadBalancerSettings-simple class="oneof oneof-start"><td><code>simple</code></td><td><code><a href=#LoadBalancerSettings-SimpleLB>SimpleLB (oneof)</a></code></td><td></td><td>No</td></tr><tr id=LoadBalancerSettings-consistent_hash class=oneof><td><code>consistentHash</code></td><td><code><a href=#LoadBalancerSettings-ConsistentHashLB>ConsistentHashLB (oneof)</a></code></td><td></td><td>No</td></tr><tr id=LoadBalancerSettings-locality_lb_setting><td><code>localityLbSetting</code></td><td><code><a href=#LocalityLoadBalancerSetting>LocalityLoadBalancerSetting</a></code></td><td><p>Locality load balancer settings, this will override mesh wide settings in entirety, meaning no merging would be performed
between this object and the object one in MeshConfig</p></td><td>No</td></tr><tr id=LoadBalancerSettings-warmup_duration_secs><td><code>warmupDurationSecs</code></td><td><code><a href=https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration>Duration</a></code></td><td><p>Represents the warmup duration of Service. If set, the newly created endpoint of service
remains in warmup mode starting from its creation time for the duration of this window and
Istio progressively increases amount of traffic for that endpoint instead of sending proportional amount of traffic.
This should be enabled for services that require warm up time to serve full production load with reasonable latency.
Please note that this is most effective when few new endpoints come up like scale event in Kubernetes. When all the
endpoints are relatively new like new deployment, this is not very effective as all endpoints end up getting same
amount of requests.
Currently this is only supported for ROUND_ROBIN and LEAST_REQUEST load balancers.</p></td><td>No</td></tr></tbody></table></section><h2 id=ConnectionPoolSettings>ConnectionPoolSettings</h2><section><p>Connection pool settings for an upstream host. The settings apply to
each individual host in the upstream service. See Envoy&rsquo;s <a href=https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/circuit_breaking>circuit
breaker</a>
for more details. Connection pool settings can be applied at the TCP
level as well as at HTTP level.</p><p>For example, the following rule sets a limit of 100 connections to redis
service called myredissrv with a connect timeout of 30ms</p><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-8 role=tablist class=tabset><div class=tab-strip data-category-name=example><button aria-selected=true data-category-value=v1alpha3 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-8-0-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-8-0-tab role=tab><span>v1alpha3</span>
</button><button tabindex=-1 data-category-value=v1beta1 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-8-1-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-8-1-tab role=tab><span>v1beta1</span></button></div><div class=tab-content><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-8-0-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-8-0-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  name: bookinfo-redis
spec:
  host: myredissrv.prod.svc.cluster.local
  trafficPolicy:
    connectionPool:
      tcp:
        maxConnections: 100
        connectTimeout: 30ms
        tcpKeepalive:
          time: 7200s
          interval: 75s
</code></pre></div><div hidden id=tabset-zhdocsreferenceconfignetworkingdestination-rule-8-1-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-8-1-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: bookinfo-redis
spec:
  host: myredissrv.prod.svc.cluster.local
  trafficPolicy:
    connectionPool:
      tcp:
        maxConnections: 100
        connectTimeout: 30ms
        tcpKeepalive:
          time: 7200s
          interval: 75s
</code></pre></div></div></div><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=ConnectionPoolSettings-tcp><td><code>tcp</code></td><td><code><a href=#ConnectionPoolSettings-TCPSettings>TCPSettings</a></code></td><td><p>Settings common to both HTTP and TCP upstream connections.</p></td><td>No</td></tr><tr id=ConnectionPoolSettings-http><td><code>http</code></td><td><code><a href=#ConnectionPoolSettings-HTTPSettings>HTTPSettings</a></code></td><td><p>HTTP connection pool settings.</p></td><td>No</td></tr></tbody></table></section><h2 id=OutlierDetection>OutlierDetection</h2><section><p>A Circuit breaker implementation that tracks the status of each
individual host in the upstream service. Applicable to both HTTP and
TCP services. For HTTP services, hosts that continually return 5xx
errors for API calls are ejected from the pool for a pre-defined period
of time. For TCP services, connection timeouts or connection
failures to a given host counts as an error when measuring the
consecutive errors metric. See Envoy&rsquo;s <a href=https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/outlier>outlier
detection</a>
for more details.</p><p>The following rule sets a connection pool size of 100 HTTP1 connections
with no more than 10 req/connection to the &ldquo;reviews&rdquo; service. In addition,
it sets a limit of 1000 concurrent HTTP2 requests and configures upstream
hosts to be scanned every 5 mins so that any host that fails 7 consecutive
times with a 502, 503, or 504 error code will be ejected for 15 minutes.</p><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-9 role=tablist class=tabset><div class=tab-strip data-category-name=example><button aria-selected=true data-category-value=v1alpha3 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-9-0-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-9-0-tab role=tab><span>v1alpha3</span>
</button><button tabindex=-1 data-category-value=v1beta1 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-9-1-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-9-1-tab role=tab><span>v1beta1</span></button></div><div class=tab-content><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-9-0-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-9-0-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  name: reviews-cb-policy
spec:
  host: reviews.prod.svc.cluster.local
  trafficPolicy:
    connectionPool:
      tcp:
        maxConnections: 100
      http:
        http2MaxRequests: 1000
        maxRequestsPerConnection: 10
    outlierDetection:
      consecutive5xxErrors: 7
      interval: 5m
      baseEjectionTime: 15m
</code></pre></div><div hidden id=tabset-zhdocsreferenceconfignetworkingdestination-rule-9-1-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-9-1-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: reviews-cb-policy
spec:
  host: reviews.prod.svc.cluster.local
  trafficPolicy:
    connectionPool:
      tcp:
        maxConnections: 100
      http:
        http2MaxRequests: 1000
        maxRequestsPerConnection: 10
    outlierDetection:
      consecutive5xxErrors: 7
      interval: 5m
      baseEjectionTime: 15m
</code></pre></div></div></div><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=OutlierDetection-split_external_local_origin_errors><td><code>splitExternalLocalOriginErrors</code></td><td><code>bool</code></td><td><p>Determines whether to distinguish local origin failures from external errors. If set to true
consecutive_local_origin_failure is taken into account for outlier detection calculations.
This should be used when you want to derive the outlier detection status based on the errors
seen locally such as failure to connect, timeout while connecting etc. rather than the status code
returned by upstream service. This is especially useful when the upstream service explicitly returns
a 5xx for some requests and you want to ignore those responses from upstream service while determining
the outlier detection status of a host.
Defaults to false.</p></td><td>No</td></tr><tr id=OutlierDetection-consecutive_local_origin_failures><td><code>consecutiveLocalOriginFailures</code></td><td><code><a href=#google-protobuf-UInt32Value>UInt32Value</a></code></td><td><p>The number of consecutive locally originated failures before ejection
occurs. Defaults to 5. Parameter takes effect only when split_external_local_origin_errors
is set to true.</p></td><td>No</td></tr><tr id=OutlierDetection-consecutive_gateway_errors><td><code>consecutiveGatewayErrors</code></td><td><code><a href=#google-protobuf-UInt32Value>UInt32Value</a></code></td><td><p>Number of gateway errors before a host is ejected from the connection pool.
When the upstream host is accessed over HTTP, a 502, 503, or 504 return
code qualifies as a gateway error. When the upstream host is accessed over
an opaque TCP connection, connect timeouts and connection error/failure
events qualify as a gateway error.
This feature is disabled by default or when set to the value 0.</p><p>Note that consecutive_gateway_errors and consecutive_5xx_errors can be
used separately or together. Because the errors counted by
consecutive_gateway_errors are also included in consecutive_5xx_errors,
if the value of consecutive_gateway_errors is greater than or equal to
the value of consecutive_5xx_errors, consecutive_gateway_errors will have
no effect.</p></td><td>No</td></tr><tr id=OutlierDetection-consecutive_5xx_errors><td><code>consecutive5xxErrors</code></td><td><code><a href=#google-protobuf-UInt32Value>UInt32Value</a></code></td><td><p>Number of 5xx errors before a host is ejected from the connection pool.
When the upstream host is accessed over an opaque TCP connection, connect
timeouts, connection error/failure and request failure events qualify as a
5xx error.
This feature defaults to 5 but can be disabled by setting the value to 0.</p><p>Note that consecutive_gateway_errors and consecutive_5xx_errors can be
used separately or together. Because the errors counted by
consecutive_gateway_errors are also included in consecutive_5xx_errors,
if the value of consecutive_gateway_errors is greater than or equal to
the value of consecutive_5xx_errors, consecutive_gateway_errors will have
no effect.</p></td><td>No</td></tr><tr id=OutlierDetection-interval><td><code>interval</code></td><td><code><a href=https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration>Duration</a></code></td><td><p>Time interval between ejection sweep analysis. format:
1h/1m/1s/1ms. MUST BE >=1ms. Default is 10s.</p></td><td>No</td></tr><tr id=OutlierDetection-base_ejection_time><td><code>baseEjectionTime</code></td><td><code><a href=https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration>Duration</a></code></td><td><p>Minimum ejection duration. A host will remain ejected for a period
equal to the product of minimum ejection duration and the number of
times the host has been ejected. This technique allows the system to
automatically increase the ejection period for unhealthy upstream
servers. format: 1h/1m/1s/1ms. MUST BE >=1ms. Default is 30s.</p></td><td>No</td></tr><tr id=OutlierDetection-max_ejection_percent><td><code>maxEjectionPercent</code></td><td><code>int32</code></td><td><p>Maximum % of hosts in the load balancing pool for the upstream
service that can be ejected. Defaults to 10%.</p></td><td>No</td></tr><tr id=OutlierDetection-min_health_percent><td><code>minHealthPercent</code></td><td><code>int32</code></td><td><p>Outlier detection will be enabled as long as the associated load balancing
pool has at least min_health_percent hosts in healthy mode. When the
percentage of healthy hosts in the load balancing pool drops below this
threshold, outlier detection will be disabled and the proxy will load balance
across all hosts in the pool (healthy and unhealthy). The threshold can be
disabled by setting it to 0%. The default is 0% as it&rsquo;s not typically
applicable in k8s environments with few pods per service.</p></td><td>No</td></tr></tbody></table></section><h2 id=ClientTLSSettings>ClientTLSSettings</h2><section><p>SSL/TLS related settings for upstream connections. See Envoy&rsquo;s <a href=https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/transport_sockets/tls/v3/common.proto.html#common-tls-configuration>TLS
context</a>
for more details. These settings are common to both HTTP and TCP upstreams.</p><p>For example, the following rule configures a client to use mutual TLS
for connections to upstream database cluster.</p><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-10 role=tablist class=tabset><div class=tab-strip data-category-name=example><button aria-selected=true data-category-value=v1alpha3 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-10-0-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-10-0-tab role=tab><span>v1alpha3</span>
</button><button tabindex=-1 data-category-value=v1beta1 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-10-1-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-10-1-tab role=tab><span>v1beta1</span></button></div><div class=tab-content><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-10-0-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-10-0-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  name: db-mtls
spec:
  host: mydbserver.prod.svc.cluster.local
  trafficPolicy:
    tls:
      mode: MUTUAL
      clientCertificate: /etc/certs/myclientcert.pem
      privateKey: /etc/certs/client_private_key.pem
      caCertificates: /etc/certs/rootcacerts.pem
</code></pre></div><div hidden id=tabset-zhdocsreferenceconfignetworkingdestination-rule-10-1-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-10-1-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: db-mtls
spec:
  host: mydbserver.prod.svc.cluster.local
  trafficPolicy:
    tls:
      mode: MUTUAL
      clientCertificate: /etc/certs/myclientcert.pem
      privateKey: /etc/certs/client_private_key.pem
      caCertificates: /etc/certs/rootcacerts.pem
</code></pre></div></div></div><p>The following rule configures a client to use TLS when talking to a
foreign service whose domain matches *.foo.com.</p><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-11 role=tablist class=tabset><div class=tab-strip data-category-name=example><button aria-selected=true data-category-value=v1alpha3 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-11-0-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-11-0-tab role=tab><span>v1alpha3</span>
</button><button tabindex=-1 data-category-value=v1beta1 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-11-1-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-11-1-tab role=tab><span>v1beta1</span></button></div><div class=tab-content><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-11-0-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-11-0-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  name: tls-foo
spec:
  host: &quot;*.foo.com&quot;
  trafficPolicy:
    tls:
      mode: SIMPLE
</code></pre></div><div hidden id=tabset-zhdocsreferenceconfignetworkingdestination-rule-11-1-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-11-1-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: tls-foo
spec:
  host: &quot;*.foo.com&quot;
  trafficPolicy:
    tls:
      mode: SIMPLE
</code></pre></div></div></div><p>The following rule configures a client to use Istio mutual TLS when talking
to rating services.</p><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-12 role=tablist class=tabset><div class=tab-strip data-category-name=example><button aria-selected=true data-category-value=v1alpha3 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-12-0-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-12-0-tab role=tab><span>v1alpha3</span>
</button><button tabindex=-1 data-category-value=v1beta1 aria-controls=tabset-zhdocsreferenceconfignetworkingdestination-rule-12-1-panel id=tabset-zhdocsreferenceconfignetworkingdestination-rule-12-1-tab role=tab><span>v1beta1</span></button></div><div class=tab-content><div id=tabset-zhdocsreferenceconfignetworkingdestination-rule-12-0-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-12-0-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  name: ratings-istio-mtls
spec:
  host: ratings.prod.svc.cluster.local
  trafficPolicy:
    tls:
      mode: ISTIO_MUTUAL
</code></pre></div><div hidden id=tabset-zhdocsreferenceconfignetworkingdestination-rule-12-1-panel role=tabpanel tabindex=0 aria-labelledby=tabset-zhdocsreferenceconfignetworkingdestination-rule-12-1-tab><pre><code class=language-yaml>apiVersion: networking.istio.io/v1beta1
kind: DestinationRule
metadata:
  name: ratings-istio-mtls
spec:
  host: ratings.prod.svc.cluster.local
  trafficPolicy:
    tls:
      mode: ISTIO_MUTUAL
</code></pre></div></div></div><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=ClientTLSSettings-mode><td><code>mode</code></td><td><code><a href=#ClientTLSSettings-TLSmode>TLSmode</a></code></td><td><p>Indicates whether connections to this port should be secured
using TLS. The value of this field determines how TLS is enforced.</p></td><td>Yes</td></tr><tr id=ClientTLSSettings-client_certificate><td><code>clientCertificate</code></td><td><code>string</code></td><td><p>REQUIRED if mode is <code>MUTUAL</code>. The path to the file holding the
client-side TLS certificate to use.
Should be empty if mode is <code>ISTIO_MUTUAL</code>.</p></td><td>No</td></tr><tr id=ClientTLSSettings-private_key><td><code>privateKey</code></td><td><code>string</code></td><td><p>REQUIRED if mode is <code>MUTUAL</code>. The path to the file holding the
client&rsquo;s private key.
Should be empty if mode is <code>ISTIO_MUTUAL</code>.</p></td><td>No</td></tr><tr id=ClientTLSSettings-ca_certificates><td><code>caCertificates</code></td><td><code>string</code></td><td><p>OPTIONAL: The path to the file containing certificate authority
certificates to use in verifying a presented server certificate. If
omitted, the proxy will not verify the server&rsquo;s certificate.
Should be empty if mode is <code>ISTIO_MUTUAL</code>.</p></td><td>No</td></tr><tr id=ClientTLSSettings-credential_name><td><code>credentialName</code></td><td><code>string</code></td><td><p>The name of the secret that holds the TLS certs for the
client including the CA certificates. This secret must exist in
the namespace of the proxy using the certificates.
An Opaque secret should contain the following keys and values:
<code>key: &lt;privateKey></code>, <code>cert: &lt;clientCert></code>, <code>cacert: &lt;CACertificate></code>,
<code>crl: &lt;certificateRevocationList></code>
Here CACertificate is used to verify the server certificate.
For mutual TLS, <code>cacert: &lt;CACertificate></code> can be provided in the
same secret or a separate secret named <code>&lt;secret>-cacert</code>.
A TLS secret for client certificates with an additional
<code>ca.crt</code> key for CA certificates and <code>ca.crl</code> key for
certificate revocation list(CRL) is also supported.
Only one of client certificates and CA certificate
or credentialName can be specified.</p><p><strong>NOTE:</strong> This field is applicable at sidecars only if
<code>DestinationRule</code> has a <code>workloadSelector</code> specified.
Otherwise the field will be applicable only at gateways, and
sidecars will continue to use the certificate paths.</p></td><td>No</td></tr><tr id=ClientTLSSettings-subject_alt_names><td><code>subjectAltNames</code></td><td><code>string[]</code></td><td><p>A list of alternate names to verify the subject identity in the
certificate. If specified, the proxy will verify that the server
certificate&rsquo;s subject alt name matches one of the specified values.
If specified, this list overrides the value of subject_alt_names
from the ServiceEntry. If unspecified, automatic validation of upstream
presented certificate for new upstream connections will be done based on the
downstream HTTP host/authority header, provided <code>VERIFY_CERTIFICATE_AT_CLIENT</code>
and <code>ENABLE_AUTO_SNI</code> environmental variables are set to <code>true</code>.</p></td><td>No</td></tr><tr id=ClientTLSSettings-sni><td><code>sni</code></td><td><code>string</code></td><td><p>SNI string to present to the server during TLS handshake.
If unspecified, SNI will be automatically set based on downstream HTTP
host/authority header for SIMPLE and MUTUAL TLS modes, provided <code>ENABLE_AUTO_SNI</code>
environmental variable is set to <code>true</code>.</p></td><td>No</td></tr><tr id=ClientTLSSettings-insecure_skip_verify><td><code>insecureSkipVerify</code></td><td><code><a href=https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#boolvalue>BoolValue</a></code></td><td><p>InsecureSkipVerify specifies whether the proxy should skip verifying the
CA signature and SAN for the server certificate corresponding to the host.
This flag should only be set if global CA signature verification is
enabled, <code>VerifyCertAtClient</code> environmental variable is set to <code>true</code>,
but no verification is desired for a specific host. If enabled with or
without <code>VerifyCertAtClient</code> enabled, verification of the CA signature and
SAN will be skipped.</p><p><code>InsecureSkipVerify</code> is <code>false</code> by default.
<code>VerifyCertAtClient</code> is <code>false</code> by default in Istio version 1.9 but will
be <code>true</code> by default in a later version where, going forward, it will be
enabled by default.</p></td><td>No</td></tr></tbody></table></section><h2 id=LocalityLoadBalancerSetting>LocalityLoadBalancerSetting</h2><section><p>Locality-weighted load balancing allows administrators to control the
distribution of traffic to endpoints based on the localities of where the
traffic originates and where it will terminate. These localities are
specified using arbitrary labels that designate a hierarchy of localities in
{region}/{zone}/{sub-zone} form. For additional detail refer to
<a href=https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/load_balancing/locality_weight>Locality Weight</a>
The following example shows how to setup locality weights mesh-wide.</p><p>Given a mesh with workloads and their service deployed to &ldquo;us-west/zone1/<em>&rdquo;
and &ldquo;us-west/zone2/</em>&rdquo;. This example specifies that when traffic accessing a
service originates from workloads in &ldquo;us-west/zone1/<em>&rdquo;, 80% of the traffic
will be sent to endpoints in &ldquo;us-west/zone1/</em>&rdquo;, i.e the same zone, and the
remaining 20% will go to endpoints in &ldquo;us-west/zone2/<em>&rdquo;. This setup is
intended to favor routing traffic to endpoints in the same locality.
A similar setting is specified for traffic originating in &ldquo;us-west/zone2/</em>&rdquo;.</p><pre><code class=language-yaml>  distribute:
    - from: us-west/zone1/*
      to:
        &quot;us-west/zone1/*&quot;: 80
        &quot;us-west/zone2/*&quot;: 20
    - from: us-west/zone2/*
      to:
        &quot;us-west/zone1/*&quot;: 20
        &quot;us-west/zone2/*&quot;: 80
</code></pre><p>If the goal of the operator is not to distribute load across zones and
regions but rather to restrict the regionality of failover to meet other
operational requirements an operator can set a &lsquo;failover&rsquo; policy instead of
a &lsquo;distribute&rsquo; policy.</p><p>The following example sets up a locality failover policy for regions.
Assume a service resides in zones within us-east, us-west & eu-west
this example specifies that when endpoints within us-east become unhealthy
traffic should failover to endpoints in any zone or sub-zone within eu-west
and similarly us-west should failover to us-east.</p><pre><code class=language-yaml> failover:
   - from: us-east
     to: eu-west
   - from: us-west
     to: us-east
</code></pre><p>Locality load balancing settings.</p><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=LocalityLoadBalancerSetting-distribute><td><code>distribute</code></td><td><code><a href=#LocalityLoadBalancerSetting-Distribute>Distribute[]</a></code></td><td><p>Optional: only one of distribute, failover or failoverPriority can be set.
Explicitly specify loadbalancing weight across different zones and geographical locations.
Refer to <a href=https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/load_balancing/locality_weight>Locality weighted load balancing</a>
If empty, the locality weight is set according to the endpoints number within it.</p></td><td>No</td></tr><tr id=LocalityLoadBalancerSetting-failover><td><code>failover</code></td><td><code><a href=#LocalityLoadBalancerSetting-Failover>Failover[]</a></code></td><td><p>Optional: only one of distribute, failover or failoverPriority can be set.
Explicitly specify the region traffic will land on when endpoints in local region becomes unhealthy.
Should be used together with OutlierDetection to detect unhealthy endpoints.
Note: if no OutlierDetection specified, this will not take effect.</p></td><td>No</td></tr><tr id=LocalityLoadBalancerSetting-failover_priority><td><code>failoverPriority</code></td><td><code>string[]</code></td><td><p>failoverPriority is an ordered list of labels used to sort endpoints to do priority based load balancing.
This is to support traffic failover across different groups of endpoints.
Two kinds of labels can be specified:</p><ul><li><p>Specify only label keys <code>[key1, key2, key3]</code>, istio would compare the label values of client with endpoints.
Suppose there are total N label keys <code>[key1, key2, key3, ...keyN]</code> specified:</p><ol><li>Endpoints matching all N labels with the client proxy have priority P(0) i.e. the highest priority.</li><li>Endpoints matching the first N-1 labels with the client proxy have priority P(1) i.e. second highest priority.</li><li>By extension of this logic, endpoints matching only the first label with the client proxy has priority P(N-1) i.e. second lowest priority.</li><li>All the other endpoints have priority P(N) i.e. lowest priority.</li></ol></li><li><p>Specify labels with key and value <code>[key1=value1, key2=value2, key3=value3]</code>, istio would compare the labels with endpoints.
Suppose there are total N labels <code>[key1=value1, key2=value2, key3=value3, ...keyN=valueN]</code> specified:</p><ol><li>Endpoints matching all N labels have priority P(0) i.e. the highest priority.</li><li>Endpoints matching the first N-1 labels have priority P(1) i.e. second highest priority.</li><li>By extension of this logic, endpoints matching only the first label has priority P(N-1) i.e. second lowest priority.</li><li>All the other endpoints have priority P(N) i.e. lowest priority.</li></ol></li></ul><p>Note: For a label to be considered for match, the previous labels must match, i.e. nth label would be considered matched only if first n-1 labels match.</p><p>It can be any label specified on both client and server workloads.
The following labels which have special semantic meaning are also supported:</p><ul><li><code>topology.istio.io/network</code> is used to match the network metadata of an endpoint, which can be specified by pod/namespace label <code>topology.istio.io/network</code>, sidecar env <code>ISTIO_META_NETWORK</code> or MeshNetworks.</li><li><code>topology.istio.io/cluster</code> is used to match the clusterID of an endpoint, which can be specified by pod label <code>topology.istio.io/cluster</code> or pod env <code>ISTIO_META_CLUSTER_ID</code>.</li><li><code>topology.kubernetes.io/region</code> is used to match the region metadata of an endpoint, which maps to Kubernetes node label <code>topology.kubernetes.io/region</code> or the deprecated label <code>failure-domain.beta.kubernetes.io/region</code>.</li><li><code>topology.kubernetes.io/zone</code> is used to match the zone metadata of an endpoint, which maps to Kubernetes node label <code>topology.kubernetes.io/zone</code> or the deprecated label <code>failure-domain.beta.kubernetes.io/zone</code>.</li><li><code>topology.istio.io/subzone</code> is used to match the subzone metadata of an endpoint, which maps to Istio node label <code>topology.istio.io/subzone</code>.</li></ul><p>The below topology config indicates the following priority levels:</p><pre><code class=language-yaml>failoverPriority:
- &quot;topology.istio.io/network&quot;
- &quot;topology.kubernetes.io/region&quot;
- &quot;topology.kubernetes.io/zone&quot;
- &quot;topology.istio.io/subzone&quot;
</code></pre><ol><li>endpoints match same [network, region, zone, subzone] label with the client proxy have the highest priority.</li><li>endpoints have same [network, region, zone] label but different [subzone] label with the client proxy have the second highest priority.</li><li>endpoints have same [network, region] label but different [zone] label with the client proxy have the third highest priority.</li><li>endpoints have same [network] but different [region] labels with the client proxy have the fourth highest priority.</li><li>all the other endpoints have the same lowest priority.</li></ol><p>Suppose a service associated endpoints reside in multi clusters, the below example represents:</p><ol><li>endpoints in <code>clusterA</code> and has <code>version=v1</code> label have P(0) priority.</li><li>endpoints not in <code>clusterA</code> but has <code>version=v1</code> label have P(1) priority.</li><li>all the other endpoints have P(2) priority.</li></ol><pre><code class=language-yaml>failoverPriority:
- &quot;version=v1&quot;
- &quot;topology.istio.io/cluster=clusterA&quot;
</code></pre><p>Optional: only one of distribute, failover or failoverPriority can be set.
And it should be used together with <code>OutlierDetection</code> to detect unhealthy endpoints, otherwise has no effect.</p></td><td>No</td></tr><tr id=LocalityLoadBalancerSetting-enabled><td><code>enabled</code></td><td><code><a href=https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#boolvalue>BoolValue</a></code></td><td><p>enable locality load balancing, this is DestinationRule-level and will override mesh wide settings in entirety.
e.g. true means that turn on locality load balancing for this DestinationRule no matter what mesh wide settings is.</p></td><td>No</td></tr></tbody></table></section><h2 id=TrafficPolicy-PortTrafficPolicy>TrafficPolicy.PortTrafficPolicy</h2><section><p>Traffic policies that apply to specific ports of the service</p><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=TrafficPolicy-PortTrafficPolicy-port><td><code>port</code></td><td><code><a href=/v1.19/zh/docs/reference/config/networking/virtual-service/#PortSelector>PortSelector</a></code></td><td><p>Specifies the number of a port on the destination service
on which this policy is being applied.</p></td><td>No</td></tr><tr id=TrafficPolicy-PortTrafficPolicy-load_balancer><td><code>loadBalancer</code></td><td><code><a href=#LoadBalancerSettings>LoadBalancerSettings</a></code></td><td><p>Settings controlling the load balancer algorithms.</p></td><td>No</td></tr><tr id=TrafficPolicy-PortTrafficPolicy-connection_pool><td><code>connectionPool</code></td><td><code><a href=#ConnectionPoolSettings>ConnectionPoolSettings</a></code></td><td><p>Settings controlling the volume of connections to an upstream service</p></td><td>No</td></tr><tr id=TrafficPolicy-PortTrafficPolicy-outlier_detection><td><code>outlierDetection</code></td><td><code><a href=#OutlierDetection>OutlierDetection</a></code></td><td><p>Settings controlling eviction of unhealthy hosts from the load balancing pool</p></td><td>No</td></tr><tr id=TrafficPolicy-PortTrafficPolicy-tls><td><code>tls</code></td><td><code><a href=#ClientTLSSettings>ClientTLSSettings</a></code></td><td><p>TLS related settings for connections to the upstream service.</p></td><td>No</td></tr></tbody></table></section><h2 id=TrafficPolicy-TunnelSettings>TrafficPolicy.TunnelSettings</h2><section><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=TrafficPolicy-TunnelSettings-protocol><td><code>protocol</code></td><td><code>string</code></td><td><p>Specifies which protocol to use for tunneling the downstream connection.
Supported protocols are:
CONNECT - uses HTTP CONNECT;
POST - uses HTTP POST.
CONNECT is used by default if not specified.
HTTP version for upstream requests is determined by the service protocol defined for the proxy.</p></td><td>No</td></tr><tr id=TrafficPolicy-TunnelSettings-target_host><td><code>targetHost</code></td><td><code>string</code></td><td><p>Specifies a host to which the downstream connection is tunneled.
Target host must be an FQDN or IP address.</p></td><td>Yes</td></tr><tr id=TrafficPolicy-TunnelSettings-target_port><td><code>targetPort</code></td><td><code>uint32</code></td><td><p>Specifies a port to which the downstream connection is tunneled.</p></td><td>Yes</td></tr></tbody></table></section><h2 id=LoadBalancerSettings-ConsistentHashLB>LoadBalancerSettings.ConsistentHashLB</h2><section><p>Consistent Hash-based load balancing can be used to provide soft
session affinity based on HTTP headers, cookies or other
properties. The affinity to a particular destination host may be
lost when one or more hosts are added/removed from the destination
service.</p><p>Note: consistent hashing is less reliable at maintaining affinity than common
&ldquo;sticky sessions&rdquo; implementations, which often encode a specific destination in
a cookie, ensuring affinity is maintained as long as the backend remains.
With consistent hash, the guarantees are weaker; any host addition or removal can
break affinity for <code>1/backends</code> requests.</p><p>Warning: consistent hashing depends on each proxy having a consistent view of endpoints.
This is not the case when locality load balancing is enabled. Locality load balancing
and consistent hash will only work together when all proxies are in the same locality,
or a high level load balancer handles locality affinity.</p><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=LoadBalancerSettings-ConsistentHashLB-http_header_name class="oneof oneof-start"><td><code>httpHeaderName</code></td><td><code>string (oneof)</code></td><td><p>Hash based on a specific HTTP header.</p></td><td>No</td></tr><tr id=LoadBalancerSettings-ConsistentHashLB-http_cookie class=oneof><td><code>httpCookie</code></td><td><code><a href=#LoadBalancerSettings-ConsistentHashLB-HTTPCookie>HTTPCookie (oneof)</a></code></td><td><p>Hash based on HTTP cookie.</p></td><td>No</td></tr><tr id=LoadBalancerSettings-ConsistentHashLB-use_source_ip class=oneof><td><code>useSourceIp</code></td><td><code>bool (oneof)</code></td><td><p>Hash based on the source IP address.
This is applicable for both TCP and HTTP connections.</p></td><td>No</td></tr><tr id=LoadBalancerSettings-ConsistentHashLB-http_query_parameter_name class=oneof><td><code>httpQueryParameterName</code></td><td><code>string (oneof)</code></td><td><p>Hash based on a specific HTTP query parameter.</p></td><td>No</td></tr><tr id=LoadBalancerSettings-ConsistentHashLB-ring_hash class="oneof oneof-start"><td><code>ringHash</code></td><td><code><a href=#LoadBalancerSettings-ConsistentHashLB-RingHash>RingHash (oneof)</a></code></td><td><p>The ring/modulo hash load balancer implements consistent hashing to backend hosts.</p></td><td>No</td></tr><tr id=LoadBalancerSettings-ConsistentHashLB-maglev class=oneof><td><code>maglev</code></td><td><code><a href=#LoadBalancerSettings-ConsistentHashLB-MagLev>MagLev (oneof)</a></code></td><td><p>The Maglev load balancer implements consistent hashing to backend hosts.</p></td><td>No</td></tr><tr id=LoadBalancerSettings-ConsistentHashLB-minimum_ring_size class=deprecated><td><code>minimumRingSize</code></td><td><code>uint64</code></td><td><p>Deprecated. Use RingHash instead.</p></td><td>No</td></tr></tbody></table></section><h2 id=LoadBalancerSettings-ConsistentHashLB-RingHash>LoadBalancerSettings.ConsistentHashLB.RingHash</h2><section><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=LoadBalancerSettings-ConsistentHashLB-RingHash-minimum_ring_size><td><code>minimumRingSize</code></td><td><code>uint64</code></td><td><p>The minimum number of virtual nodes to use for the hash
ring. Defaults to 1024. Larger ring sizes result in more granular
load distributions. If the number of hosts in the load balancing
pool is larger than the ring size, each host will be assigned a
single virtual node.</p></td><td>No</td></tr></tbody></table></section><h2 id=LoadBalancerSettings-ConsistentHashLB-MagLev>LoadBalancerSettings.ConsistentHashLB.MagLev</h2><section><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=LoadBalancerSettings-ConsistentHashLB-MagLev-table_size><td><code>tableSize</code></td><td><code>uint64</code></td><td><p>The table size for Maglev hashing. This helps in controlling the
disruption when the backend hosts change.
Increasing the table size reduces the amount of disruption.</p></td><td>No</td></tr></tbody></table></section><h2 id=LoadBalancerSettings-ConsistentHashLB-HTTPCookie>LoadBalancerSettings.ConsistentHashLB.HTTPCookie</h2><section><p>Describes a HTTP cookie that will be used as the hash key for the
Consistent Hash load balancer. If the cookie is not present, it will
be generated.</p><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=LoadBalancerSettings-ConsistentHashLB-HTTPCookie-name><td><code>name</code></td><td><code>string</code></td><td><p>Name of the cookie.</p></td><td>Yes</td></tr><tr id=LoadBalancerSettings-ConsistentHashLB-HTTPCookie-path><td><code>path</code></td><td><code>string</code></td><td><p>Path to set for the cookie.</p></td><td>No</td></tr><tr id=LoadBalancerSettings-ConsistentHashLB-HTTPCookie-ttl><td><code>ttl</code></td><td><code><a href=https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration>Duration</a></code></td><td><p>Lifetime of the cookie.</p></td><td>Yes</td></tr></tbody></table></section><h2 id=ConnectionPoolSettings-TCPSettings>ConnectionPoolSettings.TCPSettings</h2><section><p>Settings common to both HTTP and TCP upstream connections.</p><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=ConnectionPoolSettings-TCPSettings-max_connections><td><code>maxConnections</code></td><td><code>int32</code></td><td><p>Maximum number of HTTP1 /TCP connections to a destination host. Default 2^32-1.</p></td><td>No</td></tr><tr id=ConnectionPoolSettings-TCPSettings-connect_timeout><td><code>connectTimeout</code></td><td><code><a href=https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration>Duration</a></code></td><td><p>TCP connection timeout. format:
1h/1m/1s/1ms. MUST BE >=1ms. Default is 10s.</p></td><td>No</td></tr><tr id=ConnectionPoolSettings-TCPSettings-tcp_keepalive><td><code>tcpKeepalive</code></td><td><code><a href=#ConnectionPoolSettings-TCPSettings-TcpKeepalive>TcpKeepalive</a></code></td><td><p>If set then set SO_KEEPALIVE on the socket to enable TCP Keepalives.</p></td><td>No</td></tr><tr id=ConnectionPoolSettings-TCPSettings-max_connection_duration><td><code>maxConnectionDuration</code></td><td><code><a href=https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration>Duration</a></code></td><td><p>The maximum duration of a connection. The duration is defined as the period since a connection
was established. If not set, there is no max duration. When max_connection_duration
is reached the connection will be closed. Duration must be at least 1ms.</p></td><td>No</td></tr></tbody></table></section><h2 id=ConnectionPoolSettings-HTTPSettings>ConnectionPoolSettings.HTTPSettings</h2><section><p>Settings applicable to HTTP1.1/HTTP2/GRPC connections.</p><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=ConnectionPoolSettings-HTTPSettings-http1_max_pending_requests><td><code>http1MaxPendingRequests</code></td><td><code>int32</code></td><td><p>Maximum number of requests that will be queued while waiting for
a ready connection pool connection. Default 2^32-1.
Refer to <a href=https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/circuit_breaking>https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/circuit_breaking</a>
under which conditions a new connection is created for HTTP2.
Please note that this is applicable to both HTTP/1.1 and HTTP2.</p></td><td>No</td></tr><tr id=ConnectionPoolSettings-HTTPSettings-http2_max_requests><td><code>http2MaxRequests</code></td><td><code>int32</code></td><td><p>Maximum number of active requests to a destination. Default 2^32-1.
Please note that this is applicable to both HTTP/1.1 and HTTP2.</p></td><td>No</td></tr><tr id=ConnectionPoolSettings-HTTPSettings-max_requests_per_connection><td><code>maxRequestsPerConnection</code></td><td><code>int32</code></td><td><p>Maximum number of requests per connection to a backend. Setting this
parameter to 1 disables keep alive. Default 0, meaning &ldquo;unlimited&rdquo;,
up to 2^29.</p></td><td>No</td></tr><tr id=ConnectionPoolSettings-HTTPSettings-max_retries><td><code>maxRetries</code></td><td><code>int32</code></td><td><p>Maximum number of retries that can be outstanding to all hosts in a
cluster at a given time. Defaults to 2^32-1.</p></td><td>No</td></tr><tr id=ConnectionPoolSettings-HTTPSettings-idle_timeout><td><code>idleTimeout</code></td><td><code><a href=https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration>Duration</a></code></td><td><p>The idle timeout for upstream connection pool connections. The idle timeout
is defined as the period in which there are no active requests.
If not set, the default is 1 hour. When the idle timeout is reached,
the connection will be closed. If the connection is an HTTP/2
connection a drain sequence will occur prior to closing the connection.
Note that request based timeouts mean that HTTP/2 PINGs will not
keep the connection alive. Applies to both HTTP1.1 and HTTP2 connections.</p></td><td>No</td></tr><tr id=ConnectionPoolSettings-HTTPSettings-h2_upgrade_policy><td><code>h2UpgradePolicy</code></td><td><code><a href=#ConnectionPoolSettings-HTTPSettings-H2UpgradePolicy>H2UpgradePolicy</a></code></td><td><p>Specify if http1.1 connection should be upgraded to http2 for the associated destination.</p></td><td>No</td></tr><tr id=ConnectionPoolSettings-HTTPSettings-use_client_protocol><td><code>useClientProtocol</code></td><td><code>bool</code></td><td><p>If set to true, client protocol will be preserved while initiating connection to backend.
Note that when this is set to true, h2_upgrade_policy will be ineffective i.e. the client
connections will not be upgraded to http2.</p></td><td>No</td></tr></tbody></table></section><h2 id=ConnectionPoolSettings-TCPSettings-TcpKeepalive>ConnectionPoolSettings.TCPSettings.TcpKeepalive</h2><section><p>TCP keepalive.</p><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=ConnectionPoolSettings-TCPSettings-TcpKeepalive-probes><td><code>probes</code></td><td><code>uint32</code></td><td><p>Maximum number of keepalive probes to send without response before
deciding the connection is dead. Default is to use the OS level configuration
(unless overridden, Linux defaults to 9.)</p></td><td>No</td></tr><tr id=ConnectionPoolSettings-TCPSettings-TcpKeepalive-time><td><code>time</code></td><td><code><a href=https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration>Duration</a></code></td><td><p>The time duration a connection needs to be idle before keep-alive
probes start being sent. Default is to use the OS level configuration
(unless overridden, Linux defaults to 7200s (ie 2 hours.)</p></td><td>No</td></tr><tr id=ConnectionPoolSettings-TCPSettings-TcpKeepalive-interval><td><code>interval</code></td><td><code><a href=https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#duration>Duration</a></code></td><td><p>The time duration between keep-alive probes.
Default is to use the OS level configuration
(unless overridden, Linux defaults to 75s.)</p></td><td>No</td></tr></tbody></table></section><h2 id=LocalityLoadBalancerSetting-Distribute>LocalityLoadBalancerSetting.Distribute</h2><section><p>Describes how traffic originating in the &lsquo;from&rsquo; zone or sub-zone is
distributed over a set of &rsquo;to&rsquo; zones. Syntax for specifying a zone is
{region}/{zone}/{sub-zone} and terminal wildcards are allowed on any
segment of the specification. Examples:</p><p><code>*</code> - matches all localities</p><p><code>us-west/*</code> - all zones and sub-zones within the us-west region</p><p><code>us-west/zone-1/*</code> - all sub-zones within us-west/zone-1</p><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=LocalityLoadBalancerSetting-Distribute-from><td><code>from</code></td><td><code>string</code></td><td><p>Originating locality, &lsquo;/&rsquo; separated, e.g. &lsquo;region/zone/sub_zone&rsquo;.</p></td><td>No</td></tr><tr id=LocalityLoadBalancerSetting-Distribute-to><td><code>to</code></td><td><code>map&lt;string,&nbsp;uint32></code></td><td><p>Map of upstream localities to traffic distribution weights. The sum of
all weights should be 100. Any locality not present will
receive no traffic.</p></td><td>No</td></tr></tbody></table></section><h2 id=LocalityLoadBalancerSetting-Failover>LocalityLoadBalancerSetting.Failover</h2><section><p>Specify the traffic failover policy across regions. Since zone and sub-zone
failover is supported by default this only needs to be specified for
regions when the operator needs to constrain traffic failover so that
the default behavior of failing over to any endpoint globally does not
apply. This is useful when failing over traffic across regions would not
improve service health or may need to be restricted for other reasons
like regulatory controls.</p><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=LocalityLoadBalancerSetting-Failover-from><td><code>from</code></td><td><code>string</code></td><td><p>Originating region.</p></td><td>No</td></tr><tr id=LocalityLoadBalancerSetting-Failover-to><td><code>to</code></td><td><code>string</code></td><td><p>Destination region the traffic will fail over to when endpoints in
the &lsquo;from&rsquo; region becomes unhealthy.</p></td><td>No</td></tr></tbody></table></section><h2 id=google-protobuf-UInt32Value>google.protobuf.UInt32Value</h2><section><p>Wrapper message for <code>uint32</code>.</p><p>The JSON representation for <code>UInt32Value</code> is JSON number.</p><table class=message-fields><thead><tr><th>Field</th><th>Type</th><th>Description</th><th>Required</th></tr></thead><tbody><tr id=google-protobuf-UInt32Value-value><td><code>value</code></td><td><code>uint32</code></td><td><p>The uint32 value.</p></td><td>No</td></tr></tbody></table></section><h2 id=LoadBalancerSettings-SimpleLB>LoadBalancerSettings.SimpleLB</h2><section><p>Standard load balancing algorithms that require no tuning.</p><table class=enum-values><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr id=LoadBalancerSettings-SimpleLB-UNSPECIFIED><td><code>UNSPECIFIED</code></td><td><p>No load balancing algorithm has been specified by the user. Istio
will select an appropriate default.</p></td></tr><tr id=LoadBalancerSettings-SimpleLB-RANDOM><td><code>RANDOM</code></td><td><p>The random load balancer selects a random healthy host. The random
load balancer generally performs better than round robin if no health
checking policy is configured.</p></td></tr><tr id=LoadBalancerSettings-SimpleLB-PASSTHROUGH><td><code>PASSTHROUGH</code></td><td><p>This option will forward the connection to the original IP address
requested by the caller without doing any form of load
balancing. This option must be used with care. It is meant for
advanced use cases. Refer to Original Destination load balancer in
Envoy for further details.</p></td></tr><tr id=LoadBalancerSettings-SimpleLB-ROUND_ROBIN><td><code>ROUND_ROBIN</code></td><td><p>A basic round robin load balancing policy. This is generally unsafe
for many scenarios (e.g. when endpoint weighting is used) as it can
overburden endpoints. In general, prefer to use LEAST_REQUEST as a
drop-in replacement for ROUND_ROBIN.</p></td></tr><tr id=LoadBalancerSettings-SimpleLB-LEAST_REQUEST><td><code>LEAST_REQUEST</code></td><td><p>The least request load balancer spreads load across endpoints, favoring
endpoints with the least outstanding requests. This is generally safer
and outperforms ROUND_ROBIN in nearly all cases. Prefer to use
LEAST_REQUEST as a drop-in replacement for ROUND_ROBIN.</p></td></tr><tr id=LoadBalancerSettings-SimpleLB-LEAST_CONN class=deprecated><td><code>LEAST_CONN</code></td><td><p>Deprecated. Use LEAST_REQUEST instead.</p></td></tr></tbody></table></section><h2 id=ConnectionPoolSettings-HTTPSettings-H2UpgradePolicy>ConnectionPoolSettings.HTTPSettings.H2UpgradePolicy</h2><section><p>Policy for upgrading http1.1 connections to http2.</p><table class=enum-values><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr id=ConnectionPoolSettings-HTTPSettings-H2UpgradePolicy-DEFAULT><td><code>DEFAULT</code></td><td><p>Use the global default.</p></td></tr><tr id=ConnectionPoolSettings-HTTPSettings-H2UpgradePolicy-DO_NOT_UPGRADE><td><code>DO_NOT_UPGRADE</code></td><td><p>Do not upgrade the connection to http2.
This opt-out option overrides the default.</p></td></tr><tr id=ConnectionPoolSettings-HTTPSettings-H2UpgradePolicy-UPGRADE><td><code>UPGRADE</code></td><td><p>Upgrade the connection to http2.
This opt-in option overrides the default.</p></td></tr></tbody></table></section><h2 id=ClientTLSSettings-TLSmode>ClientTLSSettings.TLSmode</h2><section><p>TLS connection mode</p><table class=enum-values><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr id=ClientTLSSettings-TLSmode-DISABLE><td><code>DISABLE</code></td><td><p>Do not setup a TLS connection to the upstream endpoint.</p></td></tr><tr id=ClientTLSSettings-TLSmode-SIMPLE><td><code>SIMPLE</code></td><td><p>Originate a TLS connection to the upstream endpoint.</p></td></tr><tr id=ClientTLSSettings-TLSmode-MUTUAL><td><code>MUTUAL</code></td><td><p>Secure connections to the upstream using mutual TLS by presenting
client certificates for authentication.</p></td></tr><tr id=ClientTLSSettings-TLSmode-ISTIO_MUTUAL><td><code>ISTIO_MUTUAL</code></td><td><p>Secure connections to the upstream using mutual TLS by presenting
client certificates for authentication.
Compared to Mutual mode, this mode uses certificates generated
automatically by Istio for mTLS authentication. When this mode is
used, all other fields in <code>ClientTLSSettings</code> should be empty.</p></td></tr></tbody></table></section></article><nav class=pagenav><div class=left></div><div class=right><a title="Customizing Envoy configuration generated by Istio." href=/v1.19/zh/docs/reference/config/networking/envoy-filter/ class=next-link>Envoy Filter<svg class="icon right-arrow"><use xlink:href="/v1.19/img/icons.svg#right-arrow"/></svg></a></div></nav><div id=feedback><div id=feedback-initial>这些信息有用吗？<br><button class="btn feedback" onclick='sendFeedback("zh",1)'>是的</button>
<button class="btn feedback" onclick='sendFeedback("zh",0)'>没有</button></div><div id=feedback-comment>您是否有更多建议和改进意见？<br><br><input id=feedback-textbox type=text placeholder=帮助我们进行改进... data-lang=zh></div><div id=feedback-thankyou>感谢您的反馈！</div></div><div id=endnotes-container aria-hidden=true><h2>链接</h2><ol id=endnotes></ol></div></div><div class=toc-container><nav class=toc aria-label="Table of Contents"><div id=toc><ol><li role=none aria-label=DestinationRule><a href=#DestinationRule>DestinationRule</a><li role=none aria-label=TrafficPolicy><a href=#TrafficPolicy>TrafficPolicy</a><li role=none aria-label=Subset><a href=#Subset>Subset</a><li role=none aria-label=LoadBalancerSettings><a href=#LoadBalancerSettings>LoadBalancerSettings</a><li role=none aria-label=ConnectionPoolSettings><a href=#ConnectionPoolSettings>ConnectionPoolSettings</a><li role=none aria-label=OutlierDetection><a href=#OutlierDetection>OutlierDetection</a><li role=none aria-label=ClientTLSSettings><a href=#ClientTLSSettings>ClientTLSSettings</a><li role=none aria-label=LocalityLoadBalancerSetting><a href=#LocalityLoadBalancerSetting>LocalityLoadBalancerSetting</a><li role=none aria-label=TrafficPolicy.PortTrafficPolicy><a href=#TrafficPolicy-PortTrafficPolicy>TrafficPolicy.PortTrafficPolicy</a><li role=none aria-label=TrafficPolicy.TunnelSettings><a href=#TrafficPolicy-TunnelSettings>TrafficPolicy.TunnelSettings</a><li role=none aria-label=LoadBalancerSettings.ConsistentHashLB><a href=#LoadBalancerSettings-ConsistentHashLB>LoadBalancerSettings.ConsistentHashLB</a><li role=none aria-label=LoadBalancerSettings.ConsistentHashLB.RingHash><a href=#LoadBalancerSettings-ConsistentHashLB-RingHash>LoadBalancerSettings.ConsistentHashLB.RingHash</a><li role=none aria-label=LoadBalancerSettings.ConsistentHashLB.MagLev><a href=#LoadBalancerSettings-ConsistentHashLB-MagLev>LoadBalancerSettings.ConsistentHashLB.MagLev</a><li role=none aria-label=LoadBalancerSettings.ConsistentHashLB.HTTPCookie><a href=#LoadBalancerSettings-ConsistentHashLB-HTTPCookie>LoadBalancerSettings.ConsistentHashLB.HTTPCookie</a><li role=none aria-label=ConnectionPoolSettings.TCPSettings><a href=#ConnectionPoolSettings-TCPSettings>ConnectionPoolSettings.TCPSettings</a><li role=none aria-label=ConnectionPoolSettings.HTTPSettings><a href=#ConnectionPoolSettings-HTTPSettings>ConnectionPoolSettings.HTTPSettings</a><li role=none aria-label=ConnectionPoolSettings.TCPSettings.TcpKeepalive><a href=#ConnectionPoolSettings-TCPSettings-TcpKeepalive>ConnectionPoolSettings.TCPSettings.TcpKeepalive</a><li role=none aria-label=LocalityLoadBalancerSetting.Distribute><a href=#LocalityLoadBalancerSetting-Distribute>LocalityLoadBalancerSetting.Distribute</a><li role=none aria-label=LocalityLoadBalancerSetting.Failover><a href=#LocalityLoadBalancerSetting-Failover>LocalityLoadBalancerSetting.Failover</a><li role=none aria-label=google.protobuf.UInt32Value><a href=#google-protobuf-UInt32Value>google.protobuf.UInt32Value</a><li role=none aria-label=LoadBalancerSettings.SimpleLB><a href=#LoadBalancerSettings-SimpleLB>LoadBalancerSettings.SimpleLB</a><li role=none aria-label=ConnectionPoolSettings.HTTPSettings.H2UpgradePolicy><a href=#ConnectionPoolSettings-HTTPSettings-H2UpgradePolicy>ConnectionPoolSettings.HTTPSettings.H2UpgradePolicy</a><li role=none aria-label=ClientTLSSettings.TLSmode><a href=#ClientTLSSettings-TLSmode>ClientTLSSettings.TLSmode</a></ol></div></nav></div></main><footer class=footer><div class="footer-wrapper container-l"><div class="user-links footer-links"><a class=channel title='Istio 的代码在 GitHub 上开发' href=https://github.com/istio/community aria-label=GitHub><svg class="icon github"><use xlink:href="/v1.19/img/icons.svg#github"/></svg></a><a class=channel title='如果您想深入了解 Istio 的技术细节，请查看我们日益完善的设计文档' href=https://groups.google.com/forum/#!forum/istio-team-drive-access aria-label="team drive"><svg class="icon drive"><use xlink:href="/v1.19/img/icons.svg#drive"/></svg></a><a class=channel title='在 Slack 上与 Istio 社区交互讨论开发问题（仅限邀请）' href=https://slack.istio.io aria-label=slack><svg class="icon slack"><use xlink:href="/v1.19/img/icons.svg#slack"/></svg></a><a class=channel title='Stack Overflow 中列举了针对实际问题以及部署、配置和使用 Istio 的各项回答' href=https://stackoverflow.com/questions/tagged/istio aria-label="Stack Overflow"><svg class="icon stackoverflow"><use xlink:href="/v1.19/img/icons.svg#stackoverflow"/></svg></a><a class=channel title='关注我们的 Twitter 来获取最新信息' href=https://twitter.com/IstioMesh aria-label=Twitter><svg class="icon twitter"><use xlink:href="/v1.19/img/icons.svg#twitter"/></svg></a></div><hr class=footer-separator role=separator><div class="info footer-info"><a class=logo href=/v1.19/zh/ aria-label=logotype><svg xmlns="http://www.w3.org/2000/svg" width="128" height="60" viewBox="0 0 128 60"><path d="M58.434 48.823A.441.441.0 0158.3 48.497V22.583a.444.444.0 01.134-.326.446.446.0 01.327-.134h3.527a.447.447.0 01.325.134.447.447.0 01.134.326v25.914a.443.443.0 01-.134.326.444.444.0 01-.325.134h-3.527a.444.444.0 01-.327-.134z"/><path d="m70.969 48.477a6.556 6.556.0 01-2.818-1.955 4.338 4.338.0 01-1-2.78v-.345a.443.443.0 01.134-.326.444.444.0 01.326-.135h3.374a.444.444.0 01.326.135.445.445.0 01.134.326v.077a2.014 2.014.0 001.054 1.667 4.672 4.672.0 002.664.709 4.446 4.446.0 002.492-.633 1.862 1.862.0 00.958-1.591 1.426 1.426.0 00-.786-1.322 12.7 12.7.0 00-2.549-.939l-1.457-.46a21.526 21.526.0 01-3.3-1.227 6.57 6.57.0 01-2.262-1.783 4.435 4.435.0 01-.92-2.894 5.081 5.081.0 012.109-4.275 8.993 8.993.0 015.558-1.591 10.445 10.445.0 014.1.748 6.3 6.3.0 012.722 2.07 5 5 0 01.958 3.009.441.441.0 01-.134.326.441.441.0 01-.325.134h-3.258a.441.441.0 01-.326-.134.443.443.0 01-.134-.326 1.974 1.974.0 00-.978-1.667 4.647 4.647.0 00-2.665-.671 4.741 4.741.0 00-2.435.556 1.724 1.724.0 00-.938 1.553 1.512 1.512.0 00.9 1.4 15.875 15.875.0 003.01 1.055l.843.229a27.368 27.368.0 013.412 1.246 6.67 6.67.0 012.338 1.763 4.387 4.387.0 01.958 2.933 4.988 4.988.0 01-2.146 4.275 9.543 9.543.0 01-5.712 1.552 11.626 11.626.0 01-4.227-.709z"/><path d="m97.039 32.837a.443.443.0 01-.326.135h-3.911a.169.169.0 00-.191.192v9.239a2.951 2.951.0 00.632 2.108 2.7 2.7.0 002.013.652h1.15a.444.444.0 01.325.134.441.441.0 01.134.326v2.875a.471.471.0 01-.459.5l-1.994.039a8 8 0 01-4.524-1.035q-1.495-1.035-1.533-3.91V33.166A.17.17.0 0088.164 32.974H85.978A.441.441.0 0185.652 32.839.441.441.0 0185.518 32.513V29.83a.441.441.0 01.134-.326.444.444.0 01.326-.135h2.186a.169.169.0 00.191-.192v-4.485a.438.438.0 01.134-.326.44.44.0 01.325-.134h3.336a.443.443.0 01.325.134.442.442.0 01.135.326v4.485a.169.169.0 00.191.192h3.911a.446.446.0 01.326.135.446.446.0 01.134.326v2.683a.446.446.0 01-.133.324z"/><path d="m101.694 25.917a2.645 2.645.0 01-.767-1.955 2.65 2.65.0 01.767-1.955 2.65 2.65.0 011.955-.767 2.65 2.65.0 011.955.767 2.652 2.652.0 01.767 1.955 2.647 2.647.0 01-.767 1.955 2.646 2.646.0 01-1.955.767 2.645 2.645.0 01-1.955-.767zm-.211 22.906a.441.441.0 01-.134-.326V29.79a.444.444.0 01.134-.326.446.446.0 01.326-.134h3.527a.446.446.0 01.326.134.445.445.0 01.134.326v18.707a.443.443.0 01-.134.326.443.443.0 01-.326.134h-3.527a.443.443.0 01-.326-.134z"/><path d="m114.019 47.734a8.1 8.1.0 01-3.047-4.255 14.439 14.439.0 01-.652-4.37 14.3 14.3.0 01.614-4.371A7.869 7.869.0 01114 30.56a9.072 9.072.0 015.252-1.5 8.543 8.543.0 015.041 1.5 7.985 7.985.0 013.009 4.14 12.439 12.439.0 01.69 4.37 13.793 13.793.0 01-.651 4.37 8.255 8.255.0 01-3.028 4.275 8.475 8.475.0 01-5.1 1.553 8.754 8.754.0 01-5.194-1.534zm7.629-3.1a4.536 4.536.0 001.476-2.262 11.335 11.335.0 00.383-3.221 10.618 10.618.0 00-.383-3.22 4.169 4.169.0 00-1.457-2.243 4.066 4.066.0 00-2.531-.785 3.942 3.942.0 00-2.453.785 4.376 4.376.0 00-1.5 2.243 11.839 11.839.0 00-.383 3.22 11.84 11.84.0 00.383 3.221 4.222 4.222.0 001.476 2.262 4.075 4.075.0 002.549.8 3.8 3.8.0 002.44-.809z"/><path d="m15.105 32.057v15.565a.059.059.0 01-.049.059L.069 50.25A.06.06.0 01.005 50.167l14.987-33.47a.06.06.0 01.114.025z"/><path d="m17.631 23.087v24.6a.06.06.0 00.053.059l22.449 2.507a.06.06.0 00.061-.084L17.745.032a.06.06.0 00-.114.024z"/><path d="m39.961 52.548-24.833 7.45a.062.062.0 01-.043.0L.079 52.548a.059.059.0 01.026-.113h39.839a.06.06.0 01.017.113z"/></svg></a><div class=footer-languages><a tabindex=-1 lang=en id=switch-lang-en class=footer-languages-item>English</a>
<a tabindex=-1 lang=zh id=switch-lang-zh class="footer-languages-item active"><svg class="icon tick"><use xlink:href="/v1.19/img/icons.svg#tick"/></svg>中文</a></div></div><ul class=footer-policies><li class=footer-policies-item><a class=footer-policies-link href=https://www.linuxfoundation.org/legal/terms>条款</a> |
<a class=footer-policies-link href=https://www.linuxfoundation.org/legal/privacy-policy>隐私政策</a> |
<a class=disabled title="这是一个自动生成的文件，要修改其中的内容，请修改 https://github.com/istio/api 仓库中的源码。">在 GitHub 上编辑此页</a></li></ul><div class=footer-base><span class=footer-base-copyright>&copy; 2023 the Istio Authors.</span>
<span class=footer-base-version>部分内容可能滞后于英文版本，同步工作正在进行中<br>版本
Istio 归档
1.19.4</span><ul class=footer-base-releases><li class=footer-base-releases-item><a tabindex=-1 class=footer-base-releases-link onclick='return navigateToUrlOrRoot("https://istio.io/docs/reference/config/networking/destination-rule/"),!1'>当前版本</a></li><li class=footer-base-releases-item><a tabindex=-1 class=footer-base-releases-link onclick='return navigateToUrlOrRoot("https://preliminary.istio.io/docs/reference/config/networking/destination-rule/"),!1'>下个版本</a></li><li class=footer-base-releases-item><a tabindex=-1 class=footer-base-releases-link href=https://istio.io/archive>旧版本</a></li></ul></div></div></footer><div id=scroll-to-top-container aria-hidden=true><button id=scroll-to-top title=回到顶部 tabindex=-1><svg class="icon top"><use xlink:href="/v1.19/img/icons.svg#top"/></svg></button></div></body></html>