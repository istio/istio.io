<!doctype html><html lang=en itemscope itemtype=https://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=theme-color content="#466BB0"><meta name=title content="ISTIO-SECURITY-2021-008"><meta name=description content="Multiple CVEs related to AuthorizationPolicy, EnvoyFilter and Envoy."><meta name=keywords content="microservices,services,mesh,CVE"><meta property="og:title" content="ISTIO-SECURITY-2021-008"><meta property="og:type" content="website"><meta property="og:description" content="Multiple CVEs related to AuthorizationPolicy, EnvoyFilter and Envoy."><meta property="og:url" content="/v1.11/news/security/istio-security-2021-008/"><meta property="og:image" content="https://raw.githubusercontent.com/istio/istio.io/master/static/img/istio-whitelogo-bluebackground-framed.svg"><meta property="og:image:alt" content="Istio Logo"><meta property="og:image:width" content="1024"><meta property="og:image:height" content="1024"><meta property="og:site_name" content="Istio"><meta name=twitter:card content="summary"><meta name=twitter:site content="@IstioMesh"><title>Istioldie 1.11 / ISTIO-SECURITY-2021-008</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98480406-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-98480406-2');</script><link rel=alternate type=application/rss+xml title="Istio Blog" href=/v1.11/blog/feed.xml><link rel=alternate type=application/rss+xml title="Istio News" href=/v1.11/news/feed.xml><link rel=alternate type=application/rss+xml title="Istio Blog and News" href=/v1.11/feed.xml><link rel="shortcut icon" href=/v1.11/favicons/favicon.ico><link rel=apple-touch-icon href=/v1.11/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/v1.11/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/v1.11/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/v1.11/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/v1.11/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/v1.11/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/v1.11/favicons/android-96x96.png sizes=96xW96><link rel=icon type=image/png href=/v1.11/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/v1.11/favicons/android-192x192.png sizes=192x192><link rel=mask-icon href=/v1.11/favicons/safari-pinned-tab.svg color=#466bb0><link rel=manifest href=/v1.11/manifest.json><meta name=apple-mobile-web-app-title content="Istio"><meta name=application-name content="Istio"><meta name=msapplication-config content="/browserconfig.xml"><meta name=msapplication-TileColor content="#466BB0"><meta name=theme-color content="#466BB0"><link rel=stylesheet href=/v1.11/css/all.css><link rel=preconnect href=https://fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,400;0,500;0,600;0,700;1,400;1,600&display=swap"><script src=/v1.11/js/themes_init.min.js></script></head><body class="language-unknown archive-site"><script>const branchName="release-1.11";const docTitle="ISTIO-SECURITY-2021-008";const iconFile="\/v1.11/img/icons.svg";const buttonCopy='Copy to clipboard';const buttonPrint='Print';const buttonDownload='Download';</script><script src="https://www.google.com/cse/brand?form=search-form" defer></script><script src=/v1.11/js/all.min.js data-manual defer></script><header class=main-navigation><nav class="main-navigation-wrapper container-l"><div class=main-navigation-header><a id=brand href=/v1.11/><span class=logo><svg xmlns="http://www.w3.org/2000/svg" width="128" height="60" viewBox="0 0 128 60"><path d="M58.434 48.823A.441.441.0 0158.3 48.497V22.583a.444.444.0 01.134-.326.446.446.0 01.327-.134h3.527a.447.447.0 01.325.134.447.447.0 01.134.326v25.914a.443.443.0 01-.134.326.444.444.0 01-.325.134h-3.527a.444.444.0 01-.327-.134z"/><path d="m70.969 48.477a6.556 6.556.0 01-2.818-1.955 4.338 4.338.0 01-1-2.78v-.345a.443.443.0 01.134-.326.444.444.0 01.326-.135h3.374a.444.444.0 01.326.135.445.445.0 01.134.326v.077a2.014 2.014.0 001.054 1.667 4.672 4.672.0 002.664.709 4.446 4.446.0 002.492-.633 1.862 1.862.0 00.958-1.591 1.426 1.426.0 00-.786-1.322 12.7 12.7.0 00-2.549-.939l-1.457-.46a21.526 21.526.0 01-3.3-1.227 6.57 6.57.0 01-2.262-1.783 4.435 4.435.0 01-.92-2.894 5.081 5.081.0 012.109-4.275 8.993 8.993.0 015.558-1.591 10.445 10.445.0 014.1.748 6.3 6.3.0 012.722 2.07 5 5 0 01.958 3.009.441.441.0 01-.134.326.441.441.0 01-.325.134h-3.258a.441.441.0 01-.326-.134.443.443.0 01-.134-.326 1.974 1.974.0 00-.978-1.667 4.647 4.647.0 00-2.665-.671 4.741 4.741.0 00-2.435.556 1.724 1.724.0 00-.938 1.553 1.512 1.512.0 00.9 1.4 15.875 15.875.0 003.01 1.055l.843.229a27.368 27.368.0 013.412 1.246 6.67 6.67.0 012.338 1.763 4.387 4.387.0 01.958 2.933 4.988 4.988.0 01-2.146 4.275 9.543 9.543.0 01-5.712 1.552 11.626 11.626.0 01-4.227-.709z"/><path d="m97.039 32.837a.443.443.0 01-.326.135h-3.911a.169.169.0 00-.191.192v9.239a2.951 2.951.0 00.632 2.108 2.7 2.7.0 002.013.652h1.15a.444.444.0 01.325.134.441.441.0 01.134.326v2.875a.471.471.0 01-.459.5l-1.994.039a8 8 0 01-4.524-1.035q-1.495-1.035-1.533-3.91V33.166A.17.17.0 0088.164 32.974H85.978A.441.441.0 0185.652 32.839.441.441.0 0185.518 32.513V29.83a.441.441.0 01.134-.326.444.444.0 01.326-.135h2.186a.169.169.0 00.191-.192v-4.485a.438.438.0 01.134-.326.44.44.0 01.325-.134h3.336a.443.443.0 01.325.134.442.442.0 01.135.326v4.485a.169.169.0 00.191.192h3.911a.446.446.0 01.326.135.446.446.0 01.134.326v2.683a.446.446.0 01-.133.324z"/><path d="m101.694 25.917a2.645 2.645.0 01-.767-1.955 2.65 2.65.0 01.767-1.955 2.65 2.65.0 011.955-.767 2.65 2.65.0 011.955.767 2.652 2.652.0 01.767 1.955 2.647 2.647.0 01-.767 1.955 2.646 2.646.0 01-1.955.767 2.645 2.645.0 01-1.955-.767zm-.211 22.906a.441.441.0 01-.134-.326V29.79a.444.444.0 01.134-.326.446.446.0 01.326-.134h3.527a.446.446.0 01.326.134.445.445.0 01.134.326v18.707a.443.443.0 01-.134.326.443.443.0 01-.326.134h-3.527a.443.443.0 01-.326-.134z"/><path d="m114.019 47.734a8.1 8.1.0 01-3.047-4.255 14.439 14.439.0 01-.652-4.37 14.3 14.3.0 01.614-4.371 7.869 7.869.0 013.066-4.178 9.072 9.072.0 015.252-1.5 8.543 8.543.0 015.041 1.5 7.985 7.985.0 013.009 4.14 12.439 12.439.0 01.69 4.37 13.793 13.793.0 01-.651 4.37 8.255 8.255.0 01-3.028 4.275 8.475 8.475.0 01-5.1 1.553 8.754 8.754.0 01-5.194-1.534zm7.629-3.1a4.536 4.536.0 001.476-2.262 11.335 11.335.0 00.383-3.221 10.618 10.618.0 00-.383-3.22 4.169 4.169.0 00-1.457-2.243 4.066 4.066.0 00-2.531-.785 3.942 3.942.0 00-2.453.785 4.376 4.376.0 00-1.5 2.243 11.839 11.839.0 00-.383 3.22 11.84 11.84.0 00.383 3.221 4.222 4.222.0 001.476 2.262 4.075 4.075.0 002.549.8 3.8 3.8.0 002.44-.809z"/><path d="m15.105 32.057v15.565a.059.059.0 01-.049.059L.069 50.25A.06.06.0 01.005 50.167l14.987-33.47a.06.06.0 01.114.025z"/><path d="m17.631 23.087v24.6a.06.06.0 00.053.059l22.449 2.507a.06.06.0 00.061-.084L17.745.032a.06.06.0 00-.114.024z"/><path d="m39.961 52.548-24.833 7.45a.062.062.0 01-.043.0L.079 52.548a.059.059.0 01.026-.113h39.839a.06.06.0 01.017.113z"/></svg></span></a><button id=hamburger class=main-navigation-toggle aria-label="Open navigation"><svg class="icon menu-hamburger"><use xlink:href="/v1.11/img/icons.svg#menu-hamburger"/></svg></button>
<button id=menu-close class=main-navigation-toggle aria-label="Close navigation"><svg class="icon menu-close"><use xlink:href="/v1.11/img/icons.svg#menu-close"/></svg></button></div><div id=header-links class=main-navigation-links-wrapper><ul class=main-navigation-links><li class=main-navigation-links-item><a class="main-navigation-links-link has-dropdown"><span>About</span><svg class="icon dropdown-arrow"><use xlink:href="/v1.11/img/icons.svg#dropdown-arrow"/></svg></a><ul class=main-navigation-links-dropdown><li class=main-navigation-links-dropdown-item><a href=/v1.11/about/service-mesh class=main-navigation-links-link>Service mesh</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.11/about/solutions class=main-navigation-links-link>Solutions</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.11/about/case-studies class=main-navigation-links-link>Case studies</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.11/about/ecosystem class=main-navigation-links-link>Ecosystem</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.11/about/deployment class=main-navigation-links-link>Deployment</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.11/about/faq class=main-navigation-links-link>FAQ</a></li></ul></li><li class=main-navigation-links-item><a href=/v1.11/blog/ class=main-navigation-links-link><span>Blog</span></a></li><li class=main-navigation-links-item><a href=/v1.11/news/ class=main-navigation-links-link><span>News</span></a></li><li class=main-navigation-links-item><a href=/v1.11/get-involved/ class=main-navigation-links-link><span>Get involved</span></a></li><li class=main-navigation-links-item><a href=/v1.11/docs/ class=main-navigation-links-link><span>Documentation</span></a></li></ul><div class=main-navigation-footer><button id=search-show class=search-show title="Search this site" aria-label=Search><svg class="icon magnifier"><use xlink:href="/v1.11/img/icons.svg#magnifier"/></svg></button>
<a href=/v1.11/docs/setup/getting-started class="btn btn--primary" id=try-istio>Try Istio</a></div></div><form id=search-form class=search name=cse role=search><input type=hidden name=cx value=002184991200833970123:iwwf17ikgf4>
<input type=hidden name=ie value=utf-8>
<input type=hidden name=hl value=en>
<input type=hidden id=search-page-url value=/search>
<input id=search-textbox class="search-textbox form-control" name=q type=search aria-label="Search this site" placeholder=Search>
<button id=search-close title="Cancel search" type=reset aria-label="Cancel search"><svg class="icon menu-close"><use xlink:href="/v1.11/img/icons.svg#menu-close"/></svg></button></form></nav></header><div class=banner-container><a href=/v1.11/docs/releases/supported-releases#support-status-of-istio-releases class=banner data-title="Kubernetes 1.22 Release statement-2021-08-04 00:00:00 +0000 UTC" data-period-start=1628035200000 data-period-end=1643587200000 data-max-impressions=8 data-timeout=120><div class=content><p>Kubernetes 1.22 will only work with Istio 1.10 and above. Click here for the supported version table.</p></div><div class=frame></div></a></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><div class=header-content><h1>ISTIO-SECURITY-2021-008</h1><p>Multiple CVEs related to AuthorizationPolicy, EnvoyFilter and Envoy.</p></div><p class=post-author>Aug 24, 2021</p><div><table><thead><tr><th colspan=2>Disclosure Details</th></tr></thead><tbody><tr><td>CVE(s)</td><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-32777">CVE-2021-32777</a><br><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-32781">CVE-2021-32781</a><br><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-32778">CVE-2021-32778</a><br><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-32780">CVE-2021-32780</a><br><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-39155">CVE-2021-39155</a><br><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-39156">CVE-2021-39156</a><br></td></tr><tr><td>CVSS Impact Score</td><td>8.6 <a href="https://nvd.nist.gov/vuln-metrics/cvss/v3-calculator?vector=AV%3aL%2fAC%3aL%2fPR%3aN%2fUI%3aR%2fS%3aC%2fC%3aH%2fI%3aH%2fA%3aH">AV:L/AC:L/PR:N/UI:R/S:C/C:H/I:H/A:H</a></td></tr><tr><td>Affected Releases</td><td>All releases prior to 1.9.8<br>1.10.0 to 1.10.3<br>1.11.0<br></td></tr></tbody></table><h2 id=cves>CVEs</h2><p>Envoy, and subsequently Istio, is vulnerable to six newly discovered vulnerabilities
(note that Envoy&rsquo;s CVE-2021-32779 is merged with Istio&rsquo;s CVE-2021-39156):</p><h3 id=cve-2021-39156-cve-2021-32779>CVE-2021-39156 (CVE-2021-32779)</h3><p>Istio contains a remotely exploitable vulnerability, <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-39156">CVE-2021-39156</a>,
where an HTTP request with a fragment (a section in the end of a URI that begins with a <code>#</code> character) in the URI path could bypass Istio&rsquo;s URI path-based authorization policies.
For instance, an Istio authorization policy <a href=/v1.11/docs/reference/config/security/authorization-policy/#AuthorizationPolicy-Action>denies</a> requests sent to the URI path <code>/user/profile</code>.
In the vulnerable versions, a request with URI path <code>/user/profile#section1</code> bypasses the deny policy and routes to the backend (with the normalized URI path <code>/user/profile%23section1</code>), possibly leading to a security incident.</p><p>The fix depends on a fix in Envoy, which is associated with <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-32779">CVE-2021-32779</a>.</p><ul><li>CVSS Score: 8.1 <a href="https://nvd.nist.gov/vuln-metrics/cvss/v3-calculator?vector=AV:N/AC:L/PR:N/UI:R/S:U/C:H/I:H/A:N&version=3.1">AV:N/AC:L/PR:N/UI:R/S:U/C:H/I:H/A:N</a></li></ul><p>You are impacted by this vulnerability if:</p><ul><li>You use Istio patch versions earlier than 1.9.8, 1.10.4 or 1.11.1.</li><li>You use authorization policies with
<a href=/v1.11/docs/reference/config/security/authorization-policy/#AuthorizationPolicy-Action>DENY actions</a> and
<a href=/v1.11/docs/reference/config/security/authorization-policy/#Operation><code>operation.paths</code></a>, or
<a href=/v1.11/docs/reference/config/security/authorization-policy/#AuthorizationPolicy-Action>ALLOW actions</a> and
<a href=/v1.11/docs/reference/config/security/authorization-policy/#Operation><code>operation.notPaths</code></a>.</li></ul><p>With the <a href=#mitigation>mitigation</a>,
the fragment part of the request’s URI is removed before the authorization and routing.
This prevents a request with a fragment in its URI from bypassing authorization policies which are based on the URI without the fragment part.</p><p>To opt-out from the new behavior in the <a href=#mitigation>mitigation</a>,
the fragment section in the URI will be kept. You can configure your installation as follows.</p><div><aside class="callout warning"><div class=type><svg class="large-icon"><use xlink:href="/v1.11/img/icons.svg#callout-warning"/></svg></div><div class=content>Disabling the new behavior will normalize your paths as described above and is considered unsafe. Ensure that you have accommodated for this in any security policies before using this option.</div></aside></div><pre><code class=language-yaml data-expandlinks=true data-repo=istio>apiVersion: install.istio.io/v1alpha1
kind: IstioOperator
metadata:
  name: opt-out-fragment-cve-fix
  namespace: istio-system
spec:
  meshConfig:
    defaultConfig:
      proxyMetadata:
        HTTP_STRIP_FRAGMENT_FROM_PATH_UNSAFE_IF_DISABLED: &#34;false&#34;
</code></pre><h3 id=cve-2021-39155>CVE-2021-39155</h3><p>Istio contains a remotely exploitable vulnerability where an HTTP request could potentially bypass an Istio authorization policy when using rules based on <code>hosts</code> or <code>notHosts</code>.
In the vulnerable versions, the Istio authorization policy compares the HTTP <code>Host</code> or <code>:authority</code> headers in a case-sensitive manner,
which is inconsistent with <a href=https://datatracker.ietf.org/doc/html/rfc4343>RFC 4343</a>. For example, the user could have an authorization policy that rejects requests with host <code>secret.com</code>,
but the attacker can bypass this by sending the request with hostname <code>Secret.com</code>.
The routing flow routes the traffic to the backend for <code>secret.com</code> which is a policy violation.</p><p>See <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-39155">CVE-2021-39155</a> for more information.</p><ul><li>CVSS Score: 8.3 <a href="https://nvd.nist.gov/vuln-metrics/cvss/v3-calculator?vector=AV:N/AC:L/PR:N/UI:R/S:U/C:H/I:H/A:L&version=3.1">AV:N/AC:L/PR:N/UI:R/S:U/C:H/I:H/A:L</a></li></ul><p>You are impacted by this vulnerability if:</p><ul><li>You use Istio patch versions earlier than 1.9.8, 1.10.4 or 1.11.1.</li><li>You use Istio authorization policies with
<a href=/v1.11/docs/reference/config/security/authorization-policy/#AuthorizationPolicy-Action>DENY actions</a> and
<a href=/v1.11/docs/reference/config/security/authorization-policy/#Operation><code>operation.hosts</code></a>, or
<a href=/v1.11/docs/reference/config/security/authorization-policy/#AuthorizationPolicy-Action>ALLOW actions</a> and
<a href=/v1.11/docs/reference/config/security/authorization-policy/#Operation><code>operation.notHosts</code></a>.</li></ul><p>With the <a href=#mitigation>mitigation</a>,
when authorization policies based on <code>hosts</code> or <code>notHosts</code> are used, the Istio authorization policy compares the HTTP <code>Host</code> or <code>:authority</code> headers
in a case-insensitive manner to the <code>hosts</code> or <code>notHosts</code> specs.</p><h3 id=cve-2021-32777>CVE-2021-32777</h3><p>Envoy contains a remotely exploitable vulnerability that an HTTP request with multiple value headers could do an incomplete authorization policy check when the <code>ext_authz</code> extension is used.
When a request header contains multiple values, the external authorization server will only see the last value of the given header. See <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-32777">CVE-2021-32777</a> for more information.</p><ul><li>CVSS Score: 8.6</li></ul><p>You are impacted by this vulnerability if:</p><ul><li>You use Istio patch versions earlier than 1.9.8, 1.10.4 or 1.11.1.</li><li>You use <a href=/v1.11/docs/reference/config/networking/envoy-filter/><code>EnvoyFilters</code></a>.</li></ul><h3 id=cve-2021-32778>CVE-2021-32778</h3><p>Envoy contains a remotely exploitable vulnerability where an Envoy client opening and then resetting a large number of HTTP/2 requests could lead to excessive CPU consumption.
See <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-32778">CVE-2021-32778</a> for for information.</p><ul><li>CVSS Score: 8.6</li></ul><p>You are impacted by this vulnerability if you use Istio patch versions earlier than 1.9.8, 1.10.4 or 1.11.1.</p><h3 id=cve-2021-32780>CVE-2021-32780</h3><p>Envoy contains a remotely exploitable vulnerability where an untrusted upstream service could
cause Envoy to terminate abnormally by sending the GOAWAY frame followed by the SETTINGS frame
with the <code>SETTINGS_MAX_CONCURRENT_STREAMS</code> parameter set to 0. See <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-32780">CVE-2021-32780</a> for more information.</p><ul><li>CVSS Score: 8.6</li></ul><p>You are impacted by this vulnerability if you use Istio patch versions 1.10.0 to 1.10.3 or 1.11.0.</p><h3 id=cve-2021-32781>CVE-2021-32781</h3><p>Envoy contains a remotely exploitable vulnerability that affects Envoy&rsquo;s <code>decompressor</code>, <code>json-transcoder</code> or <code>grpc-web</code> extensions or
proprietary extensions that modify and increase the size of request or response bodies.
Modifying and increasing the size of the body in an Envoy extension beyond the internal buffer size could lead to
Envoy accessing deallocated memory and terminating abnormally. See <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-32781">CVE-2021-32781</a> for more information.</p><ul><li>CVSS Score: 8.6</li></ul><p>You are impacted by this vulnerability if:</p><ul><li>You use Istio patch versions earlier than 1.9.8, 1.10.4 or 1.11.1.</li><li>You use <a href=/v1.11/docs/reference/config/networking/envoy-filter/><code>EnvoyFilters</code></a>.</li></ul><h3 id=mitigation>Mitigation</h3><p>To mitigate the above CVEs, update your cluster to the latest supported version:</p><ul><li>Istio 1.9.8 or up, if using 1.9.x</li><li>Istio 1.10.4 or up, if using 1.10.x</li><li>Istio 1.11.1 or up, if using 1.11.x</li><li>The patch version specified by your cloud provider</li></ul><h2 id=non-cve-vulnerabilities>Non-CVE vulnerabilities</h2><h3 id=istio-does-not-ignore-ports-in-authorizationpolicy-host-and-nothosts-comparisons>Istio does not ignore ports in <code>AuthorizationPolicy</code> <code>host</code> and <code>notHosts</code> comparisons</h3><p>When creating a <code>VirtualService</code> or <code>Gateway</code>, Istio generates configuration matching both the hostname itself and the hostname with all matching ports. For instance, a <code>VirtualService</code> or <code>Gateway</code> for a host of <code>httpbin.foo</code> generates a config matching <code>httpbin.foo</code> and <code>httpbin.foo:*</code>. However, an <code>AuthorizationPolicy</code> using exact match only matches the exact string given for the <code>hosts</code> or <code>notHosts</code> fields.</p><p>Your cluster is impacted if you have an <code>AuthorizationPolicy</code> using exact string comparison for the <a href=/v1.11/docs/reference/config/security/authorization-policy/#Operation><code>hosts</code> or <code>notHosts</code></a>.</p><h4 id=authorizationpolicy-mitigation><code>AuthorizationPolicy</code> Mitigation</h4><p>Update your authorization policy <a href=/v1.11/docs/reference/config/security/authorization-policy/#Rule>rules</a> to use prefix match instead of exact match. For example, to match a <code>VirtualService</code> or <code>Gateway</code> with a host of <code>httpbin.com</code> , create an <code>AuthorizationPolicy</code> with <code>hosts: ["httpbin.com", "httpbin.com:*"]</code> as shown below.</p><pre><code class=language-yaml data-expandlinks=true data-repo=istio>apiVersion: security.istio.io/v1beta1
kind: AuthorizationPolicy
metadata:
  name: httpbin
  namespace: foo
spec:
  action: DENY
  rules:
  - from:
    - source:
        namespaces: [&#34;dev&#34;]
    to:
    - operation:
        hosts: [&#34;httpbin.com&#34;, &#34;httpbin.com:*&#34;]
</code></pre><h2 id=credit>Credit</h2><p>We would like to thank Yangmin Zhu (Google) for reporting some of the above issues.</p></div><nav class=pagenav><div class=left></div><div class=right><a title="Istio contains a remotely exploitable vulnerability where credentials specified in the Gateway and DestinationRule credentialName field can be accessed from different namespaces." href=/v1.11/news/security/istio-security-2021-007/ class=next-link>ISTIO-SECURITY-2021-007<svg class="icon right-arrow"><use xlink:href="/v1.11/img/icons.svg#right-arrow"/></svg></a></div></nav></article><footer class=footer><div class="footer-wrapper container-l"><div class="user-links footer-links"><a class=channel title="GitHub is where development takes place on Istio code" href=https://github.com/istio/community aria-label=GitHub><svg class="icon github"><use xlink:href="/v1.11/img/icons.svg#github"/></svg></a><a class=channel title="Access our team drive if you'd like to take a look at the Istio technical design documents" href=https://groups.google.com/forum/#!forum/istio-team-drive-access aria-label="team drive"><svg class="icon drive"><use xlink:href="/v1.11/img/icons.svg#drive"/></svg></a><a class=channel title="Interactively discuss issues with the Istio community on Slack" href=https://slack.istio.io aria-label=slack><svg class="icon slack"><use xlink:href="/v1.11/img/icons.svg#slack"/></svg></a><a class=channel title="Stack Overflow is where you can ask questions and find curated answers on deploying, configuring, and using Istio" href=https://stackoverflow.com/questions/tagged/istio aria-label="Stack Overflow"><svg class="icon stackoverflow"><use xlink:href="/v1.11/img/icons.svg#stackoverflow"/></svg></a><a class=channel title="Follow us on Twitter to get the latest news" href=https://twitter.com/IstioMesh aria-label=Twitter><svg class="icon twitter"><use xlink:href="/v1.11/img/icons.svg#twitter"/></svg></a></div><hr class=footer-separator role=separator><div class="info footer-info"><a class=logo href=/v1.11/><svg xmlns="http://www.w3.org/2000/svg" width="128" height="60" viewBox="0 0 128 60"><path d="M58.434 48.823A.441.441.0 0158.3 48.497V22.583a.444.444.0 01.134-.326.446.446.0 01.327-.134h3.527a.447.447.0 01.325.134.447.447.0 01.134.326v25.914a.443.443.0 01-.134.326.444.444.0 01-.325.134h-3.527a.444.444.0 01-.327-.134z"/><path d="m70.969 48.477a6.556 6.556.0 01-2.818-1.955 4.338 4.338.0 01-1-2.78v-.345a.443.443.0 01.134-.326.444.444.0 01.326-.135h3.374a.444.444.0 01.326.135.445.445.0 01.134.326v.077a2.014 2.014.0 001.054 1.667 4.672 4.672.0 002.664.709 4.446 4.446.0 002.492-.633 1.862 1.862.0 00.958-1.591 1.426 1.426.0 00-.786-1.322 12.7 12.7.0 00-2.549-.939l-1.457-.46a21.526 21.526.0 01-3.3-1.227 6.57 6.57.0 01-2.262-1.783 4.435 4.435.0 01-.92-2.894 5.081 5.081.0 012.109-4.275 8.993 8.993.0 015.558-1.591 10.445 10.445.0 014.1.748 6.3 6.3.0 012.722 2.07 5 5 0 01.958 3.009.441.441.0 01-.134.326.441.441.0 01-.325.134h-3.258a.441.441.0 01-.326-.134.443.443.0 01-.134-.326 1.974 1.974.0 00-.978-1.667 4.647 4.647.0 00-2.665-.671 4.741 4.741.0 00-2.435.556 1.724 1.724.0 00-.938 1.553 1.512 1.512.0 00.9 1.4 15.875 15.875.0 003.01 1.055l.843.229a27.368 27.368.0 013.412 1.246 6.67 6.67.0 012.338 1.763 4.387 4.387.0 01.958 2.933 4.988 4.988.0 01-2.146 4.275 9.543 9.543.0 01-5.712 1.552 11.626 11.626.0 01-4.227-.709z"/><path d="m97.039 32.837a.443.443.0 01-.326.135h-3.911a.169.169.0 00-.191.192v9.239a2.951 2.951.0 00.632 2.108 2.7 2.7.0 002.013.652h1.15a.444.444.0 01.325.134.441.441.0 01.134.326v2.875a.471.471.0 01-.459.5l-1.994.039a8 8 0 01-4.524-1.035q-1.495-1.035-1.533-3.91V33.166A.17.17.0 0088.164 32.974H85.978A.441.441.0 0185.652 32.839.441.441.0 0185.518 32.513V29.83a.441.441.0 01.134-.326.444.444.0 01.326-.135h2.186a.169.169.0 00.191-.192v-4.485a.438.438.0 01.134-.326.44.44.0 01.325-.134h3.336a.443.443.0 01.325.134.442.442.0 01.135.326v4.485a.169.169.0 00.191.192h3.911a.446.446.0 01.326.135.446.446.0 01.134.326v2.683a.446.446.0 01-.133.324z"/><path d="m101.694 25.917a2.645 2.645.0 01-.767-1.955 2.65 2.65.0 01.767-1.955 2.65 2.65.0 011.955-.767 2.65 2.65.0 011.955.767 2.652 2.652.0 01.767 1.955 2.647 2.647.0 01-.767 1.955 2.646 2.646.0 01-1.955.767 2.645 2.645.0 01-1.955-.767zm-.211 22.906a.441.441.0 01-.134-.326V29.79a.444.444.0 01.134-.326.446.446.0 01.326-.134h3.527a.446.446.0 01.326.134.445.445.0 01.134.326v18.707a.443.443.0 01-.134.326.443.443.0 01-.326.134h-3.527a.443.443.0 01-.326-.134z"/><path d="m114.019 47.734a8.1 8.1.0 01-3.047-4.255 14.439 14.439.0 01-.652-4.37 14.3 14.3.0 01.614-4.371 7.869 7.869.0 013.066-4.178 9.072 9.072.0 015.252-1.5 8.543 8.543.0 015.041 1.5 7.985 7.985.0 013.009 4.14 12.439 12.439.0 01.69 4.37 13.793 13.793.0 01-.651 4.37 8.255 8.255.0 01-3.028 4.275 8.475 8.475.0 01-5.1 1.553 8.754 8.754.0 01-5.194-1.534zm7.629-3.1a4.536 4.536.0 001.476-2.262 11.335 11.335.0 00.383-3.221 10.618 10.618.0 00-.383-3.22 4.169 4.169.0 00-1.457-2.243 4.066 4.066.0 00-2.531-.785 3.942 3.942.0 00-2.453.785 4.376 4.376.0 00-1.5 2.243 11.839 11.839.0 00-.383 3.22 11.84 11.84.0 00.383 3.221 4.222 4.222.0 001.476 2.262 4.075 4.075.0 002.549.8 3.8 3.8.0 002.44-.809z"/><path d="m15.105 32.057v15.565a.059.059.0 01-.049.059L.069 50.25A.06.06.0 01.005 50.167l14.987-33.47a.06.06.0 01.114.025z"/><path d="m17.631 23.087v24.6a.06.06.0 00.053.059l22.449 2.507a.06.06.0 00.061-.084L17.745.032a.06.06.0 00-.114.024z"/><path d="m39.961 52.548-24.833 7.45a.062.062.0 01-.043.0L.079 52.548a.059.059.0 01.026-.113h39.839a.06.06.0 01.017.113z"/></svg></a><div class=footer-languages><a tabindex=-1 role=menuitem lang=en id=switch-lang-en class="footer-languages-item active"><svg class="icon tick"><use xlink:href="/v1.11/img/icons.svg#tick"/></svg>English</a>
<a tabindex=-1 role=menuitem lang=zh id=switch-lang-zh class=footer-languages-item>中文</a></div></div><ul class=footer-policies><li class=footer-policies-item><a class=footer-policies-link href=https://policies.google.com/privacy>Privacy policy</a> |
<a class=footer-policies-link href=https://github.com/istio/istio.io/edit/release-1.11/content/en/news/security/istio-security-2021-008/index.md>Edit this Page on GitHub</a></li></ul><div class=footer-base><span class=footer-base-copyright>&copy; 2021 Istio Authors.</span>
<span class=footer-base-version>Version
Archive
1.11.4</span><ul class=footer-base-releases><li class=footer-base-releases-item><a tabindex=-1 class=footer-base-releases-link role=menuitem onclick="navigateToUrlOrRoot('https://istio.io/news\/security\/istio-security-2021-008\/');return false;">current release</a></li><li class=footer-base-releases-item><a tabindex=-1 class=footer-base-releases-link role=menuitem onclick="navigateToUrlOrRoot('https://preliminary.istio.io/news\/security\/istio-security-2021-008\/');return false;">next release</a></li><li class=footer-base-releases-item><a tabindex=-1 class=footer-base-releases-link role=menuitem href=https://istio.io/archive>older releases</a></li></ul></div></div></footer><div id=scroll-to-top-container aria-hidden=true><button id=scroll-to-top title="Back to top"><svg class="icon top"><use xlink:href="/v1.11/img/icons.svg#top"/></svg></button></div></body></html>