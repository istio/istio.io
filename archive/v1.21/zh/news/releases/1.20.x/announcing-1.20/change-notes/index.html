<!doctype html><html lang=zh itemscope itemtype=https://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=theme-color content="#466BB0"><meta name=title content="Istio 1.20.0 更新说明"><meta name=description content="Istio 1.20.0 更新说明。"><meta name=keywords content="microservices,services,mesh"><meta property="og:title" content="Istio 1.20.0 更新说明"><meta property="og:type" content="website"><meta property="og:description" content="Istio 1.20.0 更新说明。"><meta property="og:url" content="/v1.21/zh/news/releases/1.20.x/announcing-1.20/change-notes/"><meta property="og:image" content="https://raw.githubusercontent.com/istio/istio.io/master/static/img/istio-social.png"><meta property="og:image:alt" content="The Istio sailboat logo"><meta property="og:image:width" content="4096"><meta property="og:image:height" content="2048"><meta property="og:site_name" content="Istio"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@IstioMesh"><title>Istioldie 1.21 / Istio 1.20.0 更新说明</title>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-98480406-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-98480406-2")</script><link rel=alternate type=application/rss+xml title="Istio Blog" href=/v1.21/blog/feed.xml><link rel=alternate type=application/rss+xml title="Istio News" href=/v1.21/news/feed.xml><link rel=alternate type=application/rss+xml title="Istio Blog and News" href=/v1.21/feed.xml><link rel="shortcut icon" href=/v1.21/favicons/favicon.ico><link rel=apple-touch-icon href=/v1.21/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/v1.21/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/v1.21/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/v1.21/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/v1.21/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/v1.21/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/v1.21/favicons/android-96x96.png sizes=96xW96><link rel=icon type=image/png href=/v1.21/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/v1.21/favicons/android-192x192.png sizes=192x192><link rel=icon type=image/svg+xml href=/v1.21/favicons/favicon.svg><link rel=icon type=image/png href=/v1.21/favicons/favicon.png><link rel=mask-icon href=/v1.21/favicons/safari-pinned-tab.svg color=#466BB0><link rel=manifest href=/v1.21/manifest.json><meta name=apple-mobile-web-app-title content="Istio"><meta name=application-name content="Istio"><meta name=msapplication-config content="/browserconfig.xml"><meta name=msapplication-TileColor content="#466BB0"><meta name=theme-color content="#466BB0"><link rel=stylesheet href=/v1.21/css/all.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,400;0,500;0,600;0,700;1,400;1,600&display=swap"><script src=/v1.21/js/themes_init.min.js></script></head><body class="language-unknown archive-site"><script>const branchName="release-1.21",docTitle="Istio 1.20.0 更新说明",iconFile="/v1.21//img/icons.svg",buttonCopy="复制到剪切板",buttonPrint="打印",buttonDownload="下载"</script><script src="https://www.google.com/cse/brand?form=search-form" defer></script><script src=/v1.21/js/all.min.js data-manual defer></script><header class=main-navigation><nav class="main-navigation-wrapper container-l"><div class=main-navigation-header><a id=brand href=/v1.21/zh/ aria-label=logotype><span class=logo><svg xmlns="http://www.w3.org/2000/svg" width="128" height="60" viewBox="0 0 128 60"><path d="M58.434 48.823A.441.441.0 0158.3 48.497V22.583a.444.444.0 01.134-.326.446.446.0 01.327-.134h3.527a.447.447.0 01.325.134.447.447.0 01.134.326v25.914a.443.443.0 01-.134.326.444.444.0 01-.325.134h-3.527a.444.444.0 01-.327-.134z"/><path d="m70.969 48.477a6.556 6.556.0 01-2.818-1.955 4.338 4.338.0 01-1-2.78v-.345a.443.443.0 01.134-.326.444.444.0 01.326-.135h3.374a.444.444.0 01.326.135.445.445.0 01.134.326v.077a2.014 2.014.0 001.054 1.667 4.672 4.672.0 002.664.709 4.446 4.446.0 002.492-.633 1.862 1.862.0 00.958-1.591 1.426 1.426.0 00-.786-1.322 12.7 12.7.0 00-2.549-.939l-1.457-.46a21.526 21.526.0 01-3.3-1.227 6.57 6.57.0 01-2.262-1.783 4.435 4.435.0 01-.92-2.894 5.081 5.081.0 012.109-4.275 8.993 8.993.0 015.558-1.591 10.445 10.445.0 014.1.748 6.3 6.3.0 012.722 2.07 5 5 0 01.958 3.009.441.441.0 01-.134.326.441.441.0 01-.325.134h-3.258a.441.441.0 01-.326-.134.443.443.0 01-.134-.326 1.974 1.974.0 00-.978-1.667 4.647 4.647.0 00-2.665-.671 4.741 4.741.0 00-2.435.556 1.724 1.724.0 00-.938 1.553 1.512 1.512.0 00.9 1.4 15.875 15.875.0 003.01 1.055l.843.229a27.368 27.368.0 013.412 1.246 6.67 6.67.0 012.338 1.763 4.387 4.387.0 01.958 2.933 4.988 4.988.0 01-2.146 4.275 9.543 9.543.0 01-5.712 1.552 11.626 11.626.0 01-4.227-.709z"/><path d="m97.039 32.837a.443.443.0 01-.326.135h-3.911a.169.169.0 00-.191.192v9.239a2.951 2.951.0 00.632 2.108 2.7 2.7.0 002.013.652h1.15a.444.444.0 01.325.134.441.441.0 01.134.326v2.875a.471.471.0 01-.459.5l-1.994.039a8 8 0 01-4.524-1.035q-1.495-1.035-1.533-3.91V33.166A.17.17.0 0088.164 32.974H85.978A.441.441.0 0185.652 32.839.441.441.0 0185.518 32.513V29.83a.441.441.0 01.134-.326.444.444.0 01.326-.135h2.186a.169.169.0 00.191-.192v-4.485a.438.438.0 01.134-.326.44.44.0 01.325-.134h3.336a.443.443.0 01.325.134.442.442.0 01.135.326v4.485a.169.169.0 00.191.192h3.911a.446.446.0 01.326.135.446.446.0 01.134.326v2.683a.446.446.0 01-.133.324z"/><path d="m101.694 25.917a2.645 2.645.0 01-.767-1.955 2.65 2.65.0 01.767-1.955 2.65 2.65.0 011.955-.767 2.65 2.65.0 011.955.767 2.652 2.652.0 01.767 1.955 2.647 2.647.0 01-.767 1.955 2.646 2.646.0 01-1.955.767 2.645 2.645.0 01-1.955-.767zm-.211 22.906a.441.441.0 01-.134-.326V29.79a.444.444.0 01.134-.326.446.446.0 01.326-.134h3.527a.446.446.0 01.326.134.445.445.0 01.134.326v18.707a.443.443.0 01-.134.326.443.443.0 01-.326.134h-3.527a.443.443.0 01-.326-.134z"/><path d="m114.019 47.734a8.1 8.1.0 01-3.047-4.255 14.439 14.439.0 01-.652-4.37 14.3 14.3.0 01.614-4.371A7.869 7.869.0 01114 30.56a9.072 9.072.0 015.252-1.5 8.543 8.543.0 015.041 1.5 7.985 7.985.0 013.009 4.14 12.439 12.439.0 01.69 4.37 13.793 13.793.0 01-.651 4.37 8.255 8.255.0 01-3.028 4.275 8.475 8.475.0 01-5.1 1.553 8.754 8.754.0 01-5.194-1.534zm7.629-3.1a4.536 4.536.0 001.476-2.262 11.335 11.335.0 00.383-3.221 10.618 10.618.0 00-.383-3.22 4.169 4.169.0 00-1.457-2.243 4.066 4.066.0 00-2.531-.785 3.942 3.942.0 00-2.453.785 4.376 4.376.0 00-1.5 2.243 11.839 11.839.0 00-.383 3.22 11.84 11.84.0 00.383 3.221 4.222 4.222.0 001.476 2.262 4.075 4.075.0 002.549.8 3.8 3.8.0 002.44-.809z"/><path d="m15.105 32.057v15.565a.059.059.0 01-.049.059L.069 50.25A.06.06.0 01.005 50.167l14.987-33.47a.06.06.0 01.114.025z"/><path d="m17.631 23.087v24.6a.06.06.0 00.053.059l22.449 2.507a.06.06.0 00.061-.084L17.745.032a.06.06.0 00-.114.024z"/><path d="m39.961 52.548-24.833 7.45a.062.062.0 01-.043.0L.079 52.548a.059.059.0 01.026-.113h39.839a.06.06.0 01.017.113z"/></svg></span>
</a><button id=hamburger class=main-navigation-toggle aria-label="Open navigation">
<svg class="icon menu-hamburger"><use xlink:href="/v1.21/img/icons.svg#menu-hamburger"/></svg>
</button>
<button id=menu-close class=main-navigation-toggle aria-label="Close navigation"><svg class="icon menu-close"><use xlink:href="/v1.21/img/icons.svg#menu-close"/></svg></button></div><div id=header-links class=main-navigation-links-wrapper><ul class=main-navigation-links><li class=main-navigation-links-item><a class="main-navigation-links-link has-dropdown"><span>关于</span><svg class="icon dropdown-arrow"><use xlink:href="/v1.21/img/icons.svg#dropdown-arrow"/></svg></a><ul class=main-navigation-links-dropdown><li class=main-navigation-links-dropdown-item><a href=/v1.21/zh/about/service-mesh class=main-navigation-links-link>服务网格</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.21/zh/about/solutions class=main-navigation-links-link>解决方案</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.21/zh/about/case-studies class=main-navigation-links-link>案例学习</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.21/zh/about/ecosystem class=main-navigation-links-link>生态系统</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.21/zh/about/deployment class=main-navigation-links-link>部署</a></li><li class=main-navigation-links-dropdown-item><a href=/v1.21/zh/about/faq class=main-navigation-links-link>FAQ</a></li></ul></li><li class=main-navigation-links-item><a href=/v1.21/zh/blog/ class=main-navigation-links-link><span>博客</span></a></li><li class=main-navigation-links-item><a href=/v1.21/zh/news/ class=main-navigation-links-link><span>新闻</span></a></li><li class=main-navigation-links-item><a href=/v1.21/zh/get-involved/ class=main-navigation-links-link><span>加入我们</span></a></li><li class=main-navigation-links-item><a href=/v1.21/zh/docs/ class=main-navigation-links-link><span>文档</span></a></li></ul><div class=main-navigation-footer><button id=search-show class=search-show title='搜索 istio.io' aria-label=搜索><svg class="icon magnifier"><use xlink:href="/v1.21/img/icons.svg#magnifier"/></svg></button>
<a href=/v1.21/zh/docs/setup/getting-started class="btn btn--primary" id=try-istio>试用 Istio</a></div></div><form id=search-form class=search name=cse role=search><input type=hidden name=cx value=002184991200833970123:iwwf17ikgf4>
<input type=hidden name=ie value=utf-8>
<input type=hidden name=hl value=zh>
<input type=hidden id=search-page-url value=/zh/search>
<input id=search-textbox class="search-textbox form-control" name=q type=search aria-label='搜索 istio.io' placeholder=搜索>
<button id=search-close title=取消搜索 type=reset aria-label=取消搜索><svg class="icon menu-close"><use xlink:href="/v1.21/img/icons.svg#menu-close"/></svg></button></form></nav></header><div class=banner-container></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><div class=header-content><h1>Istio 1.20.0 更新说明</h1><p>Istio 1.20.0 更新说明。</p></div><p class=post-author>Nov 14, 2023</p><div><h2 id=deprecation-notices>弃用通知</h2><p>以下通知说明了根据 <a href=/v1.21/zh/docs/releases/feature-stages/#feature-phase-definitions>Istio 的弃用政策</a>将在未来某个版本中移除的功能。
请考虑升级您的环境以移除弃用的功能。</p><ul><li>Istio 1.20.0 中没有新的弃用内容。</li></ul><h2 id=traffic-management>流量治理</h2><ul><li><p><strong>改进</strong> 改进了对 <code>ExternalName</code> 服务的支持。有关详细信息，请参阅升级说明。</p></li><li><p><strong>改进</strong> 改进了 HTTP 和 TCP Envoy 过滤器的排序，以增强一致性。</p></li><li><p><strong>改进</strong> 改进了 <code>iptables</code> 锁定功能。新的实现在需要时使用
<code>iptables</code> 内置锁等待，并在不需要时完全禁用锁定。</p></li><li><p><strong>改进</strong> 改进了通过 <code>ServiceEntry</code> 资源中的 <code>endpoints</code>
字段内联添加的 <code>WorkloadEntry</code> 资源在不同网络上不再需要指定地址。
(<a href=https://github.com/istio/istio/issues/45150>Issue #45150</a>)</p></li><li><p><strong>新增</strong> 添加了对 <code>VirtualService</code> 中多个目的地的流量镜像支持。
(<a href=https://github.com/istio/istio/issues/13330>Issue #13330</a>)</p></li><li><p><strong>新增</strong> 添加了用户可以通过 Operator API 或 Helm Chart
在 Istio Service 资源中指定 <code>ipFamilyPolicy</code> 和 <code>ipFamilies</code> 设置的功能。
(<a href=https://github.com/istio/istio/issues/44017>Issue #44017</a>)</p></li><li><p><strong>新增</strong> 添加了对网络 <code>WasmPlugin</code> 的支持。</p></li><li><p><strong>新增</strong> 添加了门控标志 <code>ISTIO_ENABLE_IPV4_OUTBOUND_LISTENER_FOR_IPV6_CLUSTERS</code>，
在只有 IPv6 的集群中用来管理一个附加的出站侦听器，以处理 IPv4 NAT 出站流量。
这对于只有 IPv6 的集群环境（例如管理只有 Egress IPv4 以及 IPv6 IP 的 EKS）非常有用。
(<a href=https://github.com/istio/istio/issues/46719>Issue #46719</a>)</p></li><li><p><strong>新增</strong> 添加了通过 <code>targetRef</code> 字段将 <code>AuthorizationPolicy</code>
附加到 Kubernetes <code>Gateway</code> 资源的功能。
(<a href=https://github.com/istio/istio/issues/46847>Issue #46847</a>)</p></li><li><p><strong>新增</strong> 通过 <code>values.cni.cniNetnsDir</code> 指定替代网络命名空间路径（例如 minikube）。
(<a href=https://github.com/istio/istio/issues/47444>Issue #47444</a>)</p></li><li><p><strong>更新</strong> <code>failoverPriority</code> 和 <code>failover</code> 现在可以协同工作。</p></li><li><p><strong>修复</strong> 修复了创建 <code>WorkloadGroup</code> 时立即自动注册已连接的代理的 <code>WorkloadEntry</code> 的问题。
(<a href=https://github.com/istio/istio/issues/45329>Issue #45329</a>)</p></li><li><p><strong>修复</strong> 修复了多网络端点的 DNS 解析问题，
现在可以通过网关解析具有多网络端点 DNS 的 <code>ServiceEntry</code>。
(<a href=https://github.com/istio/istio/issues/45506>Issue #45506</a>)</p></li><li><p><strong>修复</strong> 修复了在没有有效本地网关的情况下无法识别远程网关的问题。
(<a href=https://github.com/istio/istio/issues/46435>Issue #46435</a>)</p></li><li><p><strong>修复</strong> 修复了添加 Waypoint 代理可能导致流量中断的问题。
(<a href=https://github.com/istio/istio/issues/46540>Issue #46540</a>)</p></li><li><p><strong>修复</strong> 修复了由于 <code>DestinationRule</code> TLS 模式设置为
<code>ISTIO_MUTUAL</code> 以外的其他模式而导致无法访问多网络端点的问题。
(<a href=https://github.com/istio/istio/issues/46555>Issue #46555</a>)</p></li><li><p><strong>修复</strong> 修复了当安装时未使用 <code>values.global.network</code> 进行配置或在
Kubernetes <code>Gateway</code> 资源上使用 <code>topology.istio.io/network</code> 进行覆盖时，
Waypoint 代理会缺少 <code>ISTIO_META_NETWORK</code> 字段的问题。</p></li><li><p><strong>修复</strong> 修复了上游 DNS 查询将导致出现永久 <code>UNREPLIED</code> <code>conntrack</code> <code>iptables</code> 成对条目的问题。
(<a href=https://github.com/istio/istio/issues/46935>Issue #46935</a>)</p></li><li><p><strong>修复</strong> 修复了自动分配会指派不正确 IP 的问题。
(<a href=https://github.com/istio/istio/issues/47081>Issue #47081</a>)</p></li><li><p><strong>修复</strong> 修复了根 <code>VirtualService</code> 中的多个标头匹配生成不正确路由的问题。
(<a href=https://github.com/istio/istio/issues/47148>Issue #47148</a>)</p></li><li><p><strong>修复</strong> 修复了 <code>ServiceEntry</code> 通配符基于 <code>glibc</code> 容器的搜索域后缀 DNS 代理解析的问题。
(<a href=https://github.com/istio/istio/issues/47264>Issue #47264</a>)、
(<a href=https://github.com/istio/istio/issues/31250>Issue #31250</a>)、
(<a href=https://github.com/istio/istio/issues/33360>Issue #33360</a>)、
(<a href=https://github.com/istio/istio/issues/30531>Issue #30531</a>)、
(<a href=https://github.com/istio/istio/issues/38484>Issue #38484</a>)</p></li><li><p><strong>修复</strong> 修复了仅依赖 <code>HTTPRoute</code> 来检查 <code>ReferenceGrant</code> 的问题。
(<a href=https://github.com/istio/istio/issues/47341>Issue #47341</a>)</p></li><li><p><strong>修复</strong> 修复了如果默认 IP 寻址不是 IPv6，
则正在使用 <code>IstioIngressListener.defaultEndpoint</code> 的
Sidecar 资源无法使用 [::1]:PORT 的问题。
(<a href=https://github.com/istio/istio/issues/47412>Issue #47412</a>)</p></li><li><p><strong>修复</strong> 修复了多集群 Secret 过滤导致 Istio 从每个命名空间获取 Secret 的问题。
(<a href=https://github.com/istio/istio/issues/47433>Issue #47433</a>)</p></li><li><p><strong>修复</strong> 修复了导致正在终止的无头服务实例的流量无法正常运行的问题。
(<a href=https://github.com/istio/istio/issues/47348>Issue #47348</a>)</p></li><li><p><strong>移除</strong> 移除了 <code>PILOT_ENABLE_DESTINATION_RULE_INHERITANCE</code> 实验性功能，
该功能自创建以来默认处于禁用状态。
(<a href=https://github.com/istio/istio/issues/37095>Issue #37095</a>)</p></li><li><p><strong>移除</strong> 从 Envoy 构建中移除了自定义 Istio 网络过滤器
<code>forward_downstream_sni</code>、<code>tcp_cluster_rewrite</code> 和 <code>sni_verifier</code>。
此功能可以使用 Wasm 扩展性来实现。</p></li><li><p><strong>移除</strong> 移除了工作负载必须具有与其关联的 <code>Service</code> 才能实现局部负载均衡的要求。</p></li></ul><h2 id=security>安全性</h2><ul><li><p><strong>新增</strong> 添加了通过 <code>targetRef</code> 字段将<code>RequestAuthentication</code>
附加到 Kubernetes <code>Gateway</code> 资源的功能。</p></li><li><p><strong>新增</strong> 添加了对插入根证书轮换的支持。</p></li><li><p><strong>修复</strong> 修复了当自定义外部授权服务出现问题时所有请求都被拒绝的问题。
现在，只有委托给自定义外部授权服务的请求才会被拒绝。
(<a href=https://github.com/istio/istio/issues/46951>Issue #46951</a>)</p></li></ul><h2 id=telemetry>遥测</h2><ul><li><p><strong>新增</strong> 添加了通过 <code>targetRef</code> 字段将 <code>Telemetry</code>
附加到 Kubernetes <code>Gateway</code> 资源的功能。
(<a href=https://github.com/istio/istio/issues/46844>Issue #46844</a>)</p></li><li><p><strong>新增</strong> 将 xDS 工作负载元数据发现作为后备添加到 TCP 元数据交换过滤器中。
这需要在代理上启用 <code>PEER_METADATA_DISCOVERY</code> 标志，
并在控制平面上启用 <code>PILOT_ENABLE_AMBIENT_CONTROLLERS</code>。</p></li><li><p><strong>新增</strong> 在控制平面上添加了 <code>PILOT_DISABLE_MX_ALPN</code> 标志，
以禁用广播 TCP 元数据交换的 ALPN 令牌<code>istio-peer-exchange</code>。</p></li></ul><h2 id=extensibility>可扩展性</h2><ul><li><strong>新增</strong> 添加了通过 <code>targetRef</code> 字段将 <code>WasmPlugin</code>
附加到 Kubernetes <code>Gateway</code> 资源的功能。</li></ul><h2 id=installation>安装</h2><ul><li><p><strong>改进</strong> 改进了 OpenShift 集群上的使用，无需向 Istio 和应用程序授予 <code>anyuid</code> SCC 权限。</p></li><li><p><strong>更新</strong> 更新了 Kiali 插件至 <code>v1.76.0</code> 版。</p></li><li><p><strong>新增</strong> 向网关 Helm Chart 添加了 <code>volumes</code> 和 <code>volumeMounts</code> 值。</p></li><li><p><strong>新增</strong> 添加了使用 <code>istioctl</code> 安装时对 Ztunnel 的基本修订支持。
(<a href=https://github.com/istio/istio/issues/46421>Issue #46421</a>)</p></li><li><p><strong>新增</strong> 添加了 <code>PILOT_ENABLE_GATEWAY_API_GATEWAYCLASS_CONTROLLER</code>
标志以启用/禁用内置 <code>GatewayClasses</code> 的管理。
(<a href=https://github.com/istio/istio/issues/46553>Issue #46553</a>)</p></li><li><p><strong>新增</strong> 在 CNCF 建立有关双许可 eBPF 字节码的指南后，添加了 eBPF 重定向对 Ambient 的支持。
<a href=https://github.com/cncf/foundation/issues/474#issuecomment-1739796978>https://github.com/cncf/foundation/issues/474#issuecomment-1739796978</a>
(<a href=https://github.com/istio/istio/issues/47257>Issue #47257</a>)</p></li><li><p><strong>新增</strong> 添加了 Helm Values，以便希望使用 Helm 的用户更轻松地安装 Ambient。</p></li><li><p><strong>新增</strong> 默认情况下向 Sidecar 资源添加了 <code>startupProbe</code>。
这可以优化启动时间并最大限度地减少整个 Pod 生命周期的负载。有关详细信息，请参阅升级说明。
(<a href=https://github.com/istio/istio/issues/32569>Issue #32569</a>)</p></li><li><p><strong>修复</strong> 修复了使用 <code>--dry-run</code> 选项安装时资源被误删除的问题。</p></li><li><p><strong>修复</strong> 修复了使用 <code>empty</code> 配置文件安装 Istio 时不显示组件信息的问题。</p></li><li><p><strong>修复</strong> 修复了即使资源应用失败，安装过程仍继续而导致意外行为的问题。
(<a href=https://github.com/istio/istio/issues/43312>Issue #43312</a>)</p></li><li><p><strong>修复</strong> 修复了如果将 <code>values.global.proxy.image</code> 设置为自定义镜像，
则 Waypoint 代理不会注入正确镜像的问题。</p></li><li><p><strong>修复</strong> 修复了当 Istiod 不可用时有时会在未确认的情况下执行 <code>uninstall</code> 的问题。</p></li><li><p><strong>移除</strong> 移除了对使用集群内 Operator 安装 <code>ambient</code> 配置文件的支持。
(<a href=https://github.com/istio/istio/issues/46524>Issue #46524</a>)</p></li></ul><h2 id=istioctl>istioctl</h2><ul><li><p><strong>新增</strong> 添加了一个新的 <code>istioctl dashboard proxy</code> 命令，
可用于显示不同代理 Pod 的管理 UI，例如 Envoy、Ztunnel、Waypoint。</p></li><li><p><strong>新增</strong> 添加了 <code>istioctl experimental precheck</code> 命令的输出格式选项。
有效选项为 <code>log</code>、<code>json</code> 或 <code>yaml</code>。</p></li><li><p><strong>新增</strong> 在 <code>istioctl experimental precheck</code> 中添加了 <code>--output-threshold</code>
标志来控制消息输出阈值。默认阈值现在是 <code>warning</code>，它取代了之前的默认值 <code>info</code>。</p></li><li><p><strong>新增</strong> 添加了自动检测 Pilot 监控端口（如果未设置为默认值 <code>15014</code>）的支持。
(<a href=https://github.com/istio/istio/issues/46652>Issue #46652</a>)</p></li><li><p><strong>新增</strong> 在 <code>istioctl</code> 中添加了默认命名空间检测的延迟加载，
以避免通过命令检查 kubeconfig 时不需要 Kubernetes 环境。
(<a href=https://github.com/istio/istio/issues/47159>Issue #47159</a>)</p></li><li><p><strong>新增</strong> 添加了在 <code>istioctl proxy-config log</code> 命令中使用
<code>--level &lt;level></code> 或 <code>--level level=&lt;level></code> 设置 istio-proxy 日志记录器级别的支持。</p></li><li><p><strong>新增</strong> 添加了一个分析器，用于显示与使用外部控制平面的
Istio 安装相关的不正确/缺失信息的警告消息。
(<a href=https://github.com/istio/istio/issues/47269>Issue #47269</a>)</p></li><li><p><strong>新增</strong> 添加了 IST0162 <code>GatewayPortNotDefinedOnService</code>
消息以检测 <code>Service</code> 未公开 <code>Gateway</code> 端口的问题。</p></li><li><p><strong>修复</strong> 修复了 <code>istioctl operator remove</code>
命令在修订版为“默认”或未指定时不删除 Operator 控制器的所有修订版的问题。
(<a href=https://github.com/istio/istio/issues/45242>Issue #45242</a>)</p></li><li><p><strong>修复</strong> 修复了当安装的 Deployment 不健康时，<code>verify-install</code> 结果不正确的问题。</p></li><li><p><strong>修复</strong> 修复了 <code>istioctl experimental describe</code> 命令，
用于在使用注入网关时提供正确的 <code>Gateway</code> 信息。</p></li><li><p><strong>修复</strong> 修复了 <code>istioctl analyze</code> 会分析不相关的配置映射的问题。
(<a href=https://github.com/istio/istio/issues/46563>Issue #46563</a>)</p></li><li><p><strong>修复</strong> 修复了当跨命名空间边界在 <code>VirtualService</code> 目标中使用 <code>ServiceEntry</code> 主机时，
<code>istioctl analyze</code> 异常报错的问题。
(<a href=https://github.com/istio/istio/issues/46597>Issue #46597</a>)</p></li><li><p><strong>修复</strong> 修复了如果未提供 EDS 端点，<code>istioctl proxy-config</code> 无法处理文件中的配置转储的问题。
(<a href=https://github.com/istio/istio/issues/47505>Issue #47505</a>)</p></li><li><p><strong>移除</strong> 移除了 <code>istioctl Experimental revision tag</code> 命令，
该命令已升级为 <code>istioctl tag</code>。</p></li></ul></div><nav class=pagenav><div class=left></div><div class=right><a title="升级到 Istio 1.20 时要考虑的重要变更。" href=/v1.21/zh/news/releases/1.20.x/announcing-1.20/upgrade-notes/ class=next-link>Istio 1.20 升级说明<svg class="icon right-arrow"><use xlink:href="/v1.21/img/icons.svg#right-arrow"/></svg></a></div></nav></article><footer class=footer><div class="footer-wrapper container-l"><div class="user-links footer-links"><a class=channel title='Istio 的代码在 GitHub 上开发' href=https://github.com/istio/community aria-label=GitHub><svg class="icon github"><use xlink:href="/v1.21/img/icons.svg#github"/></svg>
</a><a class=channel title='如果您想深入了解 Istio 的技术细节，请查看我们日益完善的设计文档' href=https://groups.google.com/forum/#!forum/istio-team-drive-access aria-label="team drive"><svg class="icon drive"><use xlink:href="/v1.21/img/icons.svg#drive"/></svg>
</a><a class=channel title='在 Slack 上与 Istio 社区交互讨论开发问题（仅限邀请）' href=https://slack.istio.io aria-label=slack><svg class="icon slack"><use xlink:href="/v1.21/img/icons.svg#slack"/></svg>
</a><a class=channel title='Stack Overflow 中列举了针对实际问题以及部署、配置和使用 Istio 的各项回答' href=https://stackoverflow.com/questions/tagged/istio aria-label="Stack Overflow"><svg class="icon stackoverflow"><use xlink:href="/v1.21/img/icons.svg#stackoverflow"/></svg>
</a><a class=channel title='关注我们的 Twitter 来获取最新信息' href=https://twitter.com/IstioMesh aria-label=Twitter><svg class="icon twitter"><use xlink:href="/v1.21/img/icons.svg#twitter"/></svg></a></div><hr class=footer-separator role=separator><div class="info footer-info"><a class=logo href=/v1.21/zh/ aria-label=logotype><svg xmlns="http://www.w3.org/2000/svg" width="128" height="60" viewBox="0 0 128 60"><path d="M58.434 48.823A.441.441.0 0158.3 48.497V22.583a.444.444.0 01.134-.326.446.446.0 01.327-.134h3.527a.447.447.0 01.325.134.447.447.0 01.134.326v25.914a.443.443.0 01-.134.326.444.444.0 01-.325.134h-3.527a.444.444.0 01-.327-.134z"/><path d="m70.969 48.477a6.556 6.556.0 01-2.818-1.955 4.338 4.338.0 01-1-2.78v-.345a.443.443.0 01.134-.326.444.444.0 01.326-.135h3.374a.444.444.0 01.326.135.445.445.0 01.134.326v.077a2.014 2.014.0 001.054 1.667 4.672 4.672.0 002.664.709 4.446 4.446.0 002.492-.633 1.862 1.862.0 00.958-1.591 1.426 1.426.0 00-.786-1.322 12.7 12.7.0 00-2.549-.939l-1.457-.46a21.526 21.526.0 01-3.3-1.227 6.57 6.57.0 01-2.262-1.783 4.435 4.435.0 01-.92-2.894 5.081 5.081.0 012.109-4.275 8.993 8.993.0 015.558-1.591 10.445 10.445.0 014.1.748 6.3 6.3.0 012.722 2.07 5 5 0 01.958 3.009.441.441.0 01-.134.326.441.441.0 01-.325.134h-3.258a.441.441.0 01-.326-.134.443.443.0 01-.134-.326 1.974 1.974.0 00-.978-1.667 4.647 4.647.0 00-2.665-.671 4.741 4.741.0 00-2.435.556 1.724 1.724.0 00-.938 1.553 1.512 1.512.0 00.9 1.4 15.875 15.875.0 003.01 1.055l.843.229a27.368 27.368.0 013.412 1.246 6.67 6.67.0 012.338 1.763 4.387 4.387.0 01.958 2.933 4.988 4.988.0 01-2.146 4.275 9.543 9.543.0 01-5.712 1.552 11.626 11.626.0 01-4.227-.709z"/><path d="m97.039 32.837a.443.443.0 01-.326.135h-3.911a.169.169.0 00-.191.192v9.239a2.951 2.951.0 00.632 2.108 2.7 2.7.0 002.013.652h1.15a.444.444.0 01.325.134.441.441.0 01.134.326v2.875a.471.471.0 01-.459.5l-1.994.039a8 8 0 01-4.524-1.035q-1.495-1.035-1.533-3.91V33.166A.17.17.0 0088.164 32.974H85.978A.441.441.0 0185.652 32.839.441.441.0 0185.518 32.513V29.83a.441.441.0 01.134-.326.444.444.0 01.326-.135h2.186a.169.169.0 00.191-.192v-4.485a.438.438.0 01.134-.326.44.44.0 01.325-.134h3.336a.443.443.0 01.325.134.442.442.0 01.135.326v4.485a.169.169.0 00.191.192h3.911a.446.446.0 01.326.135.446.446.0 01.134.326v2.683a.446.446.0 01-.133.324z"/><path d="m101.694 25.917a2.645 2.645.0 01-.767-1.955 2.65 2.65.0 01.767-1.955 2.65 2.65.0 011.955-.767 2.65 2.65.0 011.955.767 2.652 2.652.0 01.767 1.955 2.647 2.647.0 01-.767 1.955 2.646 2.646.0 01-1.955.767 2.645 2.645.0 01-1.955-.767zm-.211 22.906a.441.441.0 01-.134-.326V29.79a.444.444.0 01.134-.326.446.446.0 01.326-.134h3.527a.446.446.0 01.326.134.445.445.0 01.134.326v18.707a.443.443.0 01-.134.326.443.443.0 01-.326.134h-3.527a.443.443.0 01-.326-.134z"/><path d="m114.019 47.734a8.1 8.1.0 01-3.047-4.255 14.439 14.439.0 01-.652-4.37 14.3 14.3.0 01.614-4.371A7.869 7.869.0 01114 30.56a9.072 9.072.0 015.252-1.5 8.543 8.543.0 015.041 1.5 7.985 7.985.0 013.009 4.14 12.439 12.439.0 01.69 4.37 13.793 13.793.0 01-.651 4.37 8.255 8.255.0 01-3.028 4.275 8.475 8.475.0 01-5.1 1.553 8.754 8.754.0 01-5.194-1.534zm7.629-3.1a4.536 4.536.0 001.476-2.262 11.335 11.335.0 00.383-3.221 10.618 10.618.0 00-.383-3.22 4.169 4.169.0 00-1.457-2.243 4.066 4.066.0 00-2.531-.785 3.942 3.942.0 00-2.453.785 4.376 4.376.0 00-1.5 2.243 11.839 11.839.0 00-.383 3.22 11.84 11.84.0 00.383 3.221 4.222 4.222.0 001.476 2.262 4.075 4.075.0 002.549.8 3.8 3.8.0 002.44-.809z"/><path d="m15.105 32.057v15.565a.059.059.0 01-.049.059L.069 50.25A.06.06.0 01.005 50.167l14.987-33.47a.06.06.0 01.114.025z"/><path d="m17.631 23.087v24.6a.06.06.0 00.053.059l22.449 2.507a.06.06.0 00.061-.084L17.745.032a.06.06.0 00-.114.024z"/><path d="m39.961 52.548-24.833 7.45a.062.062.0 01-.043.0L.079 52.548a.059.059.0 01.026-.113h39.839a.06.06.0 01.017.113z"/></svg></a><div class=footer-languages><a tabindex=-1 lang=en id=switch-lang-en class=footer-languages-item>English
</a><a tabindex=-1 lang=zh id=switch-lang-zh class="footer-languages-item active"><svg class="icon tick"><use xlink:href="/v1.21/img/icons.svg#tick"/></svg>
中文</a></div></div><ul class=footer-policies><li class=footer-policies-item><a class=footer-policies-link href=https://www.linuxfoundation.org/legal/terms>条款
</a>|
<a class=footer-policies-link href=https://www.linuxfoundation.org/legal/privacy-policy>隐私政策
</a>|
<a class=footer-policies-link href=https://www.linuxfoundation.org/legal/trademark-usage>商标
</a>|
<a class=footer-policies-link href=https://github.com/istio/istio.io/edit/release-1.21/content/zh/index>在 GitHub 上编辑此页</a></li></ul><div class=footer-base><span class=footer-base-copyright>&copy; 2024 the Istio Authors.</span>
<span class=footer-base-version>部分内容可能滞后于英文版本，同步工作正在进行中<br>版本
Istio 归档
1.21.2</span><ul class=footer-base-releases><li class=footer-base-releases-item><a tabindex=-1 class=footer-base-releases-link onclick='return navigateToUrlOrRoot("https://istio.io/news/releases/1.20.x/announcing-1.20/change-notes/"),!1'>当前版本</a></li><li class=footer-base-releases-item><a tabindex=-1 class=footer-base-releases-link onclick='return navigateToUrlOrRoot("https://preliminary.istio.io/news/releases/1.20.x/announcing-1.20/change-notes/"),!1'>下个版本</a></li><li class=footer-base-releases-item><a tabindex=-1 class=footer-base-releases-link href=https://istio.io/archive>旧版本</a></li></ul></div></div></footer><div id=scroll-to-top-container aria-hidden=true><button id=scroll-to-top title=回到顶部 tabindex=-1><svg class="icon top"><use xlink:href="/v1.21/img/icons.svg#top"/></svg></button></div></body></html>