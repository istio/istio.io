---
title: Metric
description: A template that represents a single runtime metric.
location: https://istio.io/docs/reference/config/policy-and-telemetry/templates/metric.html
layout: protoc-gen-docs
generator: protoc-gen-docs
redirect_from: /docs/reference/config/template/metric.html
number_of_entries: 2
---
<p>The <code>metric</code> template is designed to let you describe runtime metric to dispatch to
monitoring backends.</p>

<p>Example config:</p>

<pre><code class="language-yaml">apiVersion: &quot;config.istio.io/v1alpha2&quot;
kind: metric
metadata:
  name: requestsize
  namespace: istio-system
spec:
  value: request.size | 0
  dimensions:
    source_service: source.service | &quot;unknown&quot;
    source_version: source.labels[&quot;version&quot;] | &quot;unknown&quot;
    destination_service: destination.service | &quot;unknown&quot;
    destination_version: destination.labels[&quot;version&quot;] | &quot;unknown&quot;
    response_code: response.code | 200
  monitored_resource_type: '&quot;UNSPECIFIED&quot;'
</code></pre>

<h2 id="Template">Template</h2>
<section>
<p>The <code>metric</code> template represents a single piece of data to report.</p>

<p>When writing the configuration, the value for the fields associated with this template can either be a
literal or an <a href="{{site.baseurl}}/docs//reference/config/policy-and-telemetry/expression-language.html">expression</a>. Please note that if the datatype of a field is not istio.mixer.adapter.model.v1beta1.Value,
then the expression&rsquo;s <a href="{{site.baseurl}}/docs//reference/config/policy-and-telemetry/expression-language.html#type-checking">inferred type</a> must match the datatype of the field.</p>

<table class="message-fields">
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr id="Template.value">
<td><code>value</code></td>
<td><code><a href="#istio.mixer.adapter.model.v1beta1.Value">istio.mixer.adapter.model.v1beta1.Value</a></code></td>
<td>
<p>The value being reported.</p>

</td>
</tr>
<tr id="Template.dimensions">
<td><code>dimensions</code></td>
<td><code>map&lt;string,&nbsp;<a href="#istio.mixer.adapter.model.v1beta1.Value">istio.mixer.adapter.model.v1beta1.Value</a>&gt;</code></td>
<td>
<p>The unique identity of the particular metric to report.</p>

</td>
</tr>
<tr id="Template.monitored_resource_type">
<td><code>monitoredResourceType</code></td>
<td><code>string</code></td>
<td>
<p>Optional. An expression to compute the type of the monitored resource this metric is being reported on.
If the metric backend supports monitored resources, these fields are used to populate that resource. Otherwise
these fields will be ignored by the adapter.</p>

</td>
</tr>
<tr id="Template.monitored_resource_dimensions">
<td><code>monitoredResourceDimensions</code></td>
<td><code>map&lt;string,&nbsp;<a href="#istio.mixer.adapter.model.v1beta1.Value">istio.mixer.adapter.model.v1beta1.Value</a>&gt;</code></td>
<td>
<p>Optional. A set of expressions that will form the dimensions of the monitored resource this metric is being reported on.
If the metric backend supports monitored resources, these fields are used to populate that resource. Otherwise
these fields will be ignored by the adapter.</p>

</td>
</tr>
</tbody>
</table>
</section>
<h2 id="istio.mixer.adapter.model.v1beta1.Value">istio.mixer.adapter.model.v1beta1.Value</h2>
<section>
<p>Value is used inside templates for fields that have dynamic types. The actual datatype
of the field depends on the datatype of the expression used in the operator configuration.</p>

<table class="message-fields">
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr id="istio.mixer.adapter.model.v1beta1.Value.string_value" class="oneof oneof-start">
<td><code>stringValue</code></td>
<td><code>string (oneof)</code></td>
<td>
<p>Used for values of type STRING</p>

</td>
</tr>
<tr id="istio.mixer.adapter.model.v1beta1.Value.int64_value" class="oneof">
<td><code>int64Value</code></td>
<td><code>int64 (oneof)</code></td>
<td>
<p>Used for values of type INT64</p>

</td>
</tr>
<tr id="istio.mixer.adapter.model.v1beta1.Value.double_value" class="oneof">
<td><code>doubleValue</code></td>
<td><code>double (oneof)</code></td>
<td>
<p>Used for values of type DOUBLE</p>

</td>
</tr>
<tr id="istio.mixer.adapter.model.v1beta1.Value.bool_value" class="oneof">
<td><code>boolValue</code></td>
<td><code>bool (oneof)</code></td>
<td>
<p>Used for values of type BOOL</p>

</td>
</tr>
<tr id="istio.mixer.adapter.model.v1beta1.Value.ip_address_value" class="oneof">
<td><code>ipAddressValue</code></td>
<td><code><a href="#istio.mixer.adapter.model.v1beta1.IPAddress">istio.mixer.adapter.model.v1beta1.IPAddress (oneof)</a></code></td>
<td>
<p>Used for values of type IPAddress</p>

</td>
</tr>
<tr id="istio.mixer.adapter.model.v1beta1.Value.timestamp_value" class="oneof">
<td><code>timestampValue</code></td>
<td><code><a href="#istio.mixer.adapter.model.v1beta1.TimeStamp">istio.mixer.adapter.model.v1beta1.TimeStamp (oneof)</a></code></td>
<td>
<p>Used for values of type TIMESTAMP</p>

</td>
</tr>
<tr id="istio.mixer.adapter.model.v1beta1.Value.duration_value" class="oneof">
<td><code>durationValue</code></td>
<td><code><a href="#istio.mixer.adapter.model.v1beta1.Duration">istio.mixer.adapter.model.v1beta1.Duration (oneof)</a></code></td>
<td>
<p>Used for values of type DURATION</p>

</td>
</tr>
<tr id="istio.mixer.adapter.model.v1beta1.Value.email_address_value" class="oneof">
<td><code>emailAddressValue</code></td>
<td><code><a href="#istio.mixer.adapter.model.v1beta1.EmailAddress">istio.mixer.adapter.model.v1beta1.EmailAddress (oneof)</a></code></td>
<td>
<p>Used for values of type EmailAddress</p>

</td>
</tr>
<tr id="istio.mixer.adapter.model.v1beta1.Value.dns_name_value" class="oneof">
<td><code>dnsNameValue</code></td>
<td><code><a href="#istio.mixer.adapter.model.v1beta1.DNSName">istio.mixer.adapter.model.v1beta1.DNSName (oneof)</a></code></td>
<td>
<p>Used for values of type DNSName</p>

</td>
</tr>
<tr id="istio.mixer.adapter.model.v1beta1.Value.uri_value" class="oneof">
<td><code>uriValue</code></td>
<td><code><a href="#istio.mixer.adapter.model.v1beta1.Uri">istio.mixer.adapter.model.v1beta1.Uri (oneof)</a></code></td>
<td>
<p>Used for values of type Uri</p>

</td>
</tr>
</tbody>
</table>
</section>
