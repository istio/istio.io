---
title: Перш ніж почати
description: Початкові кроки перед встановленням Istio на декількох кластерах.
weight: 1
keywords: [kubernetes,мультикластер]
test: n/a
owner: istio/wg-environments-maintainers
---

Перш ніж почати встановлення Istio у мультикластерній конфігурації, ознайомтеся з [посібником з моделей розгортання](/docs/ops/deployment/deployment-models), який описує базові концепції, що використовуються в цьому посібнику.

Також ознайомтеся з вимогами та виконайте початкові кроки, зазначені нижче.

## Вимоги {#requirements}

### Кластер {#cluster}

Для цього посібника вам потрібно мати два кластери Kubernetes з однією з [підтримуваних версій Kubernetes:](/docs/releases/supported-releases#support-status-of-istio-releases) {{< supported_kubernetes_versions >}}.

### Доступ до API-сервера {#api-server-access}

API-сервер у кожному кластері повинен бути доступний для інших кластерів у межах сервісної мережі. Багато хмарних провайдерів надають доступ до API-серверів через мережеві балансувальники навантаження (NLB). Якщо API-сервер недоступний напряму, вам доведеться змінити процедуру встановлення для забезпечення доступу. Наприклад, шлюз [схід-захід](https://en.wikipedia.org/wiki/East-west_traffic), який використовується в конфігураціях з кількома мережами та основний-віддалений, може також використовуватися для забезпечення доступу до API-сервера.

## Змінні середовища {#environment-variables}

У цьому посібнику використовуються два кластери: `cluster1` та `cluster2`. Щоб спростити інструкції, будуть використовуватися наступні змінні середовища:

Змінна | Опис
-------- | -----------
`CTX_CLUSTER1` | Імʼя контексту в типовому [конфігураційному файлі Kubernetes](https://kubernetes.io/docs/tasks/access-application-cluster/configure-access-multiple-clusters/), що використовується для доступу до кластера `cluster1`.
`CTX_CLUSTER2` | Імʼя контексту в типовому [конфігураційному файлі Kubernetes](https://kubernetes.io/docs/tasks/access-application-cluster/configure-access-multiple-clusters/), що використовується для доступу до кластера `cluster2`.

Встановіть ці дві змінні перед продовженням:

{{< text syntax=bash snip_id=none >}}
$ export CTX_CLUSTER1=<your cluster1 context>
$ export CTX_CLUSTER2=<your cluster2 context>
{{< /text >}}

## Налаштування довіри {#configure-trust}

Для розгортання сервісної мережі в мультикластері потрібно встановити довіру між усіма кластерами в мережі. Залежно від вимог до вашої системи, можуть бути доступні різні варіанти для встановлення довіри. Дивіться [управління сертифікатами](/docs/tasks/security/cert-management/) для детальних описів та інструкцій щодо всіх доступних варіантів. Залежно від обраного варіанту, інструкції з встановлення Istio можуть дещо змінитися.

{{< tip >}}
Якщо ви плануєте розгортання лише одного основного кластера (тобто одну з конфігурацій Основний-Віддалений, зазначених нижче), у вас буде лише один Центр сертифікації (ЦС) (тобто `istiod` в `cluster1`), який видаватиме сертифікати для обох кластерів. У цьому випадку ви можете пропустити наступний крок із генерації сертифікатів ЦС і просто використовувати стандартний самопідписний ЦС для встановлення.
{{< /tip >}}

Цей посібник передбачає використання спільного кореневого сертифіката для генерації проміжних сертифікатів для кожного основного кластера. Слідуйте [інструкціям](/docs/tasks/security/cert-management/plugin-ca-cert/) для генерації та розповсюдження сертифікатів ЦС в обидва кластери `cluster1` та `cluster2`.

{{< tip >}}
Якщо у вас наразі є єдиний кластер із самопідписним ЦС (як описано в розділі [Початок роботи](/docs/setup/getting-started/)), вам потрібно змінити ЦС, використовуючи один із методів, описаних в розділі [управління сертифікатами](/docs/tasks/security/cert-management/). Зміна ЦС зазвичай вимагає повторного встановлення Istio. Нижченаведені інструкції щодо встановлення можуть потребувати змін залежно від вибору ЦС.
{{< /tip >}}

## Наступні кроки {#next-steps}

Тепер ви готові встановити сервісну мережу Istio для кількох кластерів. Конкретні кроки залежатимуть від ваших вимог до топології мережі та панелі управління.

Оберіть встановлення, яке найкраще відповідає вашим потребам:

- [Встановлення Multi-Primary](/docs/setup/install/multicluster/multi-primary)

- [Встановлення Primary-Remote](/docs/setup/install/multicluster/primary-remote)

- [Встановлення Multi-Primary в різних мережах](/docs/setup/install/multicluster/multi-primary_multi-network)

- [Встановлення Primary-Remote в різних мережах](/docs/setup/install/multicluster/primary-remote_multi-network)

{{< tip >}}
Якщо ви плануєте встановити мультикластер з Istio за допомогою Helm, спочатку слідуйте [попереднім вимогам Helm](/docs/setup/install/helm/#prerequisites) з посібника з встановлення Helm.
{{< /tip >}}

{{< tip >}}
Для мереж, що охоплюють більше ніж два кластери, можливо, вам доведеться використовувати більше ніж одну з цих опцій. Наприклад, ви можете мати основний кластер на кожен регіон (тобто multi-primary), де кожна зона має віддалений кластер, що використовує панель управління в основному кластері регіону (тобто primary-remote).

Дивіться [моделі розгортання](/docs/ops/deployment/deployment-models) для отримання додаткової інформації.
{{< /tip >}}
