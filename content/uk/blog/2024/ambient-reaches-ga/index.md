---
title: "Швидкий, безпечний та простий: режим ambient в Istio досяг стану загальної доступності (GA) у версії 1.24"
description: Останній випуск показує, що режим ambient, сервісна мережа без sidecars, готовий для всіх.
publishdate: 2024-11-07
attribution: "Lin Sun (Solo.io), від імені SIstio Steering та Technical Oversight Committees"
keywords: [ambient,sidecars]
---

Ми раді оголосити, що режим ambient панелі даних Istio досяг стану Загальної Доступності, і модулі ztunnel, waypoints та API були позначені як Stable Комітетом технічного нагляду Istio. Це знаменує фінальну стадію прогресу функцій Istio, що сигналізує, що режим ambient повністю готовий для широкого використання в промислових середовищах.

Ambient mesh, і його референсна реалізація в режимі ambient  Istio, [була анонсована у вересні 2022 року](/blog/2022/introducing-ambient-mesh/). З того часу наша спільнота працювала 26 місяців завдяки співпраці з Solo.io, Google, Microsoft, Intel, Aviatrix, Huawei, IBM, Red Hat та багатьма іншими. Статус стабільності у версії 1.24 свідчить, що функції режиму ambient тепер повністю готові для широкого використання у промислових робочих навантаженнях. Це важливий етап для Istio, оскільки він дозволяє використовувати Istio без sidecars, [пропонуючи користувачам вибір](/docs/overview/dataplane-modes/).

## Навіщо ambient mesh? {#why-ambient-mesh}

З моменту запуску Istio у 2017 році ми помітили чіткий і зростаючий попит на можливості mesh для застосунків, але багато користувачів повідомляли, що накладні витрати ресурсів і операційна складність sidecars були важкими для подолання. Виклики, з якими стикаються користувачі Istio, включають те, як sidecars можуть порушити роботу застосунків після їхнього додавання, великі вимоги до CPU та памʼяті для проксі з кожним робочим навантаженням і незручність необхідності перезапуску застосунків при кожному новому випуску Istio.

Ми як спільнота розробили ambient mesh з нуля, щоб подолати ці проблеми, усуваючи попередні барʼєри складності для користувачів, які хочуть впровадити сервісну мережу. Нова концепція була названа "ambient mesh", оскільки вона була розроблена так, щоб бути прозорою для вашого застосунку: без проксі, розташованих поруч з робочими навантаженнями користувачів, без необхідності змінювати конфігурацію для підключення і без перезапуску застосунків. В режимі ambient дуже легко додавати або видаляти застосунки з mesh. Все, що вам потрібно зробити, це [позначити простір імен](/docs/ambient/usage/add-workloads/), і всі застосунки в цьому просторі імен будуть миттєво додані до mesh. Це одразу ж захистить весь трафік у цьому просторі імен за допомогою стандартного в галузі шифрування mTLS, без додаткових налаштувань чи перезапусків! Більше інформації про причини створення режиму ambient в Istio можна знайти у [блозі "Introducing Ambient Mesh"](/blog/2022/introducing-ambient-mesh/).

## Як режим ambient полегшує адаптацію?{#how-does-ambient-mode-make-adoption-easier}

Основна інновація ambient mesh полягає у розподілі обробки рівнів L4 (Layer 4) та L7 (Layer 7) на два окремих шари. Ambient режим Istio працює завдяки легким, спільним проксі L4 на рівні вузлів та додатковим проксі L7, що усуває потребу у традиційних sidecar-проксі в панелі даних. Цей пошарований підхід дозволяє впроваджувати Istio поступово, переходячи від відсутності mesh до захищеного оверлею (L4) і до повної обробки L7, за потреби, на основі простору імен, у межах вашої інфраструктури.

Використовуючи ambient mesh, користувачі можуть уникнути деяких обмежень моделі sidecar. Протоколи, що надсилають дані з сервера, тепер працюють, більшість зарезервованих портів доступні, а можливість для контейнерів обійти сайдкар, навмисно чи ненавмисно, усунена.

Легкий спільний L4 проксі на рівні вузла називається *[ztunnel](/docs/ambient/overview/#ztunnel)* (тунель з нульовою довірою). ztunnel значно знижує витрати на утримання mesh, усуваючи необхідність можливого перевищення використання ресурсів пам’яті та CPU в кластері для обробки очікуваних навантажень. У деяких випадках економія може перевищити 90% або більше, забезпечуючи при цьому безпеку з нульовою довірою з використанням mTLS, простих авторизаційних політик L4 та телеметрії.

L7 проксі називаються *[waypoints](/docs/ambient/overview/#waypoint-proxies)*. Waypoints обробляють функції L7, такі як маршрутизація трафіку, розширене застосування політики авторизації та стійкість корпоративного рівня. Waypoints працюють окремо від ваших розгортань застосунків та можуть масштабуватися незалежно від ваших потреб, які можуть охоплювати весь простір імен або декілька сервісів в ньому. Порівняно з sidecar, вам не потрібен один waypoint на кожен pod застосунку, і ви можете ефективно масштабувати waypoint відповідно до його області дії, заощаджуючи значну кількість CPU та пам’яті у більшості випадків.

Розділення між захисним оверлеєм L4 та шаром обробки L7 дозволяє поступово впроваджувати ambient режим панелі даних, на відміну від попередньої бінарної моделі "все-в-одному" з інʼєкцією sidecarʼів. Користувачі можуть почати з захисного L4 оверлею, який пропонує більшість функцій, для яких зазвичай впроваджується Istio (mTLS, авторизаційна політика та телеметрія). Складніша обробка L7, така як повторні спроби, розподіл трафіку, балансування навантаження та збір даних для спостереження, може бути увімкнена за необхідності.

## Швидке дослідження та впровадження режиму ambient {#rapid-exploration-and-adoption-of-ambient-mode}

Завантаження образу ztunnel на Docker Hub перевищило [1 мільйон](https://hub.docker.com/search?q=istio), причому лише за останній тиждень його завантажили близько 63 000 разів.

{{< image width="100%"
    link="./ztunnel-image.png"
    alt="Завантаження Istio ztunnel на Docker Hub!"
    >}}

Ми запитали у кількох наших користувачів їхню думку про режим ambient у статусі GA:

{{< quote >}}
**Реалізація сервісної мережі від Istio з їхнім дизайном ambient mesh стала чудовим доповненням до наших кластерів Kubernetes, спрощуючи обов’язки команди та загальну архітектуру мережі. У поєднанні з проєктом Gateway API це дає мені чудову можливість дозволити розробникам задовольняти їхні мережеві потреби, водночас делегуючи лише ту частину контролю, яка потрібна. Хоча це проєкт, що швидко розвивається, він був надійним і стабільним у промисловому використанні та буде нашим стандартним варіантом для впровадження інструментів керування мережею у розгортанні Kubernetes в майбутньому.**

— [Daniel Loader](https://uk.linkedin.com/in/danielloader), провідний інженер платформи в Quotech

{{< /quote >}}

{{< quote >}}
**Режим ambient mesh дуже легко встановити за допомогою обгортки Helm chart. Перехід простий, як налаштування шлюзу waypoint, оновлення міток у просторі імен і перезапуск. Я з нетерпінням чекаю на відмову від sidecar та зменшення використання ресурсів. До того ж оновлення стали простішими. Більше ніяких перезапусків розгортань!**

— [Raymond Wong](https://www.linkedin.com/in/raymond-wong-43baa8a2/), старший архітектор в Forbes
{{< /quote >}}

{{< quote >}}
**Режим ambient від Istio використовується в нашій промисловій системі з моменту його переходу в статус Beta. Ми задоволені його стабільністю та простотою та з нетерпінням чекаємо додаткових переваг і функцій, які прийдуть разом зі статусом GA. Дякуємо команді Istio за великі зусилля!**

— Saarko Eilers, менеджер операційної інфраструктури в EISST International Ltd
{{< /quote >}}

{{< quote >}}
**Перейшовши з AWS App Mesh на Istio у режимі ambient, нам вдалося скоротити приблизно кількість запущених контейнерів на 45%, просто видаливши sidecar та DaemonSets агента SPIRE. Ми отримали багато переваг, таких як зменшення витрат на обчислення або спостереження, пов’язане з sidecar, усунення багатьох умов перегонів, пов’язаних із запуском і завершенням sidecar, а також всі готові переваги лише завдяки міграції, такі як mTLS, зонування та балансування навантаження.**

— [Ahmad Al-Masry](https://www.linkedin.com/in/ahmad-al-masry-9ab90858/), менеджер з інженерії DevSecOps в Harri
{{< /quote >}}

{{< quote >}}
**Ми обрали Istio, тому що нам подобається ambient mesh. На відміну від інших варіантів, з Istio перехід від sidecar до інфраструктури без-sidecar не є стрибком віри. Ми можемо створювати нашу інфраструктуру сервісної мережі з Istio, знаючи, що шлях до системи без-sidecar є двостороннім.**

— [Troy Dai](https://www.linkedin.com/in/troydai/), старший програмний інженер в Coinbase
{{< /quote >}}

{{< quote >}}
**Надзвичайно гордимося бачити швидке і стабільне зростання режиму ambient до GA і чудову співпрацю, що відбувалась протягом останніх місяців, щоб зробити це можливим! Ми з нетерпінням чекаємо, як нова архітектура змінить світ телекомунікацій.**

— [Faseela K](https://www.linkedin.com/in/faseela-k-42178528/), розробник хмарних технологій в Ericsson
{{< /quote >}}

{{< quote >}}
**Ми раді бачити розвиток панелі даних Istio з виходом режиму ambient у статус GA та активно розглядаємо його для нашої платформи інфраструктури нового покоління. Спільнота Istio є динамічною та привітною, а ambient mesh є доказом того, що спільнота приймає нові ідеї та прагматично працює над покращенням досвіду розробників у масштабах експлуатації Istio.**

— [Tyler Schade](https://www.linkedin.com/in/tylerschade/), видатний інженер у GEICO Tech
{{< /quote >}}

{{< quote >}}
**З виходом режиму ambient в статусі GA, ми нарешті маємо рішення для сервісної мережі, яке не прив’язане до життєвого циклу podʼів, вирішуючи основне обмеження моделей на базі sidecar. Ambient mesh забезпечує більш легку, масштабовану архітектуру, що спрощує операції та знижує витрати на інфраструктуру, усуваючи навантаження sidecar.**

— [Bartosz Sobieraj](https://www.linkedin.com/in/bartoszsobieraj/), інженер платформи в Spond
{{< /quote >}}

{{< quote >}}
**Наша команда обрала Istio за його функції сервісної мережі та сильну сумісність з Gateway API для створення надійного рішення для розміщення на основі Kubernetes. Під час інтеграції застосунків у mesh ми зіткнулися з проблемами ресурсів через sidecar-проксі, що спонукало нас перейти до режиму ambient в статусі Beta для поліпшення масштабованості та безпеки. Ми почали з безпеки та спостереження L4 через ztunnel, отримавши автоматичне шифрування внутрішньокластерного трафіку та прозорий моніторинг трафіку. Вибіркове включення функцій L7 і відокремлення проксі від застосунків дозволили нам досягти безперебійного масштабування та зменшити використання ресурсів і затримки. Цей підхід дозволив розробникам зосередитися на розробці застосунків, що призвело до створення більш стійкої, безпечної та масштабованої платформи, підтримуваної режимом ambient.**

— [Jose Marque](https://www.linkedin.com/in/jdcmarques/), старший інженер DevOps в Blip.pt
{{< /quote >}}

{{< quote >}}
**Ми використовуємо Istio для забезпечення суворого трафіку mTLS L4 у нашій mesh і радіємо з приводу режиму ambient. У порівнянні з режимом sidecar, це значна економія ресурсів, і водночас це робить налаштування ще простішим і прозорішим.**

— [Andrea Dolfi](https://www.linkedin.com/in/andrea-dolfi-58b427128/), інженер DevOps
{{< /quote >}}

## Що входить у сферу дії? {#what-is-in-scope}

Загальна доступність режиму ambient означає, що наступні речі тепер вважаються стабільними:

- [Встановлення Istio з підтримкою режиму ambient](/docs/ambient/install/), за допомогою Helm або `istioctl`.
- [Додавання ваших робочих навантажень до mesh](/docs/ambient/usage/add-workloads/) для отримання взаємного TLS із криптографічною ідентичністю, [політик авторизації рівня L4](/docs/ambient/usage/l4-policy/) та телеметрії.
- [Налаштування waypoint](/docs/ambient/usage/waypoint/) для [використання функцій L7](/docs/ambient/usage/l7-features/), таких як зміна трафіку, маршрутизація запитів та забезпечення повноцінного контролю політик авторизації.
- Підключення Istio ingress gateway до робочих навантажень у режимі ambient, що підтримує Kubernetes Gateway API та всі наявні Istio API.
- Використання waypoint для контрольованого виходу з mesh.
- Використання `istioctl` для управління waypoint та усунення неполадок із ztunnel та waypoint.

Більше інформації дивіться на [сторінці статусу функцій](docs/releases/feature-stages/#ambient-mode).

### Плани {#roadmap}

Ми не зупиняємося! Існує кілька функцій, над якими ми продовжуємо працювати для майбутніх випусків, включаючи деякі, які зараз перебувають на стадії Alpha/Beta.

У наших майбутніх випусках ми плануємо швидко розвивати такі розширення режиму ambient:

- Повна підтримка взаємодії між sidecar та режимом ambient.
- Багатокластерні установки.
- Підтримка багатомережевих конфігурацій.
- Підтримка VM.

## Що з sidecar? {#what-about-sidecars}

Sidecar не зникнуть і залишаються важливим елементом в Istio. Ви можете продовжувати використовувати sidecar, і вони залишатимуться повністю підтримуваними. Хоча ми вважаємо, що більшість сценаріїв найкраще обслуговуватимуться мережею в режимі ambient, проєкт Istio залишається відданим подальшій підтримці режиму sidecar.

## Спробуйте режим ambient сьогодні {#try-ambient-mode-today}

З випуском Istio 1.24 та загальною доступністю режиму ambient тепер легше, ніж будь-коли, випробувати Istio на власних робочих навантаженнях.

- Слідуйте [керівництву з початку роботи](/docs/ambient/getting-started/), щоб дослідити режим ambient.
- Ознайомтеся з нашими [посібниками користувача](/docs/ambient/usage/), щоб дізнатися, як поступово впроваджувати ambient для взаємного TLS і політик авторизації L4, управління трафіком, розширених політик авторизації L7 та інших функцій.
- Досліджуйте [нову інфопанель Kiali 2.0](https://medium.com/kialiproject/kiali-2-0-for-istio-2087810f337e) для візуалізації вашої мережі.

Ви можете поспілкуватися з розробниками в каналі #ambient на [Istio Slack](https://slack.istio.io) або використовувати форум обговорень на [GitHub](https://github.com/istio/istio/discussions) для будь-яких запитань.
