<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1660 1345.6" width="3320" height="2691.2">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.com/Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://excalidraw.com/Cascadia.woff2");
      }
      @font-face {
        font-family: "Assistant";
        src: url("https://app.excalidraw.com//dist/excalidraw-assets/Assistant-Regular.woff2");
      }
    </style>
    
  </defs>
  <rect x="0" y="0" width="1660" height="1345.6" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(10 90) rotate(0 820 510)"><path d="M32 0 C628.51 1.47, 1223.84 2.41, 1608 0 M32 0 C435.96 0.87, 840.23 0.09, 1608 0 M1608 0 C1630.18 0.62, 1638.9 10.75, 1640 32 M1608 0 C1630.43 1.15, 1638.89 10.7, 1640 32 M1640 32 C1635.49 355.02, 1636.9 678.5, 1640 988 M1640 32 C1638.57 243.76, 1638.44 455.67, 1640 988 M1640 988 C1640.18 1007.56, 1627.94 1021.39, 1608 1020 M1640 988 C1642.12 1009.11, 1628.21 1019.57, 1608 1020 M1608 1020 C1198.52 1014.57, 788.81 1014.03, 32 1020 M1608 1020 C1009.57 1018.06, 410.25 1017.82, 32 1020 M32 1020 C9.71 1018.47, -0.39 1009.24, 0 988 M32 1020 C12.08 1018.25, -0.45 1008.61, 0 988 M0 988 C1.58 669.8, 1.12 349.85, 0 32 M0 988 C-0.88 716.04, -0.89 444.3, 0 32 M0 32 C-0.03 10.31, 10.15 -1.3, 32 0 M0 32 C1.82 10.71, 10.62 -0.65, 32 0" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(630 102) rotate(0 215.1666717529297 20.700000000000003)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1971c2" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Node Network Namespace</text></g><g stroke-linecap="round" transform="translate(130 170) rotate(0 680 50)"><path d="M25 0 C348.87 -0.12, 672.5 0.72, 1335 0 M25 0 C420.07 1.67, 815.59 1.66, 1335 0 M1335 0 C1350.96 1.96, 1358.41 9.7, 1360 25 M1335 0 C1352.83 0.84, 1360.04 6.34, 1360 25 M1360 25 C1361.58 37.71, 1359.44 46.7, 1360 75 M1360 25 C1358.92 43.33, 1358.97 61.45, 1360 75 M1360 75 C1359.29 92.22, 1350.17 98.56, 1335 100 M1360 75 C1358.92 91.01, 1353.05 99.61, 1335 100 M1335 100 C832.7 95.7, 329.57 96.71, 25 100 M1335 100 C977.92 100.39, 621.41 100.35, 25 100 M25 100 C7.14 100.21, 1.8 89.84, 0 75 M25 100 C10.09 101.05, 1.1 90.27, 0 75 M0 75 C-0.63 59.16, -0.94 44.42, 0 25 M0 75 C-0.46 54.79, 0.14 35.64, 0 25 M0 25 C1.08 9.75, 7.65 -0.22, 25 0 M0 25 C-1.17 9.52, 7.46 -1.21, 25 0" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g stroke-linecap="round" transform="translate(130 670) rotate(0 170 160)"><path d="M32 0 C127.79 1.11, 225.07 2.17, 308 0 M32 0 C133.58 0.93, 236.7 -0.05, 308 0 M308 0 C331.21 -1.26, 339.5 9.06, 340 32 M308 0 C331.52 -1.15, 339.15 11.68, 340 32 M340 32 C338.03 120.19, 337.24 210.74, 340 288 M340 32 C342.57 104.63, 342.63 178.51, 340 288 M340 288 C340.28 309.9, 328.76 321.29, 308 320 M340 288 C340.45 310.53, 327.66 321.01, 308 320 M308 320 C237.96 320.41, 165.65 318.95, 32 320 M308 320 C234.42 322.48, 160.37 321.69, 32 320 M32 320 C11.61 321.17, 0.84 311.31, 0 288 M32 320 C8.67 319.09, 1.49 309.45, 0 288 M0 288 C-0.83 201.76, -0.08 116.39, 0 32 M0 288 C1.48 197.86, 1.86 107.55, 0 32 M0 32 C0.45 12.66, 9.97 -0.41, 32 0 M0 32 C-0.91 10.84, 9 0.61, 32 0" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(227.93333435058594 767.9) rotate(0 72.06666564941406 62.099999999999966)"><text x="72.06666564941406" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ambient</text><text x="72.06666564941406" y="41.4" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">workload</text><text x="72.06666564941406" y="82.8" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">pod</text></g><g stroke-linecap="round" transform="translate(1210 670) rotate(0 170 80)"><path d="M32 0 C115.12 -1.58, 198.42 -2.21, 308 0 M32 0 C102.74 -1.59, 173.72 -1.1, 308 0 M308 0 C331.09 -0.41, 338.15 11.34, 340 32 M308 0 C330.2 0.14, 340.44 10.94, 340 32 M340 32 C337.67 59.07, 337.84 82.85, 340 128 M340 32 C340.95 58.44, 341.1 85.31, 340 128 M340 128 C338.68 149.44, 331.22 160.03, 308 160 M340 128 C338.07 151.61, 330.94 158.32, 308 160 M308 160 C213.28 157.23, 121.03 158.49, 32 160 M308 160 C224.91 161.7, 140.43 160.65, 32 160 M32 160 C11.57 159.43, 0.73 147.83, 0 128 M32 160 C12.11 162, 0.06 148.75, 0 128 M0 128 C-0.18 91.63, 1.67 56.31, 0 32 M0 128 C-0.85 96.87, -0.2 65.81, 0 32 M0 32 C-1.05 9.01, 8.78 -0.42, 32 0 M0 32 C1.23 12.38, 11.98 1.83, 32 0" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(1321.933334350586 708.6) rotate(0 58.06666564941406 41.400000000000006)"><text x="58.06666564941406" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ztunnel</text><text x="58.06666564941406" y="41.4" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">pod</text></g><g stroke-linecap="round"><g transform="translate(252.25700083003244 270.24368466915564) rotate(0 -41.29716800936899 199.05555555555554)"><path d="M-0.55 0.53 C-14.32 66.91, -68.21 330.9, -81.75 397.21 M1.36 -0.24 C-12.56 66.37, -68.34 331.6, -82.26 398.28" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(252.25700083003244 270.24368466915564) rotate(0 -41.29716800936899 199.05555555555554)"><path d="M-85.81 373.53 C-83.84 384.12, -84.9 393.25, -82.26 398.28 M-85.81 373.53 C-83.51 381.49, -83.15 389.49, -82.26 398.28" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(252.25700083003244 270.24368466915564) rotate(0 -41.29716800936899 199.05555555555554)"><path d="M-69.07 377.04 C-73.28 386.25, -80.54 394.08, -82.26 398.28 M-69.07 377.04 C-72.2 383.78, -77.25 390.65, -82.26 398.28" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g></g><mask></mask><g transform="translate(246.0333251953125 410) rotate(0 282.26666259765625 41.400000000000006)"><text x="282.26666259765625" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">1. Jump into workload network </text><text x="282.26666259765625" y="41.4" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">namespace and write iptables rules</text></g><g stroke-linecap="round"><g transform="translate(1170.3229957591743 270.928291099146) rotate(0 89.83850212041284 199.535854450427)"><path d="M-0.32 -0.93 C29.74 65.68, 150.49 333.07, 180.54 399.58 M1.71 1.2 C31.68 67.45, 150.43 331.43, 180.04 397.72" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(1170.3229957591743 270.928291099146) rotate(0 89.83850212041284 199.535854450427)"><path d="M162.62 379.78 C166.51 386.88, 174.35 391.53, 180.04 397.72 M162.62 379.78 C165.45 384.6, 170.67 386.86, 180.04 397.72" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(1170.3229957591743 270.928291099146) rotate(0 89.83850212041284 199.535854450427)"><path d="M178.23 372.79 C177.23 382.02, 180.19 388.87, 180.04 397.72 M178.23 372.79 C177.57 379.12, 179.37 382.91, 180.04 397.72" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g></g><mask></mask><g transform="translate(958.2750015258789 350) rotate(0 121.0999984741211 82.8)"><text x="121.0999984741211" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">2. Notify</text><text x="121.0999984741211" y="41.4" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">ztunnel</text><text x="121.0999984741211" y="82.8" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">to create </text><text x="121.0999984741211" y="124.19999999999999" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">workload proxy</text></g><g stroke-linecap="round"><g transform="translate(1270 830) rotate(0 -399.05555555555554 100)"><path d="M-0.46 -0.88 C-73.83 32.35, -307.73 189.34, -440.54 200.28 C-573.34 211.23, -737.71 87.2, -797.28 64.78 M1.5 1.27 C-72.05 34.05, -308.58 187.59, -441.77 198.31 C-574.96 209.02, -738.3 87.47, -797.61 65.55" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(1270 830) rotate(0 -399.05555555555554 100)"><path d="M-772.82 68.78 C-781.15 66.9, -786.04 68.28, -797.61 65.55 M-772.82 68.78 C-777.77 67.09, -783.63 67.68, -797.61 65.55" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g><g transform="translate(1270 830) rotate(0 -399.05555555555554 100)"><path d="M-780.7 83.96 C-786.97 77.92, -789.69 75.13, -797.61 65.55 M-780.7 83.96 C-783.98 79.02, -788.15 76.36, -797.61 65.55" stroke="#1e1e1e" stroke-width="4" fill="none"></path></g></g><mask></mask><g transform="translate(577.8500061035156 810) rotate(0 238.21665954589844 62.10000000000002)"><text x="238.21665954589844" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">3. ztunnel creates</text><text x="238.21665954589844" y="41.4" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">listening sockets inside </text><text x="238.21665954589844" y="82.8" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">workload network namespace</text></g><g transform="translate(651.2333297729492 205) rotate(0 104.06666564941406 20.7)"><text x="104.06666564941406" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Istio CNI pod</text></g><g transform="translate(227.22503662109375 1170) rotate(0 540.433349609375 82.79999999999995)"><text x="0" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Responsibilities:</text><text x="0" y="41.4" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Istio CNI node agent watches for new pods labeled for ambient</text><text x="0" y="82.8" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Istio CNI sets up in-pod iptables redirection rules</text><text x="0" y="124.19999999999999" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- ztunnel owns the sockets and subscribes to Istio CNI agent events</text></g><g transform="translate(520.8999938964844 10) rotate(0 265.1833190917969 20.69999999999999)"><text x="265.1833190917969" y="0" font-family="Helvetica, Segoe UI Emoji" font-size="36px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">CNI Ambient Pod Configure Flow</text></g></svg>