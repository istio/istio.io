---
WARNING: THIS IS AN AUTO-GENERATED FILE, DO NOT EDIT. PLEASE MODIFY THE ORIGINAL SOURCE IN THE https://github.com/istio/istio REPO
source_repo: https://github.com/istio/istio
title: sidecar-injector
description: Kubernetes webhook for automatic Istio sidecar injection.
generator: pkg-collateral-docs
number_of_entries: 4
---
<p>Kubernetes webhook for automatic Istio sidecar injection.</p>
<pre class="language-bash"><code>sidecar-injector [flags]
</code></pre>
<table class="command-flags">
<thead>
<tr>
<th>Flags</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--caCertFile &lt;string&gt;</code></td>
<td>File containing the x509 Certificate for HTTPS.  (default `/etc/istio/certs/root-cert.pem`)</td>
</tr>
<tr>
<td><code>--healthCheckFile &lt;string&gt;</code></td>
<td>File that should be periodically updated if health checking is enabled  (default ``)</td>
</tr>
<tr>
<td><code>--healthCheckInterval &lt;duration&gt;</code></td>
<td>Configure how frequently the health check file specified by --healthCheckFile should be updated  (default `0s`)</td>
</tr>
<tr>
<td><code>--injectConfig &lt;string&gt;</code></td>
<td>File containing the Istio sidecar injection configuration and template  (default `/etc/istio/inject/config`)</td>
</tr>
<tr>
<td><code>--injectValues &lt;string&gt;</code></td>
<td>File containing the Istio sidecar injection values, in yaml format  (default `/etc/istio/inject/values`)</td>
</tr>
<tr>
<td><code>--kubeconfig &lt;string&gt;</code></td>
<td>Specifies path to kubeconfig file. This must be specified when not running inside a Kubernetes pod.  (default ``)</td>
</tr>
<tr>
<td><code>--log_as_json</code></td>
<td>Whether to format output as JSON or in plain console-friendly format </td>
</tr>
<tr>
<td><code>--log_caller &lt;string&gt;</code></td>
<td>Comma-separated list of scopes for which to include caller information, scopes can be any of [all, default, model, rbac]  (default ``)</td>
</tr>
<tr>
<td><code>--log_output_level &lt;string&gt;</code></td>
<td>Comma-separated minimum per-scope logging level of messages to output, in the form of &lt;scope&gt;:&lt;level&gt;,&lt;scope&gt;:&lt;level&gt;,... where scope can be one of [all, default, model, rbac] and level can be one of [debug, info, warn, error, fatal, none]  (default `default:info`)</td>
</tr>
<tr>
<td><code>--log_rotate &lt;string&gt;</code></td>
<td>The path for the optional rotating log file  (default ``)</td>
</tr>
<tr>
<td><code>--log_rotate_max_age &lt;int&gt;</code></td>
<td>The maximum age in days of a log file beyond which the file is rotated (0 indicates no limit)  (default `30`)</td>
</tr>
<tr>
<td><code>--log_rotate_max_backups &lt;int&gt;</code></td>
<td>The maximum number of log file backups to keep before older files are deleted (0 indicates no limit)  (default `1000`)</td>
</tr>
<tr>
<td><code>--log_rotate_max_size &lt;int&gt;</code></td>
<td>The maximum size in megabytes of a log file beyond which the file is rotated  (default `104857600`)</td>
</tr>
<tr>
<td><code>--log_stacktrace_level &lt;string&gt;</code></td>
<td>Comma-separated minimum per-scope logging level at which stack traces are captured, in the form of &lt;scope&gt;:&lt;level&gt;,&lt;scope:level&gt;,... where scope can be one of [all, default, model, rbac] and level can be one of [debug, info, warn, error, fatal, none]  (default `default:none`)</td>
</tr>
<tr>
<td><code>--log_target &lt;stringArray&gt;</code></td>
<td>The set of paths where to output the log. This can be any path as well as the special values stdout and stderr  (default `[stdout]`)</td>
</tr>
<tr>
<td><code>--meshConfig &lt;string&gt;</code></td>
<td>File containing the Istio mesh configuration  (default `/etc/istio/config/mesh`)</td>
</tr>
<tr>
<td><code>--port &lt;int&gt;</code></td>
<td>Webhook port  (default `443`)</td>
</tr>
<tr>
<td><code>--tlsCertFile &lt;string&gt;</code></td>
<td>File containing the x509 Certificate for HTTPS.  (default `/etc/istio/certs/cert-chain.pem`)</td>
</tr>
<tr>
<td><code>--tlsKeyFile &lt;string&gt;</code></td>
<td>File containing the x509 private key matching --tlsCertFile.  (default `/etc/istio/certs/key.pem`)</td>
</tr>
<tr>
<td><code>--webhookConfigName &lt;string&gt;</code></td>
<td>Name of the mutatingwebhookconfiguration resource in Kubernetes.  (default `istio-sidecar-injector`)</td>
</tr>
<tr>
<td><code>--webhookName &lt;string&gt;</code></td>
<td>Name of the webhook entry in the webhook config.  (default `sidecar-injector.istio.io`)</td>
</tr>
</tbody>
</table>
<h2 id="sidecar-injector-probe">sidecar-injector probe</h2>
<p>Check the liveness or readiness of a locally-running server</p>
<pre class="language-bash"><code>sidecar-injector probe [flags]
</code></pre>
<table class="command-flags">
<thead>
<tr>
<th>Flags</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--caCertFile &lt;string&gt;</code></td>
<td>File containing the x509 Certificate for HTTPS.  (default `/etc/istio/certs/root-cert.pem`)</td>
</tr>
<tr>
<td><code>--healthCheckFile &lt;string&gt;</code></td>
<td>File that should be periodically updated if health checking is enabled  (default ``)</td>
</tr>
<tr>
<td><code>--healthCheckInterval &lt;duration&gt;</code></td>
<td>Configure how frequently the health check file specified by --healthCheckFile should be updated  (default `0s`)</td>
</tr>
<tr>
<td><code>--injectConfig &lt;string&gt;</code></td>
<td>File containing the Istio sidecar injection configuration and template  (default `/etc/istio/inject/config`)</td>
</tr>
<tr>
<td><code>--injectValues &lt;string&gt;</code></td>
<td>File containing the Istio sidecar injection values, in yaml format  (default `/etc/istio/inject/values`)</td>
</tr>
<tr>
<td><code>--interval &lt;duration&gt;</code></td>
<td>Duration used for checking the target file&#39;s last modified time.  (default `0s`)</td>
</tr>
<tr>
<td><code>--kubeconfig &lt;string&gt;</code></td>
<td>Specifies path to kubeconfig file. This must be specified when not running inside a Kubernetes pod.  (default ``)</td>
</tr>
<tr>
<td><code>--log_as_json</code></td>
<td>Whether to format output as JSON or in plain console-friendly format </td>
</tr>
<tr>
<td><code>--log_caller &lt;string&gt;</code></td>
<td>Comma-separated list of scopes for which to include caller information, scopes can be any of [all, default, model, rbac]  (default ``)</td>
</tr>
<tr>
<td><code>--log_output_level &lt;string&gt;</code></td>
<td>Comma-separated minimum per-scope logging level of messages to output, in the form of &lt;scope&gt;:&lt;level&gt;,&lt;scope&gt;:&lt;level&gt;,... where scope can be one of [all, default, model, rbac] and level can be one of [debug, info, warn, error, fatal, none]  (default `default:info`)</td>
</tr>
<tr>
<td><code>--log_rotate &lt;string&gt;</code></td>
<td>The path for the optional rotating log file  (default ``)</td>
</tr>
<tr>
<td><code>--log_rotate_max_age &lt;int&gt;</code></td>
<td>The maximum age in days of a log file beyond which the file is rotated (0 indicates no limit)  (default `30`)</td>
</tr>
<tr>
<td><code>--log_rotate_max_backups &lt;int&gt;</code></td>
<td>The maximum number of log file backups to keep before older files are deleted (0 indicates no limit)  (default `1000`)</td>
</tr>
<tr>
<td><code>--log_rotate_max_size &lt;int&gt;</code></td>
<td>The maximum size in megabytes of a log file beyond which the file is rotated  (default `104857600`)</td>
</tr>
<tr>
<td><code>--log_stacktrace_level &lt;string&gt;</code></td>
<td>Comma-separated minimum per-scope logging level at which stack traces are captured, in the form of &lt;scope&gt;:&lt;level&gt;,&lt;scope:level&gt;,... where scope can be one of [all, default, model, rbac] and level can be one of [debug, info, warn, error, fatal, none]  (default `default:none`)</td>
</tr>
<tr>
<td><code>--log_target &lt;stringArray&gt;</code></td>
<td>The set of paths where to output the log. This can be any path as well as the special values stdout and stderr  (default `[stdout]`)</td>
</tr>
<tr>
<td><code>--meshConfig &lt;string&gt;</code></td>
<td>File containing the Istio mesh configuration  (default `/etc/istio/config/mesh`)</td>
</tr>
<tr>
<td><code>--port &lt;int&gt;</code></td>
<td>Webhook port  (default `443`)</td>
</tr>
<tr>
<td><code>--probe-path &lt;string&gt;</code></td>
<td>Path of the file for checking the availability.  (default ``)</td>
</tr>
<tr>
<td><code>--tlsCertFile &lt;string&gt;</code></td>
<td>File containing the x509 Certificate for HTTPS.  (default `/etc/istio/certs/cert-chain.pem`)</td>
</tr>
<tr>
<td><code>--tlsKeyFile &lt;string&gt;</code></td>
<td>File containing the x509 private key matching --tlsCertFile.  (default `/etc/istio/certs/key.pem`)</td>
</tr>
<tr>
<td><code>--webhookConfigName &lt;string&gt;</code></td>
<td>Name of the mutatingwebhookconfiguration resource in Kubernetes.  (default `istio-sidecar-injector`)</td>
</tr>
<tr>
<td><code>--webhookName &lt;string&gt;</code></td>
<td>Name of the webhook entry in the webhook config.  (default `sidecar-injector.istio.io`)</td>
</tr>
</tbody>
</table>
<h2 id="sidecar-injector-version">sidecar-injector version</h2>
<p>Prints out build version information</p>
<pre class="language-bash"><code>sidecar-injector version [flags]
</code></pre>
<table class="command-flags">
<thead>
<tr>
<th>Flags</th>
<th>Shorthand</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--caCertFile &lt;string&gt;</code></td>
<td></td>
<td>File containing the x509 Certificate for HTTPS.  (default `/etc/istio/certs/root-cert.pem`)</td>
</tr>
<tr>
<td><code>--healthCheckFile &lt;string&gt;</code></td>
<td></td>
<td>File that should be periodically updated if health checking is enabled  (default ``)</td>
</tr>
<tr>
<td><code>--healthCheckInterval &lt;duration&gt;</code></td>
<td></td>
<td>Configure how frequently the health check file specified by --healthCheckFile should be updated  (default `0s`)</td>
</tr>
<tr>
<td><code>--injectConfig &lt;string&gt;</code></td>
<td></td>
<td>File containing the Istio sidecar injection configuration and template  (default `/etc/istio/inject/config`)</td>
</tr>
<tr>
<td><code>--injectValues &lt;string&gt;</code></td>
<td></td>
<td>File containing the Istio sidecar injection values, in yaml format  (default `/etc/istio/inject/values`)</td>
</tr>
<tr>
<td><code>--kubeconfig &lt;string&gt;</code></td>
<td></td>
<td>Specifies path to kubeconfig file. This must be specified when not running inside a Kubernetes pod.  (default ``)</td>
</tr>
<tr>
<td><code>--log_as_json</code></td>
<td></td>
<td>Whether to format output as JSON or in plain console-friendly format </td>
</tr>
<tr>
<td><code>--log_caller &lt;string&gt;</code></td>
<td></td>
<td>Comma-separated list of scopes for which to include caller information, scopes can be any of [all, default, model, rbac]  (default ``)</td>
</tr>
<tr>
<td><code>--log_output_level &lt;string&gt;</code></td>
<td></td>
<td>Comma-separated minimum per-scope logging level of messages to output, in the form of &lt;scope&gt;:&lt;level&gt;,&lt;scope&gt;:&lt;level&gt;,... where scope can be one of [all, default, model, rbac] and level can be one of [debug, info, warn, error, fatal, none]  (default `default:info`)</td>
</tr>
<tr>
<td><code>--log_rotate &lt;string&gt;</code></td>
<td></td>
<td>The path for the optional rotating log file  (default ``)</td>
</tr>
<tr>
<td><code>--log_rotate_max_age &lt;int&gt;</code></td>
<td></td>
<td>The maximum age in days of a log file beyond which the file is rotated (0 indicates no limit)  (default `30`)</td>
</tr>
<tr>
<td><code>--log_rotate_max_backups &lt;int&gt;</code></td>
<td></td>
<td>The maximum number of log file backups to keep before older files are deleted (0 indicates no limit)  (default `1000`)</td>
</tr>
<tr>
<td><code>--log_rotate_max_size &lt;int&gt;</code></td>
<td></td>
<td>The maximum size in megabytes of a log file beyond which the file is rotated  (default `104857600`)</td>
</tr>
<tr>
<td><code>--log_stacktrace_level &lt;string&gt;</code></td>
<td></td>
<td>Comma-separated minimum per-scope logging level at which stack traces are captured, in the form of &lt;scope&gt;:&lt;level&gt;,&lt;scope:level&gt;,... where scope can be one of [all, default, model, rbac] and level can be one of [debug, info, warn, error, fatal, none]  (default `default:none`)</td>
</tr>
<tr>
<td><code>--log_target &lt;stringArray&gt;</code></td>
<td></td>
<td>The set of paths where to output the log. This can be any path as well as the special values stdout and stderr  (default `[stdout]`)</td>
</tr>
<tr>
<td><code>--meshConfig &lt;string&gt;</code></td>
<td></td>
<td>File containing the Istio mesh configuration  (default `/etc/istio/config/mesh`)</td>
</tr>
<tr>
<td><code>--output &lt;string&gt;</code></td>
<td><code>-o</code></td>
<td>One of &#39;yaml&#39; or &#39;json&#39;.  (default ``)</td>
</tr>
<tr>
<td><code>--port &lt;int&gt;</code></td>
<td></td>
<td>Webhook port  (default `443`)</td>
</tr>
<tr>
<td><code>--short</code></td>
<td><code>-s</code></td>
<td>Displays a short form of the version information </td>
</tr>
<tr>
<td><code>--tlsCertFile &lt;string&gt;</code></td>
<td></td>
<td>File containing the x509 Certificate for HTTPS.  (default `/etc/istio/certs/cert-chain.pem`)</td>
</tr>
<tr>
<td><code>--tlsKeyFile &lt;string&gt;</code></td>
<td></td>
<td>File containing the x509 private key matching --tlsCertFile.  (default `/etc/istio/certs/key.pem`)</td>
</tr>
<tr>
<td><code>--webhookConfigName &lt;string&gt;</code></td>
<td></td>
<td>Name of the mutatingwebhookconfiguration resource in Kubernetes.  (default `istio-sidecar-injector`)</td>
</tr>
<tr>
<td><code>--webhookName &lt;string&gt;</code></td>
<td></td>
<td>Name of the webhook entry in the webhook config.  (default `sidecar-injector.istio.io`)</td>
</tr>
</tbody>
</table>
<h2 id="envvars">Environment variables</h2>
These environment variables affect the behavior of the <code>sidecar-injector</code> command.
<table class="envvars">
<thead>
<tr>
<th>Variable Name</th>
<th>Type</th>
<th>Default Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ISTIO_GPRC_MAXSTREAMS</code></td>
<td>Integer</td>
<td><code>100000</code></td>
<td></td>
</tr>
<tr>
<td><code>PILOT_CERT_DIR</code></td>
<td>String</td>
<td><code></code></td>
<td></td>
</tr>
<tr>
<td><code>PILOT_DEBOUNCE_AFTER</code></td>
<td>Time Duration</td>
<td><code>100ms</code></td>
<td></td>
</tr>
<tr>
<td><code>PILOT_DEBOUNCE_MAX</code></td>
<td>Time Duration</td>
<td><code>10s</code></td>
<td></td>
</tr>
<tr>
<td><code>PILOT_DEBUG_ADSZ_CONFIG</code></td>
<td>Boolean</td>
<td><code>false</code></td>
<td></td>
</tr>
<tr>
<td><code>PILOT_DISABLE_EDS_ISOLATION</code></td>
<td>String</td>
<td><code></code></td>
<td></td>
</tr>
<tr>
<td><code>PILOT_DISABLE_XDS_MARSHALING_TO_ANY</code></td>
<td>String</td>
<td><code></code></td>
<td></td>
</tr>
<tr>
<td><code>PILOT_ENABLE_FALLTHROUGH_ROUTE</code></td>
<td>Boolean</td>
<td><code>true</code></td>
<td>EnableFallthroughRoute provides an option to add a final wildcard match for routes. When ALLOW_ANY traffic policy is used, a Passthrough cluster is used. When REGISTRY_ONLY traffic policy is used, a 502 error is returned.</td>
</tr>
<tr>
<td><code>PILOT_ENABLE_LOCALITY_LOAD_BALANCING</code></td>
<td>String</td>
<td><code></code></td>
<td></td>
</tr>
<tr>
<td><code>PILOT_ENABLE_MYSQL_FILTER</code></td>
<td>Boolean</td>
<td><code>false</code></td>
<td>EnableMysqlFilter enables injection of `envoy.filters.network.mysql_proxy` in the filter chain.</td>
</tr>
<tr>
<td><code>PILOT_ENABLE_REDIS_FILTER</code></td>
<td>Boolean</td>
<td><code>false</code></td>
<td>EnableRedisFilter enables injection of `envoy.filters.network.redis_proxy` in the filter chain.</td>
</tr>
<tr>
<td><code>PILOT_ENABLE_WAIT_CACHE_SYNC</code></td>
<td>String</td>
<td><code></code></td>
<td></td>
</tr>
<tr>
<td><code>PILOT_HTTP10</code></td>
<td>Boolean</td>
<td><code>false</code></td>
<td></td>
</tr>
<tr>
<td><code>PILOT_INITIAL_FETCH_TIMEOUT</code></td>
<td>Time Duration</td>
<td><code>0s</code></td>
<td>Specifies the initial_fetch_timeout for config. If this time is reached without a response to the config requested by Envoy, the Envoy will move on with the init phase. This prevents envoy from getting stuck waiting on config during startup.</td>
</tr>
<tr>
<td><code>PILOT_PUSH_BURST</code></td>
<td>Integer</td>
<td><code>100</code></td>
<td></td>
</tr>
<tr>
<td><code>PILOT_PUSH_THROTTLE</code></td>
<td>Integer</td>
<td><code>10</code></td>
<td></td>
</tr>
<tr>
<td><code>PILOT_TRACE_SAMPLING</code></td>
<td>Floating-Point</td>
<td><code>100</code></td>
<td></td>
</tr>
<tr>
<td><code>TERMINATION_DRAIN_DURATION_SECONDS</code></td>
<td>String</td>
<td><code></code></td>
<td></td>
</tr>
<tr>
<td><code>V2_REFRESH</code></td>
<td>Time Duration</td>
<td><code>0s</code></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="annotations">Annotations</h2>
These resource annotations are used by the <code>sidecar-injector</code> command.
<table class="annotations">
<thead>
<tr>
<th>Annotation Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>policy.istio.io/check</code></td>
<td>Determines the policy for behavior when unable to connect to Mixer. If not set, FAIL_CLOSE is set, rejecting requests.</td>
</tr>
<tr>
<td><code>policy.istio.io/checkBaseRetryWaitTime</code></td>
<td>Base time to wait between retries, will be adjusted by backoff and jitter. In duration format. If not set, this will be 80ms.</td>
</tr>
<tr>
<td><code>policy.istio.io/checkMaxRetryWaitTime</code></td>
<td>Maximum time to wait between retries to Mixer. In duration format. If not set, this will be 1000ms.</td>
</tr>
<tr>
<td><code>policy.istio.io/checkRetries</code></td>
<td>The maximum number of retries on transport errors to Mixer. If not set, this will be 0, indicating no retries.</td>
</tr>
<tr>
<td><code>readiness.status.sidecar.istio.io/applicationPorts</code></td>
<td></td>
</tr>
<tr>
<td><code>readiness.status.sidecar.istio.io/failureThreshold</code></td>
<td></td>
</tr>
<tr>
<td><code>readiness.status.sidecar.istio.io/initialDelaySeconds</code></td>
<td></td>
</tr>
<tr>
<td><code>readiness.status.sidecar.istio.io/periodSeconds</code></td>
<td></td>
</tr>
<tr>
<td><code>sidecar.istio.io/inject</code></td>
<td></td>
</tr>
<tr>
<td><code>sidecar.istio.io/interceptionMode</code></td>
<td></td>
</tr>
<tr>
<td><code>sidecar.istio.io/proxyImage</code></td>
<td></td>
</tr>
<tr>
<td><code>sidecar.istio.io/rewriteAppHTTPProbers</code></td>
<td>Rewrite HTTP readiness and liveness probes to be redirected to istio-proxy sidecar</td>
</tr>
<tr>
<td><code>sidecar.istio.io/status</code></td>
<td></td>
</tr>
<tr>
<td><code>status.sidecar.istio.io/port</code></td>
<td></td>
</tr>
<tr>
<td><code>traffic.sidecar.istio.io/excludeInboundPorts</code></td>
<td></td>
</tr>
<tr>
<td><code>traffic.sidecar.istio.io/excludeOutboundIPRanges</code></td>
<td></td>
</tr>
<tr>
<td><code>traffic.sidecar.istio.io/excludeOutboundPorts</code></td>
<td></td>
</tr>
<tr>
<td><code>traffic.sidecar.istio.io/includeInboundPorts</code></td>
<td></td>
</tr>
<tr>
<td><code>traffic.sidecar.istio.io/includeOutboundIPRanges</code></td>
<td></td>
</tr>
<tr>
<td><code>traffic.sidecar.istio.io/kubevirtInterfaces</code></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="metrics">Exported metrics</h2>
<table class="metrics">
<thead>
<tr><th>Metric Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
</tbody>
</table>
